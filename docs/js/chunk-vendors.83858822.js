(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"01f9":function(t,e,r){"use strict";var n=r("2d00"),i=r("5ca1"),o=r("2aba"),a=r("32e9"),s=r("84f2"),u=r("41a0"),l=r("7f20"),c=r("38fd"),p=r("2b4c")("iterator"),h=!([].keys&&"next"in[].keys()),f="@@iterator",d="keys",m="values",y=function(){return this};t.exports=function(t,e,r,v,g,_,x){u(r,e,v);var b,w,S,E=function(t){if(!h&&t in I)return I[t];switch(t){case d:return function(){return new r(this,t)};case m:return function(){return new r(this,t)}}return function(){return new r(this,t)}},T=e+" Iterator",A=g==m,k=!1,I=t.prototype,C=I[p]||I[f]||g&&I[g],P=C||E(g),M=g?A?E("entries"):P:void 0,z="Array"==e&&I.entries||C;if(z&&(S=c(z.call(new t)),S!==Object.prototype&&S.next&&(l(S,T,!0),n||"function"==typeof S[p]||a(S,p,y))),A&&C&&C.name!==m&&(k=!0,P=function(){return C.call(this)}),n&&!x||!h&&!k&&I[p]||a(I,p,P),s[e]=P,s[T]=y,g)if(b={values:A?P:E(m),keys:_?P:E(d),entries:M},x)for(w in b)w in I||o(I,w,b[w]);else i(i.P+i.F*(h||k),e,b);return b}},"02f4":function(t,e,r){var n=r("4588"),i=r("be13");t.exports=function(t){return function(e,r){var o,a,s=String(i(e)),u=n(r),l=s.length;return u<0||u>=l?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},"0390":function(t,e,r){"use strict";var n=r("02f4")(!0);t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},"07e3":function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},"097d":function(t,e,r){"use strict";var n=r("5ca1"),i=r("8378"),o=r("7726"),a=r("ebd6"),s=r("bcaa");n(n.P+n.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),r="function"==typeof t;return this.then(r?function(r){return s(e,t()).then(function(){return r})}:t,r?function(r){return s(e,t()).then(function(){throw r})}:t)}})},"0a49":function(t,e,r){var n=r("9b43"),i=r("626a"),o=r("4bf8"),a=r("9def"),s=r("cd1c");t.exports=function(t,e){var r=1==t,u=2==t,l=3==t,c=4==t,p=6==t,h=5==t||p,f=e||s;return function(e,s,d){for(var m,y,v=o(e),g=i(v),_=n(s,d,3),x=a(g.length),b=0,w=r?f(e,x):u?f(e,0):void 0;x>b;b++)if((h||b in g)&&(m=g[b],y=_(m,b,v),t))if(r)w[b]=y;else if(y)switch(t){case 3:return!0;case 5:return m;case 6:return b;case 2:w.push(m)}else if(c)return!1;return p?-1:l||c?c:w}}},"0bfb":function(t,e,r){"use strict";var n=r("cb7c");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0d58":function(t,e,r){var n=r("ce10"),i=r("e11e");t.exports=Object.keys||function(t){return n(t,i)}},"0fc9":function(t,e,r){var n=r("3a38"),i=Math.max,o=Math.min;t.exports=function(t,e){return t=n(t),t<0?i(t+e,0):o(t,e)}},1149:function(t,e,r){var n=r("a5e0");function i(t){return t}function o(t,e){e=e||{};const r=e.delimiter||".",o=e.maxDepth,a=e.transformKey||i,s={};function u(t,i,l){l=l||1,Object.keys(t).forEach(function(c){const p=t[c],h=e.safe&&Array.isArray(p),f=Object.prototype.toString.call(p),d=n(p),m="[object Object]"===f||"[object Array]"===f,y=i?i+r+a(c):a(c);if(!h&&!d&&m&&Object.keys(p).length&&(!e.maxDepth||l<o))return u(p,y,l+1);s[y]=p})}return u(t),s}function a(t,e){e=e||{};const r=e.delimiter||".",s=e.overwrite||!1,u=e.transformKey||i,l={},c=n(t);if(c||"[object Object]"!==Object.prototype.toString.call(t))return t;function p(t){const r=Number(t);return isNaN(r)||-1!==t.indexOf(".")||e.object?t:r}function h(t,e,n){return Object.keys(n).reduce(function(e,i){return e[t+r+i]=n[i],e},e)}function f(t){const e=Object.prototype.toString.call(t),r="[object Array]"===e,n="[object Object]"===e;return!t||(r?!t.length:n?!Object.keys(t).length:void 0)}return t=Object.keys(t).reduce((r,n)=>{const i=Object.prototype.toString.call(t[n]),a="[object Object]"===i||"[object Array]"===i;return!a||f(t[n])?(r[n]=t[n],r):h(n,r,o(t[n],e))},{}),Object.keys(t).forEach(function(n){const i=n.split(r).map(u);let o=p(i.shift()),c=p(i[0]),h=l;while(void 0!==c){const t=Object.prototype.toString.call(h[o]),r="[object Object]"===t||"[object Array]"===t;if(!s&&!r&&"undefined"!==typeof h[o])return;(s&&!r||!s&&null==h[o])&&(h[o]="number"!==typeof c||e.object?{}:[]),h=h[o],i.length>0&&(o=p(i.shift()),c=p(i[0]))}h[o]=a(t[n],e)}),l}t.exports=o,o.flatten=o,o.unflatten=a},1169:function(t,e,r){var n=r("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},1173:function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},1433:function(t,e,r){"use strict";var n=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,i=/-[a-z\u00E0-\u00F6\u00F8-\u00FE]/g;t.exports=e=function(t){return t.replace(n,function(t){return"-"+t.toLowerCase()})},e.reverse=function(t){return t.replace(i,function(t){return t.slice(1).toUpperCase()})}},1495:function(t,e,r){var n=r("86cc"),i=r("cb7c"),o=r("0d58");t.exports=r("9e1e")?Object.defineProperties:function(t,e){i(t);var r,a=o(e),s=a.length,u=0;while(s>u)n.f(t,r=a[u++],e[r]);return t}},"160b":function(t,e,r){(function(r){"use strict";var n="Compound",i="Identifier",o="MemberExpression",a="Literal",s="ThisExpression",u="CallExpression",l="UnaryExpression",c="BinaryExpression",p="LogicalExpression",h="ConditionalExpression",f="ArrayExpression",d=46,m=44,y=39,v=34,g=40,_=41,x=91,b=93,w=63,S=59,E=58,T=function(t,e){var r=new Error(t+" at character "+e);throw r.index=e,r.description=t,r},A=!0,k={"-":A,"!":A,"~":A,"+":A},I={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},C=function(t){var e,r=0;for(var n in t)(e=n.length)>r&&t.hasOwnProperty(n)&&(r=e);return r},P=C(k),M=C(I),z={true:!0,false:!1,null:null},L="this",D=function(t){return I[t]||0},O=function(t,e,r){var n="||"===t||"&&"===t?p:c;return{type:n,operator:t,left:e,right:r}},B=function(t){return t>=48&&t<=57},R=function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=128&&!I[String.fromCharCode(t)]},F=function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t>=128&&!I[String.fromCharCode(t)]},U=function(t){var e,r,c=0,p=t.charAt,A=t.charCodeAt,C=function(e){return p.call(t,e)},U=function(e){return A.call(t,e)},j=t.length,N=function(){var t=U(c);while(32===t||9===t||10===t||13===t)t=U(++c)},V=function(){var t,e,r=Z();return N(),U(c)!==w?r:(c++,t=V(),t||T("Expected expression",c),N(),U(c)===E?(c++,e=V(),e||T("Expected expression",c),{type:h,test:r,consequent:t,alternate:e}):void T("Expected :",c))},q=function(){N();var e=t.substr(c,M),r=e.length;while(r>0){if(I.hasOwnProperty(e)&&(!R(U(c))||c+e.length<t.length&&!F(U(c+e.length))))return c+=r,e;e=e.substr(0,--r)}return!1},Z=function(){var t,e,r,n,i,o,a,s;if(o=G(),e=q(),!e)return o;i={value:e,prec:D(e)},a=G(),a||T("Expected expression after "+e,c),n=[o,i,a];while(e=q()){if(r=D(e),0===r)break;i={value:e,prec:r};while(n.length>2&&r<=n[n.length-2].prec)a=n.pop(),e=n.pop().value,o=n.pop(),t=O(e,o,a),n.push(t);t=G(),t||T("Expected expression after "+e,c),n.push(i,t)}s=n.length-1,t=n[s];while(s>1)t=O(n[s-1].value,n[s-2],t),s-=2;return t},G=function(){var e,r,n;if(N(),e=U(c),B(e)||e===d)return X();if(e===y||e===v)return W();if(e===x)return J();r=t.substr(c,P),n=r.length;while(n>0){if(k.hasOwnProperty(r)&&(!R(U(c))||c+r.length<t.length&&!F(U(c+r.length))))return c+=n,{type:l,operator:r,argument:G(),prefix:!0};r=r.substr(0,--n)}return!(!R(e)&&e!==g)&&K()},X=function(){var t,e,r="";while(B(U(c)))r+=C(c++);if(U(c)===d){r+=C(c++);while(B(U(c)))r+=C(c++)}if(t=C(c),"e"===t||"E"===t){r+=C(c++),t=C(c),"+"!==t&&"-"!==t||(r+=C(c++));while(B(U(c)))r+=C(c++);B(U(c-1))||T("Expected exponent ("+r+C(c)+")",c)}return e=U(c),R(e)?T("Variable names cannot start with a number ("+r+C(c)+")",c):e===d&&T("Unexpected period",c),{type:a,value:parseFloat(r),raw:r}},W=function(){var t,e="",r=C(c++),n=!1;while(c<j){if(t=C(c++),t===r){n=!0;break}if("\\"===t)switch(t=C(c++),t){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=t}else e+=t}return n||T('Unclosed quote after "'+e+'"',c),{type:a,value:e,raw:r+e+r}},$=function(){var e,r=U(c),n=c;R(r)?c++:T("Unexpected "+C(c),c);while(c<j){if(r=U(c),!F(r))break;c++}return e=t.slice(n,c),z.hasOwnProperty(e)?{type:a,value:z[e],raw:e}:e===L?{type:s}:{type:i,name:e}},H=function(t){var e,r,i=[],o=!1;while(c<j){if(N(),e=U(c),e===t){o=!0,c++;break}e===m?c++:(r=V(),r&&r.type!==n||T("Expected comma",c),i.push(r))}return o||T("Expected "+String.fromCharCode(t),c),i},K=function(){var t,e;t=U(c),e=t===g?Y():$(),N(),t=U(c);while(t===d||t===x||t===g)c++,t===d?(N(),e={type:o,computed:!1,object:e,property:$()}):t===x?(e={type:o,computed:!0,object:e,property:V()},N(),t=U(c),t!==b&&T("Unclosed [",c),c++):t===g&&(e={type:u,arguments:H(_),callee:e}),N(),t=U(c);return e},Y=function(){c++;var t=V();if(N(),U(c)===_)return c++,t;T("Unclosed (",c)},J=function(){return c++,{type:f,elements:H(b)}},Q=[];while(c<j)e=U(c),e===S||e===m?c++:(r=V())?Q.push(r):c<j&&T('Unexpected "'+C(c)+'"',c);return 1===Q.length?Q[0]:{type:n,body:Q}};U.version="0.3.4",U.toString=function(){return"JavaScript Expression Parser (JSEP) v"+U.version},U.addUnaryOp=function(t){return P=Math.max(t.length,P),k[t]=A,this},U.addBinaryOp=function(t,e){return M=Math.max(t.length,M),I[t]=e,this},U.addLiteral=function(t,e){return z[t]=e,this},U.removeUnaryOp=function(t){return delete k[t],t.length===P&&(P=C(k)),this},U.removeAllUnaryOps=function(){return k={},P=0,this},U.removeBinaryOp=function(t){return delete I[t],t.length===M&&(M=C(I)),this},U.removeAllBinaryOps=function(){return I={},M=0,this},U.removeLiteral=function(t){return delete z[t],this},U.removeAllLiterals=function(){return z={},this},t.exports?e=t.exports=U:e.parse=U})()},1654:function(t,e,r){"use strict";var n=r("71c1")(!0);r("30f1")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},1691:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},1991:function(t,e,r){var n,i,o,a=r("9b43"),s=r("31f4"),u=r("fab2"),l=r("230e"),c=r("7726"),p=c.process,h=c.setImmediate,f=c.clearImmediate,d=c.MessageChannel,m=c.Dispatch,y=0,v={},g="onreadystatechange",_=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},x=function(t){_.call(t.data)};h&&f||(h=function(t){var e=[],r=1;while(arguments.length>r)e.push(arguments[r++]);return v[++y]=function(){s("function"==typeof t?t:Function(t),e)},n(y),y},f=function(t){delete v[t]},"process"==r("2d95")(p)?n=function(t){p.nextTick(a(_,t,1))}:m&&m.now?n=function(t){m.now(a(_,t,1))}:d?(i=new d,o=i.port2,i.port1.onmessage=x,n=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",x,!1)):n=g in l("script")?function(t){u.appendChild(l("script"))[g]=function(){u.removeChild(this),_.call(t)}}:function(t){setTimeout(a(_,t,1),0)}),t.exports={set:h,clear:f}},"1bc3":function(t,e,r){var n=r("f772");t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"1ec9":function(t,e,r){var n=r("f772"),i=r("e53d").document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},"1fa8":function(t,e,r){var n=r("cb7c");t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(a){var o=t["return"];throw void 0!==o&&n(o.call(t)),a}}},"214f":function(t,e,r){"use strict";r("b0c5");var n=r("2aba"),i=r("32e9"),o=r("79e5"),a=r("be13"),s=r("2b4c"),u=r("520a"),l=s("species"),c=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),p=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(t,e,r){var h=s(t),f=!o(function(){var e={};return e[h]=function(){return 7},7!=""[t](e)}),d=f?!o(function(){var e=!1,r=/a/;return r.exec=function(){return e=!0,null},"split"===t&&(r.constructor={},r.constructor[l]=function(){return r}),r[h](""),!e}):void 0;if(!f||!d||"replace"===t&&!c||"split"===t&&!p){var m=/./[h],y=r(a,h,""[t],function(t,e,r,n,i){return e.exec===u?f&&!i?{done:!0,value:m.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),v=y[0],g=y[1];n(String.prototype,t,v),i(RegExp.prototype,h,2==e?function(t,e){return g.call(t,this,e)}:function(t){return g.call(t,this)})}}},"230e":function(t,e,r){var n=r("d3f4"),i=r("7726").document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},"23c6":function(t,e,r){var n=r("2d95"),i=r("2b4c")("toStringTag"),o="Arguments"==n(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(r){}};t.exports=function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=a(e=Object(t),i))?r:o?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},"241e":function(t,e,r){var n=r("25eb");t.exports=function(t){return Object(n(t))}},"24c5":function(t,e,r){"use strict";var n,i,o,a,s=r("b8e3"),u=r("e53d"),l=r("d864"),c=r("40c3"),p=r("63b6"),h=r("f772"),f=r("79aa"),d=r("1173"),m=r("a22a"),y=r("f201"),v=r("4178").set,g=r("aba2")(),_=r("656e"),x=r("4439"),b=r("bc13"),w=r("cd78"),S="Promise",E=u.TypeError,T=u.process,A=T&&T.versions,k=A&&A.v8||"",I=u[S],C="process"==c(T),P=function(){},M=i=_.f,z=!!function(){try{var t=I.resolve(1),e=(t.constructor={})[r("5168")("species")]=function(t){t(P,P)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e&&0!==k.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(n){}}(),L=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},D=function(t,e){if(!t._n){t._n=!0;var r=t._c;g(function(){var n=t._v,i=1==t._s,o=0,a=function(e){var r,o,a,s=i?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(i||(2==t._h&&R(t),t._h=1),!0===s?r=n:(c&&c.enter(),r=s(n),c&&(c.exit(),a=!0)),r===e.promise?l(E("Promise-chain cycle")):(o=L(r))?o.call(r,u,l):u(r)):l(n)}catch(p){c&&!a&&c.exit(),l(p)}};while(r.length>o)a(r[o++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){v.call(u,function(){var e,r,n,i=t._v,o=B(t);if(o&&(e=x(function(){C?T.emit("unhandledRejection",i,t):(r=u.onunhandledrejection)?r({promise:t,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)}),t._h=C||B(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},B=function(t){return 1!==t._h&&0===(t._a||t._c).length},R=function(t){v.call(u,function(){var e;C?T.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},F=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),D(e,!0))},U=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw E("Promise can't be resolved itself");(e=L(t))?g(function(){var n={_w:r,_d:!1};try{e.call(t,l(U,n,1),l(F,n,1))}catch(i){F.call(n,i)}}):(r._v=t,r._s=1,D(r,!1))}catch(n){F.call({_w:r,_d:!1},n)}}};z||(I=function(t){d(this,I,S,"_h"),f(t),n.call(this);try{t(l(U,this,1),l(F,this,1))}catch(e){F.call(this,e)}},n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r("5c95")(I.prototype,{then:function(t,e){var r=M(y(this,I));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=C?T.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&D(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=l(U,t,1),this.reject=l(F,t,1)},_.f=M=function(t){return t===I||t===a?new o(t):i(t)}),p(p.G+p.W+p.F*!z,{Promise:I}),r("45f2")(I,S),r("4c95")(S),a=r("584a")[S],p(p.S+p.F*!z,S,{reject:function(t){var e=M(this),r=e.reject;return r(t),e.promise}}),p(p.S+p.F*(s||!z),S,{resolve:function(t){return w(s&&this===a?I:this,t)}}),p(p.S+p.F*!(z&&r("4ee1")(function(t){I.all(t)["catch"](P)})),S,{all:function(t){var e=this,r=M(e),n=r.resolve,i=r.reject,o=x(function(){var r=[],o=0,a=1;m(t,!1,function(t){var s=o++,u=!1;r.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,r[s]=t,--a||n(r))},i)}),--a||n(r)});return o.e&&i(o.v),r.promise},race:function(t){var e=this,r=M(e),n=r.reject,i=x(function(){m(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},"25eb":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},"27ee":function(t,e,r){var n=r("23c6"),i=r("2b4c")("iterator"),o=r("84f2");t.exports=r("8378").getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[n(t)]}},2877:function(t,e,r){"use strict";function n(t,e,r,n,i,o,a,s){var u,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(l.functional){l._injectStyles=u;var c=l.render;l.render=function(t,e){return u.call(e),c(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,u):[u]}return{exports:t,options:l}}r.d(e,"a",function(){return n})},"294c":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"2a47":function(t,e,r){var n=r("63b6"),i=r("e53d").isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},"2aba":function(t,e,r){var n=r("7726"),i=r("32e9"),o=r("69a8"),a=r("ca5a")("src"),s="toString",u=Function[s],l=(""+u).split(s);r("8378").inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,r,s){var u="function"==typeof r;u&&(o(r,"name")||i(r,"name",e)),t[e]!==r&&(u&&(o(r,a)||i(r,a,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=r:s?t[e]?t[e]=r:i(t,e,r):(delete t[e],i(t,e,r)))})(Function.prototype,s,function(){return"function"==typeof this&&this[a]||u.call(this)})},"2aeb":function(t,e,r){var n=r("cb7c"),i=r("1495"),o=r("e11e"),a=r("613b")("IE_PROTO"),s=function(){},u="prototype",l=function(){var t,e=r("230e")("iframe"),n=o.length,i="<",a=">";e.style.display="none",r("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+a+"document.F=Object"+i+"/script"+a),t.close(),l=t.F;while(n--)delete l[u][o[n]];return l()};t.exports=Object.create||function(t,e){var r;return null!==t?(s[u]=n(t),r=new s,s[u]=null,r[a]=t):r=l(),void 0===e?r:i(r,e)}},"2b0e":function(t,e,r){"use strict";(function(t){
/*!
 * Vue.js v2.5.22
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var r=Object.freeze({});function n(t){return void 0===t||null===t}function i(t){return void 0!==t&&null!==t}function o(t){return!0===t}function a(t){return!1===t}function s(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function u(t){return null!==t&&"object"===typeof t}var l=Object.prototype.toString;function c(t){return"[object Object]"===l.call(t)}function p(t){return"[object RegExp]"===l.call(t)}function h(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function f(t){return null==t?"":"object"===typeof t?JSON.stringify(t,null,2):String(t)}function d(t){var e=parseFloat(t);return isNaN(e)?t:e}function m(t,e){for(var r=Object.create(null),n=t.split(","),i=0;i<n.length;i++)r[n[i]]=!0;return e?function(t){return r[t.toLowerCase()]}:function(t){return r[t]}}m("slot,component",!0);var y=m("key,ref,slot,slot-scope,is");function v(t,e){if(t.length){var r=t.indexOf(e);if(r>-1)return t.splice(r,1)}}var g=Object.prototype.hasOwnProperty;function _(t,e){return g.call(t,e)}function x(t){var e=Object.create(null);return function(r){var n=e[r];return n||(e[r]=t(r))}}var b=/-(\w)/g,w=x(function(t){return t.replace(b,function(t,e){return e?e.toUpperCase():""})}),S=x(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),E=/\B([A-Z])/g,T=x(function(t){return t.replace(E,"-$1").toLowerCase()});function A(t,e){function r(r){var n=arguments.length;return n?n>1?t.apply(e,arguments):t.call(e,r):t.call(e)}return r._length=t.length,r}function k(t,e){return t.bind(e)}var I=Function.prototype.bind?k:A;function C(t,e){e=e||0;var r=t.length-e,n=new Array(r);while(r--)n[r]=t[r+e];return n}function P(t,e){for(var r in e)t[r]=e[r];return t}function M(t){for(var e={},r=0;r<t.length;r++)t[r]&&P(e,t[r]);return e}function z(t,e,r){}var L=function(t,e,r){return!1},D=function(t){return t};function O(t,e){if(t===e)return!0;var r=u(t),n=u(e);if(!r||!n)return!r&&!n&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every(function(t,r){return O(t,e[r])});if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(i||o)return!1;var a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every(function(r){return O(t[r],e[r])})}catch(l){return!1}}function B(t,e){for(var r=0;r<t.length;r++)if(O(t[r],e))return r;return-1}function R(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var F="data-server-rendered",U=["component","directive","filter"],j=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],N={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:L,isReservedAttr:L,isUnknownElement:L,getTagNamespace:z,parsePlatformTagName:D,mustUseProp:L,async:!0,_lifecycleHooks:j};function V(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function q(t,e,r,n){Object.defineProperty(t,e,{value:r,enumerable:!!n,writable:!0,configurable:!0})}var Z=/[^\w.$]/;function G(t){if(!Z.test(t)){var e=t.split(".");return function(t){for(var r=0;r<e.length;r++){if(!t)return;t=t[e[r]]}return t}}}var X,W="__proto__"in{},$="undefined"!==typeof window,H="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,K=H&&WXEnvironment.platform.toLowerCase(),Y=$&&window.navigator.userAgent.toLowerCase(),J=Y&&/msie|trident/.test(Y),Q=Y&&Y.indexOf("msie 9.0")>0,tt=Y&&Y.indexOf("edge/")>0,et=(Y&&Y.indexOf("android"),Y&&/iphone|ipad|ipod|ios/.test(Y)||"ios"===K),rt=(Y&&/chrome\/\d+/.test(Y),{}.watch),nt=!1;if($)try{var it={};Object.defineProperty(it,"passive",{get:function(){nt=!0}}),window.addEventListener("test-passive",null,it)}catch(sa){}var ot=function(){return void 0===X&&(X=!$&&!H&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),X},at=$&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function st(t){return"function"===typeof t&&/native code/.test(t.toString())}var ut,lt="undefined"!==typeof Symbol&&st(Symbol)&&"undefined"!==typeof Reflect&&st(Reflect.ownKeys);ut="undefined"!==typeof Set&&st(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ct=z,pt=0,ht=function(){this.id=pt++,this.subs=[]};ht.prototype.addSub=function(t){this.subs.push(t)},ht.prototype.removeSub=function(t){v(this.subs,t)},ht.prototype.depend=function(){ht.target&&ht.target.addDep(this)},ht.prototype.notify=function(){var t=this.subs.slice();for(var e=0,r=t.length;e<r;e++)t[e].update()},ht.target=null;var ft=[];function dt(t){ft.push(t),ht.target=t}function mt(){ft.pop(),ht.target=ft[ft.length-1]}var yt=function(t,e,r,n,i,o,a,s){this.tag=t,this.data=e,this.children=r,this.text=n,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},vt={child:{configurable:!0}};vt.child.get=function(){return this.componentInstance},Object.defineProperties(yt.prototype,vt);var gt=function(t){void 0===t&&(t="");var e=new yt;return e.text=t,e.isComment=!0,e};function _t(t){return new yt(void 0,void 0,void 0,String(t))}function xt(t){var e=new yt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var bt=Array.prototype,wt=Object.create(bt),St=["push","pop","shift","unshift","splice","sort","reverse"];St.forEach(function(t){var e=bt[t];q(wt,t,function(){var r=[],n=arguments.length;while(n--)r[n]=arguments[n];var i,o=e.apply(this,r),a=this.__ob__;switch(t){case"push":case"unshift":i=r;break;case"splice":i=r.slice(2);break}return i&&a.observeArray(i),a.dep.notify(),o})});var Et=Object.getOwnPropertyNames(wt),Tt=!0;function At(t){Tt=t}var kt=function(t){this.value=t,this.dep=new ht,this.vmCount=0,q(t,"__ob__",this),Array.isArray(t)?(W?It(t,wt):Ct(t,wt,Et),this.observeArray(t)):this.walk(t)};function It(t,e){t.__proto__=e}function Ct(t,e,r){for(var n=0,i=r.length;n<i;n++){var o=r[n];q(t,o,e[o])}}function Pt(t,e){var r;if(u(t)&&!(t instanceof yt))return _(t,"__ob__")&&t.__ob__ instanceof kt?r=t.__ob__:Tt&&!ot()&&(Array.isArray(t)||c(t))&&Object.isExtensible(t)&&!t._isVue&&(r=new kt(t)),e&&r&&r.vmCount++,r}function Mt(t,e,r,n,i){var o=new ht,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set;s&&!u||2!==arguments.length||(r=t[e]);var l=!i&&Pt(r);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):r;return ht.target&&(o.depend(),l&&(l.dep.depend(),Array.isArray(e)&&Dt(e))),e},set:function(e){var n=s?s.call(t):r;e===n||e!==e&&n!==n||s&&!u||(u?u.call(t,e):r=e,l=!i&&Pt(e),o.notify())}})}}function zt(t,e,r){if(Array.isArray(t)&&h(e))return t.length=Math.max(t.length,e),t.splice(e,1,r),r;if(e in t&&!(e in Object.prototype))return t[e]=r,r;var n=t.__ob__;return t._isVue||n&&n.vmCount?r:n?(Mt(n.value,e,r),n.dep.notify(),r):(t[e]=r,r)}function Lt(t,e){if(Array.isArray(t)&&h(e))t.splice(e,1);else{var r=t.__ob__;t._isVue||r&&r.vmCount||_(t,e)&&(delete t[e],r&&r.dep.notify())}}function Dt(t){for(var e=void 0,r=0,n=t.length;r<n;r++)e=t[r],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Dt(e)}kt.prototype.walk=function(t){for(var e=Object.keys(t),r=0;r<e.length;r++)Mt(t,e[r])},kt.prototype.observeArray=function(t){for(var e=0,r=t.length;e<r;e++)Pt(t[e])};var Ot=N.optionMergeStrategies;function Bt(t,e){if(!e)return t;for(var r,n,i,o=Object.keys(e),a=0;a<o.length;a++)r=o[a],n=t[r],i=e[r],_(t,r)?n!==i&&c(n)&&c(i)&&Bt(n,i):zt(t,r,i);return t}function Rt(t,e,r){return r?function(){var n="function"===typeof e?e.call(r,r):e,i="function"===typeof t?t.call(r,r):t;return n?Bt(n,i):i}:e?t?function(){return Bt("function"===typeof e?e.call(this,this):e,"function"===typeof t?t.call(this,this):t)}:e:t}function Ft(t,e){var r=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return r?Ut(r):r}function Ut(t){for(var e=[],r=0;r<t.length;r++)-1===e.indexOf(t[r])&&e.push(t[r]);return e}function jt(t,e,r,n){var i=Object.create(t||null);return e?P(i,e):i}Ot.data=function(t,e,r){return r?Rt(t,e,r):e&&"function"!==typeof e?t:Rt(t,e)},j.forEach(function(t){Ot[t]=Ft}),U.forEach(function(t){Ot[t+"s"]=jt}),Ot.watch=function(t,e,r,n){if(t===rt&&(t=void 0),e===rt&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};for(var o in P(i,t),e){var a=i[o],s=e[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},Ot.props=Ot.methods=Ot.inject=Ot.computed=function(t,e,r,n){if(!t)return e;var i=Object.create(null);return P(i,t),e&&P(i,e),i},Ot.provide=Rt;var Nt=function(t,e){return void 0===e?t:e};function Vt(t,e){var r=t.props;if(r){var n,i,o,a={};if(Array.isArray(r)){n=r.length;while(n--)i=r[n],"string"===typeof i&&(o=w(i),a[o]={type:null})}else if(c(r))for(var s in r)i=r[s],o=w(s),a[o]=c(i)?i:{type:i};else 0;t.props=a}}function qt(t,e){var r=t.inject;if(r){var n=t.inject={};if(Array.isArray(r))for(var i=0;i<r.length;i++)n[r[i]]={from:r[i]};else if(c(r))for(var o in r){var a=r[o];n[o]=c(a)?P({from:o},a):{from:a}}else 0}}function Zt(t){var e=t.directives;if(e)for(var r in e){var n=e[r];"function"===typeof n&&(e[r]={bind:n,update:n})}}function Gt(t,e,r){if("function"===typeof e&&(e=e.options),Vt(e,r),qt(e,r),Zt(e),!e._base&&(e.extends&&(t=Gt(t,e.extends,r)),e.mixins))for(var n=0,i=e.mixins.length;n<i;n++)t=Gt(t,e.mixins[n],r);var o,a={};for(o in t)s(o);for(o in e)_(t,o)||s(o);function s(n){var i=Ot[n]||Nt;a[n]=i(t[n],e[n],r,n)}return a}function Xt(t,e,r,n){if("string"===typeof r){var i=t[e];if(_(i,r))return i[r];var o=w(r);if(_(i,o))return i[o];var a=S(o);if(_(i,a))return i[a];var s=i[r]||i[o]||i[a];return s}}function Wt(t,e,r,n){var i=e[t],o=!_(r,t),a=r[t],s=Yt(Boolean,i.type);if(s>-1)if(o&&!_(i,"default"))a=!1;else if(""===a||a===T(t)){var u=Yt(String,i.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=$t(n,i,t);var l=Tt;At(!0),Pt(a),At(l)}return a}function $t(t,e,r){if(_(e,"default")){var n=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[r]&&void 0!==t._props[r]?t._props[r]:"function"===typeof n&&"Function"!==Ht(e.type)?n.call(t):n}}function Ht(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Kt(t,e){return Ht(t)===Ht(e)}function Yt(t,e){if(!Array.isArray(e))return Kt(e,t)?0:-1;for(var r=0,n=e.length;r<n;r++)if(Kt(e[r],t))return r;return-1}function Jt(t,e,r){if(e){var n=e;while(n=n.$parent){var i=n.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var a=!1===i[o].call(n,t,e,r);if(a)return}catch(sa){Qt(sa,n,"errorCaptured hook")}}}Qt(t,e,r)}function Qt(t,e,r){if(N.errorHandler)try{return N.errorHandler.call(null,t,e,r)}catch(sa){te(sa,null,"config.errorHandler")}te(t,e,r)}function te(t,e,r){if(!$&&!H||"undefined"===typeof console)throw t;console.error(t)}var ee,re,ne=[],ie=!1;function oe(){ie=!1;var t=ne.slice(0);ne.length=0;for(var e=0;e<t.length;e++)t[e]()}var ae=!1;if("undefined"!==typeof setImmediate&&st(setImmediate))re=function(){setImmediate(oe)};else if("undefined"===typeof MessageChannel||!st(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())re=function(){setTimeout(oe,0)};else{var se=new MessageChannel,ue=se.port2;se.port1.onmessage=oe,re=function(){ue.postMessage(1)}}if("undefined"!==typeof Promise&&st(Promise)){var le=Promise.resolve();ee=function(){le.then(oe),et&&setTimeout(z)}}else ee=re;function ce(t){return t._withTask||(t._withTask=function(){ae=!0;try{return t.apply(null,arguments)}finally{ae=!1}})}function pe(t,e){var r;if(ne.push(function(){if(t)try{t.call(e)}catch(sa){Jt(sa,e,"nextTick")}else r&&r(e)}),ie||(ie=!0,ae?re():ee()),!t&&"undefined"!==typeof Promise)return new Promise(function(t){r=t})}var he=new ut;function fe(t){de(t,he),he.clear()}function de(t,e){var r,n,i=Array.isArray(t);if(!(!i&&!u(t)||Object.isFrozen(t)||t instanceof yt)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(i){r=t.length;while(r--)de(t[r],e)}else{n=Object.keys(t),r=n.length;while(r--)de(t[n[r]],e)}}}var me,ye=x(function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var r="~"===t.charAt(0);t=r?t.slice(1):t;var n="!"===t.charAt(0);return t=n?t.slice(1):t,{name:t,once:r,capture:n,passive:e}});function ve(t){function e(){var t=arguments,r=e.fns;if(!Array.isArray(r))return r.apply(null,arguments);for(var n=r.slice(),i=0;i<n.length;i++)n[i].apply(null,t)}return e.fns=t,e}function ge(t,e,r,i,a,s){var u,l,c,p;for(u in t)l=t[u],c=e[u],p=ye(u),n(l)||(n(c)?(n(l.fns)&&(l=t[u]=ve(l)),o(p.once)&&(l=t[u]=a(p.name,l,p.capture)),r(p.name,l,p.capture,p.passive,p.params)):l!==c&&(c.fns=l,t[u]=c));for(u in e)n(t[u])&&(p=ye(u),i(p.name,e[u],p.capture))}function _e(t,e,r){var a;t instanceof yt&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function u(){r.apply(this,arguments),v(a.fns,u)}n(s)?a=ve([u]):i(s.fns)&&o(s.merged)?(a=s,a.fns.push(u)):a=ve([s,u]),a.merged=!0,t[e]=a}function xe(t,e,r){var o=e.options.props;if(!n(o)){var a={},s=t.attrs,u=t.props;if(i(s)||i(u))for(var l in o){var c=T(l);be(a,u,l,c,!0)||be(a,s,l,c,!1)}return a}}function be(t,e,r,n,o){if(i(e)){if(_(e,r))return t[r]=e[r],o||delete e[r],!0;if(_(e,n))return t[r]=e[n],o||delete e[n],!0}return!1}function we(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function Se(t){return s(t)?[_t(t)]:Array.isArray(t)?Te(t):void 0}function Ee(t){return i(t)&&i(t.text)&&a(t.isComment)}function Te(t,e){var r,a,u,l,c=[];for(r=0;r<t.length;r++)a=t[r],n(a)||"boolean"===typeof a||(u=c.length-1,l=c[u],Array.isArray(a)?a.length>0&&(a=Te(a,(e||"")+"_"+r),Ee(a[0])&&Ee(l)&&(c[u]=_t(l.text+a[0].text),a.shift()),c.push.apply(c,a)):s(a)?Ee(l)?c[u]=_t(l.text+a):""!==a&&c.push(_t(a)):Ee(a)&&Ee(l)?c[u]=_t(l.text+a.text):(o(t._isVList)&&i(a.tag)&&n(a.key)&&i(e)&&(a.key="__vlist"+e+"_"+r+"__"),c.push(a)));return c}function Ae(t,e){return(t.__esModule||lt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),u(t)?e.extend(t):t}function ke(t,e,r,n,i){var o=gt();return o.asyncFactory=t,o.asyncMeta={data:e,context:r,children:n,tag:i},o}function Ie(t,e,r){if(o(t.error)&&i(t.errorComp))return t.errorComp;if(i(t.resolved))return t.resolved;if(o(t.loading)&&i(t.loadingComp))return t.loadingComp;if(!i(t.contexts)){var a=t.contexts=[r],s=!0,l=function(t){for(var e=0,r=a.length;e<r;e++)a[e].$forceUpdate();t&&(a.length=0)},c=R(function(r){t.resolved=Ae(r,e),s?a.length=0:l(!0)}),p=R(function(e){i(t.errorComp)&&(t.error=!0,l(!0))}),h=t(c,p);return u(h)&&("function"===typeof h.then?n(t.resolved)&&h.then(c,p):i(h.component)&&"function"===typeof h.component.then&&(h.component.then(c,p),i(h.error)&&(t.errorComp=Ae(h.error,e)),i(h.loading)&&(t.loadingComp=Ae(h.loading,e),0===h.delay?t.loading=!0:setTimeout(function(){n(t.resolved)&&n(t.error)&&(t.loading=!0,l(!1))},h.delay||200)),i(h.timeout)&&setTimeout(function(){n(t.resolved)&&p(null)},h.timeout))),s=!1,t.loading?t.loadingComp:t.resolved}t.contexts.push(r)}function Ce(t){return t.isComment&&t.asyncFactory}function Pe(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var r=t[e];if(i(r)&&(i(r.componentOptions)||Ce(r)))return r}}function Me(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Oe(t,e)}function ze(t,e){me.$on(t,e)}function Le(t,e){me.$off(t,e)}function De(t,e){var r=me;return function n(){var i=e.apply(null,arguments);null!==i&&r.$off(t,n)}}function Oe(t,e,r){me=t,ge(e,r||{},ze,Le,De,t),me=void 0}function Be(t){var e=/^hook:/;t.prototype.$on=function(t,r){var n=this;if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)n.$on(t[i],r);else(n._events[t]||(n._events[t]=[])).push(r),e.test(t)&&(n._hasHookEvent=!0);return n},t.prototype.$once=function(t,e){var r=this;function n(){r.$off(t,n),e.apply(r,arguments)}return n.fn=e,r.$on(t,n),r},t.prototype.$off=function(t,e){var r=this;if(!arguments.length)return r._events=Object.create(null),r;if(Array.isArray(t)){for(var n=0,i=t.length;n<i;n++)r.$off(t[n],e);return r}var o,a=r._events[t];if(!a)return r;if(!e)return r._events[t]=null,r;var s=a.length;while(s--)if(o=a[s],o===e||o.fn===e){a.splice(s,1);break}return r},t.prototype.$emit=function(t){var e=this,r=e._events[t];if(r){r=r.length>1?C(r):r;for(var n=C(arguments,1),i=0,o=r.length;i<o;i++)try{r[i].apply(e,n)}catch(sa){Jt(sa,e,'event handler for "'+t+'"')}}return e}}function Re(t,e){var r={};if(!t)return r;for(var n=0,i=t.length;n<i;n++){var o=t[n],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(r.default||(r.default=[])).push(o);else{var s=a.slot,u=r[s]||(r[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var l in r)r[l].every(Fe)&&delete r[l];return r}function Fe(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Ue(t,e){e=e||{};for(var r=0;r<t.length;r++)Array.isArray(t[r])?Ue(t[r],e):e[t[r].key]=t[r].fn;return e}var je=null;function Ne(t){var e=je;return je=t,function(){je=e}}function Ve(t){var e=t.$options,r=e.parent;if(r&&!e.abstract){while(r.$options.abstract&&r.$parent)r=r.$parent;r.$children.push(t)}t.$parent=r,t.$root=r?r.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function qe(t){t.prototype._update=function(t,e){var r=this,n=r.$el,i=r._vnode,o=Ne(r);r._vnode=t,r.$el=i?r.__patch__(i,t):r.__patch__(r.$el,t,e,!1),o(),n&&(n.__vue__=null),r.$el&&(r.$el.__vue__=r),r.$vnode&&r.$parent&&r.$vnode===r.$parent._vnode&&(r.$parent.$el=r.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){He(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||v(e.$children,t),t._watcher&&t._watcher.teardown();var r=t._watchers.length;while(r--)t._watchers[r].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),He(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Ze(t,e,r){var n;return t.$el=e,t.$options.render||(t.$options.render=gt),He(t,"beforeMount"),n=function(){t._update(t._render(),r)},new lr(t,n,z,{before:function(){t._isMounted&&!t._isDestroyed&&He(t,"beforeUpdate")}},!0),r=!1,null==t.$vnode&&(t._isMounted=!0,He(t,"mounted")),t}function Ge(t,e,n,i,o){var a=!!(o||t.$options._renderChildren||i.data.scopedSlots||t.$scopedSlots!==r);if(t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=o,t.$attrs=i.data.attrs||r,t.$listeners=n||r,e&&t.$options.props){At(!1);for(var s=t._props,u=t.$options._propKeys||[],l=0;l<u.length;l++){var c=u[l],p=t.$options.props;s[c]=Wt(c,p,e,t)}At(!0),t.$options.propsData=e}n=n||r;var h=t.$options._parentListeners;t.$options._parentListeners=n,Oe(t,n,h),a&&(t.$slots=Re(o,i.context),t.$forceUpdate())}function Xe(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function We(t,e){if(e){if(t._directInactive=!1,Xe(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var r=0;r<t.$children.length;r++)We(t.$children[r]);He(t,"activated")}}function $e(t,e){if((!e||(t._directInactive=!0,!Xe(t)))&&!t._inactive){t._inactive=!0;for(var r=0;r<t.$children.length;r++)$e(t.$children[r]);He(t,"deactivated")}}function He(t,e){dt();var r=t.$options[e];if(r)for(var n=0,i=r.length;n<i;n++)try{r[n].call(t)}catch(sa){Jt(sa,t,e+" hook")}t._hasHookEvent&&t.$emit("hook:"+e),mt()}var Ke=[],Ye=[],Je={},Qe=!1,tr=!1,er=0;function rr(){er=Ke.length=Ye.length=0,Je={},Qe=tr=!1}function nr(){var t,e;for(tr=!0,Ke.sort(function(t,e){return t.id-e.id}),er=0;er<Ke.length;er++)t=Ke[er],t.before&&t.before(),e=t.id,Je[e]=null,t.run();var r=Ye.slice(),n=Ke.slice();rr(),ar(r),ir(n),at&&N.devtools&&at.emit("flush")}function ir(t){var e=t.length;while(e--){var r=t[e],n=r.vm;n._watcher===r&&n._isMounted&&!n._isDestroyed&&He(n,"updated")}}function or(t){t._inactive=!1,Ye.push(t)}function ar(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,We(t[e],!0)}function sr(t){var e=t.id;if(null==Je[e]){if(Je[e]=!0,tr){var r=Ke.length-1;while(r>er&&Ke[r].id>t.id)r--;Ke.splice(r+1,0,t)}else Ke.push(t);Qe||(Qe=!0,pe(nr))}}var ur=0,lr=function(t,e,r,n,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),n?(this.deep=!!n.deep,this.user=!!n.user,this.lazy=!!n.lazy,this.sync=!!n.sync,this.before=n.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=r,this.id=++ur,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ut,this.newDepIds=new ut,this.expression="","function"===typeof e?this.getter=e:(this.getter=G(e),this.getter||(this.getter=z)),this.value=this.lazy?void 0:this.get()};lr.prototype.get=function(){var t;dt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(sa){if(!this.user)throw sa;Jt(sa,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&fe(t),mt(),this.cleanupDeps()}return t},lr.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},lr.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},lr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():sr(this)},lr.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||u(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(sa){Jt(sa,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},lr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},lr.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},lr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||v(this.vm._watchers,this);var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1}};var cr={enumerable:!0,configurable:!0,get:z,set:z};function pr(t,e,r){cr.get=function(){return this[e][r]},cr.set=function(t){this[e][r]=t},Object.defineProperty(t,r,cr)}function hr(t){t._watchers=[];var e=t.$options;e.props&&fr(t,e.props),e.methods&&br(t,e.methods),e.data?dr(t):Pt(t._data={},!0),e.computed&&vr(t,e.computed),e.watch&&e.watch!==rt&&wr(t,e.watch)}function fr(t,e){var r=t.$options.propsData||{},n=t._props={},i=t.$options._propKeys=[],o=!t.$parent;o||At(!1);var a=function(o){i.push(o);var a=Wt(o,e,r,t);Mt(n,o,a),o in t||pr(t,"_props",o)};for(var s in e)a(s);At(!0)}function dr(t){var e=t.$options.data;e=t._data="function"===typeof e?mr(e,t):e||{},c(e)||(e={});var r=Object.keys(e),n=t.$options.props,i=(t.$options.methods,r.length);while(i--){var o=r[i];0,n&&_(n,o)||V(o)||pr(t,"_data",o)}Pt(e,!0)}function mr(t,e){dt();try{return t.call(e,e)}catch(sa){return Jt(sa,e,"data()"),{}}finally{mt()}}var yr={lazy:!0};function vr(t,e){var r=t._computedWatchers=Object.create(null),n=ot();for(var i in e){var o=e[i],a="function"===typeof o?o:o.get;0,n||(r[i]=new lr(t,a||z,z,yr)),i in t||gr(t,i,o)}}function gr(t,e,r){var n=!ot();"function"===typeof r?(cr.get=n?_r(e):xr(r),cr.set=z):(cr.get=r.get?n&&!1!==r.cache?_r(e):xr(r.get):z,cr.set=r.set||z),Object.defineProperty(t,e,cr)}function _r(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),ht.target&&e.depend(),e.value}}function xr(t){return function(){return t.call(this,this)}}function br(t,e){t.$options.props;for(var r in e)t[r]="function"!==typeof e[r]?z:I(e[r],t)}function wr(t,e){for(var r in e){var n=e[r];if(Array.isArray(n))for(var i=0;i<n.length;i++)Sr(t,r,n[i]);else Sr(t,r,n)}}function Sr(t,e,r,n){return c(r)&&(n=r,r=r.handler),"string"===typeof r&&(r=t[r]),t.$watch(e,r,n)}function Er(t){var e={get:function(){return this._data}},r={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",r),t.prototype.$set=zt,t.prototype.$delete=Lt,t.prototype.$watch=function(t,e,r){var n=this;if(c(e))return Sr(n,t,e,r);r=r||{},r.user=!0;var i=new lr(n,t,e,r);if(r.immediate)try{e.call(n,i.value)}catch(o){Jt(o,n,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}function Tr(t){var e=t.$options.provide;e&&(t._provided="function"===typeof e?e.call(t):e)}function Ar(t){var e=kr(t.$options.inject,t);e&&(At(!1),Object.keys(e).forEach(function(r){Mt(t,r,e[r])}),At(!0))}function kr(t,e){if(t){for(var r=Object.create(null),n=lt?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):Object.keys(t),i=0;i<n.length;i++){var o=n[i],a=t[o].from,s=e;while(s){if(s._provided&&_(s._provided,a)){r[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[o]){var u=t[o].default;r[o]="function"===typeof u?u.call(e):u}else 0}return r}}function Ir(t,e){var r,n,o,a,s;if(Array.isArray(t)||"string"===typeof t)for(r=new Array(t.length),n=0,o=t.length;n<o;n++)r[n]=e(t[n],n);else if("number"===typeof t)for(r=new Array(t),n=0;n<t;n++)r[n]=e(n+1,n);else if(u(t))for(a=Object.keys(t),r=new Array(a.length),n=0,o=a.length;n<o;n++)s=a[n],r[n]=e(t[s],s,n);return i(r)||(r=[]),r._isVList=!0,r}function Cr(t,e,r,n){var i,o=this.$scopedSlots[t];o?(r=r||{},n&&(r=P(P({},n),r)),i=o(r)||e):i=this.$slots[t]||e;var a=r&&r.slot;return a?this.$createElement("template",{slot:a},i):i}function Pr(t){return Xt(this.$options,"filters",t,!0)||D}function Mr(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function zr(t,e,r,n,i){var o=N.keyCodes[e]||r;return i&&n&&!N.keyCodes[e]?Mr(i,n):o?Mr(o,t):n?T(n)!==e:void 0}function Lr(t,e,r,n,i){if(r)if(u(r)){var o;Array.isArray(r)&&(r=M(r));var a=function(a){if("class"===a||"style"===a||y(a))o=t;else{var s=t.attrs&&t.attrs.type;o=n||N.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var u=w(a);if(!(a in o)&&!(u in o)&&(o[a]=r[a],i)){var l=t.on||(t.on={});l["update:"+u]=function(t){r[a]=t}}};for(var s in r)a(s)}else;return t}function Dr(t,e){var r=this._staticTrees||(this._staticTrees=[]),n=r[t];return n&&!e?n:(n=r[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),Br(n,"__static__"+t,!1),n)}function Or(t,e,r){return Br(t,"__once__"+e+(r?"_"+r:""),!0),t}function Br(t,e,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]&&"string"!==typeof t[n]&&Rr(t[n],e+"_"+n,r);else Rr(t,e,r)}function Rr(t,e,r){t.isStatic=!0,t.key=e,t.isOnce=r}function Fr(t,e){if(e)if(c(e)){var r=t.on=t.on?P({},t.on):{};for(var n in e){var i=r[n],o=e[n];r[n]=i?[].concat(i,o):o}}else;return t}function Ur(t){t._o=Or,t._n=d,t._s=f,t._l=Ir,t._t=Cr,t._q=O,t._i=B,t._m=Dr,t._f=Pr,t._k=zr,t._b=Lr,t._v=_t,t._e=gt,t._u=Ue,t._g=Fr}function jr(t,e,n,i,a){var s,u=a.options;_(i,"_uid")?(s=Object.create(i),s._original=i):(s=i,i=i._original);var l=o(u._compiled),c=!l;this.data=t,this.props=e,this.children=n,this.parent=i,this.listeners=t.on||r,this.injections=kr(u.inject,i),this.slots=function(){return Re(n,i)},l&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=t.scopedSlots||r),u._scopeId?this._c=function(t,e,r,n){var o=Qr(s,t,e,r,n,c);return o&&!Array.isArray(o)&&(o.fnScopeId=u._scopeId,o.fnContext=i),o}:this._c=function(t,e,r,n){return Qr(s,t,e,r,n,c)}}function Nr(t,e,n,o,a){var s=t.options,u={},l=s.props;if(i(l))for(var c in l)u[c]=Wt(c,l,e||r);else i(n.attrs)&&qr(u,n.attrs),i(n.props)&&qr(u,n.props);var p=new jr(n,u,a,o,t),h=s.render.call(null,p._c,p);if(h instanceof yt)return Vr(h,n,p.parent,s,p);if(Array.isArray(h)){for(var f=Se(h)||[],d=new Array(f.length),m=0;m<f.length;m++)d[m]=Vr(f[m],n,p.parent,s,p);return d}}function Vr(t,e,r,n,i){var o=xt(t);return o.fnContext=r,o.fnOptions=n,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function qr(t,e){for(var r in e)t[w(r)]=e[r]}Ur(jr.prototype);var Zr={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var r=t;Zr.prepatch(r,r)}else{var n=t.componentInstance=Wr(t,je);n.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var r=e.componentOptions,n=e.componentInstance=t.componentInstance;Ge(n,r.propsData,r.listeners,e,r.children)},insert:function(t){var e=t.context,r=t.componentInstance;r._isMounted||(r._isMounted=!0,He(r,"mounted")),t.data.keepAlive&&(e._isMounted?or(r):We(r,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?$e(e,!0):e.$destroy())}},Gr=Object.keys(Zr);function Xr(t,e,r,a,s){if(!n(t)){var l=r.$options._base;if(u(t)&&(t=l.extend(t)),"function"===typeof t){var c;if(n(t.cid)&&(c=t,t=Ie(c,l,r),void 0===t))return ke(c,e,r,a,s);e=e||{},ln(t),i(e.model)&&Kr(t.options,e);var p=xe(e,t,s);if(o(t.options.functional))return Nr(t,p,e,r,a);var h=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var f=e.slot;e={},f&&(e.slot=f)}$r(e);var d=t.options.name||s,m=new yt("vue-component-"+t.cid+(d?"-"+d:""),e,void 0,void 0,void 0,r,{Ctor:t,propsData:p,listeners:h,tag:s,children:a},c);return m}}}function Wr(t,e){var r={_isComponent:!0,_parentVnode:t,parent:e},n=t.data.inlineTemplate;return i(n)&&(r.render=n.render,r.staticRenderFns=n.staticRenderFns),new t.componentOptions.Ctor(r)}function $r(t){for(var e=t.hook||(t.hook={}),r=0;r<Gr.length;r++){var n=Gr[r],i=e[n],o=Zr[n];i===o||i&&i._merged||(e[n]=i?Hr(o,i):o)}}function Hr(t,e){var r=function(r,n){t(r,n),e(r,n)};return r._merged=!0,r}function Kr(t,e){var r=t.model&&t.model.prop||"value",n=t.model&&t.model.event||"input";(e.props||(e.props={}))[r]=e.model.value;var o=e.on||(e.on={}),a=o[n],s=e.model.callback;i(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[n]=[s].concat(a)):o[n]=s}var Yr=1,Jr=2;function Qr(t,e,r,n,i,a){return(Array.isArray(r)||s(r))&&(i=n,n=r,r=void 0),o(a)&&(i=Jr),tn(t,e,r,n,i)}function tn(t,e,r,n,o){if(i(r)&&i(r.__ob__))return gt();if(i(r)&&i(r.is)&&(e=r.is),!e)return gt();var a,s,u;(Array.isArray(n)&&"function"===typeof n[0]&&(r=r||{},r.scopedSlots={default:n[0]},n.length=0),o===Jr?n=Se(n):o===Yr&&(n=we(n)),"string"===typeof e)?(s=t.$vnode&&t.$vnode.ns||N.getTagNamespace(e),a=N.isReservedTag(e)?new yt(N.parsePlatformTagName(e),r,n,void 0,void 0,t):r&&r.pre||!i(u=Xt(t.$options,"components",e))?new yt(e,r,n,void 0,void 0,t):Xr(u,r,t,n,e)):a=Xr(e,r,t,n);return Array.isArray(a)?a:i(a)?(i(s)&&en(a,s),i(r)&&rn(r),a):gt()}function en(t,e,r){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,r=!0),i(t.children))for(var a=0,s=t.children.length;a<s;a++){var u=t.children[a];i(u.tag)&&(n(u.ns)||o(r)&&"svg"!==u.tag)&&en(u,e,r)}}function rn(t){u(t.style)&&fe(t.style),u(t.class)&&fe(t.class)}function nn(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,i=n&&n.context;t.$slots=Re(e._renderChildren,i),t.$scopedSlots=r,t._c=function(e,r,n,i){return Qr(t,e,r,n,i,!1)},t.$createElement=function(e,r,n,i){return Qr(t,e,r,n,i,!0)};var o=n&&n.data;Mt(t,"$attrs",o&&o.attrs||r,null,!0),Mt(t,"$listeners",e._parentListeners||r,null,!0)}function on(t){Ur(t.prototype),t.prototype.$nextTick=function(t){return pe(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,i=n.render,o=n._parentVnode;o&&(e.$scopedSlots=o.data.scopedSlots||r),e.$vnode=o;try{t=i.call(e._renderProxy,e.$createElement)}catch(sa){Jt(sa,e,"render"),t=e._vnode}return t instanceof yt||(t=gt()),t.parent=o,t}}var an=0;function sn(t){t.prototype._init=function(t){var e=this;e._uid=an++,e._isVue=!0,t&&t._isComponent?un(e,t):e.$options=Gt(ln(e.constructor),t||{},e),e._renderProxy=e,e._self=e,Ve(e),Me(e),nn(e),He(e,"beforeCreate"),Ar(e),hr(e),Tr(e),He(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function un(t,e){var r=t.$options=Object.create(t.constructor.options),n=e._parentVnode;r.parent=e.parent,r._parentVnode=n;var i=n.componentOptions;r.propsData=i.propsData,r._parentListeners=i.listeners,r._renderChildren=i.children,r._componentTag=i.tag,e.render&&(r.render=e.render,r.staticRenderFns=e.staticRenderFns)}function ln(t){var e=t.options;if(t.super){var r=ln(t.super),n=t.superOptions;if(r!==n){t.superOptions=r;var i=cn(t);i&&P(t.extendOptions,i),e=t.options=Gt(r,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function cn(t){var e,r=t.options,n=t.sealedOptions;for(var i in r)r[i]!==n[i]&&(e||(e={}),e[i]=r[i]);return e}function pn(t){this._init(t)}function hn(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var r=C(arguments,1);return r.unshift(this),"function"===typeof t.install?t.install.apply(t,r):"function"===typeof t&&t.apply(null,r),e.push(t),this}}function fn(t){t.mixin=function(t){return this.options=Gt(this.options,t),this}}function dn(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var r=this,n=r.cid,i=t._Ctor||(t._Ctor={});if(i[n])return i[n];var o=t.name||r.options.name;var a=function(t){this._init(t)};return a.prototype=Object.create(r.prototype),a.prototype.constructor=a,a.cid=e++,a.options=Gt(r.options,t),a["super"]=r,a.options.props&&mn(a),a.options.computed&&yn(a),a.extend=r.extend,a.mixin=r.mixin,a.use=r.use,U.forEach(function(t){a[t]=r[t]}),o&&(a.options.components[o]=a),a.superOptions=r.options,a.extendOptions=t,a.sealedOptions=P({},a.options),i[n]=a,a}}function mn(t){var e=t.options.props;for(var r in e)pr(t.prototype,"_props",r)}function yn(t){var e=t.options.computed;for(var r in e)gr(t.prototype,r,e[r])}function vn(t){U.forEach(function(e){t[e]=function(t,r){return r?("component"===e&&c(r)&&(r.name=r.name||t,r=this.options._base.extend(r)),"directive"===e&&"function"===typeof r&&(r={bind:r,update:r}),this.options[e+"s"][t]=r,r):this.options[e+"s"][t]}})}function gn(t){return t&&(t.Ctor.options.name||t.tag)}function _n(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!p(t)&&t.test(e)}function xn(t,e){var r=t.cache,n=t.keys,i=t._vnode;for(var o in r){var a=r[o];if(a){var s=gn(a.componentOptions);s&&!e(s)&&bn(r,o,n,i)}}}function bn(t,e,r,n){var i=t[e];!i||n&&i.tag===n.tag||i.componentInstance.$destroy(),t[e]=null,v(r,e)}sn(pn),Er(pn),Be(pn),qe(pn),on(pn);var wn=[String,RegExp,Array],Sn={name:"keep-alive",abstract:!0,props:{include:wn,exclude:wn,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)bn(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",function(e){xn(t,function(t){return _n(e,t)})}),this.$watch("exclude",function(e){xn(t,function(t){return!_n(e,t)})})},render:function(){var t=this.$slots.default,e=Pe(t),r=e&&e.componentOptions;if(r){var n=gn(r),i=this,o=i.include,a=i.exclude;if(o&&(!n||!_n(o,n))||a&&n&&_n(a,n))return e;var s=this,u=s.cache,l=s.keys,c=null==e.key?r.Ctor.cid+(r.tag?"::"+r.tag:""):e.key;u[c]?(e.componentInstance=u[c].componentInstance,v(l,c),l.push(c)):(u[c]=e,l.push(c),this.max&&l.length>parseInt(this.max)&&bn(u,l[0],l,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},En={KeepAlive:Sn};function Tn(t){var e={get:function(){return N}};Object.defineProperty(t,"config",e),t.util={warn:ct,extend:P,mergeOptions:Gt,defineReactive:Mt},t.set=zt,t.delete=Lt,t.nextTick=pe,t.options=Object.create(null),U.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,P(t.options.components,En),hn(t),fn(t),dn(t),vn(t)}Tn(pn),Object.defineProperty(pn.prototype,"$isServer",{get:ot}),Object.defineProperty(pn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(pn,"FunctionalRenderContext",{value:jr}),pn.version="2.5.22";var An=m("style,class"),kn=m("input,textarea,option,select,progress"),In=function(t,e,r){return"value"===r&&kn(t)&&"button"!==e||"selected"===r&&"option"===t||"checked"===r&&"input"===t||"muted"===r&&"video"===t},Cn=m("contenteditable,draggable,spellcheck"),Pn=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Mn="http://www.w3.org/1999/xlink",zn=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Ln=function(t){return zn(t)?t.slice(6,t.length):""},Dn=function(t){return null==t||!1===t};function On(t){var e=t.data,r=t,n=t;while(i(n.componentInstance))n=n.componentInstance._vnode,n&&n.data&&(e=Bn(n.data,e));while(i(r=r.parent))r&&r.data&&(e=Bn(e,r.data));return Rn(e.staticClass,e.class)}function Bn(t,e){return{staticClass:Fn(t.staticClass,e.staticClass),class:i(t.class)?[t.class,e.class]:e.class}}function Rn(t,e){return i(t)||i(e)?Fn(t,Un(e)):""}function Fn(t,e){return t?e?t+" "+e:t:e||""}function Un(t){return Array.isArray(t)?jn(t):u(t)?Nn(t):"string"===typeof t?t:""}function jn(t){for(var e,r="",n=0,o=t.length;n<o;n++)i(e=Un(t[n]))&&""!==e&&(r&&(r+=" "),r+=e);return r}function Nn(t){var e="";for(var r in t)t[r]&&(e&&(e+=" "),e+=r);return e}var Vn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},qn=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Zn=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Gn=function(t){return qn(t)||Zn(t)};function Xn(t){return Zn(t)?"svg":"math"===t?"math":void 0}var Wn=Object.create(null);function $n(t){if(!$)return!0;if(Gn(t))return!1;if(t=t.toLowerCase(),null!=Wn[t])return Wn[t];var e=document.createElement(t);return t.indexOf("-")>-1?Wn[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Wn[t]=/HTMLUnknownElement/.test(e.toString())}var Hn=m("text,number,password,search,email,tel,url");function Kn(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function Yn(t,e){var r=document.createElement(t);return"select"!==t?r:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&r.setAttribute("multiple","multiple"),r)}function Jn(t,e){return document.createElementNS(Vn[t],e)}function Qn(t){return document.createTextNode(t)}function ti(t){return document.createComment(t)}function ei(t,e,r){t.insertBefore(e,r)}function ri(t,e){t.removeChild(e)}function ni(t,e){t.appendChild(e)}function ii(t){return t.parentNode}function oi(t){return t.nextSibling}function ai(t){return t.tagName}function si(t,e){t.textContent=e}function ui(t,e){t.setAttribute(e,"")}var li=Object.freeze({createElement:Yn,createElementNS:Jn,createTextNode:Qn,createComment:ti,insertBefore:ei,removeChild:ri,appendChild:ni,parentNode:ii,nextSibling:oi,tagName:ai,setTextContent:si,setStyleScope:ui}),ci={create:function(t,e){pi(e)},update:function(t,e){t.data.ref!==e.data.ref&&(pi(t,!0),pi(e))},destroy:function(t){pi(t,!0)}};function pi(t,e){var r=t.data.ref;if(i(r)){var n=t.context,o=t.componentInstance||t.elm,a=n.$refs;e?Array.isArray(a[r])?v(a[r],o):a[r]===o&&(a[r]=void 0):t.data.refInFor?Array.isArray(a[r])?a[r].indexOf(o)<0&&a[r].push(o):a[r]=[o]:a[r]=o}}var hi=new yt("",{},[]),fi=["create","activate","update","remove","destroy"];function di(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&i(t.data)===i(e.data)&&mi(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&n(e.asyncFactory.error))}function mi(t,e){if("input"!==t.tag)return!0;var r,n=i(r=t.data)&&i(r=r.attrs)&&r.type,o=i(r=e.data)&&i(r=r.attrs)&&r.type;return n===o||Hn(n)&&Hn(o)}function yi(t,e,r){var n,o,a={};for(n=e;n<=r;++n)o=t[n].key,i(o)&&(a[o]=n);return a}function vi(t){var e,r,a={},u=t.modules,l=t.nodeOps;for(e=0;e<fi.length;++e)for(a[fi[e]]=[],r=0;r<u.length;++r)i(u[r][fi[e]])&&a[fi[e]].push(u[r][fi[e]]);function c(t){return new yt(l.tagName(t).toLowerCase(),{},[],void 0,t)}function p(t,e){function r(){0===--r.listeners&&h(t)}return r.listeners=e,r}function h(t){var e=l.parentNode(t);i(e)&&l.removeChild(e,t)}function f(t,e,r,n,a,s,u){if(i(t.elm)&&i(s)&&(t=s[u]=xt(t)),t.isRootInsert=!a,!d(t,e,r,n)){var c=t.data,p=t.children,h=t.tag;i(h)?(t.elm=t.ns?l.createElementNS(t.ns,h):l.createElement(h,t),w(t),_(t,p,e),i(c)&&b(t,e),g(r,t.elm,n)):o(t.isComment)?(t.elm=l.createComment(t.text),g(r,t.elm,n)):(t.elm=l.createTextNode(t.text),g(r,t.elm,n))}}function d(t,e,r,n){var a=t.data;if(i(a)){var s=i(t.componentInstance)&&a.keepAlive;if(i(a=a.hook)&&i(a=a.init)&&a(t,!1),i(t.componentInstance))return y(t,e),g(r,t.elm,n),o(s)&&v(t,e,r,n),!0}}function y(t,e){i(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,x(t)?(b(t,e),w(t)):(pi(t),e.push(t))}function v(t,e,r,n){var o,s=t;while(s.componentInstance)if(s=s.componentInstance._vnode,i(o=s.data)&&i(o=o.transition)){for(o=0;o<a.activate.length;++o)a.activate[o](hi,s);e.push(s);break}g(r,t.elm,n)}function g(t,e,r){i(t)&&(i(r)?l.parentNode(r)===t&&l.insertBefore(t,e,r):l.appendChild(t,e))}function _(t,e,r){if(Array.isArray(e)){0;for(var n=0;n<e.length;++n)f(e[n],r,t.elm,null,!0,e,n)}else s(t.text)&&l.appendChild(t.elm,l.createTextNode(String(t.text)))}function x(t){while(t.componentInstance)t=t.componentInstance._vnode;return i(t.tag)}function b(t,r){for(var n=0;n<a.create.length;++n)a.create[n](hi,t);e=t.data.hook,i(e)&&(i(e.create)&&e.create(hi,t),i(e.insert)&&r.push(t))}function w(t){var e;if(i(e=t.fnScopeId))l.setStyleScope(t.elm,e);else{var r=t;while(r)i(e=r.context)&&i(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e),r=r.parent}i(e=je)&&e!==t.context&&e!==t.fnContext&&i(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e)}function S(t,e,r,n,i,o){for(;n<=i;++n)f(r[n],o,t,e,!1,r,n)}function E(t){var e,r,n=t.data;if(i(n))for(i(e=n.hook)&&i(e=e.destroy)&&e(t),e=0;e<a.destroy.length;++e)a.destroy[e](t);if(i(e=t.children))for(r=0;r<t.children.length;++r)E(t.children[r])}function T(t,e,r,n){for(;r<=n;++r){var o=e[r];i(o)&&(i(o.tag)?(A(o),E(o)):h(o.elm))}}function A(t,e){if(i(e)||i(t.data)){var r,n=a.remove.length+1;for(i(e)?e.listeners+=n:e=p(t.elm,n),i(r=t.componentInstance)&&i(r=r._vnode)&&i(r.data)&&A(r,e),r=0;r<a.remove.length;++r)a.remove[r](t,e);i(r=t.data.hook)&&i(r=r.remove)?r(t,e):e()}else h(t.elm)}function k(t,e,r,o,a){var s,u,c,p,h=0,d=0,m=e.length-1,y=e[0],v=e[m],g=r.length-1,_=r[0],x=r[g],b=!a;while(h<=m&&d<=g)n(y)?y=e[++h]:n(v)?v=e[--m]:di(y,_)?(C(y,_,o,r,d),y=e[++h],_=r[++d]):di(v,x)?(C(v,x,o,r,g),v=e[--m],x=r[--g]):di(y,x)?(C(y,x,o,r,g),b&&l.insertBefore(t,y.elm,l.nextSibling(v.elm)),y=e[++h],x=r[--g]):di(v,_)?(C(v,_,o,r,d),b&&l.insertBefore(t,v.elm,y.elm),v=e[--m],_=r[++d]):(n(s)&&(s=yi(e,h,m)),u=i(_.key)?s[_.key]:I(_,e,h,m),n(u)?f(_,o,t,y.elm,!1,r,d):(c=e[u],di(c,_)?(C(c,_,o,r,d),e[u]=void 0,b&&l.insertBefore(t,c.elm,y.elm)):f(_,o,t,y.elm,!1,r,d)),_=r[++d]);h>m?(p=n(r[g+1])?null:r[g+1].elm,S(t,p,r,d,g,o)):d>g&&T(t,e,h,m)}function I(t,e,r,n){for(var o=r;o<n;o++){var a=e[o];if(i(a)&&di(t,a))return o}}function C(t,e,r,s,u,c){if(t!==e){i(e.elm)&&i(s)&&(e=s[u]=xt(e));var p=e.elm=t.elm;if(o(t.isAsyncPlaceholder))i(e.asyncFactory.resolved)?z(t.elm,e,r):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var h,f=e.data;i(f)&&i(h=f.hook)&&i(h=h.prepatch)&&h(t,e);var d=t.children,m=e.children;if(i(f)&&x(e)){for(h=0;h<a.update.length;++h)a.update[h](t,e);i(h=f.hook)&&i(h=h.update)&&h(t,e)}n(e.text)?i(d)&&i(m)?d!==m&&k(p,d,m,r,c):i(m)?(i(t.text)&&l.setTextContent(p,""),S(p,null,m,0,m.length-1,r)):i(d)?T(p,d,0,d.length-1):i(t.text)&&l.setTextContent(p,""):t.text!==e.text&&l.setTextContent(p,e.text),i(f)&&i(h=f.hook)&&i(h=h.postpatch)&&h(t,e)}}}function P(t,e,r){if(o(r)&&i(t.parent))t.parent.data.pendingInsert=e;else for(var n=0;n<e.length;++n)e[n].data.hook.insert(e[n])}var M=m("attrs,class,staticClass,staticStyle,key");function z(t,e,r,n){var a,s=e.tag,u=e.data,l=e.children;if(n=n||u&&u.pre,e.elm=t,o(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(u)&&(i(a=u.hook)&&i(a=a.init)&&a(e,!0),i(a=e.componentInstance)))return y(e,r),!0;if(i(s)){if(i(l))if(t.hasChildNodes())if(i(a=u)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var c=!0,p=t.firstChild,h=0;h<l.length;h++){if(!p||!z(p,l[h],r,n)){c=!1;break}p=p.nextSibling}if(!c||p)return!1}else _(e,l,r);if(i(u)){var f=!1;for(var d in u)if(!M(d)){f=!0,b(e,r);break}!f&&u["class"]&&fe(u["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,r,s){if(!n(e)){var u=!1,p=[];if(n(t))u=!0,f(e,p);else{var h=i(t.nodeType);if(!h&&di(t,e))C(t,e,p,null,null,s);else{if(h){if(1===t.nodeType&&t.hasAttribute(F)&&(t.removeAttribute(F),r=!0),o(r)&&z(t,e,p))return P(e,p,!0),t;t=c(t)}var d=t.elm,m=l.parentNode(d);if(f(e,p,d._leaveCb?null:m,l.nextSibling(d)),i(e.parent)){var y=e.parent,v=x(e);while(y){for(var g=0;g<a.destroy.length;++g)a.destroy[g](y);if(y.elm=e.elm,v){for(var _=0;_<a.create.length;++_)a.create[_](hi,y);var b=y.data.hook.insert;if(b.merged)for(var w=1;w<b.fns.length;w++)b.fns[w]()}else pi(y);y=y.parent}}i(m)?T(m,[t],0,0):i(t.tag)&&E(t)}}return P(e,p,u),e.elm}i(t)&&E(t)}}var gi={create:_i,update:_i,destroy:function(t){_i(t,hi)}};function _i(t,e){(t.data.directives||e.data.directives)&&xi(t,e)}function xi(t,e){var r,n,i,o=t===hi,a=e===hi,s=wi(t.data.directives,t.context),u=wi(e.data.directives,e.context),l=[],c=[];for(r in u)n=s[r],i=u[r],n?(i.oldValue=n.value,Ei(i,"update",e,t),i.def&&i.def.componentUpdated&&c.push(i)):(Ei(i,"bind",e,t),i.def&&i.def.inserted&&l.push(i));if(l.length){var p=function(){for(var r=0;r<l.length;r++)Ei(l[r],"inserted",e,t)};o?_e(e,"insert",p):p()}if(c.length&&_e(e,"postpatch",function(){for(var r=0;r<c.length;r++)Ei(c[r],"componentUpdated",e,t)}),!o)for(r in s)u[r]||Ei(s[r],"unbind",t,t,a)}var bi=Object.create(null);function wi(t,e){var r,n,i=Object.create(null);if(!t)return i;for(r=0;r<t.length;r++)n=t[r],n.modifiers||(n.modifiers=bi),i[Si(n)]=n,n.def=Xt(e.$options,"directives",n.name,!0);return i}function Si(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Ei(t,e,r,n,i){var o=t.def&&t.def[e];if(o)try{o(r.elm,t,r,n,i)}catch(sa){Jt(sa,r.context,"directive "+t.name+" "+e+" hook")}}var Ti=[ci,gi];function Ai(t,e){var r=e.componentOptions;if((!i(r)||!1!==r.Ctor.options.inheritAttrs)&&(!n(t.data.attrs)||!n(e.data.attrs))){var o,a,s,u=e.elm,l=t.data.attrs||{},c=e.data.attrs||{};for(o in i(c.__ob__)&&(c=e.data.attrs=P({},c)),c)a=c[o],s=l[o],s!==a&&ki(u,o,a);for(o in(J||tt)&&c.value!==l.value&&ki(u,"value",c.value),l)n(c[o])&&(zn(o)?u.removeAttributeNS(Mn,Ln(o)):Cn(o)||u.removeAttribute(o))}}function ki(t,e,r){t.tagName.indexOf("-")>-1?Ii(t,e,r):Pn(e)?Dn(r)?t.removeAttribute(e):(r="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,r)):Cn(e)?t.setAttribute(e,Dn(r)||"false"===r?"false":"true"):zn(e)?Dn(r)?t.removeAttributeNS(Mn,Ln(e)):t.setAttributeNS(Mn,e,r):Ii(t,e,r)}function Ii(t,e,r){if(Dn(r))t.removeAttribute(e);else{if(J&&!Q&&("TEXTAREA"===t.tagName||"INPUT"===t.tagName)&&"placeholder"===e&&!t.__ieph){var n=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",n)};t.addEventListener("input",n),t.__ieph=!0}t.setAttribute(e,r)}}var Ci={create:Ai,update:Ai};function Pi(t,e){var r=e.elm,o=e.data,a=t.data;if(!(n(o.staticClass)&&n(o.class)&&(n(a)||n(a.staticClass)&&n(a.class)))){var s=On(e),u=r._transitionClasses;i(u)&&(s=Fn(s,Un(u))),s!==r._prevClass&&(r.setAttribute("class",s),r._prevClass=s)}}var Mi,zi={create:Pi,update:Pi},Li="__r",Di="__c";function Oi(t){if(i(t[Li])){var e=J?"change":"input";t[e]=[].concat(t[Li],t[e]||[]),delete t[Li]}i(t[Di])&&(t.change=[].concat(t[Di],t.change||[]),delete t[Di])}function Bi(t,e,r){var n=Mi;return function i(){var o=e.apply(null,arguments);null!==o&&Fi(t,i,r,n)}}function Ri(t,e,r,n){e=ce(e),Mi.addEventListener(t,e,nt?{capture:r,passive:n}:r)}function Fi(t,e,r,n){(n||Mi).removeEventListener(t,e._withTask||e,r)}function Ui(t,e){if(!n(t.data.on)||!n(e.data.on)){var r=e.data.on||{},i=t.data.on||{};Mi=e.elm,Oi(r),ge(r,i,Ri,Fi,Bi,e.context),Mi=void 0}}var ji={create:Ui,update:Ui};function Ni(t,e){if(!n(t.data.domProps)||!n(e.data.domProps)){var r,o,a=e.elm,s=t.data.domProps||{},u=e.data.domProps||{};for(r in i(u.__ob__)&&(u=e.data.domProps=P({},u)),s)n(u[r])&&(a[r]="");for(r in u){if(o=u[r],"textContent"===r||"innerHTML"===r){if(e.children&&(e.children.length=0),o===s[r])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===r){a._value=o;var l=n(o)?"":String(o);Vi(a,l)&&(a.value=l)}else a[r]=o}}}function Vi(t,e){return!t.composing&&("OPTION"===t.tagName||qi(t,e)||Zi(t,e))}function qi(t,e){var r=!0;try{r=document.activeElement!==t}catch(sa){}return r&&t.value!==e}function Zi(t,e){var r=t.value,n=t._vModifiers;if(i(n)){if(n.lazy)return!1;if(n.number)return d(r)!==d(e);if(n.trim)return r.trim()!==e.trim()}return r!==e}var Gi={create:Ni,update:Ni},Xi=x(function(t){var e={},r=/;(?![^(]*\))/g,n=/:(.+)/;return t.split(r).forEach(function(t){if(t){var r=t.split(n);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e});function Wi(t){var e=$i(t.style);return t.staticStyle?P(t.staticStyle,e):e}function $i(t){return Array.isArray(t)?M(t):"string"===typeof t?Xi(t):t}function Hi(t,e){var r,n={};if(e){var i=t;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(r=Wi(i.data))&&P(n,r)}(r=Wi(t.data))&&P(n,r);var o=t;while(o=o.parent)o.data&&(r=Wi(o.data))&&P(n,r);return n}var Ki,Yi=/^--/,Ji=/\s*!important$/,Qi=function(t,e,r){if(Yi.test(e))t.style.setProperty(e,r);else if(Ji.test(r))t.style.setProperty(e,r.replace(Ji,""),"important");else{var n=eo(e);if(Array.isArray(r))for(var i=0,o=r.length;i<o;i++)t.style[n]=r[i];else t.style[n]=r}},to=["Webkit","Moz","ms"],eo=x(function(t){if(Ki=Ki||document.createElement("div").style,t=w(t),"filter"!==t&&t in Ki)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<to.length;r++){var n=to[r]+e;if(n in Ki)return n}});function ro(t,e){var r=e.data,o=t.data;if(!(n(r.staticStyle)&&n(r.style)&&n(o.staticStyle)&&n(o.style))){var a,s,u=e.elm,l=o.staticStyle,c=o.normalizedStyle||o.style||{},p=l||c,h=$i(e.data.style)||{};e.data.normalizedStyle=i(h.__ob__)?P({},h):h;var f=Hi(e,!0);for(s in p)n(f[s])&&Qi(u,s,"");for(s in f)a=f[s],a!==p[s]&&Qi(u,s,null==a?"":a)}}var no={create:ro,update:ro},io=/\s+/;function oo(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(io).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var r=" "+(t.getAttribute("class")||"")+" ";r.indexOf(" "+e+" ")<0&&t.setAttribute("class",(r+e).trim())}}function ao(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(io).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var r=" "+(t.getAttribute("class")||"")+" ",n=" "+e+" ";while(r.indexOf(n)>=0)r=r.replace(n," ");r=r.trim(),r?t.setAttribute("class",r):t.removeAttribute("class")}}function so(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&P(e,uo(t.name||"v")),P(e,t),e}return"string"===typeof t?uo(t):void 0}}var uo=x(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),lo=$&&!Q,co="transition",po="animation",ho="transition",fo="transitionend",mo="animation",yo="animationend";lo&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ho="WebkitTransition",fo="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(mo="WebkitAnimation",yo="webkitAnimationEnd"));var vo=$?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function go(t){vo(function(){vo(t)})}function _o(t,e){var r=t._transitionClasses||(t._transitionClasses=[]);r.indexOf(e)<0&&(r.push(e),oo(t,e))}function xo(t,e){t._transitionClasses&&v(t._transitionClasses,e),ao(t,e)}function bo(t,e,r){var n=So(t,e),i=n.type,o=n.timeout,a=n.propCount;if(!i)return r();var s=i===co?fo:yo,u=0,l=function(){t.removeEventListener(s,c),r()},c=function(e){e.target===t&&++u>=a&&l()};setTimeout(function(){u<a&&l()},o+1),t.addEventListener(s,c)}var wo=/\b(transform|all)(,|$)/;function So(t,e){var r,n=window.getComputedStyle(t),i=(n[ho+"Delay"]||"").split(", "),o=(n[ho+"Duration"]||"").split(", "),a=Eo(i,o),s=(n[mo+"Delay"]||"").split(", "),u=(n[mo+"Duration"]||"").split(", "),l=Eo(s,u),c=0,p=0;e===co?a>0&&(r=co,c=a,p=o.length):e===po?l>0&&(r=po,c=l,p=u.length):(c=Math.max(a,l),r=c>0?a>l?co:po:null,p=r?r===co?o.length:u.length:0);var h=r===co&&wo.test(n[ho+"Property"]);return{type:r,timeout:c,propCount:p,hasTransform:h}}function Eo(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map(function(e,r){return To(e)+To(t[r])}))}function To(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Ao(t,e){var r=t.elm;i(r._leaveCb)&&(r._leaveCb.cancelled=!0,r._leaveCb());var o=so(t.data.transition);if(!n(o)&&!i(r._enterCb)&&1===r.nodeType){var a=o.css,s=o.type,l=o.enterClass,c=o.enterToClass,p=o.enterActiveClass,h=o.appearClass,f=o.appearToClass,m=o.appearActiveClass,y=o.beforeEnter,v=o.enter,g=o.afterEnter,_=o.enterCancelled,x=o.beforeAppear,b=o.appear,w=o.afterAppear,S=o.appearCancelled,E=o.duration,T=je,A=je.$vnode;while(A&&A.parent)A=A.parent,T=A.context;var k=!T._isMounted||!t.isRootInsert;if(!k||b||""===b){var I=k&&h?h:l,C=k&&m?m:p,P=k&&f?f:c,M=k&&x||y,z=k&&"function"===typeof b?b:v,L=k&&w||g,D=k&&S||_,O=d(u(E)?E.enter:E);0;var B=!1!==a&&!Q,F=Co(z),U=r._enterCb=R(function(){B&&(xo(r,P),xo(r,C)),U.cancelled?(B&&xo(r,I),D&&D(r)):L&&L(r),r._enterCb=null});t.data.show||_e(t,"insert",function(){var e=r.parentNode,n=e&&e._pending&&e._pending[t.key];n&&n.tag===t.tag&&n.elm._leaveCb&&n.elm._leaveCb(),z&&z(r,U)}),M&&M(r),B&&(_o(r,I),_o(r,C),go(function(){xo(r,I),U.cancelled||(_o(r,P),F||(Io(O)?setTimeout(U,O):bo(r,s,U)))})),t.data.show&&(e&&e(),z&&z(r,U)),B||F||U()}}}function ko(t,e){var r=t.elm;i(r._enterCb)&&(r._enterCb.cancelled=!0,r._enterCb());var o=so(t.data.transition);if(n(o)||1!==r.nodeType)return e();if(!i(r._leaveCb)){var a=o.css,s=o.type,l=o.leaveClass,c=o.leaveToClass,p=o.leaveActiveClass,h=o.beforeLeave,f=o.leave,m=o.afterLeave,y=o.leaveCancelled,v=o.delayLeave,g=o.duration,_=!1!==a&&!Q,x=Co(f),b=d(u(g)?g.leave:g);0;var w=r._leaveCb=R(function(){r.parentNode&&r.parentNode._pending&&(r.parentNode._pending[t.key]=null),_&&(xo(r,c),xo(r,p)),w.cancelled?(_&&xo(r,l),y&&y(r)):(e(),m&&m(r)),r._leaveCb=null});v?v(S):S()}function S(){w.cancelled||(!t.data.show&&r.parentNode&&((r.parentNode._pending||(r.parentNode._pending={}))[t.key]=t),h&&h(r),_&&(_o(r,l),_o(r,p),go(function(){xo(r,l),w.cancelled||(_o(r,c),x||(Io(b)?setTimeout(w,b):bo(r,s,w)))})),f&&f(r,w),_||x||w())}}function Io(t){return"number"===typeof t&&!isNaN(t)}function Co(t){if(n(t))return!1;var e=t.fns;return i(e)?Co(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Po(t,e){!0!==e.data.show&&Ao(e)}var Mo=$?{create:Po,activate:Po,remove:function(t,e){!0!==t.data.show?ko(t,e):e()}}:{},zo=[Ci,zi,ji,Gi,no,Mo],Lo=zo.concat(Ti),Do=vi({nodeOps:li,modules:Lo});Q&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&Vo(t,"input")});var Oo={inserted:function(t,e,r,n){"select"===r.tag?(n.elm&&!n.elm._vOptions?_e(r,"postpatch",function(){Oo.componentUpdated(t,e,r)}):Bo(t,e,r.context),t._vOptions=[].map.call(t.options,Uo)):("textarea"===r.tag||Hn(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",jo),t.addEventListener("compositionend",No),t.addEventListener("change",No),Q&&(t.vmodel=!0)))},componentUpdated:function(t,e,r){if("select"===r.tag){Bo(t,e,r.context);var n=t._vOptions,i=t._vOptions=[].map.call(t.options,Uo);if(i.some(function(t,e){return!O(t,n[e])})){var o=t.multiple?e.value.some(function(t){return Fo(t,i)}):e.value!==e.oldValue&&Fo(e.value,i);o&&Vo(t,"change")}}}};function Bo(t,e,r){Ro(t,e,r),(J||tt)&&setTimeout(function(){Ro(t,e,r)},0)}function Ro(t,e,r){var n=e.value,i=t.multiple;if(!i||Array.isArray(n)){for(var o,a,s=0,u=t.options.length;s<u;s++)if(a=t.options[s],i)o=B(n,Uo(a))>-1,a.selected!==o&&(a.selected=o);else if(O(Uo(a),n))return void(t.selectedIndex!==s&&(t.selectedIndex=s));i||(t.selectedIndex=-1)}}function Fo(t,e){return e.every(function(e){return!O(e,t)})}function Uo(t){return"_value"in t?t._value:t.value}function jo(t){t.target.composing=!0}function No(t){t.target.composing&&(t.target.composing=!1,Vo(t.target,"input"))}function Vo(t,e){var r=document.createEvent("HTMLEvents");r.initEvent(e,!0,!0),t.dispatchEvent(r)}function qo(t){return!t.componentInstance||t.data&&t.data.transition?t:qo(t.componentInstance._vnode)}var Zo={bind:function(t,e,r){var n=e.value;r=qo(r);var i=r.data&&r.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;n&&i?(r.data.show=!0,Ao(r,function(){t.style.display=o})):t.style.display=n?o:"none"},update:function(t,e,r){var n=e.value,i=e.oldValue;if(!n!==!i){r=qo(r);var o=r.data&&r.data.transition;o?(r.data.show=!0,n?Ao(r,function(){t.style.display=t.__vOriginalDisplay}):ko(r,function(){t.style.display="none"})):t.style.display=n?t.__vOriginalDisplay:"none"}},unbind:function(t,e,r,n,i){i||(t.style.display=t.__vOriginalDisplay)}},Go={model:Oo,show:Zo},Xo={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Wo(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Wo(Pe(e.children)):t}function $o(t){var e={},r=t.$options;for(var n in r.propsData)e[n]=t[n];var i=r._parentListeners;for(var o in i)e[w(o)]=i[o];return e}function Ho(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function Ko(t){while(t=t.parent)if(t.data.transition)return!0}function Yo(t,e){return e.key===t.key&&e.tag===t.tag}var Jo=function(t){return t.tag||Ce(t)},Qo=function(t){return"show"===t.name},ta={name:"transition",props:Xo,abstract:!0,render:function(t){var e=this,r=this.$slots.default;if(r&&(r=r.filter(Jo),r.length)){0;var n=this.mode;0;var i=r[0];if(Ko(this.$vnode))return i;var o=Wo(i);if(!o)return i;if(this._leaving)return Ho(t,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var u=(o.data||(o.data={})).transition=$o(this),l=this._vnode,c=Wo(l);if(o.data.directives&&o.data.directives.some(Qo)&&(o.data.show=!0),c&&c.data&&!Yo(o,c)&&!Ce(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var p=c.data.transition=P({},u);if("out-in"===n)return this._leaving=!0,_e(p,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),Ho(t,i);if("in-out"===n){if(Ce(o))return l;var h,f=function(){h()};_e(u,"afterEnter",f),_e(u,"enterCancelled",f),_e(p,"delayLeave",function(t){h=t})}}return i}}},ea=P({tag:String,moveClass:String},Xo);delete ea.mode;var ra={props:ea,beforeMount:function(){var t=this,e=this._update;this._update=function(r,n){var i=Ne(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),e.call(t,r,n)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",r=Object.create(null),n=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=$o(this),s=0;s<i.length;s++){var u=i[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),r[u.key]=u,(u.data||(u.data={})).transition=a;else;}if(n){for(var l=[],c=[],p=0;p<n.length;p++){var h=n[p];h.data.transition=a,h.data.pos=h.elm.getBoundingClientRect(),r[h.key]?l.push(h):c.push(h)}this.kept=t(e,null,l),this.removed=c}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(na),t.forEach(ia),t.forEach(oa),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var r=t.elm,n=r.style;_o(r,e),n.transform=n.WebkitTransform=n.transitionDuration="",r.addEventListener(fo,r._moveCb=function t(n){n&&n.target!==r||n&&!/transform$/.test(n.propertyName)||(r.removeEventListener(fo,t),r._moveCb=null,xo(r,e))})}}))},methods:{hasMove:function(t,e){if(!lo)return!1;if(this._hasMove)return this._hasMove;var r=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){ao(r,t)}),oo(r,e),r.style.display="none",this.$el.appendChild(r);var n=So(r);return this.$el.removeChild(r),this._hasMove=n.hasTransform}}};function na(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function ia(t){t.data.newPos=t.elm.getBoundingClientRect()}function oa(t){var e=t.data.pos,r=t.data.newPos,n=e.left-r.left,i=e.top-r.top;if(n||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+n+"px,"+i+"px)",o.transitionDuration="0s"}}var aa={Transition:ta,TransitionGroup:ra};pn.config.mustUseProp=In,pn.config.isReservedTag=Gn,pn.config.isReservedAttr=An,pn.config.getTagNamespace=Xn,pn.config.isUnknownElement=$n,P(pn.options.directives,Go),P(pn.options.components,aa),pn.prototype.__patch__=$?Do:z,pn.prototype.$mount=function(t,e){return t=t&&$?Kn(t):void 0,Ze(this,t,e)},$&&setTimeout(function(){N.devtools&&at&&at.emit("init",pn)},0),e["a"]=pn}).call(this,r("c8ba"))},"2b4c":function(t,e,r){var n=r("5537")("wks"),i=r("ca5a"),o=r("7726").Symbol,a="function"==typeof o,s=t.exports=function(t){return n[t]||(n[t]=a&&o[t]||(a?o:i)("Symbol."+t))};s.store=n},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},3024:function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},"30f1":function(t,e,r){"use strict";var n=r("b8e3"),i=r("63b6"),o=r("9138"),a=r("35e8"),s=r("481b"),u=r("8f60"),l=r("45f2"),c=r("53e2"),p=r("5168")("iterator"),h=!([].keys&&"next"in[].keys()),f="@@iterator",d="keys",m="values",y=function(){return this};t.exports=function(t,e,r,v,g,_,x){u(r,e,v);var b,w,S,E=function(t){if(!h&&t in I)return I[t];switch(t){case d:return function(){return new r(this,t)};case m:return function(){return new r(this,t)}}return function(){return new r(this,t)}},T=e+" Iterator",A=g==m,k=!1,I=t.prototype,C=I[p]||I[f]||g&&I[g],P=C||E(g),M=g?A?E("entries"):P:void 0,z="Array"==e&&I.entries||C;if(z&&(S=c(z.call(new t)),S!==Object.prototype&&S.next&&(l(S,T,!0),n||"function"==typeof S[p]||a(S,p,y))),A&&C&&C.name!==m&&(k=!0,P=function(){return C.call(this)}),n&&!x||!h&&!k&&I[p]||a(I,p,P),s[e]=P,s[T]=y,g)if(b={values:A?P:E(m),keys:_?P:E(d),entries:M},x)for(w in b)w in I||o(I,w,b[w]);else i(i.P+i.F*(h||k),e,b);return b}},"31f4":function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},"32a6":function(t,e,r){var n=r("241e"),i=r("c3a1");r("ce7e")("keys",function(){return function(t){return i(n(t))}})},"32e9":function(t,e,r){var n=r("86cc"),i=r("4630");t.exports=r("9e1e")?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},"32fc":function(t,e,r){var n=r("e53d").document;t.exports=n&&n.documentElement},"335c":function(t,e,r){var n=r("6b4c");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},"33a4":function(t,e,r){var n=r("84f2"),i=r("2b4c")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[i]===t)}},"35e8":function(t,e,r){var n=r("d9f6"),i=r("aebd");t.exports=r("8e60")?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},"36c3":function(t,e,r){var n=r("335c"),i=r("25eb");t.exports=function(t){return n(i(t))}},3702:function(t,e,r){var n=r("481b"),i=r("5168")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[i]===t)}},"38fd":function(t,e,r){var n=r("69a8"),i=r("4bf8"),o=r("613b")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},"3a38":function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},"3b8d":function(t,e,r){"use strict";r.d(e,"a",function(){return a});var n=r("795b"),i=r.n(n);function o(t,e,r,n,o,a,s){try{var u=t[a](s),l=u.value}catch(c){return void r(c)}u.done?e(l):i.a.resolve(l).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new i.a(function(n,i){var a=t.apply(e,r);function s(t){o(a,n,i,s,u,"next",t)}function u(t){o(a,n,i,s,u,"throw",t)}s(void 0)})}}},"3c11":function(t,e,r){"use strict";var n=r("63b6"),i=r("584a"),o=r("e53d"),a=r("f201"),s=r("cd78");n(n.P+n.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),r="function"==typeof t;return this.then(r?function(r){return s(e,t()).then(function(){return r})}:t,r?function(r){return s(e,t()).then(function(){throw r})}:t)}})},"40c3":function(t,e,r){var n=r("6b4c"),i=r("5168")("toStringTag"),o="Arguments"==n(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(r){}};t.exports=function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=a(e=Object(t),i))?r:o?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},4178:function(t,e,r){var n,i,o,a=r("d864"),s=r("3024"),u=r("32fc"),l=r("1ec9"),c=r("e53d"),p=c.process,h=c.setImmediate,f=c.clearImmediate,d=c.MessageChannel,m=c.Dispatch,y=0,v={},g="onreadystatechange",_=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},x=function(t){_.call(t.data)};h&&f||(h=function(t){var e=[],r=1;while(arguments.length>r)e.push(arguments[r++]);return v[++y]=function(){s("function"==typeof t?t:Function(t),e)},n(y),y},f=function(t){delete v[t]},"process"==r("6b4c")(p)?n=function(t){p.nextTick(a(_,t,1))}:m&&m.now?n=function(t){m.now(a(_,t,1))}:d?(i=new d,o=i.port2,i.port1.onmessage=x,n=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",x,!1)):n=g in l("script")?function(t){u.appendChild(l("script"))[g]=function(){u.removeChild(this),_.call(t)}}:function(t){setTimeout(a(_,t,1),0)}),t.exports={set:h,clear:f}},"41a0":function(t,e,r){"use strict";var n=r("2aeb"),i=r("4630"),o=r("7f20"),a={};r("32e9")(a,r("2b4c")("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(a,{next:i(1,r)}),o(t,e+" Iterator")}},4362:function(t,e,r){e.nextTick=function(t){setTimeout(t,0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,n="/";e.cwd=function(){return n},e.chdir=function(e){t||(t=r("df7c")),n=t.resolve(e,n)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},"43fc":function(t,e,r){"use strict";var n=r("63b6"),i=r("656e"),o=r("4439");n(n.S,"Promise",{try:function(t){var e=i.f(this),r=o(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}})},4439:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},4588:function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},"45f2":function(t,e,r){var n=r("d9f6").f,i=r("07e3"),o=r("5168")("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"469f":function(t,e,r){r("6c1c"),r("1654"),t.exports=r("7d7b")},"481b":function(t,e){t.exports={}},"4a59":function(t,e,r){var n=r("9b43"),i=r("1fa8"),o=r("33a4"),a=r("cb7c"),s=r("9def"),u=r("27ee"),l={},c={};e=t.exports=function(t,e,r,p,h){var f,d,m,y,v=h?function(){return t}:u(t),g=n(r,p,e?2:1),_=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(o(v)){for(f=s(t.length);f>_;_++)if(y=e?g(a(d=t[_])[0],d[1]):g(t[_]),y===l||y===c)return y}else for(m=v.call(t);!(d=m.next()).done;)if(y=i(m,g,d.value,e),y===l||y===c)return y};e.BREAK=l,e.RETURN=c},"4bf8":function(t,e,r){var n=r("be13");t.exports=function(t){return Object(n(t))}},"4c95":function(t,e,r){"use strict";var n=r("e53d"),i=r("584a"),o=r("d9f6"),a=r("8e60"),s=r("5168")("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:n[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},"4ee1":function(t,e,r){var n=r("5168")("iterator"),i=!1;try{var o=[7][n]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:r=!0}},o[n]=function(){return s},t(o)}catch(a){}return r}},"50ed":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},5168:function(t,e,r){var n=r("dbdb")("wks"),i=r("62a0"),o=r("e53d").Symbol,a="function"==typeof o,s=t.exports=function(t){return n[t]||(n[t]=a&&o[t]||(a?o:i)("Symbol."+t))};s.store=n},"520a":function(t,e,r){"use strict";var n=r("0bfb"),i=RegExp.prototype.exec,o=String.prototype.replace,a=i,s="lastIndex",u=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t[s]||0!==e[s]}(),l=void 0!==/()??/.exec("")[1],c=u||l;c&&(a=function(t){var e,r,a,c,p=this;return l&&(r=new RegExp("^"+p.source+"$(?!\\s)",n.call(p))),u&&(e=p[s]),a=i.call(p,t),u&&a&&(p[s]=p.global?a.index+a[0].length:e),l&&a&&a.length>1&&o.call(a[0],r,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)}),a}),t.exports=a},"53e2":function(t,e,r){var n=r("07e3"),i=r("241e"),o=r("5559")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},"551c":function(t,e,r){"use strict";var n,i,o,a,s=r("2d00"),u=r("7726"),l=r("9b43"),c=r("23c6"),p=r("5ca1"),h=r("d3f4"),f=r("d8e8"),d=r("f605"),m=r("4a59"),y=r("ebd6"),v=r("1991").set,g=r("8079")(),_=r("a5b8"),x=r("9c80"),b=r("a25f"),w=r("bcaa"),S="Promise",E=u.TypeError,T=u.process,A=T&&T.versions,k=A&&A.v8||"",I=u[S],C="process"==c(T),P=function(){},M=i=_.f,z=!!function(){try{var t=I.resolve(1),e=(t.constructor={})[r("2b4c")("species")]=function(t){t(P,P)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e&&0!==k.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(n){}}(),L=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},D=function(t,e){if(!t._n){t._n=!0;var r=t._c;g(function(){var n=t._v,i=1==t._s,o=0,a=function(e){var r,o,a,s=i?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(i||(2==t._h&&R(t),t._h=1),!0===s?r=n:(c&&c.enter(),r=s(n),c&&(c.exit(),a=!0)),r===e.promise?l(E("Promise-chain cycle")):(o=L(r))?o.call(r,u,l):u(r)):l(n)}catch(p){c&&!a&&c.exit(),l(p)}};while(r.length>o)a(r[o++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){v.call(u,function(){var e,r,n,i=t._v,o=B(t);if(o&&(e=x(function(){C?T.emit("unhandledRejection",i,t):(r=u.onunhandledrejection)?r({promise:t,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)}),t._h=C||B(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},B=function(t){return 1!==t._h&&0===(t._a||t._c).length},R=function(t){v.call(u,function(){var e;C?T.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},F=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),D(e,!0))},U=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw E("Promise can't be resolved itself");(e=L(t))?g(function(){var n={_w:r,_d:!1};try{e.call(t,l(U,n,1),l(F,n,1))}catch(i){F.call(n,i)}}):(r._v=t,r._s=1,D(r,!1))}catch(n){F.call({_w:r,_d:!1},n)}}};z||(I=function(t){d(this,I,S,"_h"),f(t),n.call(this);try{t(l(U,this,1),l(F,this,1))}catch(e){F.call(this,e)}},n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r("dcbc")(I.prototype,{then:function(t,e){var r=M(y(this,I));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=C?T.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&D(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=l(U,t,1),this.reject=l(F,t,1)},_.f=M=function(t){return t===I||t===a?new o(t):i(t)}),p(p.G+p.W+p.F*!z,{Promise:I}),r("7f20")(I,S),r("7a56")(S),a=r("8378")[S],p(p.S+p.F*!z,S,{reject:function(t){var e=M(this),r=e.reject;return r(t),e.promise}}),p(p.S+p.F*(s||!z),S,{resolve:function(t){return w(s&&this===a?I:this,t)}}),p(p.S+p.F*!(z&&r("5cc5")(function(t){I.all(t)["catch"](P)})),S,{all:function(t){var e=this,r=M(e),n=r.resolve,i=r.reject,o=x(function(){var r=[],o=0,a=1;m(t,!1,function(t){var s=o++,u=!1;r.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,r[s]=t,--a||n(r))},i)}),--a||n(r)});return o.e&&i(o.v),r.promise},race:function(t){var e=this,r=M(e),n=r.reject,i=x(function(){m(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},5537:function(t,e,r){var n=r("8378"),i=r("7726"),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:r("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},5559:function(t,e,r){var n=r("dbdb")("keys"),i=r("62a0");t.exports=function(t){return n[t]||(n[t]=i(t))}},"584a":function(t,e){var r=t.exports={version:"2.6.2"};"number"==typeof __e&&(__e=r)},"5b4e":function(t,e,r){var n=r("36c3"),i=r("b447"),o=r("0fc9");t.exports=function(t){return function(e,r,a){var s,u=n(e),l=i(u.length),c=o(a,l);if(t&&r!=r){while(l>c)if(s=u[c++],s!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===r)return t||c||0;return!t&&-1}}},"5c95":function(t,e,r){var n=r("35e8");t.exports=function(t,e,r){for(var i in e)r&&t[i]?t[i]=e[i]:n(t,i,e[i]);return t}},"5ca1":function(t,e,r){var n=r("7726"),i=r("8378"),o=r("32e9"),a=r("2aba"),s=r("9b43"),u="prototype",l=function(t,e,r){var c,p,h,f,d=t&l.F,m=t&l.G,y=t&l.S,v=t&l.P,g=t&l.B,_=m?n:y?n[e]||(n[e]={}):(n[e]||{})[u],x=m?i:i[e]||(i[e]={}),b=x[u]||(x[u]={});for(c in m&&(r=e),r)p=!d&&_&&void 0!==_[c],h=(p?_:r)[c],f=g&&p?s(h,n):v&&"function"==typeof h?s(Function.call,h):h,_&&a(_,c,h,t&l.U),x[c]!=h&&o(x,c,f),v&&b[c]!=h&&(b[c]=h)};n.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},"5cc5":function(t,e,r){var n=r("2b4c")("iterator"),i=!1;try{var o=[7][n]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:r=!0}},o[n]=function(){return s},t(o)}catch(a){}return r}},"5d73":function(t,e,r){t.exports=r("469f")},"5f1b":function(t,e,r){"use strict";var n=r("23c6"),i=RegExp.prototype.exec;t.exports=function(t,e){var r=t.exec;if("function"===typeof r){var o=r.call(t,e);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"613b":function(t,e,r){var n=r("5537")("keys"),i=r("ca5a");t.exports=function(t){return n[t]||(n[t]=i(t))}},6149:function(t,e,r){(function(t){var r,n;
/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
(function(){var i,o,a,s,u,l,c,p,h,f,d,m,y,v,g,_,x,b,w,S,E,T,A,k,I,C,P,M,z,L,D,O,B,R,F,U,j,N,V,q,Z,G,X,W,$,H,K,Y,J,Q,tt,et,rt,nt,it,ot,at,st,ut,lt,ct,pt,ht,ft,dt,mt,yt,vt,gt,_t,xt,bt,wt,St,Et,Tt,At,kt,It,Ct,Pt,Mt=[].slice;At=function(){var t,e,r,n,i;for(t={},i="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),n=0,e=i.length;n<e;n++)r=i[n],t["[object "+r+"]"]=r.toLowerCase();return function(e){var r;return r=Object.prototype.toString.call(e),t[r]||"object"}}(),K=function(t,e,r){return null==e&&(e=0),null==r&&(r=1),t<e&&(t=e),t>r&&(t=r),t},kt=function(t){return t.length>=3?Array.prototype.slice.call(t):t[0]},E=function(t){var e,r;for(t._clipped=!1,t._unclipped=t.slice(0),e=r=0;r<3;e=++r)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t._clipped||delete t._unclipped,t},s=Math.PI,bt=Math.round,A=Math.cos,M=Math.floor,ot=Math.pow,Y=Math.log,St=Math.sin,Et=Math.sqrt,v=Math.atan2,tt=Math.max,y=Math.abs,c=2*s,u=s/3,o=s/180,l=180/s,S=function(){return arguments[0]instanceof i?arguments[0]:function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(i,arguments,function(){})},S["default"]=S,m=[],null!==t&&null!=t.exports&&(t.exports=S),r=[],n=function(){return S}.apply(e,r),void 0===n||(t.exports=n),S.version="1.4.1",d={},h=[],f=!1,i=function(){function t(){var t,e,r,n,i,o,a,s,u;for(o=this,e=[],s=0,n=arguments.length;s<n;s++)t=arguments[s],null!=t&&e.push(t);if(e.length>1&&(a=e[e.length-1]),null!=d[a])o._rgb=E(d[a](kt(e.slice(0,-1))));else{for(f||(h=h.sort(function(t,e){return e.p-t.p}),f=!0),u=0,i=h.length;u<i;u++)if(r=h[u],a=r.test.apply(r,e),a)break;a&&(o._rgb=E(d[a].apply(d,e)))}null==o._rgb&&console.warn("unknown format: "+e),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return t.prototype.toString=function(){return this.hex()},t}(),S._input=d,
/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
   */
S.brewer=b={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var t,e;for(t in e=[],b)e.push(b[t.toLowerCase()]=b[t])}(),It={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},S.colors=It,G=function(){var t,e,r,n,i,o,s,u,l;return e=kt(arguments),i=e[0],t=e[1],r=e[2],u=(i+16)/116,s=isNaN(t)?u:u+t/500,l=isNaN(r)?u:u-r/200,u=a.Yn*X(u),s=a.Xn*X(s),l=a.Zn*X(l),o=Pt(3.2404542*s-1.5371385*u-.4985314*l),n=Pt(-.969266*s+1.8760108*u+.041556*l),r=Pt(.0556434*s-.2040259*u+1.0572252*l),[o,n,r,e.length>3?e[3]:1]},Pt=function(t){return 255*(t<=.00304?12.92*t:1.055*ot(t,1/2.4)-.055)},X=function(t){return t>a.t1?t*t*t:a.t2*(t-a.t0)},a={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ft=function(){var t,e,r,n,i,o,a,s;return n=kt(arguments),r=n[0],e=n[1],t=n[2],i=gt(r,e,t),o=i[0],a=i[1],s=i[2],[116*a-16,500*(o-a),200*(a-s)]},_t=function(t){return(t/=255)<=.04045?t/12.92:ot((t+.055)/1.055,2.4)},Ct=function(t){return t>a.t3?ot(t,1/3):t/a.t2+a.t0},gt=function(){var t,e,r,n,i,o,s;return n=kt(arguments),r=n[0],e=n[1],t=n[2],r=_t(r),e=_t(e),t=_t(t),i=Ct((.4124564*r+.3575761*e+.1804375*t)/a.Xn),o=Ct((.2126729*r+.7151522*e+.072175*t)/a.Yn),s=Ct((.0193339*r+.119192*e+.9503041*t)/a.Zn),[i,o,s]},S.lab=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(i,Mt.call(arguments).concat(["lab"]),function(){})},d.lab=G,i.prototype.lab=function(){return ft(this._rgb)},g=function(t){var e,r,n,i,o,a,s,u,l,c,p;return t=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(S(i));return n}(),2===t.length?(l=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=l[0],a=l[1],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push(o[e]+t*(a[e]-o[e]));return n}(),S.lab.apply(S,r)}):3===t.length?(c=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=c[0],a=c[1],s=c[2],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*o[e]+2*(1-t)*t*a[e]+t*t*s[e]);return n}(),S.lab.apply(S,r)}):4===t.length?(p=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=p[0],a=p[1],s=p[2],u=p[3],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*(1-t)*o[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*s[e]+t*t*t*u[e]);return n}(),S.lab.apply(S,r)}):5===t.length&&(r=g(t.slice(0,3)),n=g(t.slice(2,5)),e=function(t){return t<.5?r(2*t):n(2*(t-.5))}),e},S.bezier=function(t){var e;return e=g(t),e.scale=function(){return S.scale(e)},e},S.cubehelix=function(t,e,r,n,i){var o,a,s;return null==t&&(t=300),null==e&&(e=-1.5),null==r&&(r=1),null==n&&(n=1),null==i&&(i=[0,1]),o=0,"array"===At(i)?a=i[1]-i[0]:(a=0,i=[i,i]),s=function(s){var u,l,p,h,f,d,m,y,v;return u=c*((t+120)/360+e*s),m=ot(i[0]+a*s,n),d=0!==o?r[0]+s*o:r,l=d*m*(1-m)/2,h=A(u),v=St(u),y=m+l*(-.14861*h+1.78277*v),f=m+l*(-.29227*h-.90649*v),p=m+l*(1.97294*h),S(E([255*y,255*f,255*p,1]))},s.start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?n:(n=t,s)},s.hue=function(t){return null==t?r:(r=t,"array"===At(r)?(o=r[1]-r[0],0===o&&(r=r[1])):o=0,s)},s.lightness=function(t){return null==t?i:("array"===At(t)?(i=t,a=t[1]-t[0]):(i=[t,t],a=0),s)},s.scale=function(){return S.scale(s)},s.hue(r),s},S.random=function(){var t,e,r;for(e="0123456789abcdef",t="#",r=0;r<6;++r)t+=e.charAt(M(16*Math.random()));return new i(t)},m=[],F=function(t,e,r,n){var i,o,a,s;for(null==r&&(r=.5),null==n&&(n="rgb"),"object"!==At(t)&&(t=S(t)),"object"!==At(e)&&(e=S(e)),a=0,o=m.length;a<o;a++)if(i=m[a],n===i[0]){s=i[1](t,e,r,n);break}if(null==s)throw"color mode "+n+" is not supported";return s.alpha(t.alpha()+r*(e.alpha()-t.alpha()))},S.interpolate=F,i.prototype.interpolate=function(t,e,r){return F(this,t,e,r)},S.mix=F,i.prototype.mix=i.prototype.interpolate,d.rgb=function(){var t,e,r,n;for(t in e=kt(arguments),r=[],e)n=e[t],r.push(n);return r},S.rgb=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(i,Mt.call(arguments).concat(["rgb"]),function(){})},i.prototype.rgb=function(t){return null==t&&(t=!0),t?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},i.prototype.rgba=function(t){return null==t&&(t=!0),t?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},h.push({p:3,test:function(t){var e;return e=kt(arguments),"array"===At(e)&&3===e.length?"rgb":4===e.length&&"number"===At(e[3])&&e[3]>=0&&e[3]<=1?"rgb":void 0}}),d.lrgb=d.rgb,N=function(t,e,r,n){var o,a;return o=t._rgb,a=e._rgb,new i(Et(ot(o[0],2)*(1-r)+ot(a[0],2)*r),Et(ot(o[1],2)*(1-r)+ot(a[1],2)*r),Et(ot(o[2],2)*(1-r)+ot(a[2],2)*r),n)},p=function(t){var e,r,n,o,a,s;for(r=1/t.length,s=[0,0,0,0],o=0,n=t.length;o<n;o++)e=t[o],a=e._rgb,s[0]+=ot(a[0],2)*r,s[1]+=ot(a[1],2)*r,s[2]+=ot(a[2],2)*r,s[3]+=a[3]*r;return s[0]=Et(s[0]),s[1]=Et(s[1]),s[2]=Et(s[2]),s[3]>1&&(s[3]=1),new i(E(s))},m.push(["lrgb",N]),S.average=function(t,e){var r,n,i,o,a,u,l,c,h,f,d,m,y;if(null==e&&(e="rgb"),h=t.length,t=t.map(function(t){return S(t)}),l=t.splice(0,1)[0],"lrgb"===e)return p(t);for(c in m=l.get(e),o=[],a=0,u=0,m)m[c]=m[c]||0,o.push(isNaN(m[c])?0:1),"h"!==e.charAt(c)||isNaN(m[c])||(r=m[c]/180*s,a+=A(r),u+=St(r));for(n=l.alpha(),d=0,f=t.length;d<f;d++)for(c in i=t[d],y=i.get(e),n+=i.alpha(),m)isNaN(y[c])||(o[c]+=1,"h"===e.charAt(c)?(r=y[c]/180*s,a+=A(r),u+=St(r)):m[c]+=y[c]);for(c in m)if("h"===e.charAt(c)){r=v(u/o[c],a/o[c])/s*180;while(r<0)r+=360;while(r>=360)r-=360;m[c]=r}else m[c]=m[c]/o[c];return S(m,e).alpha(n/h)},L=function(t){var e,r,n,i,o,a;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),a=parseInt(t,16),i=a>>16,n=a>>8&255,r=255&a,[i,n,r,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),a=parseInt(t,16),i=a>>24&255,n=a>>16&255,r=a>>8&255,e=bt((255&a)/255*100)/100,[i,n,r,e];if(null!=d.css&&(o=d.css(t)))return o;throw"unknown color: "+t},lt=function(t,e){var r,n,i,o,a,s,u;return null==e&&(e="auto"),a=t[0],i=t[1],n=t[2],r=t[3],"auto"===e&&(e=r<1?"rgba":"rgb"),a=Math.round(a),i=Math.round(i),n=Math.round(n),u=a<<16|i<<8|n,s="000000"+u.toString(16),s=s.substr(s.length-6),o="0"+bt(255*r).toString(16),o=o.substr(o.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},d.hex=function(t){return L(t)},S.hex=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(i,Mt.call(arguments).concat(["hex"]),function(){})},i.prototype.hex=function(t){return null==t&&(t="auto"),lt(this._rgb,t)},h.push({p:4,test:function(t){if(1===arguments.length&&"string"===At(t))return"hex"}}),B=function(){var t,e,r,n,i,o,a,s,u,l,c,p,h,f;if(t=kt(arguments),i=t[0],c=t[1],a=t[2],0===c)u=n=e=255*a;else{for(f=[0,0,0],r=[0,0,0],h=a<.5?a*(1+c):a+c-a*c,p=2*a-h,i/=360,f[0]=i+1/3,f[1]=i,f[2]=i-1/3,o=s=0;s<=2;o=++s)f[o]<0&&(f[o]+=1),f[o]>1&&(f[o]-=1),6*f[o]<1?r[o]=p+6*(h-p)*f[o]:2*f[o]<1?r[o]=h:3*f[o]<2?r[o]=p+(h-p)*(2/3-f[o])*6:r[o]=p;l=[bt(255*r[0]),bt(255*r[1]),bt(255*r[2])],u=l[0],n=l[1],e=l[2]}return t.length>3?[u,n,e,t[3]]:[u,n,e]},pt=function(t,e,r){var n,i,o,a,s;return void 0!==t&&t.length>=3&&(a=t,t=a[0],e=a[1],r=a[2]),t/=255,e/=255,r/=255,o=Math.min(t,e,r),tt=Math.max(t,e,r),i=(tt+o)/2,tt===o?(s=0,n=Number.NaN):s=i<.5?(tt-o)/(tt+o):(tt-o)/(2-tt-o),t===tt?n=(e-r)/(tt-o):e===tt?n=2+(r-t)/(tt-o):r===tt&&(n=4+(t-e)/(tt-o)),n*=60,n<0&&(n+=360),[n,s,i]},S.hsl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(i,Mt.call(arguments).concat(["hsl"]),function(){})},d.hsl=B,i.prototype.hsl=function(){return pt(this._rgb)},R=function(){var t,e,r,n,i,o,a,s,u,l,c,p,h,f,d,m,y,v;if(t=kt(arguments),i=t[0],m=t[1],v=t[2],v*=255,0===m)u=n=e=v;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),i/=60,o=M(i),r=i-o,a=v*(1-m),s=v*(1-m*r),y=v*(1-m*(1-r)),o){case 0:l=[v,y,a],u=l[0],n=l[1],e=l[2];break;case 1:c=[s,v,a],u=c[0],n=c[1],e=c[2];break;case 2:p=[a,v,y],u=p[0],n=p[1],e=p[2];break;case 3:h=[a,s,v],u=h[0],n=h[1],e=h[2];break;case 4:f=[y,a,v],u=f[0],n=f[1],e=f[2];break;case 5:d=[v,a,s],u=d[0],n=d[1],e=d[2]}return[u,n,e,t.length>3?t[3]:1]},ht=function(){var t,e,r,n,i,o,a,s,u;return a=kt(arguments),o=a[0],r=a[1],t=a[2],i=Math.min(o,r,t),tt=Math.max(o,r,t),e=tt-i,u=tt/255,0===tt?(n=Number.NaN,s=0):(s=e/tt,o===tt&&(n=(r-t)/e),r===tt&&(n=2+(t-o)/e),t===tt&&(n=4+(o-r)/e),n*=60,n<0&&(n+=360)),[n,s,u]},S.hsv=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(i,Mt.call(arguments).concat(["hsv"]),function(){})},d.hsv=R,i.prototype.hsv=function(){return ht(this._rgb)},nt=function(t){var e,r,n;return"number"===At(t)&&t>=0&&t<=16777215?(n=t>>16,r=t>>8&255,e=255&t,[n,r,e,1]):(console.warn("unknown num color: "+t),[0,0,0,1])},yt=function(){var t,e,r,n;return n=kt(arguments),r=n[0],e=n[1],t=n[2],(r<<16)+(e<<8)+t},S.num=function(t){return new i(t,"num")},i.prototype.num=function(t){return null==t&&(t="rgb"),yt(this._rgb,t)},d.num=nt,h.push({p:1,test:function(t){if(1===arguments.length&&"number"===At(t)&&t>=0&&t<=16777215)return"num"}}),z=function(){var t,e,r,n,i,o,a,s,u,l,c,p,h,f,d,m,y,v,g,_;if(r=kt(arguments),s=r[0],i=r[1],e=r[2],i/=100,a=a/100*255,t=255*i,0===i)p=a=n=e;else switch(360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),s/=60,u=M(s),o=s-u,l=e*(1-i),c=l+t*(1-o),g=l+t*o,_=l+t,u){case 0:h=[_,g,l],p=h[0],a=h[1],n=h[2];break;case 1:f=[c,_,l],p=f[0],a=f[1],n=f[2];break;case 2:d=[l,_,g],p=d[0],a=d[1],n=d[2];break;case 3:m=[l,c,_],p=m[0],a=m[1],n=m[2];break;case 4:y=[g,l,_],p=y[0],a=y[1],n=y[2];break;case 5:v=[_,l,c],p=v[0],a=v[1],n=v[2]}return[p,a,n,r.length>3?r[3]:1]},ut=function(){var t,e,r,n,i,o,a,s,u;return u=kt(arguments),s=u[0],i=u[1],e=u[2],a=Math.min(s,i,e),tt=Math.max(s,i,e),n=tt-a,r=100*n/255,t=a/(255-n)*100,0===n?o=Number.NaN:(s===tt&&(o=(i-e)/n),i===tt&&(o=2+(e-s)/n),e===tt&&(o=4+(s-i)/n),o*=60,o<0&&(o+=360)),[o,r,t]},S.hcg=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(i,Mt.call(arguments).concat(["hcg"]),function(){})},d.hcg=z,i.prototype.hcg=function(){return ut(this._rgb)},k=function(t){var e,r,n,i,o,a,s,u;if(t=t.toLowerCase(),null!=S.colors&&S.colors[t])return L(S.colors[t]);if(o=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),i=a=0;a<=2;i=++a)s[i]=+s[i];s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),i=u=0;u<=3;i=++u)s[i]=+s[i];else if(o=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),i=e=0;e<=2;i=++e)s[i]=bt(2.55*s[i]);s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),i=r=0;r<=2;i=++r)s[i]=bt(2.55*s[i]);s[3]=+s[3]}else(o=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(n=o.slice(1,4),n[1]*=.01,n[2]*=.01,s=B(n),s[3]=1):(o=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(n=o.slice(1,4),n[1]*=.01,n[2]*=.01,s=B(n),s[3]=+o[4]);return s},st=function(t){var e;return e=t[3]<1?"rgba":"rgb","rgb"===e?e+"("+t.slice(0,3).map(bt).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(bt).join(",")+","+t[3]+")":void 0},xt=function(t){return bt(100*t)/100},O=function(t,e){var r;return r=e<1?"hsla":"hsl",t[0]=xt(t[0]||0),t[1]=xt(100*t[1])+"%",t[2]=xt(100*t[2])+"%","hsla"===r&&(t[3]=e),r+"("+t.join(",")+")"},d.css=function(t){return k(t)},S.css=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(i,Mt.call(arguments).concat(["css"]),function(){})},i.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?st(this._rgb):"hsl"===t.slice(0,3)?O(this.hsl(),this.alpha()):void 0},d.named=function(t){return L(It[t])},h.push({p:5,test:function(t){if(1===arguments.length&&null!=It[t])return"named"}}),i.prototype.name=function(t){var e,r;for(r in arguments.length&&(It[t]&&(this._rgb=L(It[t])),this._rgb[3]=1),e=this.hex("rgb"),It)if(e===It[r])return r;return e},W=function(){var t,e,r,n;return n=kt(arguments),r=n[0],t=n[1],e=n[2],e*=o,[r,A(e)*t,St(e)*t]},$=function(){var t,e,r,n,i,o,a,s,u,l,c;return r=kt(arguments),s=r[0],i=r[1],a=r[2],l=W(s,i,a),t=l[0],e=l[1],n=l[2],c=G(t,e,n),u=c[0],o=c[1],n=c[2],[u,o,n,r.length>3?r[3]:1]},Z=function(){var t,e,r,n,i,o;return o=kt(arguments),i=o[0],t=o[1],e=o[2],r=Et(t*t+e*e),n=(v(e,t)*l+360)%360,0===bt(1e4*r)&&(n=Number.NaN),[i,r,n]},dt=function(){var t,e,r,n,i,o,a;return o=kt(arguments),i=o[0],r=o[1],e=o[2],a=ft(i,r,e),n=a[0],t=a[1],e=a[2],Z(n,t,e)},S.lch=function(){var t;return t=kt(arguments),new i(t,"lch")},S.hcl=function(){var t;return t=kt(arguments),new i(t,"hcl")},d.lch=$,d.hcl=function(){var t,e,r,n;return n=kt(arguments),e=n[0],t=n[1],r=n[2],$([r,t,e])},i.prototype.lch=function(){return dt(this._rgb)},i.prototype.hcl=function(){return dt(this._rgb).reverse()},at=function(t){var e,r,n,i,o,a,s,u,l;return null==t&&(t="rgb"),u=kt(arguments),s=u[0],i=u[1],e=u[2],s/=255,i/=255,e/=255,o=1-Math.max(s,Math.max(i,e)),n=o<1?1/(1-o):0,r=(1-s-o)*n,a=(1-i-o)*n,l=(1-e-o)*n,[r,a,l,o]},T=function(){var t,e,r,n,i,o,a,s,u;return e=kt(arguments),n=e[0],a=e[1],u=e[2],o=e[3],t=e.length>4?e[4]:1,1===o?[0,0,0,t]:(s=n>=1?0:255*(1-n)*(1-o),i=a>=1?0:255*(1-a)*(1-o),r=u>=1?0:255*(1-u)*(1-o),[s,i,r,t])},d.cmyk=function(){return T(kt(arguments))},S.cmyk=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(i,Mt.call(arguments).concat(["cmyk"]),function(){})},i.prototype.cmyk=function(){return at(this._rgb)},d.gl=function(){var t,e,r,n,i;for(n=function(){var t,r;for(e in t=kt(arguments),r=[],t)i=t[e],r.push(i);return r}.apply(this,arguments),t=r=0;r<=2;t=++r)n[t]*=255;return n},S.gl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(i,Mt.call(arguments).concat(["gl"]),function(){})},i.prototype.gl=function(){var t;return t=this._rgb,[t[0]/255,t[1]/255,t[2]/255,t[3]]},mt=function(t,e,r){var n;return n=kt(arguments),t=n[0],e=n[1],r=n[2],t=J(t),e=J(e),r=J(r),.2126*t+.7152*e+.0722*r},J=function(t){return t/=255,t<=.03928?t/12.92:ot((t+.055)/1.055,2.4)},q=function(t,e,r,n){var o,a;return o=t._rgb,a=e._rgb,new i(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),n)},m.push(["rgb",q]),i.prototype.luminance=function(t,e){var r,n,i,o,a;return null==e&&(e="rgb"),arguments.length?(o=this._rgb,0===t?o=[0,0,0,this._rgb[3]]:1===t?o=[255,255,255,this[3]]:(r=mt(this._rgb),n=1e-7,i=20,a=function(r,o){var s,u;return u=r.interpolate(o,.5,e),s=u.luminance(),Math.abs(t-s)<n||!i--?u:s>t?a(r,u):a(u,o)},o=r>t?a(S("black"),this).rgba():a(this,S("white")).rgba()),S(o).alpha(this.alpha())):mt(this._rgb)},Tt=function(t){var e,r,n,i;return i=t/100,i<66?(n=255,r=-155.25485562709179-.44596950469579133*(r=i-2)+104.49216199393888*Y(r),e=i<20?0:.8274096064007395*(e=i-10)-254.76935184120902+115.67994401066147*Y(e)):(n=351.97690566805693+.114206453784165*(n=i-55)-40.25366309332127*Y(n),r=325.4494125711974+.07943456536662342*(r=i-50)-28.0852963507957*Y(r),e=255),[n,r,e]},vt=function(){var t,e,r,n,i,o,a,s;o=kt(arguments),i=o[0],o[1],t=o[2],n=1e3,r=4e4,e=.4;while(r-n>e)s=.5*(r+n),a=Tt(s),a[2]/a[0]>=t/i?r=s:n=s;return bt(s)},S.temperature=S.kelvin=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(i,Mt.call(arguments).concat(["temperature"]),function(){})},d.temperature=d.kelvin=d.K=Tt,i.prototype.temperature=function(){return vt(this._rgb)},i.prototype.kelvin=i.prototype.temperature,S.contrast=function(t,e){var r,n,o,a;return"string"!==(o=At(t))&&"number"!==o||(t=new i(t)),"string"!==(a=At(e))&&"number"!==a||(e=new i(e)),r=t.luminance(),n=e.luminance(),r>n?(r+.05)/(n+.05):(n+.05)/(r+.05)},S.distance=function(t,e,r){var n,o,a,s,u,l,c;for(o in null==r&&(r="lab"),"string"!==(u=At(t))&&"number"!==u||(t=new i(t)),"string"!==(l=At(e))&&"number"!==l||(e=new i(e)),a=t.get(r),s=e.get(r),c=0,a)n=(a[o]||0)-(s[o]||0),c+=n*n;return Math.sqrt(c)},S.deltaE=function(t,e,r,n){var o,a,u,l,c,p,h,f,d,m,g,_,x,b,w,S,E,T,k,I,C,P,M,z,L,D,O;null==r&&(r=1),null==n&&(n=1),"string"!==(E=At(t))&&"number"!==E||(t=new i(t)),"string"!==(T=At(e))&&"number"!==T||(e=new i(e)),k=t.lab(),o=k[0],u=k[1],c=k[2],I=e.lab(),a=I[0],l=I[1],p=I[2],h=Et(u*u+c*c),f=Et(l*l+p*p),M=o<16?.511:.040975*o/(1+.01765*o),C=.0638*h/(1+.0131*h)+.638,S=h<1e-6?0:180*v(c,u)/s;while(S<0)S+=360;while(S>=360)S-=360;return z=S>=164&&S<=345?.56+y(.2*A(s*(S+168)/180)):.36+y(.4*A(s*(S+35)/180)),d=h*h*h*h,w=Et(d/(d+1900)),P=C*(w*z+1-w),b=o-a,x=h-f,g=u-l,_=c-p,m=g*g+_*_-x*x,L=b/(r*M),D=x/(n*C),O=P,Et(L*L+D*D+m/(O*O))},i.prototype.get=function(t){var e,r,n,i,o,a;return n=this,o=t.split("."),i=o[0],e=o[1],a=n[i](),e?(r=i.indexOf(e),r>-1?a[r]:console.warn("unknown channel "+e+" in mode "+i)):a},i.prototype.set=function(t,e){var r,n,i,o,a,s;if(i=this,a=t.split("."),o=a[0],r=a[1],r)if(s=i[o](),n=o.indexOf(r),n>-1)if("string"===At(e))switch(e.charAt(0)){case"+":s[n]+=+e;break;case"-":s[n]+=+e;break;case"*":s[n]*=+e.substr(1);break;case"/":s[n]/=+e.substr(1);break;default:s[n]=+e}else s[n]=e;else console.warn("unknown channel "+r+" in mode "+o);else s=e;return S(s,o).alpha(i.alpha())},i.prototype.clipped=function(){return this._rgb._clipped||!1},i.prototype.alpha=function(t){return arguments.length?S.rgb([this._rgb[0],this._rgb[1],this._rgb[2],t]):this._rgb[3]},i.prototype.darken=function(t){var e,r;return null==t&&(t=1),r=this,e=r.lab(),e[0]-=a.Kn*t,S.lab(e).alpha(r.alpha())},i.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},i.prototype.darker=i.prototype.darken,i.prototype.brighter=i.prototype.brighten,i.prototype.saturate=function(t){var e,r;return null==t&&(t=1),r=this,e=r.lch(),e[1]+=t*a.Kn,e[1]<0&&(e[1]=0),S.lch(e).alpha(r.alpha())},i.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},i.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),S(e[0]*t,e[1]*t,e[2]*t,t)},_=function(t,e,r){if(!_[r])throw"unknown blend mode "+r;return _[r](t,e)},x=function(t){return function(e,r){var n,i;return n=S(r).rgb(),i=S(e).rgb(),S(t(n,i),"rgb")}},P=function(t){return function(e,r){var n,i,o;for(o=[],n=i=0;i<=3;n=++i)o[n]=t(e[n],r[n]);return o}},rt=function(t,e){return t},et=function(t,e){return t*e/255},I=function(t,e){return t>e?e:t},H=function(t,e){return t>e?t:e},wt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},it=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},w=function(t,e){return 255*(1-(1-e/255)/(t/255))},C=function(t,e){return 255===t?255:(t=e/255*255/(1-t/255),t>255?255:t)},_.normal=x(P(rt)),_.multiply=x(P(et)),_.screen=x(P(wt)),_.overlay=x(P(it)),_.darken=x(P(I)),_.lighten=x(P(H)),_.dodge=x(P(C)),_.burn=x(P(w)),S.blend=_,S.analyze=function(t){var e,r,n,i;for(n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},r=0,e=t.length;r<e;r++)i=t[r],null==i||isNaN(i)||(n.values.push(i),n.sum+=i,i<n.min&&(n.min=i),i>n.max&&(n.max=i),n.count+=1);return n.domain=[n.min,n.max],n.limits=function(t,e){return S.limits(n,t,e)},n},S.scale=function(t,e){var r,n,i,o,a,s,u,l,c,p,h,f,d,m,y,v,g,_,x,b,w;return c="rgb",p=S("#ccc"),m=0,!1,a=[0,1],d=[],f=[0,0],r=!1,i=[],h=!1,l=0,u=1,o=!1,n={},y=!0,s=1,b=function(t){var e,r,n,o,a,s;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===At(t)&&null!=S.brewer&&(t=S.brewer[t]||S.brewer[t.toLowerCase()]||t),"array"===At(t)){for(1===t.length&&(t=[t[0],t[0]]),t=t.slice(0),e=n=0,o=t.length-1;0<=o?n<=o:n>=o;e=0<=o?++n:--n)r=t[e],"string"===At(r)&&(t[e]=S(r));for(d.length=0,e=s=0,a=t.length-1;0<=a?s<=a:s>=a;e=0<=a?++s:--s)d.push(e/(t.length-1))}return x(),i=t},g=function(t){var e,n;if(null!=r){n=r.length-1,e=0;while(e<n&&t>=r[e])e++;return e-1}return 0},w=function(t){return t},function(t){var e,n,i,o,a;return a=t,r.length>2&&(o=r.length-1,e=g(t),i=r[0]+(r[1]-r[0])*(0+.5*m),n=r[o-1]+(r[o]-r[o-1])*(1-.5*m),a=l+(r[e]+.5*(r[e+1]-r[e])-i)/(n-i)*(u-l)),a},_=function(t,e){var o,a,h,m,v,_,x,b;if(null==e&&(e=!1),isNaN(t)||null===t)return p;if(e?b=t:r&&r.length>2?(o=g(t),b=o/(r.length-2)):b=u!==l?(t-l)/(u-l):1,e||(b=w(b)),1!==s&&(b=ot(b,s)),b=f[0]+b*(1-f[0]-f[1]),b=Math.min(1,Math.max(0,b)),m=Math.floor(1e4*b),y&&n[m])a=n[m];else{if("array"===At(i))for(h=v=0,x=d.length-1;0<=x?v<=x:v>=x;h=0<=x?++v:--v){if(_=d[h],b<=_){a=i[h];break}if(b>=_&&h===d.length-1){a=i[h];break}if(b>_&&b<d[h+1]){b=(b-_)/(d[h+1]-_),a=S.interpolate(i[h],i[h+1],b,c);break}}else"function"===At(i)&&(a=i(b));y&&(n[m]=a)}return a},x=function(){return n={}},b(t),v=function(t){var e;return e=S(_(t)),h&&e[h]?e[h]():e},v.classes=function(t){var e;return null!=t?("array"===At(t)?(r=t,a=[t[0],t[t.length-1]]):(e=S.analyze(a),r=0===t?[e.min,e.max]:S.limits(e,"e",t)),v):r},v.domain=function(t){var e,r,n,o,s,c,p;if(!arguments.length)return a;if(l=t[0],u=t[t.length-1],d=[],n=i.length,t.length===n&&l!==u)for(s=0,o=t.length;s<o;s++)r=t[s],d.push((r-l)/(u-l));else for(e=p=0,c=n-1;0<=c?p<=c:p>=c;e=0<=c?++p:--p)d.push(e/(n-1));return a=[l,u],v},v.mode=function(t){return arguments.length?(c=t,x(),v):c},v.range=function(t,e){return b(t,e),v},v.out=function(t){return h=t,v},v.spread=function(t){return arguments.length?(m=t,v):m},v.correctLightness=function(t){return null==t&&(t=!0),o=t,x(),w=o?function(t){var e,r,n,i,o,a,s,u,l;e=_(0,!0).lab()[0],r=_(1,!0).lab()[0],s=e>r,n=_(t,!0).lab()[0],o=e+(r-e)*t,i=n-o,u=0,l=1,a=20;while(Math.abs(i)>.01&&a-- >0)(function(){s&&(i*=-1),i<0?(u=t,t+=.5*(l-t)):(l=t,t+=.5*(u-t)),n=_(t,!0).lab()[0],i=n-o})();return t}:function(t){return t},v},v.padding=function(t){return null!=t?("number"===At(t)&&(t=[t,t]),f=t,v):f},v.colors=function(e,n){var o,s,u,l,c,p,h,f;if(arguments.length<2&&(n="hex"),c=[],0===arguments.length)c=i.slice(0);else if(1===e)c=[v(.5)];else if(e>1)s=a[0],o=a[1]-s,c=function(){p=[];for(var t=0;0<=e?t<e:t>e;0<=e?t++:t--)p.push(t);return p}.apply(this).map(function(t){return v(s+t/(e-1)*o)});else{if(t=[],h=[],r&&r.length>2)for(u=f=1,l=r.length;1<=l?f<l:f>l;u=1<=l?++f:--f)h.push(.5*(r[u-1]+r[u]));else h=a;c=h.map(function(t){return v(t)})}return S[n]&&(c=c.map(function(t){return t[n]()})),c},v.cache=function(t){return null!=t?(y=t,v):y},v.gamma=function(t){return null!=t?(s=t,v):s},v.nodata=function(t){return null!=t?(p=S(t),v):p},v},null==S.scales&&(S.scales={}),S.scales.cool=function(){return S.scale([S.hsl(180,1,.9),S.hsl(250,.7,.4)])},S.scales.hot=function(){return S.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},S.analyze=function(t,e,r){var n,i,o,a,s,u,l;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),n=function(t){null==t||isNaN(t)||(s.values.push(t),s.sum+=t,t<s.min&&(s.min=t),t>s.max&&(s.max=t),s.count+=1)},l=function(t,i){if(r(t,i))return null!=e&&"function"===At(e)?n(e(t)):null!=e&&"string"===At(e)||"number"===At(e)?n(t[e]):n(t)},"array"===At(t))for(a=0,o=t.length;a<o;a++)u=t[a],l(u);else for(i in t)u=t[i],l(u,i);return s.domain=[s.min,s.max],s.limits=function(t,e){return S.limits(s,t,e)},s},S.limits=function(t,e,r){var n,i,o,a,s,u,l,c,p,h,f,d,m,v,g,_,x,b,w,E,T,A,k,I,C,P,z,L,D,O,B,R,F,U,j,N,V,q,Z,G,X,W,$,H,K,J,Q,et,rt,nt,it,at,st,ut,lt;if(null==e&&(e="equal"),null==r&&(r=7),"array"===At(t)&&(t=S.analyze(t)),C=t.min,tt=t.max,t.sum,ut=t.values.sort(function(t,e){return t-e}),1===r)return[C,tt];if(k=[],"c"===e.substr(0,1)&&(k.push(C),k.push(tt)),"e"===e.substr(0,1)){for(k.push(C),E=B=1,j=r-1;1<=j?B<=j:B>=j;E=1<=j?++B:--B)k.push(C+E/r*(tt-C));k.push(tt)}else if("l"===e.substr(0,1)){if(C<=0)throw"Logarithmic scales are only possible for values > 0";for(P=Math.LOG10E*Y(C),I=Math.LOG10E*Y(tt),k.push(C),E=lt=1,N=r-1;1<=N?lt<=N:lt>=N;E=1<=N?++lt:--lt)k.push(ot(10,P+E/r*(I-P)));k.push(tt)}else if("q"===e.substr(0,1)){for(k.push(C),E=n=1,W=r-1;1<=W?n<=W:n>=W;E=1<=W?++n:--n)R=(ut.length-1)*E/r,F=M(R),F===R?k.push(ut[F]):(U=R-F,k.push(ut[F]*(1-U)+ut[F+1]*U));k.push(tt)}else if("k"===e.substr(0,1)){for(L=ut.length,v=new Array(L),b=new Array(r),nt=!0,D=0,_=null,_=[],_.push(C),E=i=1,$=r-1;1<=$?i<=$:i>=$;E=1<=$?++i:--i)_.push(C+E/r*(tt-C));_.push(tt);while(nt){for(T=o=0,H=r-1;0<=H?o<=H:o>=H;T=0<=H?++o:--o)b[T]=0;for(E=a=0,K=L-1;0<=K?a<=K:a>=K;E=0<=K?++a:--a){for(st=ut[E],z=Number.MAX_VALUE,T=s=0,J=r-1;0<=J?s<=J:s>=J;T=0<=J?++s:--s)w=y(_[T]-st),w<z&&(z=w,g=T);b[g]++,v[E]=g}for(O=new Array(r),T=u=0,Q=r-1;0<=Q?u<=Q:u>=Q;T=0<=Q?++u:--u)O[T]=null;for(E=l=0,et=L-1;0<=et?l<=et:l>=et;E=0<=et?++l:--l)x=v[E],null===O[x]?O[x]=ut[E]:O[x]+=ut[E];for(T=c=0,rt=r-1;0<=rt?c<=rt:c>=rt;T=0<=rt?++c:--c)O[T]*=1/b[T];for(nt=!1,T=p=0,V=r-1;0<=V?p<=V:p>=V;T=0<=V?++p:--p)if(O[T]!==_[E]){nt=!0;break}_=O,D++,D>200&&(nt=!1)}for(A={},T=h=0,q=r-1;0<=q?h<=q:h>=q;T=0<=q?++h:--h)A[T]=[];for(E=f=0,Z=L-1;0<=Z?f<=Z:f>=Z;E=0<=Z?++f:--f)x=v[E],A[x].push(ut[E]);for(it=[],T=d=0,G=r-1;0<=G?d<=G:d>=G;T=0<=G?++d:--d)it.push(A[T][0]),it.push(A[T][A[T].length-1]);for(it=it.sort(function(t,e){return t-e}),k.push(it[0]),E=m=1,X=it.length-1;m<=X;E=m+=2)at=it[E],isNaN(at)||-1!==k.indexOf(at)||k.push(at)}return k},D=function(t,e,r){var n,i,o,a;return n=kt(arguments),t=n[0],e=n[1],r=n[2],isNaN(t)&&(t=0),t/=360,t<1/3?(i=(1-e)/3,a=(1+e*A(c*t)/A(u-c*t))/3,o=1-(i+a)):t<2/3?(t-=1/3,a=(1-e)/3,o=(1+e*A(c*t)/A(u-c*t))/3,i=1-(a+o)):(t-=2/3,o=(1-e)/3,i=(1+e*A(c*t)/A(u-c*t))/3,a=1-(o+i)),a=K(r*a*3),o=K(r*o*3),i=K(r*i*3),[255*a,255*o,255*i,n.length>3?n[3]:1]},ct=function(){var t,e,r,n,i,o,a,s;return a=kt(arguments),o=a[0],e=a[1],t=a[2],c=2*Math.PI,o/=255,e/=255,t/=255,i=Math.min(o,e,t),n=(o+e+t)/3,s=1-i/n,0===s?r=0:(r=(o-e+(o-t))/2,r/=Math.sqrt((o-e)*(o-e)+(o-t)*(e-t)),r=Math.acos(r),t>e&&(r=c-r),r/=c),[360*r,s,n]},S.hsi=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(i,Mt.call(arguments).concat(["hsi"]),function(){})},d.hsi=D,i.prototype.hsi=function(){return ct(this._rgb)},U=function(t,e,r,n){var i,o,a,s,u,l,c,p,h,f,d,m;return"hsl"===n?(d=t.hsl(),m=e.hsl()):"hsv"===n?(d=t.hsv(),m=e.hsv()):"hcg"===n?(d=t.hcg(),m=e.hcg()):"hsi"===n?(d=t.hsi(),m=e.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",d=t.hcl(),m=e.hcl()),"h"===n.substr(0,1)&&(a=d[0],h=d[1],l=d[2],s=m[0],f=m[1],c=m[2]),isNaN(a)||isNaN(s)?isNaN(a)?isNaN(s)?o=Number.NaN:(o=s,1!==l&&0!==l||"hsv"===n||(p=f)):(o=a,1!==c&&0!==c||"hsv"===n||(p=h)):(i=s>a&&s-a>180?s-(a+360):s<a&&a-s>180?s+360-a:s-a,o=a+r*i),null==p&&(p=h+r*(f-h)),u=l+r*(c-l),S[n](o,p,u)},m=m.concat(function(){var t,e,r,n;for(r=["hsv","hsl","hsi","hcl","lch","hcg"],n=[],e=0,t=r.length;e<t;e++)Q=r[e],n.push([Q,U]);return n}()),V=function(t,e,r,n){var i,o;return i=t.num(),o=e.num(),S.num(i+(o-i)*r,"num")},m.push(["num",V]),j=function(t,e,r,n){var o,a;return o=t.lab(),a=e.lab(),new i(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),n)},m.push(["lab",j])}).call(this)}).call(this,r("62e4")(t))},"626a":function(t,e,r){var n=r("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},"62a0":function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"63b6":function(t,e,r){var n=r("e53d"),i=r("584a"),o=r("d864"),a=r("35e8"),s=r("07e3"),u="prototype",l=function(t,e,r){var c,p,h,f=t&l.F,d=t&l.G,m=t&l.S,y=t&l.P,v=t&l.B,g=t&l.W,_=d?i:i[e]||(i[e]={}),x=_[u],b=d?n:m?n[e]:(n[e]||{})[u];for(c in d&&(r=e),r)p=!f&&b&&void 0!==b[c],p&&s(_,c)||(h=p?b[c]:r[c],_[c]=d&&"function"!=typeof b[c]?r[c]:v&&p?o(h,n):g&&b[c]==h?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e[u]=t[u],e}(h):y&&"function"==typeof h?o(Function.call,h):h,y&&((_.virtual||(_.virtual={}))[c]=h,t&l.R&&x&&!x[c]&&a(x,c,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},"656e":function(t,e,r){"use strict";var n=r("79aa");function i(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=n(e),this.reject=n(r)}t.exports.f=function(t){return new i(t)}},6821:function(t,e,r){var n=r("626a"),i=r("be13");t.exports=function(t){return n(i(t))}},"696e":function(t,e,r){r("c207"),r("1654"),r("6c1c"),r("24c5"),r("3c11"),r("43fc"),t.exports=r("584a").Promise},"69a8":function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},"6a99":function(t,e,r){var n=r("d3f4");t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"6b4c":function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},"6c1c":function(t,e,r){r("c367");for(var n=r("e53d"),i=r("35e8"),o=r("481b"),a=r("5168")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=n[l],p=c&&c.prototype;p&&!p[a]&&i(p,a,l),o[l]=o.Array}},"71c1":function(t,e,r){var n=r("3a38"),i=r("25eb");t.exports=function(t){return function(e,r){var o,a,s=String(i(e)),u=n(r),l=s.length;return u<0||u>=l?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},7514:function(t,e,r){"use strict";var n=r("5ca1"),i=r("0a49")(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(o)},7726:function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},"77f1":function(t,e,r){var n=r("4588"),i=Math.max,o=Math.min;t.exports=function(t,e){return t=n(t),t<0?i(t+e,0):o(t,e)}},7914:function(t,e,r){"use strict";r("b2e9")},"794b":function(t,e,r){t.exports=!r("8e60")&&!r("294c")(function(){return 7!=Object.defineProperty(r("1ec9")("div"),"a",{get:function(){return 7}}).a})},"795b":function(t,e,r){t.exports=r("696e")},"79aa":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7a56":function(t,e,r){"use strict";var n=r("7726"),i=r("86cc"),o=r("9e1e"),a=r("2b4c")("species");t.exports=function(t){var e=n[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},"7cd6":function(t,e,r){var n=r("40c3"),i=r("5168")("iterator"),o=r("481b");t.exports=r("584a").getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[n(t)]}},"7d7b":function(t,e,r){var n=r("e4ae"),i=r("7cd6");t.exports=r("584a").getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},"7e90":function(t,e,r){var n=r("d9f6"),i=r("e4ae"),o=r("c3a1");t.exports=r("8e60")?Object.defineProperties:function(t,e){i(t);var r,a=o(e),s=a.length,u=0;while(s>u)n.f(t,r=a[u++],e[r]);return t}},"7f20":function(t,e,r){var n=r("86cc").f,i=r("69a8"),o=r("2b4c")("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},8079:function(t,e,r){var n=r("7726"),i=r("1991").set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u="process"==r("2d95")(a);t.exports=function(){var t,e,r,l=function(){var n,i;u&&(n=a.domain)&&n.exit();while(t){i=t.fn,t=t.next;try{i()}catch(o){throw t?r():e=void 0,o}}e=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(l)};else if(!o||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);r=function(){c.then(l)}}else r=function(){i.call(n,l)};else{var p=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),r=function(){h.data=p=!p}}return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,r()),e=i}}},8378:function(t,e){var r=t.exports={version:"2.6.2"};"number"==typeof __e&&(__e=r)},8436:function(t,e){t.exports=function(){}},"84f2":function(t,e){t.exports={}},"86cc":function(t,e,r){var n=r("cb7c"),i=r("c69a"),o=r("6a99"),a=Object.defineProperty;e.f=r("9e1e")?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return a(t,e,r)}catch(s){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},"8a83":function(t,e,r){r("2a47"),t.exports=r("584a").Number.isFinite},"8aae":function(t,e,r){r("32a6"),t.exports=r("584a").Object.keys},"8e60":function(t,e,r){t.exports=!r("294c")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"8f60":function(t,e,r){"use strict";var n=r("a159"),i=r("aebd"),o=r("45f2"),a={};r("35e8")(a,r("5168")("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(a,{next:i(1,r)}),o(t,e+" Iterator")}},9138:function(t,e,r){t.exports=r("35e8")},"948e":function(t,e,r){},"96cf":function(t,e){!function(e){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",l="object"===typeof t,c=e.regeneratorRuntime;if(c)l&&(t.exports=c);else{c=e.regeneratorRuntime=l?t.exports:{},c.wrap=x;var p="suspendedStart",h="suspendedYield",f="executing",d="completed",m={},y={};y[a]=function(){return this};var v=Object.getPrototypeOf,g=v&&v(v(z([])));g&&g!==n&&i.call(g,a)&&(y=g);var _=E.prototype=w.prototype=Object.create(y);S.prototype=_.constructor=E,E.constructor=S,E[u]=S.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(_),t},c.awrap=function(t){return{__await:t}},T(A.prototype),A.prototype[s]=function(){return this},c.AsyncIterator=A,c.async=function(t,e,r,n){var i=new A(x(t,e,r,n));return c.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},T(_),_[u]="Generator",_[a]=function(){return this},_.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},c.values=z,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return s.type="throw",s.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:z(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),m}}}function x(t,e,r,n){var i=e&&e.prototype instanceof w?e:w,o=Object.create(i.prototype),a=new M(n||[]);return o._invoke=k(t,r,a),o}function b(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}function w(){}function S(){}function E(){}function T(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function A(t){function e(r,n,o,a){var s=b(t[r],t,n);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"===typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(l).then(function(t){u.value=t,o(u)},function(t){return e("throw",t,o,a)})}a(s.arg)}var r;function n(t,n){function i(){return new Promise(function(r,i){e(t,n,r,i)})}return r=r?r.then(i,i):i()}this._invoke=n}function k(t,e,r){var n=p;return function(i,o){if(n===f)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw o;return L()}r.method=i,r.arg=o;while(1){var a=r.delegate;if(a){var s=I(a,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var u=b(t,e,r);if("normal"===u.type){if(n=r.done?d:h,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}function I(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,I(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=b(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,m):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function z(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){while(++n<t.length)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:r,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},"9b43":function(t,e,r){var n=r("d8e8");t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,r){var n=r("2b4c")("unscopables"),i=Array.prototype;void 0==i[n]&&r("32e9")(i,n,{}),t.exports=function(t){i[n][t]=!0}},"9c80":function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},"9def":function(t,e,r){var n=r("4588"),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},"9e1e":function(t,e,r){t.exports=!r("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a14d:function(t){t.exports={paints:["fill-antialias","fill-opacity","fill-color","fill-outline-color","fill-translate","fill-translate-anchor","fill-pattern","fill-extrusion-opacity","fill-extrusion-color","fill-extrusion-translate","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-height","fill-extrusion-base","fill-extrusion-vertical-gradient","line-opacity","line-color","line-translate","line-translate-anchor","line-width","line-gap-width","line-offset","line-blur","line-dasharray","line-pattern","line-gradient","circle-radius","circle-color","circle-blur","circle-opacity","circle-translate","circle-translate-anchor","circle-pitch-scale","circle-pitch-alignment","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","heatmap-radius","heatmap-weight","heatmap-intensity","heatmap-color","heatmap-opacity","icon-opacity","icon-color","icon-halo-color","icon-halo-width","icon-halo-blur","icon-translate","icon-translate-anchor","text-opacity","text-color","text-halo-color","text-halo-width","text-halo-blur","text-translate","text-translate-anchor","raster-opacity","raster-hue-rotate","raster-brightness-min","raster-brightness-max","raster-saturation","raster-contrast","raster-resampling","raster-fade-duration","hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-shadow-color","hillshade-highlight-color","hillshade-accent-color","background-color","background-pattern","background-opacity"],layouts:["visibility","fill-sort-key","circle-sort-key","line-cap","line-join","line-miter-limit","line-round-limit","line-sort-key","symbol-placement","symbol-spacing","symbol-avoid-edges","symbol-sort-key","symbol-z-order","icon-allow-overlap","icon-ignore-placement","icon-optional","icon-rotation-alignment","icon-size","icon-text-fit","icon-text-fit-padding","icon-image","icon-rotate","icon-padding","icon-keep-upright","icon-offset","icon-anchor","icon-pitch-alignment","text-pitch-alignment","text-rotation-alignment","text-field","text-font","text-size","text-max-width","text-line-height","text-letter-spacing","text-justify","text-radial-offset","text-variable-anchor","text-anchor","text-max-angle","text-writing-mode","text-rotate","text-padding","text-keep-upright","text-transform","text-offset","text-allow-overlap","text-ignore-placement","text-optional"]}},a159:function(t,e,r){var n=r("e4ae"),i=r("7e90"),o=r("1691"),a=r("5559")("IE_PROTO"),s=function(){},u="prototype",l=function(){var t,e=r("1ec9")("iframe"),n=o.length,i="<",a=">";e.style.display="none",r("32fc").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+a+"document.F=Object"+i+"/script"+a),t.close(),l=t.F;while(n--)delete l[u][o[n]];return l()};t.exports=Object.create||function(t,e){var r;return null!==t?(s[u]=n(t),r=new s,s[u]=null,r[a]=t):r=l(),void 0===e?r:i(r,e)}},a22a:function(t,e,r){var n=r("d864"),i=r("b0dc"),o=r("3702"),a=r("e4ae"),s=r("b447"),u=r("7cd6"),l={},c={};e=t.exports=function(t,e,r,p,h){var f,d,m,y,v=h?function(){return t}:u(t),g=n(r,p,e?2:1),_=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(o(v)){for(f=s(t.length);f>_;_++)if(y=e?g(a(d=t[_])[0],d[1]):g(t[_]),y===l||y===c)return y}else for(m=v.call(t);!(d=m.next()).done;)if(y=i(m,g,d.value,e),y===l||y===c)return y};e.BREAK=l,e.RETURN=c},a25f:function(t,e,r){var n=r("7726"),i=n.navigator;t.exports=i&&i.userAgent||""},a481:function(t,e,r){"use strict";var n=r("cb7c"),i=r("4bf8"),o=r("9def"),a=r("4588"),s=r("0390"),u=r("5f1b"),l=Math.max,c=Math.min,p=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,d=function(t){return void 0===t?t:String(t)};r("214f")("replace",2,function(t,e,r,m){return[function(n,i){var o=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},function(t,e){var i=m(r,t,this,e);if(i.done)return i.value;var p=n(t),h=String(this),f="function"===typeof e;f||(e=String(e));var v=p.global;if(v){var g=p.unicode;p.lastIndex=0}var _=[];while(1){var x=u(p,h);if(null===x)break;if(_.push(x),!v)break;var b=String(x[0]);""===b&&(p.lastIndex=s(h,o(p.lastIndex),g))}for(var w="",S=0,E=0;E<_.length;E++){x=_[E];for(var T=String(x[0]),A=l(c(a(x.index),h.length),0),k=[],I=1;I<x.length;I++)k.push(d(x[I]));var C=x.groups;if(f){var P=[T].concat(k,A,h);void 0!==C&&P.push(C);var M=String(e.apply(void 0,P))}else M=y(T,h,A,k,C,e);A>=S&&(w+=h.slice(S,A)+M,S=A+T.length)}return w+h.slice(S)}];function y(t,e,n,o,a,s){var u=n+t.length,l=o.length,c=f;return void 0!==a&&(a=i(a),c=h),r.call(s,c,function(r,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(u);case"<":s=a[i.slice(1,-1)];break;default:var c=+i;if(0===c)return r;if(c>l){var h=p(c/10);return 0===h?r:h<=l?void 0===o[h-1]?i.charAt(1):o[h-1]+i.charAt(1):r}s=o[c-1]}return void 0===s?"":s})}})},a4bb:function(t,e,r){t.exports=r("8aae")},a5b8:function(t,e,r){"use strict";var n=r("d8e8");function i(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=n(e),this.reject=n(r)}t.exports.f=function(t){return new i(t)}},a5e0:function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&null!=t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},ab8c:function(t,e,r){t.exports=r("8a83")},aba2:function(t,e,r){var n=r("e53d"),i=r("4178").set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u="process"==r("6b4c")(a);t.exports=function(){var t,e,r,l=function(){var n,i;u&&(n=a.domain)&&n.exit();while(t){i=t.fn,t=t.next;try{i()}catch(o){throw t?r():e=void 0,o}}e=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(l)};else if(!o||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);r=function(){c.then(l)}}else r=function(){i.call(n,l)};else{var p=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),r=function(){h.data=p=!p}}return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,r()),e=i}}},ac6d:function(t,e,r){},aebd:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},b0c5:function(t,e,r){"use strict";var n=r("520a");r("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},b0dc:function(t,e,r){var n=r("e4ae");t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(a){var o=t["return"];throw void 0!==o&&n(o.call(t)),a}}},b2e9:function(t,e,r){"use strict";function n(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}r.r(e);var i=function(t,e){return fetch(t,e).then(n)};function o(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}var a=function(t,e){return fetch(t,e).then(o)},s={},u={},l=34,c=10,p=13;function h(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function f(t,e){var r=h(t);return function(n,i){return e(r(n),i,t)}}function d(t){var e=Object.create(null),r=[];return t.forEach(function(t){for(var n in t)n in e||r.push(e[n]=n)}),r}function m(t,e){var r=t+"",n=r.length;return n<e?new Array(e-n+1).join(0)+r:r}function y(t){return t<0?"-"+m(-t,6):t>9999?"+"+m(t,6):m(t,4)}function v(t){var e=t.getUTCHours(),r=t.getUTCMinutes(),n=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":y(t.getUTCFullYear(),4)+"-"+m(t.getUTCMonth()+1,2)+"-"+m(t.getUTCDate(),2)+(i?"T"+m(e,2)+":"+m(r,2)+":"+m(n,2)+"."+m(i,3)+"Z":n?"T"+m(e,2)+":"+m(r,2)+":"+m(n,2)+"Z":r||e?"T"+m(e,2)+":"+m(r,2)+"Z":"")}var g=function(t){var e=new RegExp('["'+t+"\n\r]"),r=t.charCodeAt(0);function n(t,e){var r,n,o=i(t,function(t,i){if(r)return r(t,i-1);n=t,r=e?f(t,e):h(t)});return o.columns=n||[],o}function i(t,e){var n,i=[],o=t.length,a=0,h=0,f=o<=0,d=!1;function m(){if(f)return u;if(d)return d=!1,s;var e,n,i=a;if(t.charCodeAt(i)===l){while(a++<o&&t.charCodeAt(a)!==l||t.charCodeAt(++a)===l);return(e=a)>=o?f=!0:(n=t.charCodeAt(a++))===c?d=!0:n===p&&(d=!0,t.charCodeAt(a)===c&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}while(a<o){if((n=t.charCodeAt(e=a++))===c)d=!0;else if(n===p)d=!0,t.charCodeAt(a)===c&&++a;else if(n!==r)continue;return t.slice(i,e)}return f=!0,t.slice(i,o)}t.charCodeAt(o-1)===c&&--o,t.charCodeAt(o-1)===p&&--o;while((n=m())!==u){var y=[];while(n!==s&&n!==u)y.push(n),n=m();e&&null==(y=e(y,h++))||i.push(y)}return i}function o(e,r){return e.map(function(e){return r.map(function(t){return _(e[t])}).join(t)})}function a(e,r){return null==r&&(r=d(e)),[r.map(_).join(t)].concat(o(e,r)).join("\n")}function m(t,e){return null==e&&(e=d(t)),o(t,e).join("\n")}function y(t){return t.map(g).join("\n")}function g(e){return e.map(_).join(t)}function _(t){return null==t?"":t instanceof Date?v(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:n,parseRows:i,format:a,formatBody:m,formatRows:y,formatRow:g,formatValue:_}},_=g(","),x=_.parse,b=(_.parseRows,_.format,_.formatBody,_.formatRows,_.formatRow,_.formatValue,g("\t")),w=b.parse;b.parseRows,b.format,b.formatBody,b.formatRows,b.formatRow,b.formatValue;function S(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var E=function(t,e){return fetch(t,e).then(S)};function T(t){return function(e,r,n){return 2===arguments.length&&"function"===typeof r&&(n=r,r=void 0),E(e,r).then(function(e){return t(e,n)})}}function A(t,e,r,n){3===arguments.length&&"function"===typeof r&&(n=r,r=void 0);var i=g(t);return E(e,r).then(function(t){return i.parse(t,n)})}var k=T(x),I=T(w),C=function(t,e){return new Promise(function(r,n){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=n,i.onload=function(){r(i)},i.src=t})};function P(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}var M=function(t,e){return fetch(t,e).then(P)};function z(t){return function(e,r){return E(e,r).then(function(e){return(new DOMParser).parseFromString(e,t)})}}var L=z("application/xml"),D=z("text/html"),O=z("image/svg+xml");r.d(e,"blob",function(){return i}),r.d(e,"buffer",function(){return a}),r.d(e,"dsv",function(){return A}),r.d(e,"csv",function(){return k}),r.d(e,"tsv",function(){return I}),r.d(e,"image",function(){return C}),r.d(e,"json",function(){return M}),r.d(e,"text",function(){return E}),r.d(e,"xml",function(){return L}),r.d(e,"html",function(){return D}),r.d(e,"svg",function(){return O})},b3a1:function(t,e,r){"use strict";function n(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}var i=n(r("160b"));function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=new Error("Syntax error");return r.type="SyntaxError",r.index=t.index,r.description=t.description||t.message,/expression/.test(r.description)&&(r.description=r.description.replace("expression","value")),"Unexpected "===r.description&&(r.description="Unexpected input"),/literal\(\s*{/.test(e)&&(r.description="Only array arguments are supported for the literal expression"),r}function a(t){switch(t.type){case"ArrayExpression":return t.elements.map(function(t){return"Literal"===t.type?t.value:a(t)});default:throw o(new Error("Invalid syntax"))}}function s(t){if("Identifier"===t.type)throw o(new Error("Unexpected identifier"));if(void 0!==t.value)return t.value;if(void 0!==t.name)return t.name;var e=void 0,r=[];if("ArrayExpression"===t.type)return t.elements.map(s);if("UnaryExpression"===t.type&&(e=t.operator,r.push(s(t.argument))),"BinaryExpression"===t.type){e="&"===t.operator?"concat":t.operator;var n=function(t){"concat"===e&&Array.isArray(t)&&"concat"===t[0]?r=r.concat(t.slice(1)):r.push(t)};n(s(t.left)),n(s(t.right))}return"CallExpression"===t.type&&(e=t.callee.name,"literal"===e?r=r.concat(t.arguments.map(a)):t.arguments.forEach(function(t){r.push(s(t))})),/[a-z]+_[a-z]+/.test(e)&&(e=e.replace(/([a-z]+)_([a-z]+)/,"$1-$2")),[e].concat(r)}function u(t){if(""!==t&&void 0!==t){if("string"!==typeof t)throw new Error("input must be a string");t=t.replace(/([a-z]+)-([a-z]+)\(/,"$1_$2(");var e=void 0;try{e=i(t)}catch(n){throw o(n,t)}var r=s(e);return r}}i.addBinaryOp("^",15);var l=new Set;function c(t){var e=t.map(function(t){return Array.isArray(t)?c(t):JSON.stringify(t)});return"["+e.join(", ")+"]"}function p(t){return"!"!==t&&/^[^a-zA-Z]/.test(t)}function h(t){if(!Array.isArray(t))throw new Error("Input must be an array");var e=t[0];if(!l.has(e))return c(t);if("literal"===e){var r=t[1];if(!Array.isArray(r))throw new Error("Only array arguments are supported for the literal expression");return e+"("+c(r)+")"}var n=t.slice(1).map(function(t){if("string"===typeof t)return'"'+t+'"';if(!Array.isArray(t))return t;var r=t[0],n=h(t);return/^[+-]$/.test(r)&&/^[*\/%]$/.test(e)||"^"===e?"("+n+")":n});return"^"===e?""+n.join(e):p(e)?""+n.join(" "+e+" "):"concat"===e?n.join(" & "):e+"("+n.join(", ")+")"}l.add("let"),l.add("var"),l.add("literal"),l.add("array"),l.add("at"),l.add("case"),l.add("match"),l.add("coalesce"),l.add("step"),l.add("interpolate"),l.add("ln2"),l.add("pi"),l.add("e"),l.add("typeof"),l.add("string"),l.add("number"),l.add("boolean"),l.add("object"),l.add("to-string"),l.add("to-number"),l.add("to-boolean"),l.add("to-rgba"),l.add("to-color"),l.add("rgb"),l.add("rgba"),l.add("get"),l.add("has"),l.add("length"),l.add("properties"),l.add("feature-state"),l.add("geometry-type"),l.add("id"),l.add("zoom"),l.add("heatmap-density"),l.add("line-progress"),l.add("+"),l.add("*"),l.add("-"),l.add("/"),l.add("%"),l.add("^"),l.add("sqrt"),l.add("log10"),l.add("ln"),l.add("log2"),l.add("sin"),l.add("cos"),l.add("tan"),l.add("asin"),l.add("acos"),l.add("atan"),l.add("min"),l.add("max"),l.add("round"),l.add("abs"),l.add("ceil"),l.add("floor"),l.add("=="),l.add("!="),l.add(">"),l.add("<"),l.add(">="),l.add("<="),l.add("all"),l.add("any"),l.add("!"),l.add("upcase"),l.add("downcase"),l.add("concat");var f={formulaToExpression:u,expressionToFormula:h};t.exports=f},b447:function(t,e,r){var n=r("3a38"),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},b8e3:function(t,e){t.exports=!0},bc13:function(t,e,r){var n=r("e53d"),i=n.navigator;t.exports=i&&i.userAgent||""},bcaa:function(t,e,r){var n=r("cb7c"),i=r("d3f4"),o=r("a5b8");t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t),a=r.resolve;return a(e),r.promise}},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},c207:function(t,e){},c366:function(t,e,r){var n=r("6821"),i=r("9def"),o=r("77f1");t.exports=function(t){return function(e,r,a){var s,u=n(e),l=i(u.length),c=o(a,l);if(t&&r!=r){while(l>c)if(s=u[c++],s!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===r)return t||c||0;return!t&&-1}}},c367:function(t,e,r){"use strict";var n=r("8436"),i=r("50ed"),o=r("481b"),a=r("36c3");t.exports=r("30f1")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},c3a1:function(t,e,r){var n=r("e6f3"),i=r("1691");t.exports=Object.keys||function(t){return n(t,i)}},c69a:function(t,e,r){t.exports=!r("9e1e")&&!r("79e5")(function(){return 7!=Object.defineProperty(r("230e")("div"),"a",{get:function(){return 7}}).a})},c8ba:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}t.exports=r},ca5a:function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},cadf:function(t,e,r){"use strict";var n=r("9c6c"),i=r("d53b"),o=r("84f2"),a=r("6821");t.exports=r("01f9")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},cb7c:function(t,e,r){var n=r("d3f4");t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},cd1c:function(t,e,r){var n=r("e853");t.exports=function(t,e){return new(n(t))(e)}},cd78:function(t,e,r){var n=r("e4ae"),i=r("f772"),o=r("656e");t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t),a=r.resolve;return a(e),r.promise}},ce10:function(t,e,r){var n=r("69a8"),i=r("6821"),o=r("c366")(!1),a=r("613b")("IE_PROTO");t.exports=function(t,e){var r,s=i(t),u=0,l=[];for(r in s)r!=a&&n(s,r)&&l.push(r);while(e.length>u)n(s,r=e[u++])&&(~o(l,r)||l.push(r));return l}},ce7e:function(t,e,r){var n=r("63b6"),i=r("584a"),o=r("294c");t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],a={};a[t]=e(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},d09f:function(t,e,r){!function(t,r){r(e)}(0,function(t){"use strict";function e(t){if(0===t.length)return 0;for(var e,r=t[0],n=0,i=1;i<t.length;i++)e=r+t[i],Math.abs(r)>=Math.abs(t[i])?n+=r-e+t[i]:n+=t[i]-e+r,r=e;return r+n}function r(t){if(0===t.length)throw new Error("mean requires at least one data point");return e(t)/t.length}function n(t,e){var n,i,o=r(t),a=0;if(2===e)for(i=0;i<t.length;i++)a+=(n=t[i]-o)*n;else for(i=0;i<t.length;i++)a+=Math.pow(t[i]-o,e);return a}function i(t){if(0===t.length)throw new Error("variance requires at least one data point");return n(t,2)/t.length}function o(t){if(1===t.length)return 0;var e=i(t);return Math.sqrt(e)}function a(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var e=t[0],r=NaN,n=0,i=1,o=1;o<t.length+1;o++)t[o]!==e?(n<i&&(n=i,r=e),i=1,e=t[o]):i++;return r}function s(t){return t.slice().sort(function(t,e){return t-e})}function u(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],r=1;r<t.length;r++)t[r]<e&&(e=t[r]);return e}function l(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],r=1;r<t.length;r++)t[r]>e&&(e=t[r]);return e}function c(t,e){var r=t.length*e;if(0===t.length)throw new Error("quantile requires at least one data point.");if(e<0||1<e)throw new Error("quantiles must be between 0 and 1");return 1===e?t[t.length-1]:0===e?t[0]:r%1!=0?t[Math.ceil(r)-1]:t.length%2==0?(t[r-1]+t[r])/2:t[r]}function p(t,e,r,n){for(r=r||0,n=n||t.length-1;r<n;){if(600<n-r){var i=n-r+1,o=e-r+1,a=Math.log(i),s=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*s*(i-s)/i);o-i/2<0&&(u*=-1),p(t,e,Math.max(r,Math.floor(e-o*s/i+u)),Math.min(n,Math.floor(e+(i-o)*s/i+u)))}var l=t[e],c=r,f=n;for(h(t,r,e),t[n]>l&&h(t,r,n);c<f;){for(h(t,c,f),c++,f--;t[c]<l;)c++;for(;t[f]>l;)f--}t[r]===l?h(t,r,f):h(t,++f,n),f<=e&&(r=f+1),e<=f&&(n=f-1)}}function h(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function f(t,e){var r=t.slice();if(Array.isArray(e)){!function(t,e){for(var r=[0],n=0;n<e.length;n++)r.push(y(t.length,e[n]));r.push(t.length-1),r.sort(m);for(var i=[0,r.length-1];i.length;){var o=Math.ceil(i.pop()),a=Math.floor(i.pop());if(!(o-a<=1)){var s=Math.floor((a+o)/2);d(t,r[s],r[a],r[o]),i.push(a,s,s,o)}}}(r,e);for(var n=[],i=0;i<e.length;i++)n[i]=c(r,e[i]);return n}return d(r,y(r.length,e),0,r.length-1),c(r,e)}function d(t,e,r,n){e%1==0?p(t,e,r,n):(p(t,e=Math.floor(e),r,n),p(t,e+1,e+1,n))}function m(t,e){return t-e}function y(t,e){var r=t*e;return 1===e?t-1:0===e?0:r%1!=0?Math.ceil(r)-1:t%2==0?r-.5:r}function v(t,e){if(e<t[0])return 0;if(e>t[t.length-1])return 1;var r=function(t,e){for(var r=0,n=0,i=t.length;n<i;)e<=t[r=n+i>>>1]?i=r:n=-~r;return n}(t,e);if(t[r]!==e)return r/t.length;r++;var n=function(t,e){for(var r=0,n=0,i=t.length;n<i;)e>=t[r=n+i>>>1]?n=-~r:i=r;return n}(t,e);if(n===r)return r/t.length;var i=n-r+1;return i*(n+r)/2/i/t.length}function g(t){var e=f(t,.75),r=f(t,.25);if("number"==typeof e&&"number"==typeof r)return e-r}function _(t){return+f(t,.5)}function x(t){for(var e=_(t),r=[],n=0;n<t.length;n++)r.push(Math.abs(t[n]-e));return _(r)}function b(t,e){e=e||Math.random;for(var r,n,i=t.length;0<i;)n=Math.floor(e()*i--),r=t[i],t[i]=t[n],t[n]=r;return t}function w(t,e){return b(t.slice().slice(),e)}function S(t){for(var e,r=0,n=0;n<t.length;n++)0!==n&&t[n]===e||(e=t[n],r++);return r}function E(t,e){for(var r=[],n=0;n<t;n++){for(var i=[],o=0;o<e;o++)i.push(0);r.push(i)}return r}function T(t,e,r,n){var i;if(0<t){var o=(r[e]-r[t-1])/(e-t+1);i=n[e]-n[t-1]-(e-t+1)*o*o}else i=n[e]-r[e]*r[e]/(e+1);return i<0?0:i}function A(t,e,r,n,i,o,a){if(!(e<t)){var s=Math.floor((t+e)/2);n[r][s]=n[r-1][s-1],i[r][s]=s;var u=r;r<t&&(u=Math.max(u,i[r][t-1]||0)),u=Math.max(u,i[r-1][s]||0);var l,c,p,h=s-1;e<n.length-1&&(h=Math.min(h,i[r][e+1]||0));for(var f=h;u<=f&&!((l=T(f,s,o,a))+n[r-1][u-1]>=n[r][s]);--f)(c=T(u,s,o,a)+n[r-1][u-1])<n[r][s]&&(n[r][s]=c,i[r][s]=u),u++,(p=l+n[r-1][f-1])<n[r][s]&&(n[r][s]=p,i[r][s]=f);A(t,s-1,r,n,i,o,a),A(s+1,e,r,n,i,o,a)}}function k(t,e){if(t.length!==e.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var n=r(t),i=r(e),o=0,a=0;a<t.length;a++)o+=(t[a]-n)*(e[a]-i);return o/(t.length-1)}function I(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return n(t,2)/(t.length-1)}function C(t){var e=I(t);return Math.sqrt(e)}function P(t,e,r,n){return(t*e+r*n)/(e+n)}function M(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var e=0,r=0;r<t.length;r++)e+=Math.pow(t[r],2);return Math.sqrt(e/t.length)}function z(){this.totalCount=0,this.data={}}function L(){this.weights=[],this.bias=0}z.prototype.train=function(t,e){for(var r in this.data[e]||(this.data[e]={}),t){var n=t[r];void 0===this.data[e][r]&&(this.data[e][r]={}),void 0===this.data[e][r][n]&&(this.data[e][r][n]=0),this.data[e][r][n]++}this.totalCount++},z.prototype.score=function(t){var e,r={};for(var n in t){var i=t[n];for(e in this.data)r[e]={},this.data[e][n]?r[e][n+"_"+i]=(this.data[e][n][i]||0)/this.totalCount:r[e][n+"_"+i]=0}var o={};for(e in r)for(var a in o[e]=0,r[e])o[e]+=r[e][a];return o},L.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var e=0,r=0;r<this.weights.length;r++)e+=this.weights[r]*t[r];return 0<(e+=this.bias)?1:0},L.prototype.train=function(t,e){if(0!==e&&1!==e)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var r=this.predict(t);if(r!==e){for(var n=e-r,i=0;i<this.weights.length;i++)this.weights[i]+=n*t[i];this.bias+=n}return this};var D=1e-4;function O(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var e=1,r=2;r<=t;r++)e*=r;return e}var B=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],R=Math.log(Math.sqrt(2*Math.PI)),F={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},U=Math.sqrt(2*Math.PI),j={gaussian:function(t){return Math.exp(-.5*t*t)/U}},N={nrd:function(t){var e=C(t),r=g(t);return"number"==typeof r&&(e=Math.min(e,r/1.34)),1.06*e*Math.pow(t.length,-.2)}};function V(t,e,r){var n,i;if(void 0===e)n=j.gaussian;else if("string"==typeof e){if(!j[e])throw new Error('Unknown kernel "'+e+'"');n=j[e]}else n=e;if(void 0===r)i=N.nrd(t);else if("string"==typeof r){if(!N[r])throw new Error('Unknown bandwidth method "'+r+'"');i=N[r](t)}else i=r;return function(e){var r=0,o=0;for(r=0;r<t.length;r++)o+=n((e-t[r])/i);return o/i/t.length}}var q=Math.sqrt(2*Math.PI);function Z(t){for(var e=t,r=t,n=1;n<15;n++)e+=r*=t*t/(2*n+1);return Math.round(1e4*(.5+e/q*Math.exp(-t*t/2)))/1e4}for(var G=[],X=0;X<=3.09;X+=.01)G.push(Z(X));function W(t){var e=1/(1+.5*Math.abs(t)),r=e*Math.exp(-Math.pow(t,2)-1.26551223+1.00002368*e+.37409196*Math.pow(e,2)+.09678418*Math.pow(e,3)-.18628806*Math.pow(e,4)+.27886807*Math.pow(e,5)-1.13520398*Math.pow(e,6)+1.48851587*Math.pow(e,7)-.82215223*Math.pow(e,8)+.17087277*Math.pow(e,9));return 0<=t?1-r:r-1}function $(t){var e=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),r=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*e)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/e)-(2/(Math.PI*e)+Math.log(1-t*t)/2));return 0<=t?r:-r}function H(t){if("number"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}t.linearRegression=function(t){var e,r,n=t.length;if(1===n)r=t[e=0][1];else{for(var i,o,a,s=0,u=0,l=0,c=0,p=0;p<n;p++)s+=o=(i=t[p])[0],u+=a=i[1],l+=o*o,c+=o*a;r=u/n-(e=(n*c-s*u)/(n*l-s*s))*s/n}return{m:e,b:r}},t.linearRegressionLine=function(t){return function(e){return t.b+t.m*e}},t.standardDeviation=o,t.rSquared=function(t,e){if(t.length<2)return 1;for(var r,n=0,i=0;i<t.length;i++)n+=t[i][1];r=n/t.length;for(var o=0,a=0;a<t.length;a++)o+=Math.pow(r-t[a][1],2);for(var s=0,u=0;u<t.length;u++)s+=Math.pow(t[u][1]-e(t[u][0]),2);return 1-s/o},t.mode=function(t){return a(s(t))},t.modeFast=function(t){for(var e,r=new Map,n=0,i=0;i<t.length;i++){var o=r.get(t[i]);void 0===o?o=1:o++,n<o&&(e=t[i],n=o),r.set(t[i],o)}if(0===n)throw new Error("mode requires at last one data point");return e},t.modeSorted=a,t.min=u,t.max=l,t.extent=function(t){if(0===t.length)throw new Error("extent requires at least one data point");for(var e=t[0],r=t[0],n=1;n<t.length;n++)t[n]>r&&(r=t[n]),t[n]<e&&(e=t[n]);return[e,r]},t.minSorted=function(t){return t[0]},t.maxSorted=function(t){return t[t.length-1]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.sum=e,t.sumSimple=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e},t.product=function(t){for(var e=1,r=0;r<t.length;r++)e*=t[r];return e},t.quantile=f,t.quantileSorted=c,t.quantileRank=function(t,e){return v(s(t),e)},t.quantileRankSorted=v,t.interquartileRange=g,t.iqr=g,t.medianAbsoluteDeviation=x,t.mad=x,t.chunk=function(t,e){var r=[];if(e<1)throw new Error("chunk size must be a positive number");if(Math.floor(e)!==e)throw new Error("chunk size must be an integer");for(var n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},t.sampleWithReplacement=function(t,e,r){if(0===t.length)return[];r=r||Math.random;for(var n=t.length,i=[],o=0;o<e;o++){var a=Math.floor(r()*n);i.push(t[a])}return i},t.shuffle=w,t.shuffleInPlace=b,t.sample=function(t,e,r){return w(t,r).slice(0,e)},t.ckmeans=function(t,e){if(e>t.length)throw new Error("cannot generate more classes than there are data values");var r=s(t);if(1===S(r))return[r];var n=E(e,r.length),i=E(e,r.length);!function(t,e,r){for(var n,i=e[0].length,o=t[Math.floor(i/2)],a=[],s=[],u=0;u<i;++u)n=t[u]-o,0===u?(a.push(n),s.push(n*n)):(a.push(a[u-1]+n),s.push(s[u-1]+n*n)),e[0][u]=T(0,u,a,s),r[0][u]=0;for(var l=1;l<e.length;++l)A(l<e.length-1?l:i-1,i-1,l,e,r,a,s)}(r,n,i);for(var o=[],a=i[0].length-1,u=i.length-1;0<=u;u--){var l=i[u][a];o[u]=r.slice(l,a+1),0<u&&(a=l-1)}return o},t.uniqueCountSorted=S,t.sumNthPowerDeviations=n,t.equalIntervalBreaks=function(t,e){if(t.length<2)return t;for(var r=u(t),n=l(t),i=[r],o=(n-r)/e,a=1;a<e;a++)i.push(i[0]+o*a);return i.push(n),i},t.sampleCovariance=k,t.sampleCorrelation=function(t,e){return k(t,e)/C(t)/C(e)},t.sampleVariance=I,t.sampleStandardDeviation=C,t.sampleSkewness=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var e,n=r(t),i=0,o=0,a=0;a<t.length;a++)i+=(e=t[a]-n)*e,o+=e*e*e;var s=t.length-1,u=Math.sqrt(i/s),l=t.length;return l*o/((l-1)*(l-2)*Math.pow(u,3))},t.sampleKurtosis=function(t){var e=t.length;if(e<4)throw new Error("sampleKurtosis requires at least four data points");for(var n,i=r(t),o=0,a=0,s=0;s<e;s++)o+=(n=t[s]-i)*n,a+=n*n*n*n;return(e-1)/((e-2)*(e-3))*(e*(e+1)*a/(o*o)-3*(e-1))},t.permutationsHeap=function(t){for(var e=new Array(t.length),r=[t.slice()],n=0;n<t.length;n++)e[n]=0;for(n=0;n<t.length;)if(e[n]<n){var i=0;n%2!=0&&(i=e[n]);var o=t[i];t[i]=t[n],t[n]=o,r.push(t.slice()),e[n]++,n=0}else e[n]=0,n++;return r},t.combinations=function t(e,r){var n,i,o,a,s=[];for(n=0;n<e.length;n++)if(1===r)s.push([e[n]]);else for(o=t(e.slice(n+1,e.length),r-1),i=0;i<o.length;i++)(a=o[i]).unshift(e[n]),s.push(a);return s},t.combinationsReplacement=function t(e,r){for(var n=[],i=0;i<e.length;i++)if(1===r)n.push([e[i]]);else for(var o=t(e.slice(i,e.length),r-1),a=0;a<o.length;a++)n.push([e[i]].concat(o[a]));return n},t.addToMean=function(t,e,r){return t+(r-t)/(e+1)},t.combineMeans=P,t.combineVariances=function(t,e,r,n,i,o){var a=P(e,r,i,o);return(r*(t+Math.pow(e-a,2))+o*(n+Math.pow(i-a,2)))/(r+o)},t.geometricMean=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var e=1,r=0;r<t.length;r++){if(t[r]<=0)throw new Error("geometricMean requires only positive numbers as input");e*=t[r]}return Math.pow(e,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var e=0,r=0;r<t.length;r++){if(t[r]<=0)throw new Error("harmonicMean requires only positive numbers as input");e+=1/t[r]}return t.length/e},t.average=r,t.mean=r,t.median=_,t.medianSorted=function(t){return c(t,.5)},t.subtractFromMean=function(t,e,r){return(t*e-r)/(e-1)},t.rootMeanSquare=M,t.rms=M,t.variance=i,t.tTest=function(t,e){return(r(t)-e)/(o(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,e,n){var i=t.length,o=e.length;if(!i||!o)return null;n||(n=0);var a=r(t),s=r(e),u=I(t),l=I(e);if("number"==typeof a&&"number"==typeof s&&"number"==typeof u&&"number"==typeof l){var c=((i-1)*u+(o-1)*l)/(i+o-2);return(a-s-n)/Math.sqrt(c*(1/i+1/o))}},t.BayesianClassifier=z,t.bayesian=z,t.PerceptronModel=L,t.perceptron=L,t.epsilon=D,t.factorial=O,t.gamma=function t(e){if("number"==typeof(r=e)&&isFinite(r)&&Math.floor(r)===r)return e<=0?NaN:O(e-1);var r;if(--e<0)return Math.PI/(Math.sin(Math.PI*-e)*t(-e));var n=e+.25;return Math.pow(e/Math.E,e)*Math.sqrt(2*Math.PI*(e+1/6))*(1+1/144/Math.pow(n,2)-1/12960/Math.pow(n,3)-257/207360/Math.pow(n,4)-52/2612736/Math.pow(n,5)+5741173/9405849600/Math.pow(n,6)+37529/18811699200/Math.pow(n,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var e=B[0],r=1;r<15;r++)e+=B[r]/(t+r);var n=5.2421875+t;return R+Math.log(e)-n+(t+.5)*Math.log(n)},t.bernoulliDistribution=function(t){if(t<0||1<t)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]},t.binomialDistribution=function(t,e){if(!(e<0||1<e||t<=0||t%1!=0)){for(var r=0,n=0,i=[],o=1;i[r]=o*Math.pow(e,r)*Math.pow(1-e,t-r),n+=i[r],o=o*(t-++r+1)/r,n<1-D;);return i}},t.poissonDistribution=function(t){if(!(t<=0)){for(var e=0,r=0,n=[],i=1;n[e]=Math.exp(-t)*Math.pow(t,e)/i,r+=n[e],i*=++e,r<1-D;);return n}},t.chiSquaredDistributionTable=F,t.chiSquaredGoodnessOfFit=function(t,e,n){for(var i,o,a=0,s=e(r(t)),u=[],l=[],c=0;c<t.length;c++)void 0===u[t[c]]&&(u[t[c]]=0),u[t[c]]++;for(c=0;c<u.length;c++)void 0===u[c]&&(u[c]=0);for(o in s)o in u&&(l[+o]=s[o]*t.length);for(o=l.length-1;0<=o;o--)l[o]<3&&(l[o-1]+=l[o],l.pop(),u[o-1]+=u[o],u.pop());for(o=0;o<u.length;o++)a+=Math.pow(u[o]-l[o],2)/l[o];return i=u.length-1-1,F[i][n]<a},t.kernelDensityEstimation=V,t.kde=V,t.zScore=function(t,e,r){return(t-e)/r},t.cumulativeStdNormalProbability=function(t){var e=Math.abs(t),r=Math.min(Math.round(100*e),G.length-1);return 0<=t?G[r]:+(1-G[r]).toFixed(4)},t.standardNormalTable=G,t.errorFunction=W,t.erf=W,t.inverseErrorFunction=$,t.probit=function(t){return 0===t?t=D:1<=t&&(t=1-D),Math.sqrt(2)*$(2*t-1)},t.permutationTest=function(t,e,n,i){if(void 0===i&&(i=1e4),void 0===n&&(n="two_side"),"two_side"!==n&&"greater"!==n&&"less"!==n)throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'");for(var o=r(t)-r(e),a=new Array(i),s=t.concat(e),u=Math.floor(s.length/2),l=0;l<i;l++){b(s);var c=s.slice(0,u),p=s.slice(u,s.length),h=r(c)-r(p);a[l]=h}var f=0;if("two_side"===n)for(l=0;l<=i;l++)Math.abs(a[l])>=Math.abs(o)&&(f+=1);else if("greater"===n)for(l=0;l<=i;l++)a[l]>=o&&(f+=1);else for(l=0;l<=i;l++)a[l]<=o&&(f+=1);return f/i},t.bisect=function(t,e,r,n,i){if("function"!=typeof t)throw new TypeError("func must be a function");for(var o=0;o<n;o++){var a=(e+r)/2;if(0===t(a)||Math.abs((r-e)/2)<i)return a;H(t(a))===H(t(e))?e=a:r=a}throw new Error("maximum number of iterations exceeded")},t.quickselect=p,t.sign=H,t.numericSort=s,Object.defineProperty(t,"__esModule",{value:!0})})},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d864:function(t,e,r){var n=r("79aa");t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},d9f6:function(t,e,r){var n=r("e4ae"),i=r("794b"),o=r("1bc3"),a=Object.defineProperty;e.f=r("8e60")?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return a(t,e,r)}catch(s){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},dbdb:function(t,e,r){var n=r("584a"),i=r("e53d"),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:r("b8e3")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},dcbc:function(t,e,r){var n=r("2aba");t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},df7c:function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return n.exec(t).slice(1)};function o(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var a=i>=0?arguments[i]:t.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,n="/"===a.charAt(0))}return e=r(o(e.split("/"),function(t){return!!t}),!n).join("/"),(n?"/":"")+e||"."},e.normalize=function(t){var n=e.isAbsolute(t),i="/"===a(t,-1);return t=r(o(t.split("/"),function(t){return!!t}),!n).join("/"),t||n||(t="."),t&&i&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var r=t.length-1;r>=0;r--)if(""!==t[r])break;return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),o=n(r.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var l=[];for(u=s;u<i.length;u++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=i(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},e.basename=function(t,e){var r=i(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return i(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r("4362"))},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e4ae:function(t,e,r){var n=r("f772");t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},e53d:function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},e6f3:function(t,e,r){var n=r("07e3"),i=r("36c3"),o=r("5b4e")(!1),a=r("5559")("IE_PROTO");t.exports=function(t,e){var r,s=i(t),u=0,l=[];for(r in s)r!=a&&n(s,r)&&l.push(r);while(e.length>u)n(s,r=e[u++])&&(~o(l,r)||l.push(r));return l}},e853:function(t,e,r){var n=r("d3f4"),i=r("1169"),o=r("2b4c")("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},ebd6:function(t,e,r){var n=r("cb7c"),i=r("d8e8"),o=r("2b4c")("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||void 0==(r=n(a)[o])?e:i(r)}},ed6f:function(t,e,r){(function(e,r){(function(e,r){t.exports=r()})(0,function(){"use strict";var t,n,i;function o(e,r){if(t)if(n){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+n+")(sharedChunk);",a={};t(a),i=r(a),i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else n=r;else t=r}return o(["exports"],function(t){"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e||"undefined"!==typeof self&&self;function n(t,e){return e={exports:{}},t(e,e.exports),e.exports}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function s(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function u(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==n.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}var l=u()?Object.assign:function(t,e){for(var r,n,u=arguments,l=s(t),c=1;c<arguments.length;c++){for(var p in r=Object(u[c]),r)o.call(r,p)&&(l[p]=r[p]);if(i){n=i(r);for(var h=0;h<n.length;h++)a.call(r,n[h])&&(l[n[h]]=r[n[h]])}}return l},c=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8},p=n(function(t){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}),h=n(function(t,n){var i=/%[sdj%]/g;n.format=function(t){var e=arguments;if(!E(t)){for(var r=[],n=0;n<arguments.length;n++)r.push(s(e[n]));return r.join(" ")}n=1;for(var o=arguments,a=o.length,u=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=a)return t;switch(t){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return t}}),l=o[n];n<a;l=o[++n])b(l)||!I(l)?u+=" "+l:u+=" "+s(l);return u},n.deprecate=function(t,i){if(A(e.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(!0===r.noDeprecation)return t;var o=!1;function a(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return t.apply(this,arguments)}return a};var o,a={};function s(t,e){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),x(e)?r.showHidden=e:e&&n._extend(r,e),A(r.showHidden)&&(r.showHidden=!1),A(r.depth)&&(r.depth=2),A(r.colors)&&(r.colors=!1),A(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),f(r,t,r.depth)}function u(t,e){var r=s.styles[e];return r?"["+s.colors[r][0]+"m"+t+"["+s.colors[r][1]+"m":t}function l(t,e){return t}function h(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function f(t,e,r){if(t.customInspect&&e&&M(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return E(i)||(i=f(t,i,r)),i}var o=d(t,e);if(o)return o;var a=Object.keys(e),s=h(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),P(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return m(e);if(0===a.length){if(M(e)){var u=e.name?": "+e.name:"";return t.stylize("[Function"+u+"]","special")}if(k(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(C(e))return t.stylize(Date.prototype.toString.call(e),"date");if(P(e))return m(e)}var l,c="",p=!1,x=["{","}"];if(_(e)&&(p=!0,x=["[","]"]),M(e)){var b=e.name?": "+e.name:"";c=" [Function"+b+"]"}return k(e)&&(c=" "+RegExp.prototype.toString.call(e)),C(e)&&(c=" "+Date.prototype.toUTCString.call(e)),P(e)&&(c=" "+m(e)),0!==a.length||p&&0!=e.length?r<0?k(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),l=p?y(t,e,r,s,a):a.map(function(n){return v(t,e,r,s,n,p)}),t.seen.pop(),g(l,c,x)):x[0]+c+x[1]}function d(t,e){if(A(e))return t.stylize("undefined","undefined");if(E(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return S(e)?t.stylize(""+e,"number"):x(e)?t.stylize(""+e,"boolean"):b(e)?t.stylize("null","null"):void 0}function m(t){return"["+Error.prototype.toString.call(t)+"]"}function y(t,e,r,n,i){for(var o=[],a=0,s=e.length;a<s;++a)R(e,String(a))?o.push(v(t,e,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(v(t,e,r,n,i,!0))}),o}function v(t,e,r,n,i,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},u.get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),R(n,i)||(a="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=b(r)?f(t,u.value,null):f(t,u.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),A(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function g(t,e,r){var n=t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function _(t){return Array.isArray(t)}function x(t){return"boolean"===typeof t}function b(t){return null===t}function w(t){return null==t}function S(t){return"number"===typeof t}function E(t){return"string"===typeof t}function T(t){return"symbol"===typeof t}function A(t){return void 0===t}function k(t){return I(t)&&"[object RegExp]"===L(t)}function I(t){return"object"===typeof t&&null!==t}function C(t){return I(t)&&"[object Date]"===L(t)}function P(t){return I(t)&&("[object Error]"===L(t)||t instanceof Error)}function M(t){return"function"===typeof t}function z(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t}function L(t){return Object.prototype.toString.call(t)}function D(t){return t<10?"0"+t.toString(10):t.toString(10)}n.debuglog=function(t){if(A(o)&&(o=Object({NODE_ENV:"production",BASE_URL:""}).NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var e=r.pid;a[t]=function(){var r=n.format.apply(n,arguments);console.error("%s %d: %s",t,e,r)}}else a[t]=function(){};return a[t]},n.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=_,n.isBoolean=x,n.isNull=b,n.isNullOrUndefined=w,n.isNumber=S,n.isString=E,n.isSymbol=T,n.isUndefined=A,n.isRegExp=k,n.isObject=I,n.isDate=C,n.isError=P,n.isFunction=M,n.isPrimitive=z,n.isBuffer=c;var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function B(){var t=new Date,e=[D(t.getHours()),D(t.getMinutes()),D(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}n.log=function(){console.log("%s - %s",B(),n.format.apply(n,arguments))},n.inherits=p,n._extend=function(t,e){if(!e||!I(e))return t;var r=Object.keys(e),n=r.length;while(n--)t[r[n]]=e[r[n]];return t}}),f=(h.format,h.deprecate,h.debuglog,h.inspect,h.isArray,h.isBoolean,h.isNull,h.isNullOrUndefined,h.isNumber,h.isString,h.isSymbol,h.isUndefined,h.isRegExp,h.isObject,h.isDate,h.isError,h.isFunction,h.isPrimitive,h.isBuffer,h.log,h.inherits,h._extend,n(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function n(t){return e.Buffer&&"function"===typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var i=Object.prototype.hasOwnProperty,o=Array.prototype.slice,a=function(){return"foo"===function(){}.name}();function s(t){return Object.prototype.toString.call(t)}function u(t){return!n(t)&&("function"===typeof e.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var c=t.exports=g,p=/\s*function\s+([^\(\s]*)\s*/;function f(t){if(h.isFunction(t)){if(a)return t.name;var e=t.toString(),r=e.match(p);return r&&r[1]}}function d(t,e){return"string"===typeof t?t.length<e?t:t.slice(0,e):t}function m(t){if(a||!h.isFunction(t))return h.inspect(t);var e=f(t),r=e?": "+e:"";return"[Function"+r+"]"}function y(t){return d(m(t.actual),128)+" "+t.operator+" "+d(m(t.expected),128)}function v(t,e,r,n,i){throw new c.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function g(t,e){t||v(t,!0,e,"==",c.ok)}function _(t,e,i,o){if(t===e)return!0;if(n(t)&&n(e))return 0===r(t,e);if(h.isDate(t)&&h.isDate(e))return t.getTime()===e.getTime();if(h.isRegExp(t)&&h.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"===typeof t||null!==e&&"object"===typeof e){if(u(t)&&u(e)&&s(t)===s(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(n(t)!==n(e))return!1;o=o||{actual:[],expected:[]};var a=o.actual.indexOf(t);return-1!==a&&a===o.expected.indexOf(e)||(o.actual.push(t),o.expected.push(e),b(t,e,i,o))}return i?t===e:t==e}function x(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e,r,n){if(null===t||void 0===t||null===e||void 0===e)return!1;if(h.isPrimitive(t)||h.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=x(t),a=x(e);if(i&&!a||!i&&a)return!1;if(i)return t=o.call(t),e=o.call(e),_(t,e,r);var s,u,l=k(t),c=k(e);if(l.length!==c.length)return!1;for(l.sort(),c.sort(),u=l.length-1;u>=0;u--)if(l[u]!==c[u])return!1;for(u=l.length-1;u>=0;u--)if(s=l[u],!_(t[s],e[s],r,n))return!1;return!0}function w(t,e,r){_(t,e,!0)&&v(t,e,r,"notDeepStrictEqual",w)}function S(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(r){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function E(t){var e;try{t()}catch(r){e=r}return e}function T(t,e,r,n){var i;if("function"!==typeof e)throw new TypeError('"block" argument must be a function');"string"===typeof r&&(n=r,r=null),i=E(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&v(i,r,"Missing expected exception"+n);var o="string"===typeof n,a=!t&&h.isError(i),s=!t&&i&&!r;if((a&&o&&S(i,r)||s)&&v(i,r,"Got unwanted exception"+n),t&&i&&r&&!S(i,r)||!t&&i)throw i}function A(t,e){t||v(t,!0,e,"==",A)}c.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=y(this),this.generatedMessage=!0);var e=t.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=f(e),o=n.indexOf("\n"+i);if(o>=0){var a=n.indexOf("\n",o+1);n=n.substring(a+1)}this.stack=n}}},h.inherits(c.AssertionError,Error),c.fail=v,c.ok=g,c.equal=function(t,e,r){t!=e&&v(t,e,r,"==",c.equal)},c.notEqual=function(t,e,r){t==e&&v(t,e,r,"!=",c.notEqual)},c.deepEqual=function(t,e,r){_(t,e,!1)||v(t,e,r,"deepEqual",c.deepEqual)},c.deepStrictEqual=function(t,e,r){_(t,e,!0)||v(t,e,r,"deepStrictEqual",c.deepStrictEqual)},c.notDeepEqual=function(t,e,r){_(t,e,!1)&&v(t,e,r,"notDeepEqual",c.notDeepEqual)},c.notDeepStrictEqual=w,c.strictEqual=function(t,e,r){t!==e&&v(t,e,r,"===",c.strictEqual)},c.notStrictEqual=function(t,e,r){t===e&&v(t,e,r,"!==",c.notStrictEqual)},c.throws=function(t,e,r){T(!0,t,e,r)},c.doesNotThrow=function(t,e,r){T(!1,t,e,r)},c.ifError=function(t){if(t)throw t},c.strict=l(A,c,{equal:c.strictEqual,deepEqual:c.deepStrictEqual,notEqual:c.notStrictEqual,notDeepEqual:c.notDeepStrictEqual}),c.strict.strict=c.strict;var k=Object.keys||function(t){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e}})),d="1.6.1",m=y;function y(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}y.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},y.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},y.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},y.prototype.solveCurveX=function(t,e){var r,n,i,o,a;for("undefined"===typeof e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if(r=0,n=1,i=t,i<r)return r;if(i>n)return n;while(r<n){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?r=i:n=i,i=.5*(n-r)+r}return i},y.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var v=g;function g(t,e){this.x=t,this.y=e}function _(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!_(t[r],e[r]))return!1;return!0}if("object"===typeof t&&null!==t&&null!==e){if("object"!==typeof e)return!1;var n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(var i in t)if(!_(t[i],e[i]))return!1;return!0}return t===e}function x(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}function b(t,e,r,n){var i=new m(t,e,r,n);return function(t){return i.solve(t)}}g.prototype={clone:function(){return new g(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.x+r*(this.x-e.x)-n*(this.y-e.y),o=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},g.convert=function(t){return t instanceof g?t:Array.isArray(t)?new g(t[0],t[1]):t};var w=b(.25,.1,.25,1);function S(t,e,r){return Math.min(r,Math.max(e,t))}function E(t,e,r){var n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i}function T(t,e,r){if(!t.length)return r(null,[]);var n=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0===--n&&r(o,i)})})}function A(t){var e=[];for(var r in t)e.push(t[r]);return e}function k(t,e){var r=[];for(var n in t)n in e||r.push(n);return r}function I(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var o=i[n];for(var a in o)t[a]=o[a]}return t}function C(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n];i in t&&(r[i]=t[i])}return r}var P=1;function M(){return P++}function z(){function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}return t()}function L(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function D(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function O(t,e){return-1!==t.indexOf(e,t.length-e.length)}function B(t,e,r){var n={};for(var i in t)n[i]=e.call(r||this,t[i],i,t);return n}function R(t,e,r){var n={};for(var i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n}function F(t){return Array.isArray(t)?t.map(F):"object"===typeof t&&t?B(t,F):t}function U(t,e){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!1}var j={};function N(t){j[t]||("undefined"!==typeof console&&console.warn(t),j[t]=!0)}function V(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function q(t){for(var e=0,r=0,n=t.length,i=n-1,o=void 0,a=void 0;r<n;i=r++)o=t[r],a=t[i],e+=(a.x-o.x)*(o.y+a.y);return e}function Z(t){var e=t[0],r=t[1],n=t[2];return r+=90,r*=Math.PI/180,n*=Math.PI/180,{x:e*Math.cos(r)*Math.sin(n),y:e*Math.sin(r)*Math.sin(n),z:e*Math.cos(n)}}function G(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function X(t){var e=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,r={};if(t.replace(e,function(t,e,n,i){var o=n||i;return r[e]=!o||o.toLowerCase(),""}),r["max-age"]){var n=parseInt(r["max-age"],10);isNaN(n)?delete r["max-age"]:r["max-age"]=n}return r}var W=null;function $(t){if(null==W){var e=t.navigator?t.navigator.userAgent:null;W=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return W}function H(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(r){return!1}}function K(t){return self.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))}))}function Y(t){return decodeURIComponent(self.atob(t).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var J,Q,tt,et,rt=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),nt=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,it=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,ot={now:rt,frame:function(t){var e=nt(t);return{cancel:function(){return it(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var r=self.document.createElement("canvas"),n=r.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return r.width=t.width,r.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return J||(J=self.document.createElement("a")),J.href=t,J.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==Q&&(Q=self.matchMedia("(prefers-reduced-motion: reduce)")),Q.matches)}},at={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},st={supported:!1,testSupport:ct},ut=!1,lt=!1;function ct(t){!ut&&et&&(lt?pt(t):tt=t)}function pt(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,et),t.isContextLost())return;st.supported=!0}catch(r){}t.deleteTexture(e),ut=!0}self.document&&(et=self.document.createElement("img"),et.onload=function(){tt&&pt(tt),tt=null,lt=!0},et.onerror=function(){ut=!0,tt=null},et.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ht="01";function ft(){for(var t="1",e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r="",n=0;n<10;n++)r+=e[Math.floor(62*Math.random())];var i=432e5,o=[t,ht,r].join(""),a=Date.now()+i;return{token:o,tokenExpiresAt:a}}var dt=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function mt(t){return 0===t.indexOf("mapbox:")}dt.prototype._createSkuToken=function(){var t=ft();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},dt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},dt.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},dt.prototype.normalizeStyleURL=function(t,e){if(!mt(t))return t;var r=xt(t);return r.path="/styles/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},dt.prototype.normalizeGlyphsURL=function(t,e){if(!mt(t))return t;var r=xt(t);return r.path="/fonts/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},dt.prototype.normalizeSourceURL=function(t,e){if(!mt(t))return t;var r=xt(t);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),this._makeAPIURL(r,this._customAccessToken||e)},dt.prototype.normalizeSpriteURL=function(t,e,r,n){var i=xt(t);return mt(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+r,this._makeAPIURL(i,this._customAccessToken||n)):(i.path+=""+e+r,bt(i))},dt.prototype.normalizeTileURL=function(t,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),!e||!mt(e))return t;var n=xt(t),i=/(\.(png|jpg)\d*)(?=$)/,o=/^.+\/v4\//,a=ot.devicePixelRatio>=2||512===r?"@2x":"",s=st.supported?".webp":"$1";return n.path=n.path.replace(i,""+a+s),n.path=n.path.replace(o,"/"),n.path="/v4"+n.path,at.REQUIRE_ACCESS_TOKEN&&(at.ACCESS_TOKEN||this._customAccessToken)&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,this._customAccessToken)},dt.prototype.canonicalizeTileURL=function(t){var e="/v4/",r=/\.[\w]+$/,n=xt(t);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(r))return t;var i="mapbox://tiles/";i+=n.path.replace(e,"");var o=n.params.filter(function(t){return!t.match(/^access_token=/)});return o.length&&(i+="?"+o.join("&")),i},dt.prototype.canonicalizeTileset=function(t,e){if(!mt(e))return t.tiles||[];for(var r=[],n=0,i=t.tiles;n<i.length;n+=1){var o=i[n],a=this.canonicalizeTileURL(o);r.push(a)}return r},dt.prototype._makeAPIURL=function(t,e){var r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=xt(at.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!at.REQUIRE_ACCESS_TOKEN)return bt(t);if(e=e||at.ACCESS_TOKEN,!e)throw new Error("An API access token is required to use Mapbox GL. "+r);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+r);return t.params=t.params.filter(function(t){return-1===t.indexOf("access_token")}),t.params.push("access_token="+e),bt(t)};var yt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function vt(t){return yt.test(t)}function gt(t){return t.indexOf("sku=")>0&&vt(t)}var _t=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function xt(t){var e=t.match(_t);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function bt(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}var wt="mapbox.eventData";function St(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{var r=JSON.parse(Y(e[1]));return r}catch(n){return null}}var Et=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Et.prototype.getStorageKey=function(t){var e=St(at.ACCESS_TOKEN),r="";return r=e&&e["u"]?K(e["u"]):at.ACCESS_TOKEN||"",t?wt+"."+t+":"+r:wt+":"+r},Et.prototype.fetchEventData=function(){var t=H("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{var n=self.localStorage.getItem(e);n&&(this.eventData=JSON.parse(n));var i=self.localStorage.getItem(r);i&&(this.anonId=i)}catch(o){N("Unable to read from LocalStorage")}},Et.prototype.saveEventData=function(){var t=H("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(n){N("Unable to write to LocalStorage")}},Et.prototype.processRequests=function(t){},Et.prototype.postEvent=function(t,e,r,n){var i=this;if(at.EVENTS_URL){var o=xt(at.EVENTS_URL);o.params.push("access_token="+(n||at.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:d,skuId:ht,userId:this.anonId},s=e?I(a,e):a,u={url:bt(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=ne(u,function(t){i.pendingRequest=null,r(t),i.saveEventData(),i.processRequests(n)})}},Et.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var Tt,At,kt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postMapLoadEvent=function(t,e,r,n){this.skuToken=r,(at.EVENTS_URL&&n||at.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return mt(t)||vt(t)}))&&this.queueRequest({id:e,timestamp:Date.now()},n)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var r=this.queue.shift(),n=r.id,i=r.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=z()),this.postEvent(i,{skuToken:this.skuToken},function(t){t||n&&(e.success[n]=!0)},t))}},e}(Et),It=function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postTurnstileEvent=function(t,e){at.EVENTS_URL&&at.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return mt(t)||vt(t)})&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var r=St(at.ACCESS_TOKEN),n=r?r["u"]:at.ACCESS_TOKEN,i=n!==this.eventData.tokenU;L(this.anonId)||(this.anonId=z(),i=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),u=(o-this.eventData.lastSuccess)/864e5;i=i||u>=1||u<-1||a.getDate()!==s.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=n)},t)}},e}(Et),Ct=new It,Pt=Ct.postTurnstileEvent.bind(Ct),Mt=new kt,zt=Mt.postMapLoadEvent.bind(Mt),Lt="mapbox-tiles",Dt=500,Ot=50,Bt=42e4;function Rt(){self.caches&&!Tt&&(Tt=self.caches.open(Lt))}function Ft(t,e){if(void 0===At)try{new Response(new ReadableStream),At=!0}catch(r){At=!1}At?e(t.body):t.blob().then(e)}function Ut(t,e,r){if(Rt(),Tt){var n={status:e.status,statusText:e.statusText,headers:new self.Headers};e.headers.forEach(function(t,e){return n.headers.set(e,t)});var i=X(e.headers.get("Cache-Control")||"");if(!i["no-store"]){i["max-age"]&&n.headers.set("Expires",new Date(r+1e3*i["max-age"]).toUTCString());var o=new Date(n.headers.get("Expires")).getTime()-r;o<Bt||Ft(e,function(e){var r=new self.Response(e,n);Rt(),Tt&&Tt.then(function(e){return e.put(jt(t.url),r)}).catch(function(t){return N(t.message)})})}}}function jt(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}function Nt(t,e){if(Rt(),!Tt)return e(null);var r=jt(t.url);Tt.then(function(t){t.match(r).then(function(n){var i=Vt(n);t.delete(r),i&&t.put(r,n.clone()),e(null,n,i)}).catch(e)}).catch(e)}function Vt(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),r=X(t.headers.get("Cache-Control")||"");return e>Date.now()&&!r["no-cache"]}var qt=1/0;function Zt(t){qt++,qt>Ot&&(t.getActor().send("enforceCacheSizeLimit",Dt),qt=0)}function Gt(t){Rt(),Tt&&Tt.then(function(e){e.keys().then(function(r){for(var n=0;n<r.length-t;n++)e.delete(r[n])})})}function Xt(t){var e=self.caches.delete(Lt);t&&e.catch(t).then(function(){return t()})}function Wt(t,e){Dt=t,Ot=e}var $t={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze($t);var Ht=function(t){function e(e,r,n){401===r&&vt(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=r,this.url=n,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),Kt=G()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},Yt=function(t){return/^file:/.test(t)||/^file:/.test(Kt())&&!/^\w+:/.test(t)};function Jt(t,e){var r=new self.AbortController,n=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:Kt(),signal:r.signal}),i=!1,o=!1,a=gt(n.url);"json"===t.type&&n.headers.set("Accept","application/json");var s=function(r,i,s){if(!o){if(r&&"SecurityError"!==r.message&&N(r),i&&s)return u(i);var l=Date.now();self.fetch(n).then(function(r){if(r.ok){var n=a?r.clone():null;return u(r,n,l)}return e(new Ht(r.statusText,r.status,t.url))}).catch(function(t){20!==t.code&&e(new Error(t.message))})}},u=function(r,a,s){("arrayBuffer"===t.type?r.arrayBuffer():"json"===t.type?r.json():r.text()).then(function(t){o||(a&&s&&Ut(n,a,s),i=!0,e(null,t,r.headers.get("Cache-Control"),r.headers.get("Expires")))}).catch(function(t){o||e(new Error(t.message))})};return a?Nt(n,s):s(null,null),{cancel:function(){o=!0,i||r.abort()}}}function Qt(t,e){var r=new self.XMLHttpRequest;for(var n in r.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(r.responseType="arraybuffer"),t.headers)r.setRequestHeader(n,t.headers[n]);return"json"===t.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===t.credentials,r.onerror=function(){e(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){var n=r.response;if("json"===t.type)try{n=JSON.parse(r.response)}catch(i){return e(i)}e(null,n,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else e(new Ht(r.statusText,r.status,t.url))},r.send(t.body),{cancel:function(){return r.abort()}}}var te=function(t,e){if(!Yt(t.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Jt(t,e);if(G()&&self.worker&&self.worker.actor){var r=!0;return self.worker.actor.send("getResource",t,e,void 0,r)}}return Qt(t,e)},ee=function(t,e){return te(I(t,{type:"json"}),e)},re=function(t,e){return te(I(t,{type:"arrayBuffer"}),e)},ne=function(t,e){return te(I(t,{method:"POST"}),e)};function ie(t){var e=self.document.createElement("a");return e.href=t,e.protocol===self.document.location.protocol&&e.host===self.document.location.host}var oe,ae,se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",ue=function(){oe=[],ae=0};ue();var le=function(t,e){if(st.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),ae>=at.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return oe.push(r),r}ae++;var n=!1,i=function(){if(!n){n=!0,ae--,f(ae>=0);while(oe.length&&ae<at.MAX_PARALLEL_IMAGE_REQUESTS){var t=oe.shift(),e=t.requestParameters,r=t.callback,i=t.cancelled;i||(t.cancel=le(e,r).cancel)}}},o=re(t,function(t,r,n,o){if(i(),t)e(t);else if(r){var a=new self.Image;a.onload=function(){e(null,a),self.URL.revokeObjectURL(a.src)},a.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new self.Blob([new Uint8Array(r)],{type:"image/png"});a.cacheControl=n,a.expires=o,a.src=r.byteLength?self.URL.createObjectURL(s):se}});return{cancel:function(){o.cancel(),i()}}},ce=function(t,e){var r=self.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(var n=0;n<t.length;n++){var i=self.document.createElement("source");ie(t[n])||(r.crossOrigin="Anonymous"),i.src=t[n],r.appendChild(i)}return{cancel:function(){}}};function pe(t,e,r){var n=r[t]&&-1!==r[t].indexOf(e);n||(r[t]=r[t]||[],r[t].push(e))}function he(t,e,r){if(r&&r[t]){var n=r[t].indexOf(e);-1!==n&&r[t].splice(n,1)}}var fe=function(t,e){void 0===e&&(e={}),I(this,e),this.type=t},de=function(t){function e(e,r){void 0===r&&(r={}),t.call(this,"error",I({error:e},r))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(fe),me=function(){};me.prototype.on=function(t,e){return this._listeners=this._listeners||{},pe(t,e,this._listeners),this},me.prototype.off=function(t,e){return he(t,e,this._listeners),he(t,e,this._oneTimeListeners),this},me.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},pe(t,e,this._oneTimeListeners),this},me.prototype.fire=function(t,e){"string"===typeof t&&(t=new fe(t,e||{}));var r=t.type;if(this.listens(r)){t.target=this;for(var n=this._listeners&&this._listeners[r]?this._listeners[r].slice():[],i=0,o=n;i<o.length;i+=1){var a=o[i];a.call(this,t)}for(var s=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[],u=0,l=s;u<l.length;u+=1){var c=l[u];he(r,c,this._oneTimeListeners),c.call(this,t)}var p=this._eventedParent;p&&(I(t,"function"===typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),p.fire(t))}else t instanceof de&&console.error(t.error);return this},me.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},me.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var ye=8,ve={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},ge={"*":{type:"source"}},_e=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],xe={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},be={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},we={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Se={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},Ee={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Te={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ae={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},ke=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Ie={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ce={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Pe={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Me={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ze={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Le={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},De={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Oe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Be={type:"array",value:"*"},Re={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Fe={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Ue={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},je={type:"array",value:"*",minimum:1},Ne={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},Ve={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},qe=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],Ze={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Ge={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Xe={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},We={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},$e={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},He={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Ke={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Ye={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Je={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Qe={$version:ye,$root:ve,sources:ge,source:_e,source_vector:xe,source_raster:be,source_raster_dem:we,source_geojson:Se,source_video:Ee,source_image:Te,layer:Ae,layout:ke,layout_background:Ie,layout_fill:Ce,layout_circle:Pe,layout_heatmap:Me,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:ze,layout_symbol:Le,layout_raster:De,layout_hillshade:Oe,filter:Be,filter_operator:Re,geometry_type:Fe,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Ue,expression:je,expression_name:Ne,light:Ve,paint:qe,paint_fill:Ze,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Ge,paint_circle:Xe,paint_heatmap:We,paint_symbol:$e,paint_raster:He,paint_hillshade:Ke,paint_background:Ye,transition:Je,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},tr=function(t,e,r,n){this.message=(t?t+": ":"")+r,n&&(this.identifier=n),null!==e&&void 0!==e&&e.__line__&&(this.line=e.__line__)};function er(t){var e=t.key,r=t.value;return r?[new tr(e,r,"constants have been deprecated as of v8")]:[]}function rr(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var o=i[n];for(var a in o)t[a]=o[a]}return t}function nr(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function ir(t){if(Array.isArray(t))return t.map(ir);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var r in t)e[r]=ir(t[r]);return e}return nr(t)}var or=function(t){function e(e,r){t.call(this,r),this.message=r,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),ar=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,n=e;r<n.length;r+=1){var i=n[r],o=i[0],a=i[1];this.bindings[o]=a}};ar.prototype.concat=function(t){return new ar(this,t)},ar.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},ar.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var sr={kind:"null"},ur={kind:"number"},lr={kind:"string"},cr={kind:"boolean"},pr={kind:"color"},hr={kind:"object"},fr={kind:"value"},dr={kind:"error"},mr={kind:"collator"},yr={kind:"formatted"},vr={kind:"resolvedImage"};function gr(t,e){return{kind:"array",itemType:t,N:e}}function _r(t){if("array"===t.kind){var e=_r(t.itemType);return"number"===typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var xr=[sr,ur,lr,cr,pr,yr,hr,gr(fr),vr];function br(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!br(t.itemType,e.itemType))&&("number"!==typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var r=0,n=xr;r<n.length;r+=1){var i=n[r];if(!br(i,e))return null}}return"Expected "+_r(t)+" but found "+_r(e)+" instead."}var wr=n(function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return t=Math.round(t),t<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?n(parseFloat(t)/100*255):n(parseInt(t))}function a(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}function u(t){var e=t.replace(/ /g,"").toLowerCase();if(e in r)return r[e].slice();if("#"===e[0]){if(4===e.length){var i=parseInt(e.substr(1),16);return i>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null}if(7===e.length){i=parseInt(e.substr(1),16);return i>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null}return null}var u=e.indexOf("("),l=e.indexOf(")");if(-1!==u&&l+1===e.length){var c=e.substr(0,u),p=e.substr(u+1,l-(u+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=a(p.pop());case"rgb":return 3!==p.length?null:[o(p[0]),o(p[1]),o(p[2]),h];case"hsla":if(4!==p.length)return null;h=a(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,d=a(p[1]),m=a(p[2]),y=m<=.5?m*(d+1):m+d-m*d,v=2*m-y;return[n(255*s(v,y,f+1/3)),n(255*s(v,y,f)),n(255*s(v,y,f-1/3)),h];default:return null}}return null}try{e.parseCSSColor=u}catch(l){}}),Sr=wr.parseCSSColor,Er=function(t,e,r,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=r,this.a=n};Er.parse=function(t){if(t){if(t instanceof Er)return t;if("string"===typeof t){var e=Sr(t);if(e)return new Er(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Er.prototype.toString=function(){var t=this.toArray(),e=t[0],r=t[1],n=t[2],i=t[3];return"rgba("+Math.round(e)+","+Math.round(r)+","+Math.round(n)+","+i+")"},Er.prototype.toArray=function(){var t=this,e=t.r,r=t.g,n=t.b,i=t.a;return 0===i?[0,0,0,0]:[255*e/i,255*r/i,255*n/i,i]},Er.black=new Er(0,0,0,1),Er.white=new Er(1,1,1,1),Er.transparent=new Er(0,0,0,0),Er.red=new Er(1,0,0,1);var Tr=function(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Tr.prototype.compare=function(t,e){return this.collator.compare(t,e)},Tr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ar=function(t,e,r,n,i){this.text=t,this.image=e,this.scale=r,this.fontStack=n,this.textColor=i},kr=function(t){this.sections=t};kr.fromString=function(t){return new kr([new Ar(t,null,null,null,null)])},kr.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})},kr.factory=function(t){return t instanceof kr?t:kr.fromString(t)},kr.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")},kr.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];if(n.image)t.push(["image",n.image.name]);else{t.push(n.text);var i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),n.textColor&&(i["text-color"]=["rgba"].concat(n.textColor.toArray())),t.push(i)}}return t};var Ir=function(t){this.name=t.name,this.available=t.available};function Cr(t,e,r,n){if(!("number"===typeof t&&t>=0&&t<=255&&"number"===typeof e&&e>=0&&e<=255&&"number"===typeof r&&r>=0&&r<=255)){var i="number"===typeof n?[t,e,r,n]:[t,e,r];return"Invalid rgba value ["+i.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return"undefined"===typeof n||"number"===typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,r,n].join(", ")+"]: 'a' must be between 0 and 1."}function Pr(t){if(null===t)return!0;if("string"===typeof t)return!0;if("boolean"===typeof t)return!0;if("number"===typeof t)return!0;if(t instanceof Er)return!0;if(t instanceof Tr)return!0;if(t instanceof kr)return!0;if(t instanceof Ir)return!0;if(Array.isArray(t)){for(var e=0,r=t;e<r.length;e+=1){var n=r[e];if(!Pr(n))return!1}return!0}if("object"===typeof t){for(var i in t)if(!Pr(t[i]))return!1;return!0}return!1}function Mr(t){if(null===t)return sr;if("string"===typeof t)return lr;if("boolean"===typeof t)return cr;if("number"===typeof t)return ur;if(t instanceof Er)return pr;if(t instanceof Tr)return mr;if(t instanceof kr)return yr;if(t instanceof Ir)return vr;if(Array.isArray(t)){for(var e,r=t.length,n=0,i=t;n<i.length;n+=1){var o=i[n],a=Mr(o);if(e){if(e===a)continue;e=fr;break}e=a}return gr(e||fr,r)}return f("object"===typeof t),hr}function zr(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Er||t instanceof kr||t instanceof Ir?t.toString():JSON.stringify(t)}Ir.prototype.toString=function(){return this.name},Ir.fromString=function(t){return new Ir({name:t,available:!1})},Ir.prototype.serialize=function(){return["image",this.name]};var Lr=function(t,e){this.type=t,this.value=e};Lr.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!Pr(t[1]))return e.error("invalid value");var r=t[1],n=Mr(r),i=e.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"===typeof i.N&&0!==i.N||(n=i),new Lr(n,r)},Lr.prototype.evaluate=function(){return this.value},Lr.prototype.eachChild=function(){},Lr.prototype.possibleOutputs=function(){return[this.value]},Lr.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Er?["rgba"].concat(this.value.toArray()):this.value instanceof kr?this.value.serialize():(f(null===this.value||"string"===typeof this.value||"number"===typeof this.value||"boolean"===typeof this.value),this.value)};var Dr=function(t){this.name="ExpressionEvaluationError",this.message=t};Dr.prototype.toJSON=function(){return this.message};var Or={string:lr,number:ur,boolean:cr,object:hr},Br=function(t,e){this.type=t,this.args=e};Br.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r,n=1,i=t[0];if("array"===i){var o,a;if(t.length>2){var s=t[1];if("string"!==typeof s||!(s in Or)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=Or[s],n++}else o=fr;if(t.length>3){if(null!==t[2]&&("number"!==typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],n++}r=gr(o,a)}else f(Or[i],i),r=Or[i];for(var u=[];n<t.length;n++){var l=e.parse(t[n],n,fr);if(!l)return null;u.push(l)}return new Br(r,u)},Br.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t),n=br(this.type,Mr(r));if(!n)return r;if(e===this.args.length-1)throw new Dr("Expected value to be of type "+_r(this.type)+", but found "+_r(Mr(r))+" instead.")}return f(!1),null},Br.prototype.eachChild=function(t){this.args.forEach(t)},Br.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Br.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);var n=t.N;("number"===typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var Rr=function(t){this.type=yr,this.sections=t};Rr.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[1];if(!Array.isArray(r)&&"object"===typeof r)return e.error("First argument must be an image or text section.");for(var n=[],i=!1,o=1;o<=t.length-1;++o){var a=t[o];if(i&&"object"===typeof a&&!Array.isArray(a)){i=!1;var s=null;if(a["font-scale"]&&(s=e.parse(a["font-scale"],1,ur),!s))return null;var u=null;if(a["text-font"]&&(u=e.parse(a["text-font"],1,gr(lr)),!u))return null;var l=null;if(a["text-color"]&&(l=e.parse(a["text-color"],1,pr),!l))return null;var c=n[n.length-1];c.scale=s,c.font=u,c.textColor=l}else{var p=e.parse(t[o],1,fr);if(!p)return null;var h=p.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:p,scale:null,font:null,textColor:null})}}return new Rr(n)},Rr.prototype.evaluate=function(t){var e=function(e){var r=e.content.evaluate(t);return Mr(r)===vr?new Ar("",r,null,null,null):new Ar(zr(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)};return new kr(this.sections.map(e))},Rr.prototype.eachChild=function(t){for(var e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}},Rr.prototype.possibleOutputs=function(){return[void 0]},Rr.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t.push(n.content.serialize());var i={};n.scale&&(i["font-scale"]=n.scale.serialize()),n.font&&(i["text-font"]=n.font.serialize()),n.textColor&&(i["text-color"]=n.textColor.serialize()),t.push(i)}return t};var Fr=function(t){this.type=vr,this.input=t};Fr.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,lr);return r?new Fr(r):e.error("No image name provided.")},Fr.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=!1;return t.availableImages&&t.availableImages.indexOf(e)>-1&&(r=!0),new Ir({name:e,available:r})},Fr.prototype.eachChild=function(t){t(this.input)},Fr.prototype.possibleOutputs=function(){return[void 0]},Fr.prototype.serialize=function(){return["image",this.input.serialize()]};var Ur={"to-boolean":cr,"to-color":pr,"to-number":ur,"to-string":lr},jr=function(t,e){this.type=t,this.args=e};jr.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[0];if(f(Ur[r],r),("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");for(var n=Ur[r],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,fr);if(!a)return null;i.push(a)}return new jr(n,i)},jr.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,r,n=0,i=this.args;n<i.length;n+=1){var o=i[n];if(e=o.evaluate(t),r=null,e instanceof Er)return e;if("string"===typeof e){var a=t.parseColor(e);if(a)return a}else if(Array.isArray(e)&&(r=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":Cr(e[0],e[1],e[2],e[3]),!r))return new Er(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Dr(r||"Could not parse color from value '"+("string"===typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var s=null,u=0,l=this.args;u<l.length;u+=1){var c=l[u];if(s=c.evaluate(t),null===s)return 0;var p=Number(s);if(!isNaN(p))return p}throw new Dr("Could not convert "+JSON.stringify(s)+" to number.")}return"formatted"===this.type.kind?kr.fromString(zr(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Ir.fromString(zr(this.args[0].evaluate(t))):zr(this.args[0].evaluate(t))},jr.prototype.eachChild=function(t){this.args.forEach(t)},jr.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},jr.prototype.serialize=function(){if("formatted"===this.type.kind)return new Rr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Fr(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var Nr=["Unknown","Point","LineString","Polygon"],Vr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null};Vr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Vr.prototype.geometryType=function(){return this.feature?"number"===typeof this.feature.type?Nr[this.feature.type]:this.feature.type:null},Vr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Vr.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Er.parse(t)),e};var qr=function(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n};function Zr(t){return Array.isArray(t)?"("+t.map(_r).join(", ")+")":"("+_r(t.type)+"...)"}qr.prototype.evaluate=function(t){return this._evaluate(t,this.args)},qr.prototype.eachChild=function(t){this.args.forEach(t)},qr.prototype.possibleOutputs=function(){return[void 0]},qr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},qr.parse=function(t,e){var r,n=t[0],i=qr.definitions[n];if(!i)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(function(e){var r=e[0];return!Array.isArray(r)||r.length===t.length-1}),u=null,l=0,c=s;l<c.length;l+=1){var p=c[l],h=p[0],d=p[1];u=new Kr(e.registry,e.path,null,e.scope);for(var m=[],y=!1,v=1;v<t.length;v++){var g=t[v],_=Array.isArray(h)?h[v-1]:h.type,x=u.parse(g,1+m.length,_);if(!x){y=!0;break}m.push(x)}if(!y)if(Array.isArray(h)&&h.length!==m.length)u.error("Expected "+h.length+" arguments, but found "+m.length+" instead.");else{for(var b=0;b<m.length;b++){var w=Array.isArray(h)?h[b]:h.type,S=m[b];u.concat(b+1).checkSubtype(w,S.type)}if(0===u.errors.length)return new qr(n,o,d,m)}}if(f(!u||u.errors.length>0),1===s.length)(r=e.errors).push.apply(r,u.errors);else{for(var E=s.length?s:a,T=E.map(function(t){var e=t[0];return Zr(e)}).join(" | "),A=[],k=1;k<t.length;k++){var I=e.parse(t[k],1+A.length);if(!I)return null;A.push(_r(I.type))}e.error("Expected arguments of type "+T+", but found ("+A.join(", ")+") instead.")}return null},qr.register=function(t,e){for(var r in f(!qr.definitions),qr.definitions=e,e)t[r]=qr};var Gr=function(t,e,r){this.type=mr,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e};function Xr(t){if(t instanceof qr){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!Xr(t)&&(e=!1)}),e}function Wr(t){if(t instanceof qr&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!Wr(t)&&(e=!1)}),e}function $r(t,e){if(t instanceof qr&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild(function(t){r&&!$r(t,e)&&(r=!1)}),r}Gr.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var r=t[1];if("object"!==typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,cr);if(!n)return null;var i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,cr);if(!i)return null;var o=null;return r["locale"]&&(o=e.parse(r["locale"],1,lr),!o)?null:new Gr(n,i,o)},Gr.prototype.evaluate=function(t){return new Tr(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},Gr.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},Gr.prototype.possibleOutputs=function(){return[void 0]},Gr.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t["locale"]=this.locale.serialize()),["collator",t]};var Hr=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Hr.parse=function(t,e){if(2!==t.length||"string"!==typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var r=t[1];return e.scope.has(r)?new Hr(r,e.scope.get(r)):e.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},Hr.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Hr.prototype.eachChild=function(){},Hr.prototype.possibleOutputs=function(){return[void 0]},Hr.prototype.serialize=function(){return["var",this.name]};var Kr=function(t,e,r,n,i){void 0===e&&(e=[]),void 0===n&&(n=new ar),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=n,this.errors=i,this.expectedType=r};function Yr(t){if(t instanceof Hr)return Yr(t.boundExpression);if(t instanceof qr&&"error"===t.name)return!1;if(t instanceof Gr)return!1;var e=t instanceof jr||t instanceof Br,r=!0;return t.eachChild(function(t){r=e?r&&Yr(t):r&&t instanceof Lr}),!!r&&(Xr(t)&&$r(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]))}function Jr(t,e){var r,n,i=t.length-1,o=0,a=i,s=0;while(o<=a)if(s=Math.floor((o+a)/2),r=t[s],n=t[s+1],r<=e){if(s===i||e<n)return s;o=s+1}else{if(!(r>e))throw new Dr("Input is not a number.");a=s-1}return 0}Kr.prototype.parse=function(t,e,r,n,i){return void 0===i&&(i={}),e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)},Kr.prototype._parse=function(t,e){function r(t,e,r){return"assert"===r?new Br(e,[t]):"coerce"===r?new jr(e,[t]):t}if(null!==t&&"string"!==typeof t&&"boolean"!==typeof t&&"number"!==typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!==typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=r(o,a,e.typeAnnotation||"coerce");else o=r(o,a,e.typeAnnotation||"assert")}if(!(o instanceof Lr)&&"resolvedImage"!==o.type.kind&&Yr(o)){var u=new Vr;try{o=new Lr(o.type,o.evaluate(u))}catch(l){return this.error(l.message),null}}return o}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return"undefined"===typeof t?this.error("'undefined' value invalid. Use null instead."):"object"===typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},Kr.prototype.concat=function(t,e,r){var n="number"===typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new Kr(this.registry,n,e||null,i,this.errors)},Kr.prototype.error=function(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];var n=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new or(n,t))},Kr.prototype.checkSubtype=function(t,e){var r=br(t,e);return r&&this.error(r),r};var Qr=function(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var n=0,i=r;n<i.length;n+=1){var o=i[n],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};function tn(t,e,r){return t*(1-r)+e*r}function en(t,e,r){return new Er(tn(t.r,e.r,r),tn(t.g,e.g,r),tn(t.b,e.b,r),tn(t.a,e.a,r))}function rn(t,e,r){return t.map(function(t,n){return tn(t,e[n],r)})}Qr.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!==0)return e.error("Expected an even number of arguments.");var r=e.parse(t[1],1,ur);if(!r)return null;var n=[],i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],u=o,l=o+1;if("number"!==typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(n.length&&n[n.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var c=e.parse(s,l,i);if(!c)return null;i=i||c.type,n.push([a,c])}return new Qr(i,r,n)},Qr.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);var o=Jr(e,n);return r[o].evaluate(t)},Qr.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1){var n=r[e];t(n)}},Qr.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},Qr.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var nn=Object.freeze({__proto__:null,number:tn,color:en,array:rn}),on=.95047,an=1,sn=1.08883,un=4/29,ln=6/29,cn=3*ln*ln,pn=ln*ln*ln,hn=Math.PI/180,fn=180/Math.PI;function dn(t){return t>pn?Math.pow(t,1/3):t/cn+un}function mn(t){return t>ln?t*t*t:cn*(t-un)}function yn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function vn(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function gn(t){var e=vn(t.r),r=vn(t.g),n=vn(t.b),i=dn((.4124564*e+.3575761*r+.1804375*n)/on),o=dn((.2126729*e+.7151522*r+.072175*n)/an),a=dn((.0193339*e+.119192*r+.9503041*n)/sn);return{l:116*o-16,a:500*(i-o),b:200*(o-a),alpha:t.a}}function _n(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=an*mn(e),r=on*mn(r),n=sn*mn(n),new Er(yn(3.2404542*r-1.5371385*e-.4985314*n),yn(-.969266*r+1.8760108*e+.041556*n),yn(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function xn(t,e,r){return{l:tn(t.l,e.l,r),a:tn(t.a,e.a,r),b:tn(t.b,e.b,r),alpha:tn(t.alpha,e.alpha,r)}}function bn(t){var e=gn(t),r=e.l,n=e.a,i=e.b,o=Math.atan2(i,n)*fn;return{h:o<0?o+360:o,c:Math.sqrt(n*n+i*i),l:r,alpha:t.a}}function wn(t){var e=t.h*hn,r=t.c,n=t.l;return _n({l:n,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})}function Sn(t,e,r){var n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}function En(t,e,r){return{h:Sn(t.h,e.h,r),c:tn(t.c,e.c,r),l:tn(t.l,e.l,r),alpha:tn(t.alpha,e.alpha,r)}}var Tn={forward:gn,reverse:_n,interpolate:xn},An={forward:bn,reverse:wn,interpolate:En},kn=Object.freeze({__proto__:null,lab:Tn,hcl:An}),In=function(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],u=s[0],l=s[1];this.labels.push(u),this.outputs.push(l)}};function Cn(t,e,r,n){var i=n-r,o=t-r;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}In.interpolationFactor=function(t,e,r,n){var i=0;if("exponential"===t.name)i=Cn(e,t.base,r,n);else if("linear"===t.name)i=Cn(e,1,r,n);else if("cubic-bezier"===t.name){var o=t.controlPoints,a=new m(o[0],o[1],o[2],o[3]);i=a.solve(Cn(e,1,r,n))}return i},In.parse=function(t,e){var r=t[0],n=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var a=n[1];if("number"!==typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:a}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some(function(t){return"number"!==typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!==0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,ur),!i)return null;var u=[],l=null;"interpolate-hcl"===r||"interpolate-lab"===r?l=pr:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var c=0;c<o.length;c+=2){var p=o[c],h=o[c+1],f=c+3,d=c+4;if("number"!==typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(u.length&&u[u.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var m=e.parse(h,d,l);if(!m)return null;l=l||m.type,u.push([p,m])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"===typeof l.N?new In(l,r,n,i,u):e.error("Type "+_r(l)+" is not interpolatable.")},In.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);var o=Jr(e,n),a=e[o],s=e[o+1],u=In.interpolationFactor(this.interpolation,n,a,s),l=r[o].evaluate(t),c=r[o+1].evaluate(t);return"interpolate"===this.operator?nn[this.type.kind.toLowerCase()](l,c,u):"interpolate-hcl"===this.operator?An.reverse(An.interpolate(An.forward(l),An.forward(c),u)):Tn.reverse(Tn.interpolate(Tn.forward(l),Tn.forward(c),u))},In.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1){var n=r[e];t(n)}},In.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},In.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e};var Pn=function(t,e){this.type=t,this.args=e};Pn.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var r=null,n=e.expectedType;n&&"value"!==n.kind&&(r=n);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=a[o],u=e.parse(s,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,i.push(u)}f(r);var l=n&&i.some(function(t){return br(n,t.type)});return new Pn(l?fr:r,i)},Pn.prototype.evaluate=function(t){for(var e,r=null,n=0,i=0,o=this.args;i<o.length;i+=1){var a=o[i];if(n++,r=a.evaluate(t),r&&r instanceof Ir&&!r.available&&(e||(e=r.name),r=null,n===this.args.length&&(r=e)),null!==r)break}return r},Pn.prototype.eachChild=function(t){this.args.forEach(t)},Pn.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Pn.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Mn=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Mn.prototype.evaluate=function(t){return this.result.evaluate(t)},Mn.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1){var n=r[e];t(n[1])}t(this.result)},Mn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],n=1;n<t.length-1;n+=2){var i=t[n];if("string"!==typeof i)return e.error("Expected string, but found "+typeof i+" instead.",n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var o=e.parse(t[n+1],n+1);if(!o)return null;r.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return a?new Mn(r,a):null},Mn.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Mn.prototype.serialize=function(){for(var t=["let"],e=0,r=this.bindings;e<r.length;e+=1){var n=r[e],i=n[0],o=n[1];t.push(i,o.serialize())}return t.push(this.result.serialize()),t};var zn=function(t,e,r){this.type=t,this.index=e,this.input=r};function Ln(t){return"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind}function Dn(t){return"boolean"===typeof t||"string"===typeof t||"number"===typeof t}function On(t){return Array.isArray(t)||"string"===typeof t}zn.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,ur),n=e.parse(t[2],2,gr(e.expectedType||fr));if(!r||!n)return null;var i=n.type;return new zn(i.itemType,r,n)},zn.prototype.evaluate=function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new Dr("Array index out of bounds: "+e+" < 0.");if(e>=r.length)throw new Dr("Array index out of bounds: "+e+" > "+(r.length-1)+".");if(e!==Math.floor(e))throw new Dr("Array index must be an integer, but found "+e+" instead.");return r[e]},zn.prototype.eachChild=function(t){t(this.index),t(this.input)},zn.prototype.possibleOutputs=function(){return[void 0]},zn.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Bn=function(t,e){this.type=cr,this.needle=t,this.haystack=e};Bn.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,fr),n=e.parse(t[2],2,fr);return r&&n?Ln(r.type)?new Bn(r,n):e.error("Expected first argument to be of type boolean, string, number or null, but found "+_r(r.type)+" instead"):null},Bn.prototype.evaluate=function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!e||!r)return!1;if(!Dn(e))throw new Dr("Expected first argument to be of type boolean, string or number, but found "+_r(Mr(e))+" instead.");if(!On(r))throw new Dr("Expected second argument to be of type array or string, but found "+_r(Mr(r))+" instead.");return r.indexOf(e)>=0},Bn.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},Bn.prototype.possibleOutputs=function(){return[!0,!1]},Bn.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Rn=function(t,e,r,n,i,o){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=o};Rn.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!==1)return e.error("Expected an even number of arguments.");var r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!==typeof h&&"string"!==typeof h)return l.error("Branch labels must be numbers or strings.");if("number"===typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"===typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(r){if(l.checkSubtype(r,Mr(h)))return null}else r=Mr(h);if("undefined"!==typeof i[String(h)])return l.error("Branch labels must be unique.");i[String(h)]=o.length}var d=e.parse(u,a,n);if(!d)return null;n=n||d.type,o.push(d)}var m=e.parse(t[1],1,fr);if(!m)return null;var y=e.parse(t[t.length-1],t.length-1,n);return y?(f(r&&n),"value"!==m.type.kind&&e.concat(1).checkSubtype(r,m.type)?null:new Rn(r,n,m,i,o,y)):null},Rn.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=Mr(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise;return r.evaluate(t)},Rn.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Rn.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Rn.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),n=[],i={},o=0,a=r;o<a.length;o+=1){var s=a[o],u=i[this.cases[s]];void 0===u?(i[this.cases[s]]=n.length,n.push([this.cases[s],[s]])):n[u][1].push(s)}for(var l=function(e){return"number"===t.inputType.kind?Number(e):e},c=0,p=n;c<p.length;c+=1){var h=p[c],f=(u=h[0],h[1]);1===f.length?e.push(l(f[0])):e.push(f.map(l)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var Fn=function(t,e,r){this.type=t,this.branches=e,this.otherwise=r};function Un(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function jn(t,e,r){return e===r}function Nn(t,e,r){return e!==r}function Vn(t,e,r){return e<r}function qn(t,e,r){return e>r}function Zn(t,e,r){return e<=r}function Gn(t,e,r){return e>=r}function Xn(t,e,r,n){return 0===n.compare(e,r)}function Wn(t,e,r,n){return!Xn(t,e,r,n)}function $n(t,e,r,n){return n.compare(e,r)<0}function Hn(t,e,r,n){return n.compare(e,r)>0}function Kn(t,e,r,n){return n.compare(e,r)<=0}function Yn(t,e,r,n){return n.compare(e,r)>=0}function Jn(t,e,r){var n="=="!==t&&"!="!==t;return function(){function i(t,e,r){this.type=cr,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=t[0],o=e.parse(t[1],1,fr);if(!o)return null;if(!Un(r,o.type))return e.concat(1).error('"'+r+"\" comparisons are not supported for type '"+_r(o.type)+"'.");var a=e.parse(t[2],2,fr);if(!a)return null;if(!Un(r,a.type))return e.concat(2).error('"'+r+"\" comparisons are not supported for type '"+_r(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+_r(o.type)+"' and '"+_r(a.type)+"'.");n&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Br(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Br(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,mr),!s)return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){var s=Mr(o),u=Mr(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Dr('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var l=Mr(o),c=Mr(a);if("string"!==l.kind||"string"!==c.kind)return e(i,o,a)}return this.collator?r(i,o,a,this.collator.evaluate(i)):e(i,o,a)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.possibleOutputs=function(){return[!0,!1]},i.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},i}()}Fn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!==0)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,cr);if(!o)return null;var a=e.parse(t[i+1],i+1,r);if(!a)return null;n.push([o,a]),r=r||a.type}var s=e.parse(t[t.length-1],t.length-1,r);return s?(f(r),new Fn(r,n,s)):null},Fn.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[0],o=n[1];if(i.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},Fn.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[0],o=n[1];t(i),t(o)}t(this.otherwise)},Fn.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map(function(t){t[0];var e=t[1];return e.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Fn.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Qn=Jn("==",jn,Xn),ti=Jn("!=",Nn,Wn),ei=Jn("<",Vn,$n),ri=Jn(">",qn,Hn),ni=Jn("<=",Zn,Kn),ii=Jn(">=",Gn,Yn),oi=function(t,e,r,n,i){this.type=lr,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=i};oi.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,ur);if(!r)return null;var n=t[2];if("object"!==typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");var i=null;if(n["locale"]&&(i=e.parse(n["locale"],1,lr),!i))return null;var o=null;if(n["currency"]&&(o=e.parse(n["currency"],1,lr),!o))return null;var a=null;if(n["min-fraction-digits"]&&(a=e.parse(n["min-fraction-digits"],1,ur),!a))return null;var s=null;return n["max-fraction-digits"]&&(s=e.parse(n["max-fraction-digits"],1,ur),!s)?null:new oi(r,i,o,a,s)},oi.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},oi.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},oi.prototype.possibleOutputs=function(){return[void 0]},oi.prototype.serialize=function(){var t={};return this.locale&&(t["locale"]=this.locale.serialize()),this.currency&&(t["currency"]=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var ai=function(t){this.type=ur,this.input=t};ai.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error("Expected argument of type string or array, but found "+_r(r.type)+" instead."):new ai(r):null},ai.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"===typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Dr("Expected value to be of type string or array, but found "+_r(Mr(e))+" instead.")},ai.prototype.eachChild=function(t){t(this.input)},ai.prototype.possibleOutputs=function(){return[void 0]},ai.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var si={"==":Qn,"!=":ti,">":ri,"<":ei,">=":ii,"<=":ni,array:Br,at:zn,boolean:Br,case:Fn,coalesce:Pn,collator:Gr,format:Rr,image:Fr,in:Bn,interpolate:In,"interpolate-hcl":In,"interpolate-lab":In,length:ai,let:Mn,literal:Lr,match:Rn,number:Br,"number-format":oi,object:Br,step:Qr,string:Br,"to-boolean":jr,"to-color":jr,"to-number":jr,"to-string":jr,var:Hr};function ui(t,e){var r=e[0],n=e[1],i=e[2],o=e[3];r=r.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=Cr(r,n,i,a);if(s)throw new Dr(s);return new Er(r/255*a,n/255*a,i/255*a,a)}function li(t,e){return t in e}function ci(t,e){var r=e[t];return"undefined"===typeof r?null:r}function pi(t,e,r,n){while(r<=n){var i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}function hi(t){return{type:t}}function fi(t){return{result:"success",value:t}}function di(t){return{result:"error",value:t}}function mi(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function yi(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function vi(t){return!!t.expression&&t.expression.interpolated}function gi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function _i(t){return"object"===typeof t&&null!==t&&!Array.isArray(t)}function xi(t){return t}function bi(t,e){var r,n,i,o="color"===e.type,a=t.stops&&"object"===typeof t.stops[0][0],s=a||void 0!==t.property,u=a||!s,l=t.type||(vi(e)?"exponential":"interval");if(o&&(t=rr({},t),t.stops&&(t.stops=t.stops.map(function(t){return[t[0],Er.parse(t[1])]})),t.default?t.default=Er.parse(t.default):t.default=Er.parse(e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!kn[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);if("exponential"===l)r=Ti;else if("interval"===l)r=Ei;else if("categorical"===l){r=Si,n=Object.create(null);for(var c=0,p=t.stops;c<p.length;c+=1){var h=p[c];n[h[0]]=h[1]}i=typeof t.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');r=Ai}if(a){for(var f={},d=[],m=0;m<t.stops.length;m++){var y=t.stops[m],v=y[0].zoom;void 0===f[v]&&(f[v]={zoom:v,type:t.type,property:t.property,default:t.default,stops:[]},d.push(v)),f[v].stops.push([y[0].value,y[1]])}for(var g=[],_=0,x=d;_<x.length;_+=1){var b=x[_];g.push([f[b].zoom,bi(f[b],e)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:In.interpolationFactor.bind(void 0,w),zoomStops:g.map(function(t){return t[0]}),evaluate:function(r,n){var i=r.zoom;return Ti({stops:g,base:t.base},e,i).evaluate(i,n)}}}if(u){var S="exponential"===l?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:S,interpolationFactor:In.interpolationFactor.bind(void 0,S),zoomStops:t.stops.map(function(t){return t[0]}),evaluate:function(o){var a=o.zoom;return r(t,e,a,n,i)}}}return{kind:"source",evaluate:function(o,a){var s=a&&a.properties?a.properties[t.property]:void 0;return void 0===s?wi(t.default,e.default):r(t,e,s,n,i)}}}function wi(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function Si(t,e,r,n,i){var o=typeof r===i?n[r]:void 0;return wi(o,t.default,e.default)}function Ei(t,e,r){if("number"!==gi(r))return wi(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];var i=Jr(t.stops.map(function(t){return t[0]}),r);return t.stops[i][1]}function Ti(t,e,r){var n=void 0!==t.base?t.base:1;if("number"!==gi(r))return wi(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];var o=Jr(t.stops.map(function(t){return t[0]}),r),a=ki(r,n,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],l=nn[e.type]||xi;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=kn[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"===typeof s.evaluate?{evaluate:function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];var r=s.evaluate.apply(void 0,t),n=u.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==n)return l(r,n,a)}}:l(s,u,a)}function Ai(t,e,r){return"color"===e.type?r=Er.parse(r):"formatted"===e.type?r=kr.fromString(r.toString()):"resolvedImage"===e.type?r=Ir.fromString(r.toString()):gi(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),wi(r,t.default,e.default)}function ki(t,e,r,n){var i=n-r,o=t-r;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}qr.register(si,{error:[dr,[lr],function(t,e){var r=e[0];throw new Dr(r.evaluate(t))}],typeof:[lr,[fr],function(t,e){var r=e[0];return _r(Mr(r.evaluate(t)))}],"to-rgba":[gr(ur,4),[pr],function(t,e){var r=e[0];return r.evaluate(t).toArray()}],rgb:[pr,[ur,ur,ur],ui],rgba:[pr,[ur,ur,ur,ur],ui],has:{type:cr,overloads:[[[lr],function(t,e){var r=e[0];return li(r.evaluate(t),t.properties())}],[[lr,hr],function(t,e){var r=e[0],n=e[1];return li(r.evaluate(t),n.evaluate(t))}]]},get:{type:fr,overloads:[[[lr],function(t,e){var r=e[0];return ci(r.evaluate(t),t.properties())}],[[lr,hr],function(t,e){var r=e[0],n=e[1];return ci(r.evaluate(t),n.evaluate(t))}]]},"feature-state":[fr,[lr],function(t,e){var r=e[0];return ci(r.evaluate(t),t.featureState||{})}],properties:[hr,[],function(t){return t.properties()}],"geometry-type":[lr,[],function(t){return t.geometryType()}],id:[fr,[],function(t){return t.id()}],zoom:[ur,[],function(t){return t.globals.zoom}],"heatmap-density":[ur,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[ur,[],function(t){return t.globals.lineProgress||0}],accumulated:[fr,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[ur,hi(ur),function(t,e){for(var r=0,n=0,i=e;n<i.length;n+=1){var o=i[n];r+=o.evaluate(t)}return r}],"*":[ur,hi(ur),function(t,e){for(var r=1,n=0,i=e;n<i.length;n+=1){var o=i[n];r*=o.evaluate(t)}return r}],"-":{type:ur,overloads:[[[ur,ur],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)-n.evaluate(t)}],[[ur],function(t,e){var r=e[0];return-r.evaluate(t)}]]},"/":[ur,[ur,ur],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)/n.evaluate(t)}],"%":[ur,[ur,ur],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)%n.evaluate(t)}],ln2:[ur,[],function(){return Math.LN2}],pi:[ur,[],function(){return Math.PI}],e:[ur,[],function(){return Math.E}],"^":[ur,[ur,ur],function(t,e){var r=e[0],n=e[1];return Math.pow(r.evaluate(t),n.evaluate(t))}],sqrt:[ur,[ur],function(t,e){var r=e[0];return Math.sqrt(r.evaluate(t))}],log10:[ur,[ur],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN10}],ln:[ur,[ur],function(t,e){var r=e[0];return Math.log(r.evaluate(t))}],log2:[ur,[ur],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN2}],sin:[ur,[ur],function(t,e){var r=e[0];return Math.sin(r.evaluate(t))}],cos:[ur,[ur],function(t,e){var r=e[0];return Math.cos(r.evaluate(t))}],tan:[ur,[ur],function(t,e){var r=e[0];return Math.tan(r.evaluate(t))}],asin:[ur,[ur],function(t,e){var r=e[0];return Math.asin(r.evaluate(t))}],acos:[ur,[ur],function(t,e){var r=e[0];return Math.acos(r.evaluate(t))}],atan:[ur,[ur],function(t,e){var r=e[0];return Math.atan(r.evaluate(t))}],min:[ur,hi(ur),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[ur,hi(ur),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[ur,[ur],function(t,e){var r=e[0];return Math.abs(r.evaluate(t))}],round:[ur,[ur],function(t,e){var r=e[0],n=r.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[ur,[ur],function(t,e){var r=e[0];return Math.floor(r.evaluate(t))}],ceil:[ur,[ur],function(t,e){var r=e[0];return Math.ceil(r.evaluate(t))}],"filter-==":[cr,[lr,fr],function(t,e){var r=e[0],n=e[1];return t.properties()[r.value]===n.value}],"filter-id-==":[cr,[fr],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[cr,[lr],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[cr,[lr,fr],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],o=n.value;return typeof i===typeof o&&i<o}],"filter-id-<":[cr,[fr],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n===typeof i&&n<i}],"filter->":[cr,[lr,fr],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],o=n.value;return typeof i===typeof o&&i>o}],"filter-id->":[cr,[fr],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n===typeof i&&n>i}],"filter-<=":[cr,[lr,fr],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],o=n.value;return typeof i===typeof o&&i<=o}],"filter-id-<=":[cr,[fr],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n===typeof i&&n<=i}],"filter->=":[cr,[lr,fr],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],o=n.value;return typeof i===typeof o&&i>=o}],"filter-id->=":[cr,[fr],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n===typeof i&&n>=i}],"filter-has":[cr,[fr],function(t,e){var r=e[0];return r.value in t.properties()}],"filter-has-id":[cr,[],function(t){return null!==t.id()}],"filter-type-in":[cr,[gr(lr)],function(t,e){var r=e[0];return r.value.indexOf(t.geometryType())>=0}],"filter-id-in":[cr,[gr(fr)],function(t,e){var r=e[0];return r.value.indexOf(t.id())>=0}],"filter-in-small":[cr,[lr,gr(fr)],function(t,e){var r=e[0],n=e[1];return n.value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[cr,[lr,gr(fr)],function(t,e){var r=e[0],n=e[1];return pi(t.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:cr,overloads:[[[cr,cr],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)&&n.evaluate(t)}],[hi(cr),function(t,e){for(var r=0,n=e;r<n.length;r+=1){var i=n[r];if(!i.evaluate(t))return!1}return!0}]]},any:{type:cr,overloads:[[[cr,cr],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)||n.evaluate(t)}],[hi(cr),function(t,e){for(var r=0,n=e;r<n.length;r+=1){var i=n[r];if(i.evaluate(t))return!0}return!1}]]},"!":[cr,[cr],function(t,e){var r=e[0];return!r.evaluate(t)}],"is-supported-script":[cr,[lr],function(t,e){var r=e[0],n=t.globals&&t.globals.isSupportedScript;return!n||n(r.evaluate(t))}],upcase:[lr,[lr],function(t,e){var r=e[0];return r.evaluate(t).toUpperCase()}],downcase:[lr,[lr],function(t,e){var r=e[0];return r.evaluate(t).toLowerCase()}],concat:[lr,hi(fr),function(t,e){return e.map(function(e){return zr(e.evaluate(t))}).join("")}],"resolved-locale":[lr,[mr],function(t,e){var r=e[0];return r.evaluate(t).resolvedLocale()}]});var Ii=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Vr,this._defaultValue=e?Fi(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Ci(t){return Array.isArray(t)&&t.length>0&&"string"===typeof t[0]&&t[0]in si}function Pi(t,e){var r=new Kr(si,[],e?Ri(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?fi(new Ii(n,e)):(f(r.errors.length>0),di(r.errors))}Ii.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=i,this.expression.evaluate(this._evaluator)},Ii.prototype.evaluate=function(t,e,r,n,i){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=i||null;try{var o=this.expression.evaluate(this._evaluator);if(null===o||void 0===o||"number"===typeof o&&o!==o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new Dr("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(o)+" instead.");return o}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,"undefined"!==typeof console&&console.warn(a.message)),this._defaultValue}};var Mi=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Wr(e.expression)};Mi.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i)},Mi.prototype.evaluate=function(t,e,r,n,i){return this._styleExpression.evaluate(t,e,r,n,i)};var zi=function(t,e,r,n){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Wr(e.expression),this.interpolationType=n};function Li(t,e){if(t=Pi(t,e),"error"===t.result)return t;var r=t.value.expression,n=Xr(r);if(!n&&!mi(e))return di([new or("","data expressions not supported")]);var i=$r(r,["zoom"]);if(!i&&!yi(e))return di([new or("","zoom expressions not supported")]);var o=Bi(r);if(!o&&!i)return di([new or("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof or)return di([o]);if(o instanceof In&&!vi(e))return di([new or("",'"interpolate" expressions cannot be used with this property')]);if(!o)return fi(new Mi(n?"constant":"source",t.value));var a=o instanceof In?o.interpolation:void 0;return fi(new zi(n?"camera":"composite",t.value,o.labels,a))}zi.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i)},zi.prototype.evaluate=function(t,e,r,n,i){return this._styleExpression.evaluate(t,e,r,n,i)},zi.prototype.interpolationFactor=function(t,e,r){return this.interpolationType?In.interpolationFactor(this.interpolationType,t,e,r):0};var Di=function(t,e){this._parameters=t,this._specification=e,rr(this,bi(this._parameters,this._specification))};function Oi(t,e){if(_i(t))return new Di(t,e);if(Ci(t)){var r=Li(t,e);if("error"===r.result)throw new Error(r.value.map(function(t){return t.key+": "+t.message}).join(", "));return r.value}var n=t;return"string"===typeof t&&"color"===e.type&&(n=Er.parse(t)),{kind:"constant",evaluate:function(){return n}}}function Bi(t){var e=null;if(t instanceof Mn)e=Bi(t.result);else if(t instanceof Pn)for(var r=0,n=t.args;r<n.length;r+=1){var i=n[r];if(e=Bi(i),e)break}else(t instanceof Qr||t instanceof In)&&t.input instanceof qr&&"zoom"===t.input.name&&(e=t);return e instanceof or?e:(t.eachChild(function(t){var r=Bi(t);r instanceof or?e=r:!e&&r?e=new or("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new or("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e)}function Ri(t){var e={color:pr,string:lr,number:ur,enum:lr,boolean:cr,formatted:yr,resolvedImage:vr};return"array"===t.type?gr(e[t.value]||fr,t.length):e[t.type]}function Fi(t){return"color"===t.type&&_i(t.default)?new Er(0,0,0,0):"color"===t.type?Er.parse(t.default)||null:void 0===t.default?null:t.default}function Ui(t){var e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=gi(r);if("object"!==u)return[new tr(e,r,"object expected, "+u+" found")];for(var l in r){var c=l.split(".")[0],p=n[c]||n["*"],h=void 0;if(i[c])h=i[c];else if(n[c])h=yo;else if(i["*"])h=i["*"];else{if(!n["*"]){s.push(new tr(e,r[l],'unknown property "'+l+'"'));continue}h=yo}s=s.concat(h({key:(e?e+".":e)+l,value:r[l],valueSpec:p,style:o,styleSpec:a,object:r,objectKey:l},r))}for(var f in n)i[f]||n[f].required&&void 0===n[f]["default"]&&void 0===r[f]&&s.push(new tr(e,r,'missing required property "'+f+'"'));return s}function ji(t){var e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||yo;if("array"!==gi(e))return[new tr(o,e,"array expected, "+gi(e)+" found")];if(r.length&&e.length!==r.length)return[new tr(o,e,"array length "+r.length+" expected, length "+e.length+" found")];if(r["min-length"]&&e.length<r["min-length"])return[new tr(o,e,"array length at least "+r["min-length"]+" expected, length "+e.length+" found")];var s={type:r.value,values:r.values};i.$version<7&&(s.function=r.function),"object"===gi(r.value)&&(s=r.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:n,styleSpec:i,key:o+"["+l+"]"}));return u}function Ni(t){var e=t.key,r=t.value,n=t.valueSpec,i=gi(r);return"number"===i&&r!==r&&(i="NaN"),"number"!==i?[new tr(e,r,"number expected, "+i+" found")]:"minimum"in n&&r<n.minimum?[new tr(e,r,r+" is less than the minimum value "+n.minimum)]:"maximum"in n&&r>n.maximum?[new tr(e,r,r+" is greater than the maximum value "+n.maximum)]:[]}function Vi(t){var e,r,n,i=t.valueSpec,o=nr(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,u=!s,l="array"===gi(t.value.stops)&&"array"===gi(t.value.stops[0])&&"object"===gi(t.value.stops[0][0]),c=Ui({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:p,default:d}});return"identity"===o&&s&&c.push(new tr(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new tr(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!vi(t.valueSpec)&&c.push(new tr(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!mi(t.valueSpec)?c.push(new tr(t.key,t.value,"property functions not supported")):s&&!yi(t.valueSpec)&&c.push(new tr(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!l||void 0!==t.value.property||c.push(new tr(t.key,t.value,'"property" property is required')),c;function p(t){if("identity"===o)return[new tr(t.key,t.value,'identity function may not have a "stops" property')];var e=[],r=t.value;return e=e.concat(ji({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===gi(r)&&0===r.length&&e.push(new tr(t.key,r,"array must have at least one stop")),e}function h(t){var e=[],o=t.value,s=t.key;if("array"!==gi(o))return[new tr(s,o,"array expected, "+gi(o)+" found")];if(2!==o.length)return[new tr(s,o,"array length 2 expected, length "+o.length+" found")];if(l){if("object"!==gi(o[0]))return[new tr(s,o,"object expected, "+gi(o[0])+" found")];if(void 0===o[0].zoom)return[new tr(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new tr(s,o,"object stop key must have value")];if(n&&n>nr(o[0].zoom))return[new tr(s,o[0].zoom,"stop zoom values must appear in ascending order")];nr(o[0].zoom)!==n&&(n=nr(o[0].zoom),r=void 0,a={}),e=e.concat(Ui({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Ni,value:f}}))}else e=e.concat(f({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return Ci(ir(o[1]))?e.concat([new tr(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(yo({key:s+"[1]",value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function f(t,n){var s=gi(t.value),u=nr(t.value),l=null!==t.value?t.value:n;if(e){if(s!==e)return[new tr(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new tr(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return mi(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new tr(t.key,l,c)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==r&&u<r?[new tr(t.key,l,"stop domain values must appear in ascending order")]:(r=u,"categorical"===o&&u in a?[new tr(t.key,l,"stop domain values must be unique")]:(a[u]=!0,[])):[new tr(t.key,l,"integer expected, found "+u)]}function d(t){return yo({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}function qi(t){var e=("property"===t.expressionContext?Li:Pi)(ir(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(e){return new tr(""+t.key+e.key,t.value,e.message)});var r=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==r.possibleOutputs().indexOf(void 0))return[new tr(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Wr(r))return[new tr(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Wr(r))return[new tr(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!$r(r,["zoom","feature-state"]))return[new tr(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Xr(r))return[new tr(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Zi(t){var e=t.value,r=t.key,n=gi(e);return"boolean"!==n?[new tr(r,e,"boolean expected, "+n+" found")]:[]}function Gi(t){var e=t.key,r=t.value,n=gi(r);return"string"!==n?[new tr(e,r,"color expected, "+n+" found")]:null===Sr(r)?[new tr(e,r,'color expected, "'+r+'" found')]:[]}function Xi(t){var e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(nr(r))&&i.push(new tr(e,r,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(n.values).indexOf(nr(r))&&i.push(new tr(e,r,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(r)+" found")),i}function Wi(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&Array.isArray(t[2]);case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var n=r[e];if(!Wi(n)&&"boolean"!==typeof n)return!1}return!0;default:return!0}}Di.deserialize=function(t){return new Di(t._parameters,t._specification)},Di.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var $i={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Hi(t){if(null===t||void 0===t)return function(){return!0};Wi(t)||(t=Yi(t));var e=Pi(t,$i);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,r){return e.value.evaluate(t,r)}}function Ki(t,e){return t<e?-1:t>e?1:0}function Yi(t){if(!t)return!0;var e=t[0];if(t.length<=1)return"any"!==e;var r="=="===e?Ji(t[1],t[2],"=="):"!="===e?ro(Ji(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Ji(t[1],t[2],e):"any"===e?Qi(t.slice(1)):"all"===e?["all"].concat(t.slice(1).map(Yi)):"none"===e?["all"].concat(t.slice(1).map(Yi).map(ro)):"in"===e?to(t[1],t.slice(2)):"!in"===e?ro(to(t[1],t.slice(2))):"has"===e?eo(t[1]):"!has"!==e||ro(eo(t[1]));return r}function Ji(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function Qi(t){return["any"].concat(t.map(Yi))}function to(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!==typeof e[0]})?["filter-in-large",t,["literal",e.sort(Ki)]]:["filter-in-small",t,["literal",e]]}}function eo(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function ro(t){return["!",t]}function no(t){return Wi(ir(t.value))?qi(rr({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):io(t)}function io(t){var e=t.value,r=t.key;if("array"!==gi(e))return[new tr(r,e,"array expected, "+gi(e)+" found")];var n,i=t.styleSpec,o=[];if(e.length<1)return[new tr(r,e,"filter array must have at least 1 element")];switch(o=o.concat(Xi({key:r+"[0]",value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),nr(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===nr(e[1])&&o.push(new tr(r,e,'"$type" cannot be use with operator "'+e[0]+'"'));case"==":case"!=":3!==e.length&&o.push(new tr(r,e,'filter array for operator "'+e[0]+'" must have 3 elements'));case"in":case"!in":e.length>=2&&(n=gi(e[1]),"string"!==n&&o.push(new tr(r+"[1]",e[1],"string expected, "+n+" found")));for(var a=2;a<e.length;a++)n=gi(e[a]),"$type"===nr(e[1])?o=o.concat(Xi({key:r+"["+a+"]",value:e[a],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&o.push(new tr(r+"["+a+"]",e[a],"string, number, or boolean expected, "+n+" found"));break;case"any":case"all":case"none":for(var s=1;s<e.length;s++)o=o.concat(io({key:r+"["+s+"]",value:e[s],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":n=gi(e[1]),2!==e.length?o.push(new tr(r,e,'filter array for "'+e[0]+'" operator must have 2 elements')):"string"!==n&&o.push(new tr(r+"[1]",e[1],"string expected, "+n+" found"));break}return o}function oo(t,e){var r=t.key,n=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return yo({key:r,value:o,valueSpec:i.transition,style:n,styleSpec:i});var l,c=t.valueSpec||s[a];if(!c)return[new tr(r,o,'unknown property "'+a+'"')];if("string"===gi(o)&&mi(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new tr(r,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===a&&n&&!n.glyphs&&p.push(new tr(r,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&_i(ir(o))&&"identity"===nr(o.type)&&p.push(new tr(r,o,'"text-font" does not support identity functions'))),p.concat(yo({key:t.key,value:o,valueSpec:c,style:n,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function ao(t){return oo(t,"paint")}function so(t){return oo(t,"layout")}function uo(t){var e=[],r=t.value,n=t.key,i=t.style,o=t.styleSpec;r.type||r.ref||e.push(new tr(n,r,'either "type" or "ref" is required'));var a,s=nr(r.type),u=nr(r.ref);if(r.id)for(var l=nr(r.id),c=0;c<t.arrayIndex;c++){var p=i.layers[c];nr(p.id)===l&&e.push(new tr(n,r.id,'duplicate layer id "'+r.id+'", previously used at line '+p.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach(function(t){t in r&&e.push(new tr(n,r[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){nr(t.id)===u&&(a=t)}),a?a.ref?e.push(new tr(n,r.ref,"ref cannot reference another ref layer")):s=nr(a.type):e.push(new tr(n,r.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(r.source){var h=i.sources&&i.sources[r.source],f=h&&nr(h.type);h?"vector"===f&&"raster"===s?e.push(new tr(n,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new tr(n,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==f||r["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new tr(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new tr(n,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new tr(n,r,'layer "'+r.id+'" must specify a "source-layer"')):e.push(new tr(n,r.source,'source "'+r.source+'" not found'))}else e.push(new tr(n,r,'missing required property "source"'));return e=e.concat(Ui({key:n,value:r,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return yo({key:n+".type",value:r.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"})},filter:no,layout:function(t){return Ui({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return so(rr({layerType:s},t))}}})},paint:function(t){return Ui({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return ao(rr({layerType:s},t))}}})}}})),e}function lo(t){var e=t.value,r=t.key,n=t.styleSpec,i=t.style;if(!e.type)return[new tr(r,e,'"type" is required')];var o,a=nr(e.type);switch(a){case"vector":case"raster":case"raster-dem":return o=Ui({key:r,value:e,valueSpec:n["source_"+a.replace("-","_")],style:t.style,styleSpec:n}),o;case"geojson":if(o=Ui({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],l=u[0],c=u[1],p="string"===typeof l?[l,["accumulated"],["get",s]]:l;o.push.apply(o,qi({key:r+"."+s+".map",value:c,expressionContext:"cluster-map"})),o.push.apply(o,qi({key:r+"."+s+".reduce",value:p,expressionContext:"cluster-reduce"}))}return o;case"video":return Ui({key:r,value:e,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return Ui({key:r,value:e,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return[new tr(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xi({key:r+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function co(t){var e=t.value,r=t.styleSpec,n=r.light,i=t.style,o=[],a=gi(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new tr("light",e,"object expected, "+a+" found")]),o;for(var s in e){var u=s.match(/^(.*)-transition$/);o=u&&n[u[1]]&&n[u[1]].transition?o.concat(yo({key:s,value:e[s],valueSpec:r.transition,style:i,styleSpec:r})):n[s]?o.concat(yo({key:s,value:e[s],valueSpec:n[s],style:i,styleSpec:r})):o.concat([new tr(s,e[s],'unknown property "'+s+'"')])}return o}function po(t){var e=t.value,r=t.key,n=gi(e);return"string"!==n?[new tr(r,e,"string expected, "+n+" found")]:[]}function ho(t){return 0===po(t).length?[]:qi(t)}function fo(t){return 0===po(t).length?[]:qi(t)}var mo={"*":function(){return[]},array:ji,boolean:Zi,number:Ni,color:Gi,constants:er,enum:Xi,filter:no,function:Vi,layer:uo,object:Ui,source:lo,light:co,string:po,formatted:ho,resolvedImage:fo};function yo(t){var e=t.value,r=t.valueSpec,n=t.styleSpec;if(r.expression&&_i(nr(e)))return Vi(t);if(r.expression&&Ci(ir(e)))return qi(t);if(r.type&&mo[r.type])return mo[r.type](t);var i=Ui(rr({},t,{valueSpec:r.type?n[r.type]:r}));return i}function vo(t){var e=t.value,r=t.key,n=po(t);return n.length?n:(-1===e.indexOf("{fontstack}")&&n.push(new tr(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new tr(r,e,'"glyphs" url must include a "{range}" token')),n)}function go(t,e){void 0===e&&(e=Qe);var r=[];return r=r.concat(yo({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:vo,"*":function(){return[]}}})),t.constants&&(r=r.concat(er({key:"constants",value:t.constants,style:t,styleSpec:e}))),_o(r)}function _o(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function xo(t){return function(){var e=[],r=arguments.length;while(r--)e[r]=arguments[r];return _o(t.apply(this,e))}}go.source=xo(lo),go.light=xo(co),go.layer=xo(uo),go.filter=xo(no),go.paintProperty=xo(ao),go.layoutProperty=xo(so);var bo=go,wo=(bo.source,bo.light),So=(bo.filter,bo.paintProperty),Eo=bo.layoutProperty;function To(t,e){var r=!1;if(e&&e.length)for(var n=0,i=e;n<i.length;n+=1){var o=i[n];t.fire(new de(new Error(o.message))),r=!0}return r}var Ao=Io,ko=3;function Io(t,e,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],r=i[2],this.d=e+2*r;for(var o=0;o<this.d*this.d;o++){var a=i[ko+o],s=i[ko+o+1];n.push(a===s?null:i.subarray(a,s))}var u=i[ko+n.length],l=i[ko+n.length+1];this.keys=i.subarray(u,l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var c=0;c<this.d*this.d;c++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var p=r/e*t;this.min=-p,this.max=t+p}Io.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},Io.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Io.prototype._insertCell=function(t,e,r,n,i,o){this.cells[i].push(o)},Io.prototype.query=function(t,e,r,n,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=r&&a<=n&&!i)return Array.prototype.slice.call(this.keys);var s=[],u={};return this._forEachCell(t,e,r,n,this._queryCell,s,u,i),s},Io.prototype._queryCell=function(t,e,r,n,i,o,a,s){var u=this.cells[i];if(null!==u)for(var l=this.keys,c=this.bboxes,p=0;p<u.length;p++){var h=u[p];if(void 0===a[h]){var f=4*h;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):t<=c[f+2]&&e<=c[f+3]&&r>=c[f+0]&&n>=c[f+1])?(a[h]=!0,o.push(l[h])):a[h]=!1}}},Io.prototype._forEachCell=function(t,e,r,n,i,o,a,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),c=this._convertToCellCoord(r),p=this._convertToCellCoord(n),h=u;h<=c;h++)for(var f=l;f<=p;f++){var d=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,r,n,d,o,a,s))return}},Io.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Io.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Io.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=ko+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(e+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[ko+a]=o,i.set(s,o),o+=s.length}return i[ko+t.length]=o,i.set(this.keys,o),o+=this.keys.length,i[ko+t.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Co=self.ImageData,Po={};function Mo(t,e,r){void 0===r&&(r={}),f(!Po[t],t+" is already registered."),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Po[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}for(var zo in Mo("Object",Object),Ao.serialize=function(t,e){var r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},Ao.deserialize=function(t){return new Ao(t.buffer)},Mo("Grid",Ao),Mo("Color",Er),Mo("Error",Error),Mo("ResolvedImage",Ir),Mo("StylePropertyFunction",Di),Mo("StyleExpression",Ii,{omit:["_evaluator"]}),Mo("ZoomDependentExpression",zi),Mo("ZoomConstantExpression",Mi),Mo("CompoundExpression",qr,{omit:["_evaluate"]}),si)si[zo]._classRegistryKey||Mo("Expression_"+zo,si[zo]);function Lo(t){return t&&"undefined"!==typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Do(t,e){if(null===t||void 0===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Lo(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var r=t;return e&&e.push(r.buffer),r}if(t instanceof Co)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],i=0,o=t;i<o.length;i+=1){var a=o[i];n.push(Do(a,e))}return n}if("object"===typeof t){var s=t.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");f(Po[u]);var l=s.serialize?s.serialize(t,e):{};if(s.serialize)f(!e||l!==e[e.length-1]);else{for(var c in t)if(t.hasOwnProperty(c)&&!(Po[u].omit.indexOf(c)>=0)){var p=t[c];l[c]=Po[u].shallow.indexOf(c)>=0?p:Do(p,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(l.$name=u),l}throw new Error("can't serialize object of type "+typeof t)}function Oo(t){if(null===t||void 0===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Lo(t)||ArrayBuffer.isView(t)||t instanceof Co)return t;if(Array.isArray(t))return t.map(Oo);if("object"===typeof t){var e=t.$name||"Object",r=Po[e],n=r.klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var i=Object.create(n.prototype),o=0,a=Object.keys(t);o<a.length;o+=1){var s=a[o];if("$name"!==s){var u=t[s];i[s]=Po[e].shallow.indexOf(s)>=0?u:Oo(u)}}return i}throw new Error("can't deserialize object of type "+typeof t)}var Bo=function(){this.first=!0};Bo.prototype.update=function(t,e){var r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))};var Ro={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Fo(t){for(var e=0,r=t;e<r.length;e+=1){var n=r[e];if(Vo(n.charCodeAt(0)))return!0}return!1}function Uo(t){for(var e=0,r=t;e<r.length;e+=1){var n=r[e];if(!jo(n.charCodeAt(0)))return!1}return!0}function jo(t){return!Ro["Arabic"](t)&&(!Ro["Arabic Supplement"](t)&&(!Ro["Arabic Extended-A"](t)&&(!Ro["Arabic Presentation Forms-A"](t)&&!Ro["Arabic Presentation Forms-B"](t))))}function No(t){return!(t<11904)&&(!!Ro["Bopomofo Extended"](t)||(!!Ro["Bopomofo"](t)||(!!Ro["CJK Compatibility Forms"](t)||(!!Ro["CJK Compatibility Ideographs"](t)||(!!Ro["CJK Compatibility"](t)||(!!Ro["CJK Radicals Supplement"](t)||(!!Ro["CJK Strokes"](t)||(!!Ro["CJK Symbols and Punctuation"](t)||(!!Ro["CJK Unified Ideographs Extension A"](t)||(!!Ro["CJK Unified Ideographs"](t)||(!!Ro["Enclosed CJK Letters and Months"](t)||(!!Ro["Halfwidth and Fullwidth Forms"](t)||(!!Ro["Hiragana"](t)||(!!Ro["Ideographic Description Characters"](t)||(!!Ro["Kangxi Radicals"](t)||(!!Ro["Katakana Phonetic Extensions"](t)||(!!Ro["Katakana"](t)||(!!Ro["Vertical Forms"](t)||(!!Ro["Yi Radicals"](t)||!!Ro["Yi Syllables"](t))))))))))))))))))))}function Vo(t){return 746===t||747===t||!(t<4352)&&(!!Ro["Bopomofo Extended"](t)||(!!Ro["Bopomofo"](t)||(!(!Ro["CJK Compatibility Forms"](t)||t>=65097&&t<=65103)||(!!Ro["CJK Compatibility Ideographs"](t)||(!!Ro["CJK Compatibility"](t)||(!!Ro["CJK Radicals Supplement"](t)||(!!Ro["CJK Strokes"](t)||(!(!Ro["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||(!!Ro["CJK Unified Ideographs Extension A"](t)||(!!Ro["CJK Unified Ideographs"](t)||(!!Ro["Enclosed CJK Letters and Months"](t)||(!!Ro["Hangul Compatibility Jamo"](t)||(!!Ro["Hangul Jamo Extended-A"](t)||(!!Ro["Hangul Jamo Extended-B"](t)||(!!Ro["Hangul Jamo"](t)||(!!Ro["Hangul Syllables"](t)||(!!Ro["Hiragana"](t)||(!!Ro["Ideographic Description Characters"](t)||(!!Ro["Kanbun"](t)||(!!Ro["Kangxi Radicals"](t)||(!!Ro["Katakana Phonetic Extensions"](t)||(!(!Ro["Katakana"](t)||12540===t)||(!(!Ro["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||(!(!Ro["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||(!!Ro["Unified Canadian Aboriginal Syllabics"](t)||(!!Ro["Unified Canadian Aboriginal Syllabics Extended"](t)||(!!Ro["Vertical Forms"](t)||(!!Ro["Yijing Hexagram Symbols"](t)||(!!Ro["Yi Syllables"](t)||!!Ro["Yi Radicals"](t))))))))))))))))))))))))))))))}function qo(t){return!(!Ro["Latin-1 Supplement"](t)||167!==t&&169!==t&&174!==t&&177!==t&&188!==t&&189!==t&&190!==t&&215!==t&&247!==t)||(!(!Ro["General Punctuation"](t)||8214!==t&&8224!==t&&8225!==t&&8240!==t&&8241!==t&&8251!==t&&8252!==t&&8258!==t&&8263!==t&&8264!==t&&8265!==t&&8273!==t)||(!!Ro["Letterlike Symbols"](t)||(!!Ro["Number Forms"](t)||(!(!Ro["Miscellaneous Technical"](t)||!(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215))||(!(!Ro["Control Pictures"](t)||9251===t)||(!!Ro["Optical Character Recognition"](t)||(!!Ro["Enclosed Alphanumerics"](t)||(!!Ro["Geometric Shapes"](t)||(!(!Ro["Miscellaneous Symbols"](t)||t>=9754&&t<=9759)||(!(!Ro["Miscellaneous Symbols and Arrows"](t)||!(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243))||(!!Ro["CJK Symbols and Punctuation"](t)||(!!Ro["Katakana"](t)||(!!Ro["Private Use Area"](t)||(!!Ro["CJK Compatibility Forms"](t)||(!!Ro["Small Form Variants"](t)||(!!Ro["Halfwidth and Fullwidth Forms"](t)||(8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)))))))))))))))))}function Zo(t){return!(Vo(t)||qo(t))}function Go(t){return Ro["Arabic"](t)||Ro["Arabic Supplement"](t)||Ro["Arabic Extended-A"](t)||Ro["Arabic Presentation Forms-A"](t)||Ro["Arabic Presentation Forms-B"](t)}function Xo(t){return t>=1424&&t<=2303||Ro["Arabic Presentation Forms-A"](t)||Ro["Arabic Presentation Forms-B"](t)}function Wo(t,e){return!(!e&&Xo(t))&&!(t>=2304&&t<=3583||t>=3840&&t<=4255||Ro["Khmer"](t))}function $o(t){for(var e=0,r=t;e<r.length;e+=1){var n=r[e];if(Xo(n.charCodeAt(0)))return!0}return!1}function Ho(t,e){for(var r=0,n=t;r<n.length;r+=1){var i=n[r];if(!Wo(i.charCodeAt(0),e))return!1}return!0}var Ko={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Yo=null,Jo=Ko.unavailable,Qo=null,ta=function(t){Yo&&Yo(t)};function ea(){ra.fire(new fe("pluginStateChange",{pluginStatus:Jo,pluginURL:Qo}))}var ra=new me,na=function(){return Jo},ia=function(t){return t({pluginStatus:Jo,pluginURL:Qo}),ra.on("pluginStateChange",t),t},oa=function(t,e,r){if(void 0===r&&(r=!1),Jo===Ko.deferred||Jo===Ko.loading||Jo===Ko.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Qo=ot.resolveURL(t),Jo=Ko.deferred,Yo=e,ea(),r||aa()},aa=function(){if(Jo!==Ko.deferred||!Qo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Jo=Ko.loading,ea(),Qo&&re({url:Qo},function(t){t?ta(t):(Jo=Ko.loaded,ea())})},sa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Jo===Ko.loaded||null!=sa.applyArabicShaping},isLoading:function(){return Jo===Ko.loading},setState:function(t){f(G(),"Cannot set the state of the rtl-text-plugin when not in the web-worker context"),Jo=t.pluginStatus,Qo=t.pluginURL},isParsed:function(){return f(G(),"rtl-text-plugin is only parsed on the worker-threads"),null!=sa.applyArabicShaping&&null!=sa.processBidirectionalText&&null!=sa.processStyledBidirectionalText},getPluginURL:function(){return f(G(),"rtl-text-plugin url can only be queried from the worker threads"),Qo}},ua=function(){sa.isLoading()||sa.isLoaded()||"deferred"!==na()||aa()},la=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Bo,this.transition={})};la.prototype.isSupportedScript=function(t){return Ho(t,sa.isLoaded())},la.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},la.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),r=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*e}};var ca=function(t,e){this.property=t,this.value=e,this.expression=Oi(void 0===e?t.specification.default:e,t.specification)};ca.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ca.prototype.possiblyEvaluate=function(t,e){return this.property.possiblyEvaluate(this,t,e)};var pa=function(t){this.property=t,this.value=new ca(t,void 0)};pa.prototype.transitioned=function(t,e){return new fa(this.property,this.value,e,I({},t.transition,this.transition),t.now)},pa.prototype.untransitioned=function(){return new fa(this.property,this.value,null,{},0)};var ha=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};ha.prototype.getValue=function(t){return F(this._values[t].value.value)},ha.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new pa(this._values[t].property)),this._values[t].value=new ca(this._values[t].property,null===e?void 0:F(e))},ha.prototype.getTransition=function(t){return F(this._values[t].transition)},ha.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new pa(this._values[t].property)),this._values[t].transition=F(e)||void 0},ha.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i);var o=this.getTransition(n);void 0!==o&&(t[n+"-transition"]=o)}return t},ha.prototype.transitioned=function(t,e){for(var r=new da(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var o=i[n];r._values[o]=this._values[o].transitioned(t,e._values[o])}return r},ha.prototype.untransitioned=function(){for(var t=new da(this._properties),e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e];t._values[n]=this._values[n].untransitioned()}return t};var fa=function(t,e,r,n,i){this.property=t,this.value=e,this.begin=i+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=r)};fa.prototype.possiblyEvaluate=function(t,e){var r=t.now||0,n=this.value.possiblyEvaluate(t,e),i=this.prior;if(i){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return i.possiblyEvaluate(t,e);var o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(i.possiblyEvaluate(t,e),n,x(o))}return n};var da=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};da.prototype.possiblyEvaluate=function(t,e){for(var r=new va(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var o=i[n];r._values[o]=this._values[o].possiblyEvaluate(t,e)}return r},da.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var r=e[t];if(this._values[r].prior)return!0}return!1};var ma=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};ma.prototype.getValue=function(t){return F(this._values[t].value)},ma.prototype.setValue=function(t,e){this._values[t]=new ca(this._values[t].property,null===e?void 0:F(e))},ma.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i)}return t},ma.prototype.possiblyEvaluate=function(t,e){for(var r=new va(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var o=i[n];r._values[o]=this._values[o].possiblyEvaluate(t,e)}return r};var ya=function(t,e,r){this.property=t,this.value=e,this.parameters=r};ya.prototype.isConstant=function(){return"constant"===this.value.kind},ya.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},ya.prototype.evaluate=function(t,e,r){return this.property.evaluate(this.value,this.parameters,t,e,r)};var va=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};va.prototype.get=function(t){return this._values[t]};var ga=function(t){this.specification=t};ga.prototype.possiblyEvaluate=function(t,e){return f(!t.isDataDriven()),t.expression.evaluate(e)},ga.prototype.interpolate=function(t,e,r){var n=nn[this.specification.type];return n?n(t,e,r):t};var _a=function(t,e){this.specification=t,this.overrides=e};_a.prototype.possiblyEvaluate=function(t,e,r){return"constant"===t.expression.kind||"camera"===t.expression.kind?new ya(this,{kind:"constant",value:t.expression.evaluate(e,null,{},r)},e):new ya(this,t.expression,e)},_a.prototype.interpolate=function(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new ya(this,{kind:"constant",value:void 0},t.parameters);var n=nn[this.specification.type];return n?new ya(this,{kind:"constant",value:n(t.value.value,e.value.value,r)},t.parameters):t},_a.prototype.evaluate=function(t,e,r,n,i){return"constant"===t.kind?t.value:t.evaluate(e,r,n,i)};var xa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(t,e,r){if(void 0===t.value)return new ya(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},r),i="resolvedImage"===t.property.specification.type,o=i&&"string"!==typeof n?n.name:n,a=this._calculate(o,o,o,e);return new ya(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new ya(this,{kind:"constant",value:s},e)}return new ya(this,t.expression,e)},e.prototype.evaluate=function(t,e,r,n,i){if("source"===t.kind){var o=t.evaluate(e,r,n,i);return this._calculate(o,o,o,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},r,n),t.evaluate({zoom:Math.floor(e.zoom)},r,n),t.evaluate({zoom:Math.floor(e.zoom)+1},r,n),e):t.value},e.prototype._calculate=function(t,e,r,n){var i=n.zoom;return i>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},e.prototype.interpolate=function(t){return t},e}(_a),ba=function(t){this.specification=t};ba.prototype.possiblyEvaluate=function(t,e,r){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},r);return this._calculate(n,n,n,e)}return f(!t.isDataDriven()),this._calculate(t.expression.evaluate(new la(Math.floor(e.zoom-1),e)),t.expression.evaluate(new la(Math.floor(e.zoom),e)),t.expression.evaluate(new la(Math.floor(e.zoom+1),e)),e)}},ba.prototype._calculate=function(t,e,r,n){var i=n.zoom;return i>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},ba.prototype.interpolate=function(t){return t};var wa=function(t){this.specification=t};wa.prototype.possiblyEvaluate=function(t,e,r){return!!t.expression.evaluate(e,null,{},r)},wa.prototype.interpolate=function(){return!1};var Sa=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var r=t[e];r.specification.overridable&&this.overridableProperties.push(e);var n=this.defaultPropertyValues[e]=new ca(r,void 0),i=this.defaultTransitionablePropertyValues[e]=new pa(r);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}};Mo("DataDrivenProperty",_a),Mo("DataConstantProperty",ga),Mo("CrossFadedDataDrivenProperty",xa),Mo("CrossFadedProperty",ba),Mo("ColorRampProperty",wa);var Ea="-transition",Ta=function(t){function e(e,r){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter=function(){return!0},"custom"!==e.type&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new ma(r.layout)),r.paint)){for(var n in this._transitionablePaint=new ha(r.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,r){if(void 0===r&&(r={}),null!==e&&void 0!==e){var n="layers."+this.id+".layout."+t;if(this._validate(Eo,n,t,e,r))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e},e.prototype.getPaintProperty=function(t){return O(t,Ea)?this._transitionablePaint.getTransition(t.slice(0,-Ea.length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,r){if(void 0===r&&(r={}),null!==e&&void 0!==e){var n="layers."+this.id+".paint."+t;if(this._validate(So,n,t,e,r))return!1}if(O(t,Ea))return this._transitionablePaint.setTransition(t.slice(0,-Ea.length),e||void 0),!1;var i=this._transitionablePaint._values[t],o="cross-faded-data-driven"===i.property.specification["property-type"],a=i.value.isDataDriven(),s=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var u=this._transitionablePaint._values[t].value,l=u.isDataDriven();return l||a||o||this._handleOverridablePaintPropertyUpdate(t,s,u)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,r){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||(!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility)},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),R(t,function(t,e){return void 0!==t&&!("layout"===e&&!Object.keys(t).length)&&!("paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,r,n,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&To(this,t.call(bo,{key:e,layerType:this.type,objectKey:r,value:n,styleSpec:Qe,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof ya&&mi(e.property.specification)&&(("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent))return!0}return!1},e}(me),Aa={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ka=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ia=128,Ca=5,Pa=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ma(t,e){void 0===e&&(e=1);var r=0,n=0,i=t.map(function(t){f(t.name.length);var i=za(t.type),o=r=La(r,Math.max(e,i)),a=t.components||1;return n=Math.max(n,i),r+=i*a,{name:t.name,type:t.type,components:a,offset:o}}),o=La(r,Math.max(n,e));return{members:i,size:o,alignment:e}}function za(t){return Aa[t].BYTES_PER_ELEMENT}function La(t,e){return Math.ceil(t/e)*e}Pa.serialize=function(t,e){return f(!t.isTransferred),t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Pa.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Pa.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Pa.prototype.clear=function(){this.length=0},Pa.prototype.resize=function(t){f(!this.isTransferred),this.reserve(t),this.length=t},Pa.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(this.capacity*Ca),Ia),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Pa.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Da=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.int16[n+0]=e,this.int16[n+1]=r,t},e}(Pa);Da.prototype.bytesPerElement=4,Mo("StructArrayLayout2i4",Da);var Oa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=r,this.int16[o+2]=n,this.int16[o+3]=i,t},e}(Pa);Oa.prototype.bytesPerElement=8,Mo("StructArrayLayout4i8",Oa);var Ba=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,o)},e.prototype.emplace=function(t,e,r,n,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Pa);Ba.prototype.bytesPerElement=12,Mo("StructArrayLayout2i4i12",Ba);var Ra=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,o)},e.prototype.emplace=function(t,e,r,n,i,o,a){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.uint8[u+4]=n,this.uint8[u+5]=i,this.uint8[u+6]=o,this.uint8[u+7]=a,t},e}(Pa);Ra.prototype.bytesPerElement=8,Mo("StructArrayLayout2i4ub8",Ra);var Fa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,r,n,i,o,a,s)},e.prototype.emplace=function(t,e,r,n,i,o,a,s,u){var l=8*t;return this.uint16[l+0]=e,this.uint16[l+1]=r,this.uint16[l+2]=n,this.uint16[l+3]=i,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(Pa);Fa.prototype.bytesPerElement=16,Mo("StructArrayLayout8ui16",Fa);var Ua=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o,a,s,u,l,c,p){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,r,n,i,o,a,s,u,l,c,p)},e.prototype.emplace=function(t,e,r,n,i,o,a,s,u,l,c,p,h){var f=12*t;return this.int16[f+0]=e,this.int16[f+1]=r,this.int16[f+2]=n,this.int16[f+3]=i,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=u,this.int16[f+8]=l,this.int16[f+9]=c,this.int16[f+10]=p,this.int16[f+11]=h,t},e}(Pa);Ua.prototype.bytesPerElement=24,Mo("StructArrayLayout4i4ui4i24",Ua);var ja=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=r,this.float32[i+2]=n,t},e}(Pa);ja.prototype.bytesPerElement=12,Mo("StructArrayLayout3f12",ja);var Na=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.uint32[r+0]=e,t},e}(Pa);Na.prototype.bytesPerElement=4,Mo("StructArrayLayout1ul4",Na);var Va=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o,a,s,u,l,c){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,r,n,i,o,a,s,u,l,c)},e.prototype.emplace=function(t,e,r,n,i,o,a,s,u,l,c,p){var h=12*t,f=6*t;return this.int16[h+0]=e,this.int16[h+1]=r,this.int16[h+2]=n,this.int16[h+3]=i,this.int16[h+4]=o,this.int16[h+5]=a,this.uint32[f+3]=s,this.uint16[h+8]=u,this.uint16[h+9]=l,this.int16[h+10]=c,this.int16[h+11]=p,t},e}(Pa);Va.prototype.bytesPerElement=24,Mo("StructArrayLayout6i1ul2ui2i24",Va);var qa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,o)},e.prototype.emplace=function(t,e,r,n,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Pa);qa.prototype.bytesPerElement=12,Mo("StructArrayLayout2i2i2i12",qa);var Za=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=r,this.float32[a+1]=n,this.float32[a+2]=i,t},e}(Pa);Za.prototype.bytesPerElement=12,Mo("StructArrayLayout2ub2f12",Za);var Ga=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o,a,s,u,l,c,p,h,f,d,m,y){var v=this.length;return this.resize(v+1),this.emplace(v,t,e,r,n,i,o,a,s,u,l,c,p,h,f,d,m,y)},e.prototype.emplace=function(t,e,r,n,i,o,a,s,u,l,c,p,h,f,d,m,y,v){var g=24*t,_=12*t,x=48*t;return this.int16[g+0]=e,this.int16[g+1]=r,this.uint16[g+2]=n,this.uint16[g+3]=i,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[g+10]=u,this.uint16[g+11]=l,this.uint16[g+12]=c,this.float32[_+7]=p,this.float32[_+8]=h,this.uint8[x+36]=f,this.uint8[x+37]=d,this.uint8[x+38]=m,this.uint32[_+10]=y,this.int16[g+22]=v,t},e}(Pa);Ga.prototype.bytesPerElement=48,Mo("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ga);var Xa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o,a,s,u,l,c,p,h,f,d,m,y,v,g,_,x,b,w,S,E,T){var A=this.length;return this.resize(A+1),this.emplace(A,t,e,r,n,i,o,a,s,u,l,c,p,h,f,d,m,y,v,g,_,x,b,w,S,E,T)},e.prototype.emplace=function(t,e,r,n,i,o,a,s,u,l,c,p,h,f,d,m,y,v,g,_,x,b,w,S,E,T,A){var k=30*t,I=15*t;return this.int16[k+0]=e,this.int16[k+1]=r,this.int16[k+2]=n,this.int16[k+3]=i,this.int16[k+4]=o,this.int16[k+5]=a,this.int16[k+6]=s,this.int16[k+7]=u,this.uint16[k+8]=l,this.uint16[k+9]=c,this.uint16[k+10]=p,this.uint16[k+11]=h,this.uint16[k+12]=f,this.uint16[k+13]=d,this.uint16[k+14]=m,this.uint16[k+15]=y,this.uint16[k+16]=v,this.uint16[k+17]=g,this.uint16[k+18]=_,this.uint16[k+19]=x,this.uint16[k+20]=b,this.uint16[k+21]=w,this.uint32[I+11]=S,this.float32[I+12]=E,this.float32[I+13]=T,this.float32[I+14]=A,t},e}(Pa);Xa.prototype.bytesPerElement=60,Mo("StructArrayLayout8i14ui1ul3f60",Xa);var Wa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.float32[r+0]=e,t},e}(Pa);Wa.prototype.bytesPerElement=4,Mo("StructArrayLayout1f4",Wa);var $a=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=r,this.int16[i+2]=n,t},e}(Pa);$a.prototype.bytesPerElement=6,Mo("StructArrayLayout3i6",$a);var Ha=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=2*t,o=4*t;return this.uint32[i+0]=e,this.uint16[o+2]=r,this.uint16[o+3]=n,t},e}(Pa);Ha.prototype.bytesPerElement=8,Mo("StructArrayLayout1ul2ui8",Ha);var Ka=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,this.uint16[i+2]=n,t},e}(Pa);Ka.prototype.bytesPerElement=6,Mo("StructArrayLayout3ui6",Ka);var Ya=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,t},e}(Pa);Ya.prototype.bytesPerElement=4,Mo("StructArrayLayout2ui4",Ya);var Ja=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.uint16[r+0]=e,t},e}(Pa);Ja.prototype.bytesPerElement=2,Mo("StructArrayLayout1ui2",Ja);var Qa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.float32[n+0]=e,this.float32[n+1]=r,t},e}(Pa);Qa.prototype.bytesPerElement=8,Mo("StructArrayLayout2f8",Qa);var ts=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=r,this.float32[o+2]=n,this.float32[o+3]=i,t},e}(Pa);ts.prototype.bytesPerElement=16,Mo("StructArrayLayout4f16",ts);var es=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.radius.get=function(){return this._structArray.int16[this._pos2+10]},r.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},r.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},r.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},r.anchorPoint.get=function(){return new v(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}(ka);es.prototype.size=24;var rs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return f(!this.isTransferred),new es(this,t)},e}(Va);Mo("CollisionBoxArray",rs);var ns=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},r.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},r.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},r.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},r.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},r.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},r.associatedIconIndex.set=function(t){this._structArray.int16[this._pos2+22]=t},Object.defineProperties(e.prototype,r),e}(ka);ns.prototype.size=48;var is=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return f(!this.isTransferred),new ns(this,t)},e}(Ga);Mo("PlacedSymbolArray",is);var os=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.rightJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},r.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.centerJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},r.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},r.leftJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+4]=t},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},r.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+5]=t},r.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},r.placedIconSymbolIndex.set=function(t){this._structArray.int16[this._pos2+6]=t},r.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},r.verticalPlacedIconSymbolIndex.set=function(t){this._structArray.int16[this._pos2+7]=t},r.key.get=function(){return this._structArray.uint16[this._pos2+8]},r.key.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},r.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},r.verticalTextBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},r.verticalTextBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},r.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+13]=t},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},r.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+14]=t},r.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},r.verticalIconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+15]=t},r.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},r.verticalIconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+16]=t},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},r.featureIndex.set=function(t){this._structArray.uint16[this._pos2+17]=t},r.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},r.numHorizontalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+18]=t},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},r.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+19]=t},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},r.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+20]=t},r.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},r.numVerticalIconVertices.set=function(t){this._structArray.uint16[this._pos2+21]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+11]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+11]=t},r.textBoxScale.get=function(){return this._structArray.float32[this._pos4+12]},r.textBoxScale.set=function(t){this._structArray.float32[this._pos4+12]=t},r.textOffset0.get=function(){return this._structArray.float32[this._pos4+13]},r.textOffset0.set=function(t){this._structArray.float32[this._pos4+13]=t},r.textOffset1.get=function(){return this._structArray.float32[this._pos4+14]},r.textOffset1.set=function(t){this._structArray.float32[this._pos4+14]=t},Object.defineProperties(e.prototype,r),e}(ka);os.prototype.size=60;var as=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return f(!this.isTransferred),new os(this,t)},e}(Xa);Mo("SymbolInstanceArray",as);var ss=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={offsetX:{configurable:!0}};return r.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},r.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,r),e}(ka);ss.prototype.size=4;var us=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return f(!this.isTransferred),new ss(this,t)},e}(Wa);Mo("GlyphOffsetArray",us);var ls=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return r.x.get=function(){return this._structArray.int16[this._pos2+0]},r.x.set=function(t){this._structArray.int16[this._pos2+0]=t},r.y.get=function(){return this._structArray.int16[this._pos2+1]},r.y.set=function(t){this._structArray.int16[this._pos2+1]=t},r.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},r.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,r),e}(ka);ls.prototype.size=6;var cs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return f(!this.isTransferred),new ls(this,t)},e}($a);Mo("SymbolLineVertexArray",cs);var ps=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,r),e}(ka);ps.prototype.size=8;var hs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return f(!this.isTransferred),new ps(this,t)},e}(Ha);Mo("FeatureIndexArray",hs);var fs=Ma([{name:"a_pos",components:2,type:"Int16"}],4),ds=fs.members,ms=(fs.size,fs.alignment,function(t){void 0===t&&(t=[]),this.segments=t});function ys(t,e){return t=S(Math.floor(t),0,255),e=S(Math.floor(e),0,255),256*t+e}ms.prototype.prepareSegment=function(t,e,r,n){var i=this.segments[this.segments.length-1];return t>ms.MAX_VERTEX_ARRAY_LENGTH&&N("Max vertices per segment is "+ms.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>ms.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i},ms.prototype.get=function(){return this.segments},ms.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var r=e[t];for(var n in r.vaos)r.vaos[n].destroy()}},ms.simpleSegment=function(t,e,r,n){return new ms([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])},ms.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Mo("SegmentVector",ms);var vs=function(){this.ids=[],this.positions=[],this.indexed=!1};function gs(t,e,r,n){if(!(r>=n)){var i=t[r+n>>1],o=r-1,a=n+1;while(1){do{o++}while(t[o]<i);do{a--}while(t[a]>i);if(o>=a)break;_s(t,o,a),_s(e,3*o,3*a),_s(e,3*o+1,3*a+1),_s(e,3*o+2,3*a+2)}gs(t,e,r,a),gs(t,e,a+1,n)}}function _s(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}vs.prototype.add=function(t,e,r,n){this.ids.push(t),this.positions.push(e,r,n)},vs.prototype.getPositions=function(t){f(this.indexed);var e=0,r=this.ids.length-1;while(e<r){var n=e+r>>1;this.ids[n]>=t?r=n:e=n+1}var i=[];while(this.ids[e]===t){var o=this.positions[3*e],a=this.positions[3*e+1],s=this.positions[3*e+2];i.push({index:o,start:a,end:s}),e++}return i},vs.serialize=function(t,e){var r=new Float64Array(t.ids),n=new Uint32Array(t.positions);return gs(r,n,0,r.length-1),e&&e.push(r.buffer,n.buffer),{ids:r,positions:n}},vs.deserialize=function(t){var e=new vs;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},Mo("FeaturePositionMap",vs);var xs=function(t,e){this.gl=t.gl,this.location=e},bs=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(xs),ws=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(xs),Ss=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(xs),Es=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(xs),Ts=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(xs),As=function(t){function e(e,r){t.call(this,e,r),this.current=Er.transparent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(xs),ks=new Float32Array(16),Is=function(t){function e(e,r){t.call(this,e,r),this.current=ks}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(xs);function Cs(t){return[ys(255*t.r,255*t.g),ys(255*t.b,255*t.a)]}var Ps=function(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=r,this.maxValue=-1/0};Ps.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},Ps.prototype.setConstantPatternPositions=function(){},Ps.prototype.populatePaintArray=function(){},Ps.prototype.updatePaintArray=function(){},Ps.prototype.upload=function(){},Ps.prototype.destroy=function(){},Ps.prototype.setUniforms=function(t,e,r,n){e.set(n.constantOr(this.value))},Ps.prototype.getBinding=function(t,e){return"color"===this.type?new As(t,e):new ws(t,e)},Ps.serialize=function(t){var e=t.value,r=t.names,n=t.type;return{value:Do(e),names:r,type:n}},Ps.deserialize=function(t){var e=t.value,r=t.names,n=t.type;return new Ps(Oo(e),r,n)};var Ms=function(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=r,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};Ms.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},Ms.prototype.populatePaintArray=function(){},Ms.prototype.updatePaintArray=function(){},Ms.prototype.upload=function(){},Ms.prototype.destroy=function(){},Ms.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},Ms.prototype.setUniforms=function(t,e,r,n,i){var o=this.patternPositions;"u_pattern_to"===i&&o.patternTo&&e.set(o.patternTo),"u_pattern_from"===i&&o.patternFrom&&e.set(o.patternFrom)},Ms.prototype.getBinding=function(t,e){return new Ts(t,e)};var zs=function(t,e,r,n){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map(function(t){return"a_"+t}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?2:1,offset:0}}),this.paintVertexArray=new n};zs.prototype.defines=function(){return[]},zs.prototype.setConstantPatternPositions=function(){},zs.prototype.populatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,o=i.length;i.reserve(t);var a=this.expression.evaluate(new la(0),e,{},[],n);if("color"===this.type)for(var s=Cs(a),u=o;u<t;u++)i.emplaceBack(s[0],s[1]);else{for(var l=o;l<t;l++)i.emplaceBack(a);this.maxValue=Math.max(this.maxValue,a)}},zs.prototype.updatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:0},r,n);if("color"===this.type)for(var a=Cs(o),s=t;s<e;s++)i.emplace(s,a[0],a[1]);else{for(var u=t;u<e;u++)i.emplace(u,o);this.maxValue=Math.max(this.maxValue,o)}},zs.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},zs.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},zs.prototype.setUniforms=function(t,e){e.set(0)},zs.prototype.getBinding=function(t,e){return new ws(t,e)};var Ls=function(t,e,r,n,i,o){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t+"_t"}),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0;var a=o;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?4:2,offset:0}}),this.paintVertexArray=new a};Ls.prototype.defines=function(){return[]},Ls.prototype.setConstantPatternPositions=function(){},Ls.prototype.populatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,o=i.length;i.reserve(t);var a=this.expression.evaluate(new la(this.zoom),e,{},[],n),s=this.expression.evaluate(new la(this.zoom+1),e,{},[],n);if("color"===this.type)for(var u=Cs(a),l=Cs(s),c=o;c<t;c++)i.emplaceBack(u[0],u[1],l[0],l[1]);else{for(var p=o;p<t;p++)i.emplaceBack(a,s);this.maxValue=Math.max(this.maxValue,a,s)}},Ls.prototype.updatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},r,n),a=this.expression.evaluate({zoom:this.zoom+1},r,n);if("color"===this.type)for(var s=Cs(o),u=Cs(a),l=t;l<e;l++)i.emplace(l,s[0],s[1],u[0],u[1]);else{for(var c=t;c<e;c++)i.emplace(c,o,a);this.maxValue=Math.max(this.maxValue,o,a)}},Ls.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ls.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ls.prototype.interpolationFactor=function(t){return this.useIntegerZoom&&(t=Math.floor(t)),S(this.expression.interpolationFactor(t,this.zoom,this.zoom+1),0,1)},Ls.prototype.setUniforms=function(t,e,r){e.set(this.interpolationFactor(r.zoom))},Ls.prototype.getBinding=function(t,e){return new ws(t,e)};var Ds=function(t,e,r,n,i,o,a){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map(function(t){return"u_"+t+"_t"}),this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0,this.layerId=a,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};Ds.prototype.defines=function(){return[]},Ds.prototype.setConstantPatternPositions=function(){},Ds.prototype.populatePaintArray=function(t,e,r){var n=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,o=this,a=o.layerId,s=n.length;if(n.reserve(t),i.reserve(t),r&&e.patterns&&e.patterns[a]){var u=e.patterns[a],l=u.min,c=u.mid,p=u.max,h=r[l],f=r[c],d=r[p];if(!h||!f||!d)return;for(var m=s;m<t;m++)n.emplaceBack(f.tl[0],f.tl[1],f.br[0],f.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),i.emplaceBack(f.tl[0],f.tl[1],f.br[0],f.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1])}},Ds.prototype.updatePaintArray=function(t,e,r,n,i){var o=this.zoomInPaintVertexArray,a=this.zoomOutPaintVertexArray,s=this,u=s.layerId;if(i&&r.patterns&&r.patterns[u]){var l=r.patterns[u],c=l.min,p=l.mid,h=l.max,f=i[c],d=i[p],m=i[h];if(!f||!d||!m)return;for(var y=t;y<e;y++)o.emplace(y,d.tl[0],d.tl[1],d.br[0],d.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1]),a.emplace(y,d.tl[0],d.tl[1],d.br[0],d.br[1],m.tl[0],m.tl[1],m.br[0],m.br[1])}},Ds.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ds.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},Ds.prototype.setUniforms=function(t,e){e.set(0)},Ds.prototype.getBinding=function(t,e){return new ws(t,e)};var Os=function(){this.binders={},this.cacheKey="",this._buffers=[]};Os.createDynamic=function(t,e,r){var n=new Os,i=[];for(var o in t.paint._values)if(r(o)){var a=t.paint.get(o);if(a instanceof ya&&mi(a.property.specification)){var s=Rs(o,t.type),u=a.property.specification.type,l=a.property.useIntegerZoom,c="cross-faded"===a.property.specification["property-type"]||"cross-faded-data-driven"===a.property.specification["property-type"];if(c)if("constant"===a.value.kind)n.binders[o]=new Ms(a.value.value,s,u),i.push("/u_"+o);else{var p=Us(o,u,"source");n.binders[o]=new Ds(a.value,s,u,l,e,p,t.id),i.push("/a_"+o)}else if("constant"===a.value.kind)n.binders[o]=new Ps(a.value.value,s,u),i.push("/u_"+o);else if("source"===a.value.kind){var h=Us(o,u,"source");n.binders[o]=new zs(a.value,s,u,h),i.push("/a_"+o)}else{var f=Us(o,u,"composite");n.binders[o]=new Ls(a.value,s,u,l,e,f),i.push("/z_"+o)}}}return n.cacheKey=i.sort().join(""),n},Os.prototype.populatePaintArrays=function(t,e,r,n,i){for(var o in this.binders){var a=this.binders[o];a.populatePaintArray(t,e,n,i)}},Os.prototype.setConstantPatternPositions=function(t,e){for(var r in this.binders){var n=this.binders[r];n.setConstantPatternPositions(t,e)}},Os.prototype.updatePaintArrays=function(t,e,r,n,i){var o=!1;for(var a in t)for(var s=e.getPositions(+a),u=0,l=s;u<l.length;u+=1){var c=l[u],p=r.feature(c.index);for(var h in this.binders){var f=this.binders[h];if(!(f instanceof Ps||f instanceof Ms)&&!0===f.expression.isStateDependent){var d=n.paint.get(h);f.expression=d.value,f.updatePaintArray(c.start,c.end,p,t[a],i),o=!0}}}return o},Os.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},Os.prototype.getPaintVertexBuffers=function(){return this._buffers},Os.prototype.getUniforms=function(t,e){var r=[];for(var n in this.binders)for(var i=this.binders[n],o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var u=i.getBinding(t,e[s]);r.push({name:s,property:n,binding:u})}}return r},Os.prototype.setUniforms=function(t,e,r,n){for(var i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.name,u=a.property,l=a.binding;this.binders[u].setUniforms(t,l,n,r.get(u),s)}},Os.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof Ds){var i=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&e.push(i)}else(n instanceof zs||n instanceof Ls)&&n.paintVertexBuffer&&e.push(n.paintVertexBuffer)}this._buffers=e},Os.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var r=[];for(var n in this.binders){var i=this.binders[n];(i instanceof zs||i instanceof Ls)&&i.paintVertexBuffer&&r.push(i.paintVertexBuffer)}this._buffers=r},Os.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var Bs=function(t,e,r,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var i=0,o=e;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=Os.createDynamic(a,r,n),this.programConfigurations[a.id].layoutAttributes=t}this.needsUpload=!1,this._featureMap=new vs,this._bufferOffset=0};function Rs(t,e){var r={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]};return r[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Fs(t){var e={"line-pattern":{source:Fa,composite:Fa},"fill-pattern":{source:Fa,composite:Fa},"fill-extrusion-pattern":{source:Fa,composite:Fa}};return e[t]}function Us(t,e,r){var n={color:{source:Qa,composite:ts},number:{source:Wa,composite:Qa}},i=Fs(t);return i&&i[r]||n[e][r]}Bs.prototype.populatePaintArrays=function(t,e,r,n,i){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(t,e,r,n,i);void 0!==e.id&&this._featureMap.add(+e.id,r,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Bs.prototype.updatePaintArrays=function(t,e,r,n){for(var i=0,o=r;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,n)||this.needsUpload}},Bs.prototype.get=function(t){return this.programConfigurations[t]},Bs.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Bs.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Mo("ConstantBinder",Ps),Mo("CrossFadedConstantBinder",Ms),Mo("SourceExpressionBinder",zs),Mo("CrossFadedCompositeBinder",Ds),Mo("CompositeExpressionBinder",Ls),Mo("ProgramConfiguration",Os,{omit:["_buffers"]}),Mo("ProgramConfigurationSet",Bs);var js=8192;function Ns(t){return{min:-1*Math.pow(2,t-1),max:Math.pow(2,t-1)-1}}var Vs=Ns(15);function qs(t){for(var e=js/t.extent,r=t.loadGeometry(),n=0;n<r.length;n++)for(var i=r[n],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<Vs.min||a.x>Vs.max||a.y<Vs.min||a.y>Vs.max)&&(N("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a.x=S(a.x,Vs.min,Vs.max),a.y=S(a.y,Vs.min,Vs.max))}return r}function Zs(t,e,r,n,i){t.emplaceBack(2*e+(n+1)/2,2*r+(i+1)/2)}var Gs=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Da,this.indexArray=new Ka,this.segments=new ms,this.programConfigurations=new Bs(ds,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Xs(t,e){for(var r=0;r<t.length;r++)if(ru(e,t[r]))return!0;for(var n=0;n<e.length;n++)if(ru(t,e[n]))return!0;return!!Ys(t,e)}function Ws(t,e,r){return!!ru(t,e)||!!Qs(e,t,r)}function $s(t,e){if(1===t.length)return eu(e,t[0]);for(var r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++)if(ru(t,n[i]))return!0;for(var o=0;o<t.length;o++)if(eu(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(Ys(t,e[a]))return!0;return!1}function Hs(t,e,r){for(var n=0;n<e.length;n++){var i=e[n];if(t.length>=3)for(var o=0;o<i.length;o++)if(ru(t,i[o]))return!0;if(Ks(t,i,r))return!0}return!1}function Ks(t,e,r){if(t.length>1){if(Ys(t,e))return!0;for(var n=0;n<e.length;n++)if(Qs(e[n],t,r))return!0}for(var i=0;i<t.length;i++)if(Qs(t[i],e,r))return!0;return!1}function Ys(t,e){if(0===t.length||0===e.length)return!1;for(var r=0;r<t.length-1;r++)for(var n=t[r],i=t[r+1],o=0;o<e.length-1;o++){var a=e[o],s=e[o+1];if(Js(n,i,a,s))return!0}return!1}function Js(t,e,r,n){return V(t,r,n)!==V(e,r,n)&&V(t,e,r)!==V(t,e,n)}function Qs(t,e,r){var n=r*r;if(1===e.length)return t.distSqr(e[0])<n;for(var i=1;i<e.length;i++){var o=e[i-1],a=e[i];if(tu(t,o,a)<n)return!0}return!1}function tu(t,e,r){var n=e.distSqr(r);if(0===n)return t.distSqr(e);var i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return i<0?t.distSqr(e):i>1?t.distSqr(r):t.distSqr(r.sub(e)._mult(i)._add(e))}function eu(t,e){for(var r,n,i,o=!1,a=0;a<t.length;a++){r=t[a];for(var s=0,u=r.length-1;s<r.length;u=s++)n=r[s],i=r[u],n.y>e.y!==i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(o=!o)}return o}function ru(t,e){for(var r=!1,n=0,i=t.length-1;n<t.length;i=n++){var o=t[n],a=t[i];o.y>e.y!==a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}function nu(t,e,r,n,i){for(var o=0,a=t;o<a.length;o+=1){var s=a[o];if(e<=s.x&&r<=s.y&&n>=s.x&&i>=s.y)return!0}var u=[new v(e,r),new v(e,i),new v(n,i),new v(n,r)];if(t.length>2)for(var l=0,c=u;l<c.length;l+=1){var p=c[l];if(ru(t,p))return!0}for(var h=0;h<t.length-1;h++){var f=t[h],d=t[h+1];if(iu(f,d,u))return!0}return!1}function iu(t,e,r){var n=r[0],i=r[2];if(t.x<n.x&&e.x<n.x||t.x>i.x&&e.x>i.x||t.y<n.y&&e.y<n.y||t.y>i.y&&e.y>i.y)return!1;var o=V(t,e,r[0]);return o!==V(t,e,r[1])||o!==V(t,e,r[2])||o!==V(t,e,r[3])}function ou(t,e,r){var n=e.paint.get(t).value;if("constant"===n.kind)return n.value;var i=r.programConfigurations.get(e.id).binders;return i[t].maxValue}function au(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function su(t,e,r,n,i){if(!e[0]&&!e[1])return t;var o=v.convert(e)._mult(i);"viewport"===r&&o._rotate(-n);for(var a=[],s=0;s<t.length;s++){var u=t[s];a.push(u.sub(o))}return a}Gs.prototype.populate=function(t,e){var r=this.layers[0],n=[],i=null;"circle"===r.type&&(i=r.layout.get("circle-sort-key"));for(var o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.index,c=s.sourceLayerIndex;if(this.layers[0]._featureFilter(new la(this.zoom),u)){var p=qs(u),h=i?i.evaluate(u,{}):void 0,f={id:u.id,properties:u.properties,type:u.type,sourceLayerIndex:c,index:l,geometry:p,patterns:{},sortKey:h};n.push(f)}}i&&n.sort(function(t,e){return t.sortKey-e.sortKey});for(var d=0,m=n;d<m.length;d+=1){var y=m[d],v=y,g=v.geometry,_=v.index,x=v.sourceLayerIndex,b=t[_].feature;this.addFeature(y,g,_),e.featureIndex.insert(b,g,_,x,this.index)}},Gs.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Gs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Gs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Gs.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ds),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Gs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Gs.prototype.addFeature=function(t,e,r){for(var n=0,i=e;n<i.length;n+=1)for(var o=i[n],a=0,s=o;a<s.length;a+=1){var u=s[a],l=u.x,c=u.y;if(!(l<0||l>=js||c<0||c>=js)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),h=p.vertexLength;Zs(this.layoutVertexArray,l,c,-1,-1),Zs(this.layoutVertexArray,l,c,1,-1),Zs(this.layoutVertexArray,l,c,1,1),Zs(this.layoutVertexArray,l,c,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{})},Mo("CircleBucket",Gs,{omit:["layers"]});var uu=new Sa({"circle-sort-key":new _a(Qe["layout_circle"]["circle-sort-key"])}),lu=new Sa({"circle-radius":new _a(Qe["paint_circle"]["circle-radius"]),"circle-color":new _a(Qe["paint_circle"]["circle-color"]),"circle-blur":new _a(Qe["paint_circle"]["circle-blur"]),"circle-opacity":new _a(Qe["paint_circle"]["circle-opacity"]),"circle-translate":new ga(Qe["paint_circle"]["circle-translate"]),"circle-translate-anchor":new ga(Qe["paint_circle"]["circle-translate-anchor"]),"circle-pitch-scale":new ga(Qe["paint_circle"]["circle-pitch-scale"]),"circle-pitch-alignment":new ga(Qe["paint_circle"]["circle-pitch-alignment"]),"circle-stroke-width":new _a(Qe["paint_circle"]["circle-stroke-width"]),"circle-stroke-color":new _a(Qe["paint_circle"]["circle-stroke-color"]),"circle-stroke-opacity":new _a(Qe["paint_circle"]["circle-stroke-opacity"])}),cu={paint:lu,layout:uu},pu=1e-6,hu="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function fu(){var t=new hu(4);return hu!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function du(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*s,t[1]=i*u+a*s,t[2]=n*-s+o*u,t[3]=i*-s+a*u,t}Math.hypot||(Math.hypot=function(){var t=arguments,e=0,r=arguments.length;while(r--)e+=t[r]*t[r];return Math.sqrt(e)});function mu(){var t=new hu(9);return hu!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function yu(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function vu(){var t=new hu(16);return hu!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function gu(t){var e=new hu(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function _u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xu(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],p=e[9],h=e[10],f=e[11],d=e[12],m=e[13],y=e[14],v=e[15],g=r*s-n*a,_=r*u-i*a,x=r*l-o*a,b=n*u-i*s,w=n*l-o*s,S=i*l-o*u,E=c*m-p*d,T=c*y-h*d,A=c*v-f*d,k=p*y-h*m,I=p*v-f*m,C=h*v-f*y,P=g*C-_*I+x*k+b*A-w*T+S*E;return P?(P=1/P,t[0]=(s*C-u*I+l*k)*P,t[1]=(i*I-n*C-o*k)*P,t[2]=(m*S-y*w+v*b)*P,t[3]=(h*w-p*S-f*b)*P,t[4]=(u*A-a*C-l*T)*P,t[5]=(r*C-i*A+o*T)*P,t[6]=(y*x-d*S-v*_)*P,t[7]=(c*S-h*x+f*_)*P,t[8]=(a*I-s*A+l*E)*P,t[9]=(n*A-r*I-o*E)*P,t[10]=(d*w-m*x+v*g)*P,t[11]=(p*x-c*w-f*g)*P,t[12]=(s*T-a*k-u*E)*P,t[13]=(r*k-n*T+i*E)*P,t[14]=(m*_-d*b-y*g)*P,t[15]=(c*b-p*_+h*g)*P,t):null}function bu(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],m=e[12],y=e[13],v=e[14],g=e[15],_=r[0],x=r[1],b=r[2],w=r[3];return t[0]=_*n+x*s+b*p+w*m,t[1]=_*i+x*u+b*h+w*y,t[2]=_*o+x*l+b*f+w*v,t[3]=_*a+x*c+b*d+w*g,_=r[4],x=r[5],b=r[6],w=r[7],t[4]=_*n+x*s+b*p+w*m,t[5]=_*i+x*u+b*h+w*y,t[6]=_*o+x*l+b*f+w*v,t[7]=_*a+x*c+b*d+w*g,_=r[8],x=r[9],b=r[10],w=r[11],t[8]=_*n+x*s+b*p+w*m,t[9]=_*i+x*u+b*h+w*y,t[10]=_*o+x*l+b*f+w*v,t[11]=_*a+x*c+b*d+w*g,_=r[12],x=r[13],b=r[14],w=r[15],t[12]=_*n+x*s+b*p+w*m,t[13]=_*i+x*u+b*h+w*y,t[14]=_*o+x*l+b*f+w*v,t[15]=_*a+x*c+b*d+w*g,t}function wu(t,e,r){var n,i,o,a,s,u,l,c,p,h,f,d,m=r[0],y=r[1],v=r[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*v+e[12],t[13]=e[1]*m+e[5]*y+e[9]*v+e[13],t[14]=e[2]*m+e[6]*y+e[10]*v+e[14],t[15]=e[3]*m+e[7]*y+e[11]*v+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=p,t[9]=h,t[10]=f,t[11]=d,t[12]=n*m+s*y+p*v+e[12],t[13]=i*m+u*y+h*v+e[13],t[14]=o*m+l*y+f*v+e[14],t[15]=a*m+c*y+d*v+e[15]),t}function Su(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Eu(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*n,t[5]=a*i+c*n,t[6]=s*i+p*n,t[7]=u*i+h*n,t[8]=l*i-o*n,t[9]=c*i-a*n,t[10]=p*i-s*n,t[11]=h*i-u*n,t}function Tu(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*n,t[1]=a*i+c*n,t[2]=s*i+p*n,t[3]=u*i+h*n,t[4]=l*i-o*n,t[5]=c*i-a*n,t[6]=p*i-s*n,t[7]=h*i-u*n,t}function Au(t,e,r,n,i){var o,a=1/Math.tan(e/2);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(n-i),t[10]=(i+n)*o,t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t}function ku(t,e,r,n,i,o,a){var s=1/(e-r),u=1/(n-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(a+o)*l,t[15]=1,t}function Iu(){var t=new hu(3);return hu!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Cu(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function Pu(t,e,r){var n=new hu(3);return n[0]=t,n[1]=e,n[2]=r,n}function Mu(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function zu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Lu(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2];return t[0]=i*u-o*s,t[1]=o*a-n*u,t[2]=n*s-i*a,t}function Du(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t}var Ou=Cu;(function(){var t=Iu()})();function Bu(){var t=new hu(4);return hu!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ru(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a,t}function Fu(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t}(function(){var t=Bu()})();function Uu(){var t=new hu(4);return hu!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function ju(t,e,r){.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function Nu(t,e,r,n){var i,o,a,s,u,l=e[0],c=e[1],p=e[2],h=e[3],f=r[0],d=r[1],m=r[2],y=r[3];return l*f+c*d+p*m+h*y,o<0&&(-o,-f,-d,-m,-y),1-o>pu?(Math.acos(o),Math.sin(i),Math.sin((1-n)*i)/a,Math.sin(n*i)/a):(1-n,n),t[0]=s*l+u*f,t[1]=s*c+u*d,t[2]=s*p+u*m,t[3]=s*h+u*y,t}function Vu(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)Math.sqrt(n+1),t[3]=.5*r,.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&1,e[8]>e[3*i+i]&&2;var o=(i+1)%3,a=(i+2)%3;Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*r,.5/r,t[3]=(e[3*o+a]-e[3*a+o])*r,t[o]=(e[3*o+i]+e[3*i+o])*r,t[a]=(e[3*a+i]+e[3*i+a])*r}return t}var qu=Ru;(function(){var t=Iu(),e=Pu(1,0,0),r=Pu(0,1,0)})(),function(){var t=Uu(),e=Uu()}(),function(){var t=mu()}();function Zu(){var t=new hu(2);return hu!=Float32Array&&(t[0]=0,t[1]=0),t}(function(){var t=Zu()})();var Gu=function(t){function e(e){t.call(this,e,cu)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Gs(t)},e.prototype.queryRadius=function(t){var e=t;return ou("circle-radius",this,e)+ou("circle-stroke-width",this,e)+au(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,o,a,s){for(var u=su(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,r),c=this.paint.get("circle-stroke-width").evaluate(e,r),p=l+c,h="map"===this.paint.get("circle-pitch-alignment"),f=h?u:Wu(u,s),d=h?p*a:p,m=0,y=n;m<y.length;m+=1)for(var v=y[m],g=0,_=v;g<_.length;g+=1){var x=_[g],b=h?x:Xu(x,s),w=d,S=Fu([],[x.x,x.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?w*=S[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(w*=o.cameraToCenterDistance/S[3]),Ws(f,b,w))return!0}return!1},e}(Ta);function Xu(t,e){var r=Fu([],[t.x,t.y,0,1],e);return new v(r[0]/r[3],r[1]/r[3])}function Wu(t,e){return t.map(function(t){return Xu(t,e)})}var $u=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Gs);function Hu(t,e,r,n){var i=e.width,o=e.height;if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==i*o*r)throw new RangeError("mismatched image size")}else n=new Uint8Array(i*o*r);return t.width=i,t.height=o,t.data=n,t}function Ku(t,e,r){var n=e.width,i=e.height;if(n!==t.width||i!==t.height){var o=Hu({},{width:n,height:i},r);Yu(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,i)},r),t.width=n,t.height=i,t.data=o.data}}function Yu(t,e,r,n,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");var a=t.data,s=e.data;f(a!==s);for(var u=0;u<i.height;u++)for(var l=((r.y+u)*t.width+r.x)*o,c=((n.y+u)*e.width+n.x)*o,p=0;p<i.width*o;p++)s[c+p]=a[l+p];return e}Mo("HeatmapBucket",$u,{omit:["layers"]});var Ju=function(t,e){Hu(this,t,1,e)};Ju.prototype.resize=function(t){Ku(this,t,1)},Ju.prototype.clone=function(){return new Ju({width:this.width,height:this.height},new Uint8Array(this.data))},Ju.copy=function(t,e,r,n,i){Yu(t,e,r,n,i,1)};var Qu=function(t,e){Hu(this,t,4,e)};Qu.prototype.resize=function(t){Ku(this,t,4)},Qu.prototype.replace=function(t,e){e?this.data.set(t):t instanceof Uint8ClampedArray?this.data=new Uint8Array(t.buffer):this.data=t},Qu.prototype.clone=function(){return new Qu({width:this.width,height:this.height},new Uint8Array(this.data))},Qu.copy=function(t,e,r,n,i){Yu(t,e,r,n,i,4)},Mo("AlphaImage",Ju),Mo("RGBAImage",Qu);var tl=new Sa({"heatmap-radius":new _a(Qe["paint_heatmap"]["heatmap-radius"]),"heatmap-weight":new _a(Qe["paint_heatmap"]["heatmap-weight"]),"heatmap-intensity":new ga(Qe["paint_heatmap"]["heatmap-intensity"]),"heatmap-color":new wa(Qe["paint_heatmap"]["heatmap-color"]),"heatmap-opacity":new ga(Qe["paint_heatmap"]["heatmap-opacity"])}),el={paint:tl};function rl(t,e){for(var r=new Uint8Array(1024),n={},i=0,o=0;i<256;i++,o+=4){n[e]=i/255;var a=t.evaluate(n);r[o+0]=Math.floor(255*a.r/a.a),r[o+1]=Math.floor(255*a.g/a.a),r[o+2]=Math.floor(255*a.b/a.a),r[o+3]=Math.floor(255*a.a)}return new Qu({width:256,height:1},r)}var nl=function(t){function e(e){t.call(this,e,el),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new $u(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=rl(t,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Ta),il=new Sa({"hillshade-illumination-direction":new ga(Qe["paint_hillshade"]["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ga(Qe["paint_hillshade"]["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ga(Qe["paint_hillshade"]["hillshade-exaggeration"]),"hillshade-shadow-color":new ga(Qe["paint_hillshade"]["hillshade-shadow-color"]),"hillshade-highlight-color":new ga(Qe["paint_hillshade"]["hillshade-highlight-color"]),"hillshade-accent-color":new ga(Qe["paint_hillshade"]["hillshade-accent-color"])}),ol={paint:il},al=function(t){function e(e){t.call(this,e,ol)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Ta),sl=Ma([{name:"a_pos",components:2,type:"Int16"}],4),ul=sl.members,ll=(sl.size,sl.alignment,pl),cl=pl;function pl(t,e,r){r=r||2;var n,i,o,a,s,u,l,c=e&&e.length,p=c?e[0]*r:t.length,h=hl(t,0,p,r,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=_l(t,e,h,r)),t.length>80*r){n=o=t[0],i=a=t[1];for(var d=r;d<p;d+=r)s=t[d],u=t[d+1],s<n&&(n=s),u<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=Math.max(o-n,a-i),l=0!==l?1/l:0}return dl(h,f,r,n,i,l),f}function hl(t,e,r,n,i){var o,a;if(i===Vl(t,e,r,n)>0)for(o=e;o<r;o+=n)a=Ul(o,t[o],t[o+1],a);else for(o=r-n;o>=e;o-=n)a=Ul(o,t[o],t[o+1],a);return a&&Ml(a,a.next)&&(jl(a),a=a.next),a}function fl(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Ml(n,n.next)&&0!==Pl(n.prev,n,n.next))n=n.next;else{if(jl(n),n=e=n.prev,n===n.next)break;r=!0}}while(r||n!==e);return e}function dl(t,e,r,n,i,o,a){if(t){!a&&o&&El(t,n,i,o);var s,u,l=t;while(t.prev!==t.next)if(s=t.prev,u=t.next,o?yl(t,n,i,o):ml(t))e.push(s.i/r),e.push(t.i/r),e.push(u.i/r),jl(t),t=u.next,l=u.next;else if(t=u,t===l){a?1===a?(t=vl(fl(t),e,r),dl(t,e,r,n,i,o,2)):2===a&&gl(t,e,r,n,i,o):dl(fl(t),e,r,n,i,o,1);break}}}function ml(t){var e=t.prev,r=t,n=t.next;if(Pl(e,r,n)>=0)return!1;var i=t.next.next;while(i!==t.prev){if(Il(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&Pl(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function yl(t,e,r,n){var i=t.prev,o=t,a=t.next;if(Pl(i,o,a)>=0)return!1;var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=Al(s,u,e,r,n),h=Al(l,c,e,r,n),f=t.prevZ,d=t.nextZ;while(f&&f.z>=p&&d&&d.z<=h){if(f!==t.prev&&f!==t.next&&Il(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Pl(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==t.prev&&d!==t.next&&Il(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Pl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}while(f&&f.z>=p){if(f!==t.prev&&f!==t.next&&Il(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Pl(f.prev,f,f.next)>=0)return!1;f=f.prevZ}while(d&&d.z<=h){if(d!==t.prev&&d!==t.next&&Il(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Pl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function vl(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!Ml(i,o)&&zl(i,n,n.next,o)&&Bl(i,o)&&Bl(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),jl(n),jl(n.next),n=t=o),n=n.next}while(n!==t);return fl(n)}function gl(t,e,r,n,i,o){var a=t;do{var s=a.next.next;while(s!==a.prev){if(a.i!==s.i&&Cl(a,s)){var u=Fl(a,s);return a=fl(a,a.next),u=fl(u,u.next),dl(a,e,r,n,i,o),void dl(u,e,r,n,i,o)}s=s.next}a=a.next}while(a!==t)}function _l(t,e,r,n){var i,o,a,s,u,l=[];for(i=0,o=e.length;i<o;i++)a=e[i]*n,s=i<o-1?e[i+1]*n:t.length,u=hl(t,a,s,n,!1),u===u.next&&(u.steiner=!0),l.push(kl(u));for(l.sort(xl),i=0;i<l.length;i++)bl(l[i],r),r=fl(r,r.next);return r}function xl(t,e){return t.x-e.x}function bl(t,e){if(e=wl(t,e),e){var r=Fl(e,t);fl(r,r.next)}}function wl(t,e){var r,n=e,i=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===a)return r;var u,l=r,c=r.x,p=r.y,h=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&Il(o<p?i:a,o,c,p,o<p?a:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),Bl(n,t)&&(u<h||u===h&&(n.x>r.x||n.x===r.x&&Sl(r,n)))&&(r=n,h=u)),n=n.next}while(n!==l);return r}function Sl(t,e){return Pl(t.prev,t,e.prev)<0&&Pl(e.next,t,t.next)<0}function El(t,e,r,n){var i=t;do{null===i.z&&(i.z=Al(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Tl(i)}function Tl(t){var e,r,n,i,o,a,s,u,l=1;do{r=t,t=null,o=null,a=0;while(r){for(a++,n=r,s=0,e=0;e<l;e++)if(s++,n=n.nextZ,!n)break;u=l;while(s>0||u>0&&n)0!==s&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(a>1);return t}function Al(t,e,r,n,i){return t=32767*(t-r)*i,e=32767*(e-n)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function kl(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function Il(t,e,r,n,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(n-s)-(r-a)*(e-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function Cl(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Ol(t,e)&&(Bl(t,e)&&Bl(e,t)&&Rl(t,e)&&(Pl(t.prev,t,e.prev)||Pl(t,e.prev,e))||Ml(t,e)&&Pl(t.prev,t,t.next)>0&&Pl(e.prev,e,e.next)>0)}function Pl(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Ml(t,e){return t.x===e.x&&t.y===e.y}function zl(t,e,r,n){var i=Dl(Pl(t,e,r)),o=Dl(Pl(t,e,n)),a=Dl(Pl(r,n,t)),s=Dl(Pl(r,n,e));return i!==o&&a!==s||(!(0!==i||!Ll(t,r,e))||(!(0!==o||!Ll(t,n,e))||(!(0!==a||!Ll(r,t,n))||!(0!==s||!Ll(r,e,n)))))}function Ll(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Dl(t){return t>0?1:t<0?-1:0}function Ol(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&zl(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function Bl(t,e){return Pl(t.prev,t,t.next)<0?Pl(t,e,t.next)>=0&&Pl(t,t.prev,e)>=0:Pl(t,e,t.prev)<0||Pl(t,t.next,e)<0}function Rl(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!==r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}function Fl(t,e){var r=new Nl(t.i,t.x,t.y),n=new Nl(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Ul(t,e,r,n){var i=new Nl(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function jl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Nl(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vl(t,e,r,n){for(var i=0,o=e,a=r-n;o<r;o+=n)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function ql(t,e,r,n,i){Zl(t,e,r||0,n||t.length-1,i||Xl)}function Zl(t,e,r,n,i){while(n>r){if(n-r>600){var o=n-r+1,a=e-r+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1),c=Math.max(r,Math.floor(e-a*u/o+l)),p=Math.min(n,Math.floor(e+(o-a)*u/o+l));Zl(t,e,c,p,i)}var h=t[e],f=r,d=n;Gl(t,r,e),i(t[n],h)>0&&Gl(t,r,n);while(f<d){Gl(t,f,d),f++,d--;while(i(t[f],h)<0)f++;while(i(t[d],h)>0)d--}0===i(t[r],h)?Gl(t,r,d):(d++,Gl(t,d,n)),d<=e&&(r=d+1),e<=d&&(n=d-1)}}function Gl(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Xl(t,e){return t<e?-1:t>e?1:0}function Wl(t,e){var r=t.length;if(r<=1)return[t];for(var n,i,o=[],a=0;a<r;a++){var s=q(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(n&&o.push(n),n=[t[a]]):n.push(t[a]))}if(n&&o.push(n),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(ql(o[u],e,1,o[u].length-1,$l),o[u]=o[u].slice(0,e));return o}function $l(t,e){return e.area-t.area}function Hl(t,e,r){for(var n=r.patternDependencies,i=!1,o=0,a=e;o<a.length;o+=1){var s=a[o],u=s.paint.get(t+"-pattern");u.isConstant()||(i=!0);var l=u.constantOr(null);l&&(i=!0,n[l.to]=!0,n[l.from]=!0)}return i}function Kl(t,e,r,n,i){for(var o=i.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.paint.get(t+"-pattern"),c=l.value;if("constant"!==c.kind){var p=c.evaluate({zoom:n-1},r,{},i.availableImages),h=c.evaluate({zoom:n},r,{},i.availableImages),f=c.evaluate({zoom:n+1},r,{},i.availableImages);p=p&&p.name?p.name:p,h=h&&h.name?h.name:h,f=f&&f.name?f.name:f,o[p]=!0,o[h]=!0,o[f]=!0,r.patterns[u.id]={min:p,mid:h,max:f}}}return r}pl.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,a=Math.abs(Vl(t,0,o,r));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*r,c=s<u-1?e[s+1]*r:t.length;a-=Math.abs(Vl(t,l,c,r))}var p=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,f=n[s+1]*r,d=n[s+2]*r;p+=Math.abs((t[h]-t[d])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[d+1]-t[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},pl.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[i][o][a]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r},ll.default=cl;var Yl=500,Jl=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Da,this.indexArray=new Ka,this.indexArray2=new Ya,this.programConfigurations=new Bs(ul,t.layers,t.zoom),this.segments=new ms,this.segments2=new ms,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Jl.prototype.populate=function(t,e){this.hasPattern=Hl("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),n=[],i=0,o=t;i<o.length;i+=1){var a=o[i],s=a.feature,u=a.index,l=a.sourceLayerIndex;if(this.layers[0]._featureFilter(new la(this.zoom),s)){var c=qs(s),p=r?r.evaluate(s,{},e.availableImages):void 0,h={id:s.id,properties:s.properties,type:s.type,sourceLayerIndex:l,index:u,geometry:c,patterns:{},sortKey:p};n.push(h)}}r&&n.sort(function(t,e){return t.sortKey-e.sortKey});for(var f=0,d=n;f<d.length;f+=1){var m=d[f],y=m,v=y.geometry,g=y.index,_=y.sourceLayerIndex;if(this.hasPattern){var x=Kl("fill",this.layers,m,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(m,v,g,{});var b=t[g].feature;e.featureIndex.insert(b,v,g,_,this.index)}},Jl.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Jl.prototype.addFeatures=function(t,e){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var i=n[r];this.addFeature(i,i.geometry,i.index,e)}},Jl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Jl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Jl.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ul),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Jl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Jl.prototype.addFeature=function(t,e,r,n){for(var i=0,o=Wl(e,Yl);i<o.length;i+=1){for(var a=o[i],s=0,u=0,l=a;u<l.length;u+=1){var c=l[u];s+=c.length}for(var p=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),h=p.vertexLength,d=[],m=[],y=0,v=a;y<v.length;y+=1){var g=v[y];if(0!==g.length){g!==a[0]&&m.push(d.length/2);var _=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),x=_.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(x+g.length-1,x),d.push(g[0].x),d.push(g[0].y);for(var b=1;b<g.length;b++)this.layoutVertexArray.emplaceBack(g[b].x,g[b].y),this.indexArray2.emplaceBack(x+b-1,x+b),d.push(g[b].x),d.push(g[b].y);_.vertexLength+=g.length,_.primitiveLength+=g.length}}var w=ll(d,m);f(w.length%3===0);for(var S=0;S<w.length;S+=3)this.indexArray.emplaceBack(h+w[S],h+w[S+1],h+w[S+2]);p.vertexLength+=s,p.primitiveLength+=w.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,n)},Mo("FillBucket",Jl,{omit:["layers","patternFeatures"]});var Ql=new Sa({"fill-sort-key":new _a(Qe["layout_fill"]["fill-sort-key"])}),tc=new Sa({"fill-antialias":new ga(Qe["paint_fill"]["fill-antialias"]),"fill-opacity":new _a(Qe["paint_fill"]["fill-opacity"]),"fill-color":new _a(Qe["paint_fill"]["fill-color"]),"fill-outline-color":new _a(Qe["paint_fill"]["fill-outline-color"]),"fill-translate":new ga(Qe["paint_fill"]["fill-translate"]),"fill-translate-anchor":new ga(Qe["paint_fill"]["fill-translate-anchor"]),"fill-pattern":new xa(Qe["paint_fill"]["fill-pattern"])}),ec={paint:tc,layout:Ql},rc=function(t){function e(e){t.call(this,e,ec)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new Jl(t)},e.prototype.queryRadius=function(){return au(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,o,a){var s=su(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a);return $s(s,n)},e.prototype.isTileClipped=function(){return!0},e}(Ta),nc=Ma([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ic=nc.members,oc=(nc.size,nc.alignment,ac);function ac(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(sc,this,e)}function sc(t,e,r){1==t?e.id=r.readVarint():2==t?uc(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function uc(t,e){var r=t.readVarint()+t.pos;while(t.pos<r){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}function lc(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],o=0;o<e;o++){var a=cc(t[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(r&&i.push(r),r=[t[o]]):r.push(t[o]))}return r&&i.push(r),i}function cc(t){for(var e,r,n=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r=t[a],n+=(r.x-e.x)*(e.y+r.y);return n}ac.types=["Unknown","Point","LineString","Polygon"],ac.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;var e,r=t.readVarint()+t.pos,n=1,i=0,o=0,a=0,s=[];while(t.pos<r){if(i<=0){var u=t.readVarint();n=7&u,i=u>>3}if(i--,1===n||2===n)o+=t.readSVarint(),a+=t.readSVarint(),1===n&&(e&&s.push(e),e=[]),e.push(new v(o,a));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&s.push(e),s},ac.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;var e=t.readVarint()+t.pos,r=1,n=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;while(t.pos<e){if(n<=0){var c=t.readVarint();r=7&c,n=c>>3}if(n--,1===r||2===r)i+=t.readSVarint(),o+=t.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<u&&(u=o),o>l&&(l=o);else if(7!==r)throw new Error("unknown command "+r)}return[a,u,s,l]},ac.prototype.toGeoJSON=function(t,e,r){var n,i,o=this.extent*Math.pow(2,r),a=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=ac.types[this.type];function c(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+s)/o;t[e]=[360*(r.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(n=0;n<u.length;n++)p[n]=u[n][0];u=p,c(u);break;case 2:for(n=0;n<u.length;n++)c(u[n]);break;case 3:for(u=lc(u),n=0;n<u.length;n++)for(i=0;i<u[n].length;i++)c(u[n][i]);break}1===u.length?u=u[0]:l="Multi"+l;var h={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var pc=hc;function hc(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(fc,this,e),this.length=this._features.length}function fc(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(dc(r))}function dc(t){var e=null,r=t.readVarint()+t.pos;while(t.pos<r){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}hc.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new oc(this._pbf,e,this.extent,this._keys,this._values)};var mc=yc;function yc(t,e){this.layers=t.readFields(vc,{},e)}function vc(t,e,r){if(3===t){var n=new pc(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}var gc=mc,_c=oc,xc=pc,bc={VectorTile:gc,VectorTileFeature:_c,VectorTileLayer:xc},wc=bc.VectorTileFeature.types,Sc=500,Ec=Math.pow(2,13);function Tc(t,e,r,n,i,o,a,s){t.emplaceBack(e,r,2*Math.floor(n*Ec)+a,i*Ec*2,o*Ec*2,Math.round(s))}var Ac=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ba,this.indexArray=new Ka,this.programConfigurations=new Bs(ic,t.layers,t.zoom),this.segments=new ms,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function kc(t,e){return t.x===e.x&&(t.x<0||t.x>js)||t.y===e.y&&(t.y<0||t.y>js)}function Ic(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>js})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>js})}Ac.prototype.populate=function(t,e){this.features=[],this.hasPattern=Hl("fill-extrusion",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var i=n[r],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new la(this.zoom),o)){var u=qs(o),l={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};"undefined"!==typeof o.id&&(l.id=o.id),this.hasPattern?this.features.push(Kl("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,u,a,{}),e.featureIndex.insert(o,u,a,s,this.index,!0)}}},Ac.prototype.addFeatures=function(t,e){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],o=i.geometry;this.addFeature(i,o,i.index,e)}},Ac.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Ac.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ac.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ac.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ic),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ac.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ac.prototype.addFeature=function(t,e,r,n){for(var i=0,o=Wl(e,Sc);i<o.length;i+=1){for(var a=o[i],s=0,u=0,l=a;u<l.length;u+=1){var c=l[u];s+=c.length}for(var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,d=a;h<d.length;h+=1){var m=d[h];if(0!==m.length&&!Ic(m))for(var y=0,v=0;v<m.length;v++){var g=m[v];if(v>=1){var _=m[v-1];if(!kc(g,_)){p.vertexLength+4>ms.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var x=g.sub(_)._perp()._unit(),b=_.dist(g);y+b>32768&&(y=0),Tc(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,0,y),Tc(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,1,y),y+=b,Tc(this.layoutVertexArray,_.x,_.y,x.x,x.y,0,0,y),Tc(this.layoutVertexArray,_.x,_.y,x.x,x.y,0,1,y);var w=p.vertexLength;this.indexArray.emplaceBack(w,w+2,w+1),this.indexArray.emplaceBack(w+1,w+2,w+3),p.vertexLength+=4,p.primitiveLength+=2}}}}if(p.vertexLength+s>ms.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray)),"Polygon"===wc[t.type]){for(var S=[],E=[],T=p.vertexLength,A=0,k=a;A<k.length;A+=1){var I=k[A];if(0!==I.length){I!==a[0]&&E.push(S.length/2);for(var C=0;C<I.length;C++){var P=I[C];Tc(this.layoutVertexArray,P.x,P.y,0,0,1,1,0),S.push(P.x),S.push(P.y)}}}var M=ll(S,E);f(M.length%3===0);for(var z=0;z<M.length;z+=3)this.indexArray.emplaceBack(T+M[z],T+M[z+2],T+M[z+1]);p.primitiveLength+=M.length/3,p.vertexLength+=s}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,n)},Mo("FillExtrusionBucket",Ac,{omit:["layers","features"]});var Cc=new Sa({"fill-extrusion-opacity":new ga(Qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _a(Qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ga(Qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ga(Qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xa(Qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _a(Qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _a(Qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ga(Qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),Pc={paint:Cc},Mc=function(t){function e(e){t.call(this,e,Pc)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Ac(t)},e.prototype.queryRadius=function(){return au(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,o,a,s){var u=su(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),l=this.paint.get("fill-extrusion-height").evaluate(e,r),c=this.paint.get("fill-extrusion-base").evaluate(e,r),p=Bc(u,s,o,0),h=Oc(n,c,l,s),f=h[0],d=h[1];return Dc(f,d,p)},e}(Ta);function zc(t,e){return t.x*e.x+t.y*e.y}function Lc(t,e){if(1===t.length){var r=e[0],n=e[1],i=e[3],o=t[0],a=n.sub(r),s=i.sub(r),u=o.sub(r),l=zc(a,a),c=zc(a,s),p=zc(s,s),h=zc(u,a),f=zc(u,s),d=l*p-c*c,m=(p*h-c*f)/d,y=(l*f-c*h)/d,v=1-m-y;return r.z*v+n.z*m+i.z*y}for(var g=1/0,_=0,x=e;_<x.length;_+=1){var b=x[_];g=Math.min(g,b.z)}return g}function Dc(t,e,r){var n=1/0;$s(r,e)&&(n=Lc(r,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],a=t[i],s=0;s<o.length-1;s++){var u=o[s],l=o[s+1],c=a[s],p=a[s+1],h=[u,l,p,c,u];Xs(r,h)&&(n=Math.min(n,Lc(r,h)))}return n!==1/0&&n}function Oc(t,e,r,n){for(var i=[],o=[],a=n[8]*e,s=n[9]*e,u=n[10]*e,l=n[11]*e,c=n[8]*r,p=n[9]*r,h=n[10]*r,f=n[11]*r,d=0,m=t;d<m.length;d+=1){for(var y=m[d],g=[],_=[],x=0,b=y;x<b.length;x+=1){var w=b[x],S=w.x,E=w.y,T=n[0]*S+n[4]*E+n[12],A=n[1]*S+n[5]*E+n[13],k=n[2]*S+n[6]*E+n[14],I=n[3]*S+n[7]*E+n[15],C=T+a,P=A+s,M=k+u,z=I+l,L=T+c,D=A+p,O=k+h,B=I+f,R=new v(C/z,P/z);R.z=M/z,g.push(R);var F=new v(L/B,D/B);F.z=O/B,_.push(F)}i.push(g),o.push(_)}return[i,o]}function Bc(t,e,r,n){for(var i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=[s.x,s.y,n,1];Fu(u,u,e),i.push(new v(u[0]/u[3],u[1]/u[3]))}return i}var Rc=Ma([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Fc=Rc.members,Uc=(Rc.size,Rc.alignment,bc.VectorTileFeature.types),jc=63,Nc=Math.cos(Math.PI/180*37.5),Vc=15,qc=20,Zc=15,Gc=.5,Xc=Math.pow(2,Zc-1)/Gc,Wc=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ra,this.indexArray=new Ka,this.programConfigurations=new Bs(Fc,t.layers,t.zoom),this.segments=new ms,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Wc.prototype.populate=function(t,e){this.hasPattern=Hl("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),n=[],i=0,o=t;i<o.length;i+=1){var a=o[i],s=a.feature,u=a.index,l=a.sourceLayerIndex;if(this.layers[0]._featureFilter(new la(this.zoom),s)){var c=qs(s),p=r?r.evaluate(s,{}):void 0,h={id:s.id,properties:s.properties,type:s.type,sourceLayerIndex:l,index:u,geometry:c,patterns:{},sortKey:p};n.push(h)}}r&&n.sort(function(t,e){return t.sortKey-e.sortKey});for(var f=0,d=n;f<d.length;f+=1){var m=d[f],y=m,v=y.geometry,g=y.index,_=y.sourceLayerIndex;if(this.hasPattern){var x=Kl("line",this.layers,m,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(m,v,g,{});var b=t[g].feature;e.featureIndex.insert(b,v,g,_,this.index)}},Wc.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Wc.prototype.addFeatures=function(t,e){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var i=n[r];this.addFeature(i,i.geometry,i.index,e)}},Wc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Wc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Wc.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Fc),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Wc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Wc.prototype.addFeature=function(t,e,r,n){for(var i=this.layers[0].layout,o=i.get("line-join").evaluate(t,{}),a=i.get("line-cap"),s=i.get("line-miter-limit"),u=i.get("line-round-limit"),l=0,c=e;l<c.length;l+=1){var p=c[l];this.addLine(p,t,o,a,s,u,r,n)}},Wc.prototype.addLine=function(t,e,r,n,i,o,a,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties["mapbox_clip_start"],this.clipEnd=+e.properties["mapbox_clip_end"];for(var u=0;u<t.length-1;u++)this.totalDistance+=t[u].dist(t[u+1])}var l="Polygon"===Uc[e.type],c=t.length;while(c>=2&&t[c-1].equals(t[c-2]))c--;var p=0;while(p<c-1&&t[p].equals(t[p+1]))p++;if(!(c<(l?3:2))){"bevel"===r&&(i=1.05);var h,f=this.overscaling<=16?Vc*js/(512*this.overscaling):0,d=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray),m=void 0,y=void 0,v=void 0,g=void 0;this.e1=this.e2=-1,l&&(h=t[c-2],g=t[p].sub(h)._unit()._perp());for(var _=p;_<c;_++)if(y=l&&_===c-1?t[p+1]:t[_+1],!y||!t[_].equals(y)){g&&(v=g),h&&(m=h),h=t[_],g=y?y.sub(h)._unit()._perp():v,v=v||g;var x=v.add(g);0===x.x&&0===x.y||x._unit();var b=v.x*g.x+v.y*g.y,w=x.x*g.x+x.y*g.y,S=0!==w?1/w:1/0,E=2*Math.sqrt(2-2*w),T=w<Nc&&m&&y,A=v.x*g.y-v.y*g.x>0;if(T&&_>p){var k=h.dist(m);if(k>2*f){var I=h.sub(h.sub(m)._mult(f/k)._round());this.updateDistance(m,I),this.addCurrentVertex(I,v,0,0,d),m=I}}var C=m&&y,P=C?r:l?"butt":n;if(C&&"round"===P&&(S<o?P="miter":S<=2&&(P="fakeround")),"miter"===P&&S>i&&(P="bevel"),"bevel"===P&&(S>2&&(P="flipbevel"),S<i&&(P="miter")),m&&this.updateDistance(m,h),"miter"===P)x._mult(S),this.addCurrentVertex(h,x,0,0,d);else if("flipbevel"===P){if(S>100)x=g.mult(-1);else{var M=S*v.add(g).mag()/v.sub(g).mag();x._perp()._mult(M*(A?-1:1))}this.addCurrentVertex(h,x,0,0,d),this.addCurrentVertex(h,x.mult(-1),0,0,d)}else if("bevel"===P||"fakeround"===P){var z=-Math.sqrt(S*S-1),L=A?z:0,D=A?0:z;if(m&&this.addCurrentVertex(h,v,L,D,d),"fakeround"===P)for(var O=Math.round(180*E/Math.PI/qc),B=1;B<O;B++){var R=B/O;if(.5!==R){var F=R-.5,U=1.0904+b*(b*(3.55645-1.43519*b)-3.2452),j=.848013+b*(.215638*b-1.06021);R+=R*F*(R-1)*(U*F*F+j)}var N=g.sub(v)._mult(R)._add(v)._unit()._mult(A?-1:1);this.addHalfVertex(h,N.x,N.y,!1,A,0,d)}y&&this.addCurrentVertex(h,g,-L,-D,d)}else if("butt"===P)this.addCurrentVertex(h,x,0,0,d);else if("square"===P){var V=m?1:-1;this.addCurrentVertex(h,x,V,V,d)}else"round"===P&&(m&&(this.addCurrentVertex(h,v,0,0,d),this.addCurrentVertex(h,v,1,1,d,!0)),y&&(this.addCurrentVertex(h,g,-1,-1,d,!0),this.addCurrentVertex(h,g,0,0,d)));if(T&&_<c-1){var q=h.dist(y);if(q>2*f){var Z=h.add(y.sub(h)._mult(f/q)._round());this.updateDistance(h,Z),this.addCurrentVertex(Z,g,0,0,d),h=Z}}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,s)}},Wc.prototype.addCurrentVertex=function(t,e,r,n,i,o){void 0===o&&(o=!1);var a=e.x+e.y*r,s=e.y-e.x*r,u=-e.x+e.y*n,l=-e.y-e.x*n;this.addHalfVertex(t,a,s,o,!1,r,i),this.addHalfVertex(t,u,l,o,!0,-n,i),this.distance>Xc/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,r,n,i,o))},Wc.prototype.addHalfVertex=function(t,e,r,n,i,o,a){var s=t.x,u=t.y,l=this.scaledDistance*Gc;this.layoutVertexArray.emplaceBack((s<<1)+(n?1:0),(u<<1)+(i?1:0),Math.round(jc*e)+128,Math.round(jc*r)+128,1+(0===o?0:o<0?-1:1)|(63&l)<<2,l>>6);var c=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),a.primitiveLength++),i?this.e2=c:this.e1=c},Wc.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Xc-1):this.distance},Mo("LineBucket",Wc,{omit:["layers","patternFeatures"]});var $c=new Sa({"line-cap":new ga(Qe["layout_line"]["line-cap"]),"line-join":new _a(Qe["layout_line"]["line-join"]),"line-miter-limit":new ga(Qe["layout_line"]["line-miter-limit"]),"line-round-limit":new ga(Qe["layout_line"]["line-round-limit"]),"line-sort-key":new _a(Qe["layout_line"]["line-sort-key"])}),Hc=new Sa({"line-opacity":new _a(Qe["paint_line"]["line-opacity"]),"line-color":new _a(Qe["paint_line"]["line-color"]),"line-translate":new ga(Qe["paint_line"]["line-translate"]),"line-translate-anchor":new ga(Qe["paint_line"]["line-translate-anchor"]),"line-width":new _a(Qe["paint_line"]["line-width"]),"line-gap-width":new _a(Qe["paint_line"]["line-gap-width"]),"line-offset":new _a(Qe["paint_line"]["line-offset"]),"line-blur":new _a(Qe["paint_line"]["line-blur"]),"line-dasharray":new ba(Qe["paint_line"]["line-dasharray"]),"line-pattern":new xa(Qe["paint_line"]["line-pattern"]),"line-gradient":new wa(Qe["paint_line"]["line-gradient"])}),Kc={paint:Hc,layout:$c},Yc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,r){return r=new la(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),t.prototype.possiblyEvaluate.call(this,e,r)},e.prototype.evaluate=function(e,r,n,i){return r=I({},r,{zoom:Math.floor(r.zoom)}),t.prototype.evaluate.call(this,e,r,n,i)},e}(_a),Jc=new Yc(Kc.paint.properties["line-width"].specification);Jc.useIntegerZoom=!0;var Qc=function(t){function e(e){t.call(this,e,Kc)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=rl(t,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r),this.paint._values["line-floorwidth"]=Jc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Wc(t)},e.prototype.queryRadius=function(t){var e=t,r=tp(ou("line-width",this,e),ou("line-gap-width",this,e)),n=ou("line-offset",this,e);return r/2+Math.abs(n)+au(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,o,a){var s=su(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),u=a/2*tp(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),l=this.paint.get("line-offset").evaluate(e,r);return l&&(n=ep(n,l*a)),Hs(s,n,u)},e.prototype.isTileClipped=function(){return!0},e}(Ta);function tp(t,e){return e>0?e+2*t:t}function ep(t,e){for(var r=[],n=new v(0,0),i=0;i<t.length;i++){for(var o=t[i],a=[],s=0;s<o.length;s++){var u=o[s-1],l=o[s],c=o[s+1],p=0===s?n:l.sub(u)._unit()._perp(),h=s===o.length-1?n:c.sub(l)._unit()._perp(),f=p._add(h)._unit(),d=f.x*h.x+f.y*h.y;f._mult(1/d),a.push(f._mult(e)._add(l))}r.push(a)}return r}var rp=Ma([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),np=Ma([{name:"a_projected_pos",components:3,type:"Float32"}],4),ip=(Ma([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ma([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),op=(Ma([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Ma([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ap=Ma([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);Ma([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ma([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"}]),Ma([{type:"Float32",name:"offsetX"}]),Ma([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function sp(t,e,r){var n=e.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),sa.applyArabicShaping&&(t=sa.applyArabicShaping(t)),t}function up(t,e,r){return t.sections.forEach(function(t){t.text=sp(t.text,e,r)}),t}function lp(t){var e={},r={},n=[],i=0;function o(e){n.push(t[e]),i++}function a(t,e,i){var o=r[t];return delete r[t],r[e]=o,n[o].geometry[0].pop(),n[o].geometry[0]=n[o].geometry[0].concat(i[0]),o}function s(t,r,i){var o=e[r];return delete e[r],e[t]=o,n[o].geometry[0].shift(),n[o].geometry[0]=i[0].concat(n[o].geometry[0]),o}function u(t,e,r){var n=r?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}for(var l=0;l<t.length;l++){var c=t[l],p=c.geometry,h=c.text?c.text.toString():null;if(h){var f=u(h,p),d=u(h,p,!0);if(f in r&&d in e&&r[f]!==e[d]){var m=s(f,d,p),y=a(f,d,n[m].geometry);delete e[f],delete r[d],r[u(h,n[y].geometry,!0)]=y,n[m].geometry=null}else f in r?a(f,d,p):d in e?s(f,d,p):(o(l),e[f]=i-1,r[d]=i-1)}else o(l)}return n.filter(function(t){return t.geometry})}var cp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};function pp(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r+1)||null,i=t.charCodeAt(r-1)||null,o=(!n||!Zo(n)||cp[t[r+1]])&&(!i||!Zo(i)||cp[t[r-1]]);o&&cp[t[r]]?e+=cp[t[r]]:e+=t[r]}return e}var hp=24,fp=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,p=r?i-1:0,h=r?-1:1,f=t[e+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+p],p+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=l}return(f?-1:1)*a*Math.pow(2,o-n)},dp=function(t,e,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,p=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+p>=1?h/u:h*Math.pow(2,1-p),e*u>=2&&(a++,u/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*u-1)*Math.pow(2,i),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;t[r+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[r+f]=255&a,f+=d,a/=256,l-=8);t[r+f-d]|=128*m},mp={read:fp,write:dp},yp=vp;function vp(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}vp.Varint=0,vp.Fixed64=1,vp.Bytes=2,vp.Fixed32=5;var gp=4294967296,_p=1/gp,xp=12,bp="undefined"===typeof TextDecoder?null:new TextDecoder("utf8");function wp(t,e,r){var n,i,o=r.buf;if(i=o[r.pos++],n=(112&i)>>4,i<128)return Ep(t,n,e);if(i=o[r.pos++],n|=(127&i)<<3,i<128)return Ep(t,n,e);if(i=o[r.pos++],n|=(127&i)<<10,i<128)return Ep(t,n,e);if(i=o[r.pos++],n|=(127&i)<<17,i<128)return Ep(t,n,e);if(i=o[r.pos++],n|=(127&i)<<24,i<128)return Ep(t,n,e);if(i=o[r.pos++],n|=(1&i)<<31,i<128)return Ep(t,n,e);throw new Error("Expected varint not more than 10 bytes")}function Sp(t){return t.type===vp.Bytes?t.readVarint()+t.pos:t.pos+1}function Ep(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Tp(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(r=~(-t%4294967296),n=~(-t/4294967296),4294967295^r?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Ap(r,n,e),kp(n,e)}function Ap(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}function kp(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function Ip(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function Cp(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function Pp(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function Mp(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function zp(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function Lp(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function Dp(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function Op(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function Bp(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function Rp(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function Fp(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Up(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function jp(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Np(t,e,r){var n="",i=e;while(i<r){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>r)break;1===c?u<128&&(l=u):2===c?(o=t[i+1],128===(192&o)&&(l=(31&u)<<6|63&o,l<=127&&(l=null))):3===c?(o=t[i+1],a=t[i+2],128===(192&o)&&128===(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a,(l<=2047||l>=55296&&l<=57343)&&(l=null))):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s,(l<=65535||l>=1114112)&&(l=null))),null===l?(l=65533,c=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),i+=c}return n}function Vp(t,e,r){return bp.decode(t.subarray(e,r))}function qp(t,e,r){for(var n,i,o=0;o<e.length;o++){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}vp.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){r=r||this.length;while(this.pos<r){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Fp(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=jp(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Fp(this.buf,this.pos)+Fp(this.buf,this.pos+4)*gp;return this.pos+=8,t},readSFixed64:function(){var t=Fp(this.buf,this.pos)+jp(this.buf,this.pos+4)*gp;return this.pos+=8,t},readFloat:function(){var t=mp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=mp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return r=n[this.pos++],e=127&r,r<128?e:(r=n[this.pos++],e|=(127&r)<<7,r<128?e:(r=n[this.pos++],e|=(127&r)<<14,r<128?e:(r=n[this.pos++],e|=(127&r)<<21,r<128?e:(r=n[this.pos],e|=(15&r)<<28,wp(e,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=xp&&bp?Vp(this.buf,e,t):Np(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==vp.Bytes)return t.push(this.readVarint(e));var r=Sp(this);t=t||[];while(this.pos<r)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==vp.Bytes)return t.push(this.readSVarint());var e=Sp(this);t=t||[];while(this.pos<e)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==vp.Bytes)return t.push(this.readBoolean());var e=Sp(this);t=t||[];while(this.pos<e)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==vp.Bytes)return t.push(this.readFloat());var e=Sp(this);t=t||[];while(this.pos<e)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==vp.Bytes)return t.push(this.readDouble());var e=Sp(this);t=t||[];while(this.pos<e)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==vp.Bytes)return t.push(this.readFixed32());var e=Sp(this);t=t||[];while(this.pos<e)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==vp.Bytes)return t.push(this.readSFixed32());var e=Sp(this);t=t||[];while(this.pos<e)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==vp.Bytes)return t.push(this.readFixed64());var e=Sp(this);t=t||[];while(this.pos<e)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==vp.Bytes)return t.push(this.readSFixed64());var e=Sp(this);t=t||[];while(this.pos<e)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===vp.Varint)while(this.buf[this.pos++]>127);else if(e===vp.Bytes)this.pos=this.readVarint()+this.pos;else if(e===vp.Fixed32)this.pos+=4;else{if(e!==vp.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){var e=this.length||16;while(e<this.pos+t)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Up(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Up(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Up(this.buf,-1&t,this.pos),Up(this.buf,Math.floor(t*_p),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Up(this.buf,-1&t,this.pos),Up(this.buf,Math.floor(t*_p),this.pos+4),this.pos+=8},writeVarint:function(t){t=+t||0,t>268435455||t<0?Tp(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=qp(this.buf,t,this.pos);var r=this.pos-e;r>=128&&Ip(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),mp.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),mp.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&Ip(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,vp.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Cp,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Pp,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Lp,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Mp,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,zp,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Dp,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Op,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Bp,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Rp,e)},writeBytesField:function(t,e){this.writeTag(t,vp.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,vp.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,vp.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,vp.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,vp.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,vp.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,vp.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,vp.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,vp.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,vp.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Zp=3;function Gp(t,e,r){1===t&&r.readMessage(Xp,e)}function Xp(t,e,r){if(3===t){var n=r.readMessage(Wp,{}),i=n.id,o=n.bitmap,a=n.width,s=n.height,u=n.left,l=n.top,c=n.advance;e.push({id:i,bitmap:new Ju({width:a+2*Zp,height:s+2*Zp},o),metrics:{width:a,height:s,left:u,top:l,advance:c}})}}function Wp(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint())}function $p(t){return new yp(t).readFields(Gp,[])}var Hp=Zp;function Kp(t){for(var e=0,r=0,n=0,i=t;n<i.length;n+=1){var o=i[n];e+=o.w*o.h,r=Math.max(r,o.w)}t.sort(function(t,e){return e.h-t.h});for(var a=Math.max(Math.ceil(Math.sqrt(e/.95)),r),s=[{x:0,y:0,w:a,h:1/0}],u=0,l=0,c=0,p=t;c<p.length;c+=1)for(var h=p[c],f=s.length-1;f>=0;f--){var d=s[f];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,l=Math.max(l,h.y+h.h),u=Math.max(u,h.x+h.w),h.w===d.w&&h.h===d.h){var m=s.pop();f<s.length&&(s[f]=m)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):h.w===d.w?(d.y+=h.h,d.h-=h.h):(s.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}return{w:u,h:l,fill:e/(u*l)||0}}var Yp=1,Jp=function(t,e){var r=e.pixelRatio,n=e.version,i=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=r,this.stretchX=i,this.stretchY=o,this.content=a,this.version=n},Qp={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Qp.tl.get=function(){return[this.paddedRect.x+Yp,this.paddedRect.y+Yp]},Qp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Yp,this.paddedRect.y+this.paddedRect.h-Yp]},Qp.tlbr.get=function(){return this.tl.concat(this.br)},Qp.displaySize.get=function(){return[(this.paddedRect.w-2*Yp)/this.pixelRatio,(this.paddedRect.h-2*Yp)/this.pixelRatio]},Object.defineProperties(Jp.prototype,Qp);var th=function(t,e){var r={},n={};this.haveRenderCallbacks=[];var i=[];this.addImages(t,r,i),this.addImages(e,n,i);var o=Kp(i),a=o.w,s=o.h,u=new Qu({width:a||1,height:s||1});for(var l in t){var c=t[l],p=r[l].paddedRect;Qu.copy(c.data,u,{x:0,y:0},{x:p.x+Yp,y:p.y+Yp},c.data)}for(var h in e){var f=e[h],d=n[h].paddedRect,m=d.x+Yp,y=d.y+Yp,v=f.data.width,g=f.data.height;Qu.copy(f.data,u,{x:0,y:0},{x:m,y:y},f.data),Qu.copy(f.data,u,{x:0,y:g-1},{x:m,y:y-1},{width:v,height:1}),Qu.copy(f.data,u,{x:0,y:0},{x:m,y:y+g},{width:v,height:1}),Qu.copy(f.data,u,{x:v-1,y:0},{x:m-1,y:y},{width:1,height:g}),Qu.copy(f.data,u,{x:0,y:0},{x:m+v,y:y},{width:1,height:g})}this.image=u,this.iconPositions=r,this.patternPositions=n};th.prototype.addImages=function(t,e,r){for(var n in t){var i=t[n],o={x:0,y:0,w:i.data.width+2*Yp,h:i.data.height+2*Yp};r.push(o),e[n]=new Jp(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n)}},th.prototype.patchUpdatedImages=function(t,e){for(var r in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[r],t.getImage(r),e),this.patchUpdatedImage(this.patternPositions[r],t.getImage(r),e)},th.prototype.patchUpdatedImage=function(t,e,r){if(t&&e&&t.version!==e.version){t.version=e.version;var n=t.tl,i=n[0],o=n[1];r.update(e.data,void 0,{x:i,y:o})}},Mo("ImagePosition",Jp),Mo("ImageAtlas",th);var eh={horizontal:1,vertical:2,horizontalOnly:3},rh=-17;function nh(t){for(var e=0,r=t;e<r.length;e+=1){var n=r[e];if(0!==n.positionedGlyphs.length)return!1}return!0}var ih=57344,oh=63743,ah=function(){this.scale=1,this.fontStack="",this.imageName=null};ah.forText=function(t,e){var r=new ah;return r.scale=t||1,r.fontStack=e,r},ah.forImage=function(t){var e=new ah;return e.imageName=t,e};var sh=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function uh(t,e){for(var r=[],n=t.text,i=0,o=0,a=e;o<a.length;o+=1){var s=a[o];r.push(t.substring(i,s)),i=s}return i<n.length&&r.push(t.substring(i,n.length)),r}function lh(t,e,r,n,i,o,a,s,u,l,c,p,h,f,d,m){var y,v=sh.fromFeature(t,i);p===eh.vertical&&v.verticalizePunctuation();var g=sa.processBidirectionalText,_=sa.processStyledBidirectionalText;if(g&&1===v.sections.length){y=[];for(var x=g(v.toString(),gh(v,l,o,e,n,f,d)),b=0,w=x;b<w.length;b+=1){var S=w[b],E=new sh;E.text=S,E.sections=v.sections;for(var T=0;T<S.length;T++)E.sectionIndex.push(0);y.push(E)}}else if(_){y=[];for(var A=_(v.text,v.sectionIndex,gh(v,l,o,e,n,f,d)),k=0,I=A;k<I.length;k+=1){var C=I[k],P=new sh;P.text=C[0],P.sectionIndex=C[1],P.sections=v.sections,y.push(P)}}else y=uh(v,gh(v,l,o,e,n,f,d));var M=[],z={positionedLines:M,text:v.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:p,iconsInText:!1,verticalizable:!1};return xh(z,e,r,n,y,a,s,u,p,l,h,m),!nh(M)&&z}sh.fromFeature=function(t,e){for(var r=new sh,n=0;n<t.sections.length;n++){var i=t.sections[n];i.image?r.addImageSection(i):r.addTextSection(i,e)}return r},sh.prototype.length=function(){return this.text.length},sh.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},sh.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},sh.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},sh.prototype.verticalizePunctuation=function(){this.text=pp(this.text)},sh.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&ch[this.text.charCodeAt(e)];e++)t++;for(var r=this.text.length,n=this.text.length-1;n>=0&&n>=t&&ch[this.text.charCodeAt(n)];n--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)},sh.prototype.substring=function(t,e){var r=new sh;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r},sh.prototype.toString=function(){return this.text},sh.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,r){return Math.max(e,t.sections[r].scale)},0)},sh.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(ah.forText(t.scale,t.fontStack||e));for(var r=this.sections.length-1,n=0;n<t.text.length;++n)this.sectionIndex.push(r)},sh.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(ah.forImage(e)),this.sectionIndex.push(this.sections.length-1)):N("Reached maximum number of images "+(oh-ih+2))}else N("Can't add FormattedSection with an empty image.")},sh.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=oh?null:++this.imageSectionID:(this.imageSectionID=ih,this.imageSectionID)};var ch={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ph={};function hh(t,e,r,n,i,o){if(e.imageName){var a=n[e.imageName];return a?a.displaySize[0]*e.scale*hp/o+i:0}var s=r[e.fontStack],u=s&&s[t];return u?u.metrics.advance*e.scale+i:0}function fh(t,e,r,n,i,o){for(var a=0,s=0;s<t.length();s++){var u=t.getSection(s);a+=hh(t.getCharCode(s),u,n,i,e,o)}var l=Math.max(1,Math.ceil(a/r));return a/l}function dh(t,e,r,n){var i=Math.pow(t-e,2);return n?t<e?i/2:2*i:i+Math.abs(r)*r}function mh(t,e,r){var n=0;return 10===t&&(n-=1e4),r&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function yh(t,e,r,n,i,o){for(var a=null,s=dh(e,r,i,o),u=0,l=n;u<l.length;u+=1){var c=l[u],p=e-c.x,h=dh(p,r,i,o)+c.badness;h<=s&&(a=c,s=h)}return{index:t,x:e,priorBreak:a,badness:s}}function vh(t){return t?vh(t.priorBreak).concat(t.index):[]}function gh(t,e,r,n,i,o,a){if("point"!==o)return[];if(!t)return[];for(var s=[],u=fh(t,e,r,n,i,a),l=t.text.indexOf("​")>=0,c=0,p=0;p<t.length();p++){var h=t.getSection(p),f=t.getCharCode(p);if(ch[f]||(c+=hh(f,h,n,i,e,a)),p<t.length()-1){var d=No(f);(ph[f]||d||h.imageName)&&s.push(yh(p+1,c,u,s,mh(f,t.getCharCode(p+1),d&&l),!1))}}return vh(yh(t.length(),c,u,s,0,!0))}function _h(t){var e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0;break}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0;break}return{horizontalAlign:e,verticalAlign:r}}function xh(t,e,r,n,i,o,a,s,u,l,c,p){for(var h=0,f=rh,d=0,m=0,y="right"===s?1:"left"===s?0:.5,v=0,g=0,_=i;g<_.length;g+=1){var x=_[g];x.trim();var b=x.getMaxScale(),w=(b-1)*hp,S={positionedGlyphs:[],lineOffset:0};t.positionedLines[v]=S;var E=S.positionedGlyphs,T=0;if(x.length()){for(var A=0;A<x.length();A++){var k=x.getSection(A),I=x.getSectionIndex(A),C=x.getCharCode(A),P=0,M=null,z=null,L=null,D=hp,O=!(u===eh.horizontal||!c&&!Vo(C)||c&&(ch[C]||Go(C)));if(k.imageName){var B=n[k.imageName];if(!B)continue;L=k.imageName,t.iconsInText=t.iconsInText||!0,z=B.paddedRect;var R=B.displaySize;k.scale=k.scale*hp/p,M={width:R[0],height:R[1],left:Yp,top:-Hp,advance:O?R[1]:R[0]};var F=hp-R[1]*k.scale;P=w+F,D=M.advance;var U=O?R[0]*k.scale-hp*b:R[1]*k.scale-hp*b;U>0&&U>T&&(T=U)}else{var j=r[k.fontStack],N=j&&j[C];if(N&&N.rect)z=N.rect,M=N.metrics;else{var V=e[k.fontStack],q=V&&V[C];if(!q)continue;M=q.metrics}P=(b-k.scale)*hp}O?(t.verticalizable=!0,E.push({glyph:C,imageName:L,x:h,y:f+P,vertical:O,scale:k.scale,fontStack:k.fontStack,sectionIndex:I,metrics:M,rect:z}),h+=D*k.scale+l):(E.push({glyph:C,imageName:L,x:h,y:f+P,vertical:O,scale:k.scale,fontStack:k.fontStack,sectionIndex:I,metrics:M,rect:z}),h+=M.advance*k.scale+l)}if(0!==E.length){var Z=h-l;d=Math.max(Z,d),bh(E,0,E.length-1,y,T)}h=0;var G=o*b+T;S.lineOffset=Math.max(T,w),f+=G,m=Math.max(G,m),++v}else f+=o,++v}var X=f-rh,W=_h(a),$=W.horizontalAlign,H=W.verticalAlign;wh(t.positionedLines,y,$,H,d,m,o,X,i.length),t.top+=-H*X,t.bottom=t.top+X,t.left+=-$*d,t.right=t.left+d}function bh(t,e,r,n,i){if(n||i)for(var o=t[r],a=o.metrics.advance*o.scale,s=(t[r].x+a)*n,u=e;u<=r;u++)t[u].x-=s,t[u].y+=i}function wh(t,e,r,n,i,o,a,s,u){var l=(e-r)*i,c=0;c=o!==a?-s*n-rh:(-n*u+.5)*a;for(var p=0,h=t;p<h.length;p+=1)for(var f=h[p],d=0,m=f.positionedGlyphs;d<m.length;d+=1){var y=m[d];y.x+=l,y.y+=c}}function Sh(t,e,r){var n=_h(r),i=n.horizontalAlign,o=n.verticalAlign,a=e[0],s=e[1],u=a-t.displaySize[0]*i,l=u+t.displaySize[0],c=s-t.displaySize[1]*o,p=c+t.displaySize[1];return{image:t,top:c,bottom:p,left:u,right:l}}function Eh(t,e,r,n,i,o){f("none"!==r),f(Array.isArray(n)&&4===n.length),f(Array.isArray(i)&&2===i.length);var a,s=t.image;if(s.content){var u=s.content,l=s.pixelRatio||1;a=[u[0]/l,u[1]/l,s.displaySize[0]-u[2]/l,s.displaySize[1]-u[3]/l]}var c,p,h,d,m=e.left*o,y=e.right*o;"width"===r||"both"===r?(d=i[0]+m-n[3],p=i[0]+y+n[1]):(d=i[0]+(m+y-s.displaySize[0])/2,p=d+s.displaySize[0]);var v=e.top*o,g=e.bottom*o;return"height"===r||"both"===r?(c=i[1]+v-n[0],h=i[1]+g+n[2]):(c=i[1]+(v+g-s.displaySize[1])/2,h=c+s.displaySize[1]),{image:s,top:c,right:p,bottom:h,left:d,collisionPadding:a}}ph[10]=!0,ph[32]=!0,ph[38]=!0,ph[40]=!0,ph[41]=!0,ph[43]=!0,ph[45]=!0,ph[47]=!0,ph[173]=!0,ph[183]=!0,ph[8203]=!0,ph[8208]=!0,ph[8211]=!0,ph[8231]=!0;var Th=function(t){function e(e,r,n,i){t.call(this,e,r),this.angle=n,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(v);Mo("Anchor",Th);var Ah=128;function kh(t,e){var r=e.expression;if("constant"===r.kind){var n=r.evaluate(new la(t+1));return{kind:"constant",layoutSize:n}}if("source"===r.kind)return{kind:"source"};var i=r.zoomStops,o=r.interpolationType,a=0;while(a<i.length&&i[a]<=t)a++;a=Math.max(0,a-1);var s=a;while(s<i.length&&i[s]<t+1)s++;s=Math.min(i.length-1,s);var u=i[a],l=i[s];if("composite"===r.kind)return{kind:"composite",minZoom:u,maxZoom:l,interpolationType:o};var c=r.evaluate(new la(u)),p=r.evaluate(new la(l));return{kind:"camera",minZoom:u,maxZoom:l,minSize:c,maxSize:p,interpolationType:o}}function Ih(t,e,r){var n=e.uSize,i=e.uSizeT,o=r.lowerSize,a=r.upperSize;return"source"===t.kind?o/Ah:"composite"===t.kind?tn(o/Ah,a/Ah,i):n}function Ch(t,e){var r=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType,o=t.minZoom,a=t.maxZoom,s=i?S(In.interpolationFactor(i,e,o,a),0,1):0;"camera"===t.kind?n=tn(t.minSize,t.maxSize,s):r=s}return{uSizeT:r,uSize:n}}var Ph=Object.freeze({__proto__:null,getSizeData:kh,evaluateSizeForFeature:Ih,evaluateSizeForZoom:Ch,SIZE_PACK_FACTOR:Ah});function Mh(t,e,r,n,i){if(void 0===e.segment)return!0;var o=e,a=e.segment+1,s=0;while(s>-r/2){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;var u=[],l=0;while(s<r/2){var c=t[a-1],p=t[a],h=t[a+1];if(!h)return!1;var f=c.angleTo(p)-p.angleTo(h);f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;while(s-u[0].distance>n)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=p.dist(h)}return!0}function zh(t){for(var e=0,r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function Lh(t,e,r){return t?.6*e*r:0}function Dh(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Oh(t,e,r,n,i,o){for(var a=Lh(r,i,o),s=Dh(r,n)*o,u=0,l=zh(t)/2,c=0;c<t.length-1;c++){var p=t[c],h=t[c+1],f=p.dist(h);if(u+f>l){var d=(l-u)/f,m=tn(p.x,h.x,d),y=tn(p.y,h.y,d),v=new Th(m,y,h.angleTo(p),c);return v._round(),!a||Mh(t,v,s,a,e)?v:void 0}u+=f}}function Bh(t,e,r,n,i,o,a,s,u){var l=Lh(n,o,a),c=Dh(n,i),p=c*a,h=0===t[0].x||t[0].x===u||0===t[0].y||t[0].y===u;e-p<e/4&&(e=p+e/4);var f=2*o,d=h?e/2*s%e:(c/2+f)*a*s%e;return Rh(t,d,e,l,r,p,h,!1,u)}function Rh(t,e,r,n,i,o,a,s,u){for(var l=o/2,c=zh(t),p=0,h=e-r,f=[],d=0;d<t.length-1;d++){var m=t[d],y=t[d+1],v=m.dist(y),g=y.angleTo(m);while(h+r<p+v){h+=r;var _=(h-p)/v,x=tn(m.x,y.x,_),b=tn(m.y,y.y,_);if(x>=0&&x<u&&b>=0&&b<u&&h-l>=0&&h+l<=c){var w=new Th(x,b,g,d);w._round(),n&&!Mh(t,w,o,n,i)||f.push(w)}}p+=v}return s||f.length||a||(f=Rh(t,p/2,r,n,i,o,a,!0,u)),f}function Fh(t,e,r,n,i){for(var o=[],a=0;a<t.length;a++)for(var s=t[a],u=void 0,l=0;l<s.length-1;l++){var c=s[l],p=s[l+1];c.x<e&&p.x<e||(c.x<e?c=new v(e,c.y+(p.y-c.y)*((e-c.x)/(p.x-c.x)))._round():p.x<e&&(p=new v(e,c.y+(p.y-c.y)*((e-c.x)/(p.x-c.x)))._round()),c.y<r&&p.y<r||(c.y<r?c=new v(c.x+(p.x-c.x)*((r-c.y)/(p.y-c.y)),r)._round():p.y<r&&(p=new v(c.x+(p.x-c.x)*((r-c.y)/(p.y-c.y)),r)._round()),c.x>=n&&p.x>=n||(c.x>=n?c=new v(n,c.y+(p.y-c.y)*((n-c.x)/(p.x-c.x)))._round():p.x>=n&&(p=new v(n,c.y+(p.y-c.y)*((n-c.x)/(p.x-c.x)))._round()),c.y>=i&&p.y>=i||(c.y>=i?c=new v(c.x+(p.x-c.x)*((i-c.y)/(p.y-c.y)),i)._round():p.y>=i&&(p=new v(c.x+(p.x-c.x)*((i-c.y)/(p.y-c.y)),i)._round()),u&&c.equals(u[u.length-1])||(u=[c],o.push(u)),u.push(p)))))}return o}var Uh=Yp;function jh(t,e,r,n){var i=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2*Uh,u=o.paddedRect.h-2*Uh,l=t.right-t.left,c=t.bottom-t.top,p=o.stretchX||[[0,s]],h=o.stretchY||[[0,u]],f=function(t,e){return t+e[1]-e[0]},d=p.reduce(f,0),m=h.reduce(f,0),y=s-d,g=u-m,_=0,x=d,b=0,w=m,S=0,E=y,T=0,A=g;if(o.content&&n){var k=o.content;_=Nh(p,0,k[0]),b=Nh(h,0,k[1]),x=Nh(p,k[0],k[2]),w=Nh(h,k[1],k[3]),S=k[0]-_,T=k[1]-b,E=k[2]-k[0]-x,A=k[3]-k[1]-w}var I=function(n,i,s,u){var p=qh(n.stretch-_,x,l,t.left),h=Zh(n.fixed-S,E,n.stretch,d),f=qh(i.stretch-b,w,c,t.top),y=Zh(i.fixed-T,A,i.stretch,m),g=qh(s.stretch-_,x,l,t.left),k=Zh(s.fixed-S,E,s.stretch,d),I=qh(u.stretch-b,w,c,t.top),C=Zh(u.fixed-T,A,u.stretch,m),P=new v(p,f),M=new v(g,f),z=new v(g,I),L=new v(p,I),D=new v(h/a,y/a),O=new v(k/a,C/a),B=e*Math.PI/180;if(B){var R=Math.sin(B),F=Math.cos(B),U=[F,-R,R,F];P._matMult(U),M._matMult(U),L._matMult(U),z._matMult(U)}var j=n.stretch+n.fixed,N=s.stretch+s.fixed,V=i.stretch+i.fixed,q=u.stretch+u.fixed,Z={x:o.paddedRect.x+Uh+j,y:o.paddedRect.y+Uh+V,w:N-j,h:q-V},G=E/a/l,X=A/a/c;return{tl:P,tr:M,bl:L,br:z,tex:Z,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:O,minFontScaleX:G,minFontScaleY:X,isSDF:r}};if(n&&(o.stretchX||o.stretchY))for(var C=Vh(p,y,d),P=Vh(h,g,m),M=0;M<C.length-1;M++)for(var z=C[M],L=C[M+1],D=0;D<P.length-1;D++){var O=P[D],B=P[D+1];i.push(I(z,O,L,B))}else i.push(I({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:u+1}));return i}function Nh(t,e,r){for(var n=0,i=0,o=t;i<o.length;i+=1){var a=o[i];n+=Math.max(e,Math.min(r,a[1]))-Math.max(e,Math.min(r,a[0]))}return n}function Vh(t,e,r){for(var n=[{fixed:-Uh,stretch:0}],i=0,o=t;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1],l=n[n.length-1];n.push({fixed:s-l.stretch,stretch:l.stretch}),n.push({fixed:s-l.stretch,stretch:l.stretch+(u-s)})}return n.push({fixed:e+Uh,stretch:r}),n}function qh(t,e,r,n){return t/e*r+n}function Zh(t,e,r,n){return t-e*r/n}function Gh(t,e,r,n,i,o,a,s){for(var u=n.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,l=[],c=0,p=e.positionedLines;c<p.length;c+=1)for(var h=p[c],f=0,d=h.positionedGlyphs;f<d.length;f+=1){var m=d[f];if(m.rect){var y=m.rect||{},g=1,_=Hp+g,x=!0,b=1,w=0,S=(i||s)&&m.vertical,E=m.metrics.advance*m.scale/2;if(s&&e.verticalizable){var T=(m.scale-1)*hp,A=(hp-m.metrics.width*m.scale)/2;w=h.lineOffset/2-(m.imageName?-A:T)}if(m.imageName){var k=a[m.imageName];x=k.sdf,b=k.pixelRatio,_=Yp/b}var I=i?[m.x+E,m.y]:[0,0],C=i?[0,0]:[m.x+E+r[0],m.y+r[1]-w],P=[0,0];S&&(P=C,C=[0,0]);var M=(m.metrics.left-_)*m.scale-E+C[0],z=(-m.metrics.top-_)*m.scale+C[1],L=M+y.w*m.scale/b,D=z+y.h*m.scale/b,O=new v(M,z),B=new v(L,z),R=new v(M,D),F=new v(L,D);if(S){var U=new v(-E,E-rh),j=-Math.PI/2,N=hp/2-E,V=m.imageName?N:0,q=new v(5-rh-N,-V),Z=new(Function.prototype.bind.apply(v,[null].concat(P)));O._rotateAround(j,U)._add(q)._add(Z),B._rotateAround(j,U)._add(q)._add(Z),R._rotateAround(j,U)._add(q)._add(Z),F._rotateAround(j,U)._add(q)._add(Z)}if(u){var G=Math.sin(u),X=Math.cos(u),W=[X,-G,G,X];O._matMult(W),B._matMult(W),R._matMult(W),F._matMult(W)}var $=new v(0,0),H=new v(0,0),K=0,Y=0;l.push({tl:O,tr:B,bl:R,br:F,tex:y,writingMode:e.writingMode,glyphOffset:I,sectionIndex:m.sectionIndex,isSDF:x,pixelOffsetTL:$,pixelOffsetBR:H,minFontScaleX:K,minFontScaleY:Y})}}return l}var Xh=function(t,e,r,n,i,o,a,s,u,l,c,p){var h=a.top*s-u,f=a.bottom*s+u,d=a.left*s-u,m=a.right*s+u,y=a.collisionPadding;if(y&&(d-=y[0]*s,h-=y[1]*s,m+=y[2]*s,f+=y[3]*s),this.boxStartIndex=t.length,l){var g=f-h,_=m-d;g>0&&(g=Math.max(10*s,g),this._addLineCollisionCircles(t,e,r,r.segment,_,g,n,i,o,c))}else{if(p){var x=new v(d,h),b=new v(m,h),w=new v(d,f),S=new v(m,f),E=p*Math.PI/180;x._rotate(E),b._rotate(E),w._rotate(E),S._rotate(E),d=Math.min(x.x,b.x,w.x,S.x),m=Math.max(x.x,b.x,w.x,S.x),h=Math.min(x.y,b.y,w.y,S.y),f=Math.max(x.y,b.y,w.y,S.y)}t.emplaceBack(r.x,r.y,d,h,m,f,n,i,o,0,0)}this.boxEndIndex=t.length};Xh.prototype._addLineCollisionCircles=function(t,e,r,n,i,o,a,s,u,l){var c=o/2,p=Math.floor(i/c)||1,h=1+.4*Math.log(l)/Math.LN2,f=Math.floor(p*h/2),d=-o/2,m=r,y=n+1,v=d,g=-i/2,_=g-i/4;do{if(y--,y<0){if(v>g)return;y=0;break}v-=e[y].dist(m),m=e[y]}while(v>_);for(var x=e[y].dist(e[y+1]),b=-f;b<p+f;b++){var w=b*c,S=g+w;if(w<0&&(S+=w),w>i&&(S+=w-i),!(S<v)){while(v+x<S){if(v+=x,y++,y+1>=e.length)return;x=e[y].dist(e[y+1])}var E=S-v,T=e[y],A=e[y+1],k=A.sub(T)._unit()._mult(E)._add(T)._round(),I=Math.abs(S-d)<c?0:.8*(S-d);t.emplaceBack(k.x,k.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,I)}}};var Wh=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=$h),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)};function $h(t,e){return t<e?-1:t>e?1:0}function Hh(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1);for(var n=1/0,i=1/0,o=-1/0,a=-1/0,s=t[0],u=0;u<s.length;u++){var l=s[u];(!u||l.x<n)&&(n=l.x),(!u||l.y<i)&&(i=l.y),(!u||l.x>o)&&(o=l.x),(!u||l.y>a)&&(a=l.y)}var c=o-n,p=a-i,h=Math.min(c,p),f=h/2,d=new Wh([],Kh);if(0===h)return new v(n,i);for(var m=n;m<o;m+=h)for(var y=i;y<a;y+=h)d.push(new Yh(m+f,y+f,f,t));var g=Qh(t),_=d.length;while(d.length){var x=d.pop();(x.d>g.d||!g.d)&&(g=x,r&&console.log("found best %d after %d probes",Math.round(1e4*x.d)/1e4,_)),x.max-g.d<=e||(f=x.h/2,d.push(new Yh(x.p.x-f,x.p.y-f,f,t)),d.push(new Yh(x.p.x+f,x.p.y-f,f,t)),d.push(new Yh(x.p.x-f,x.p.y+f,f,t)),d.push(new Yh(x.p.x+f,x.p.y+f,f,t)),_+=4)}return r&&(console.log("num probes: "+_),console.log("best distance: "+g.d)),g.p}function Kh(t,e){return e.max-t.max}function Yh(t,e,r,n){this.p=new v(t,e),this.h=r,this.d=Jh(this.p,n),this.max=this.d+this.h*Math.SQRT2}function Jh(t,e){for(var r=!1,n=1/0,i=0;i<e.length;i++)for(var o=e[i],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u];l.y>t.y!==c.y>t.y&&t.x<(c.x-l.x)*(t.y-l.y)/(c.y-l.y)+l.x&&(r=!r),n=Math.min(n,tu(t,l,c))}return(r?1:-1)*Math.sqrt(n)}function Qh(t){for(var e=0,r=0,n=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],l=i[s],c=u.x*l.y-l.x*u.y;r+=(u.x+l.x)*c,n+=(u.y+l.y)*c,e+=3*c}return new Yh(r/e,n/e,0,t)}Wh.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Wh.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Wh.prototype.peek=function(){return this.data[0]},Wh.prototype._up=function(t){var e=this,r=e.data,n=e.compare,i=r[t];while(t>0){var o=t-1>>1,a=r[o];if(n(i,a)>=0)break;r[t]=a,t=o}r[t]=i},Wh.prototype._down=function(t){var e=this,r=e.data,n=e.compare,i=this.length>>1,o=r[t];while(t<i){var a=1+(t<<1),s=r[a],u=a+1;if(u<this.length&&n(r[u],s)<0&&(a=u,s=r[u]),n(s,o)>=0)break;r[t]=s,t=a}r[t]=o};var tf=n(function(t){function e(t,e){var r,n,i,o,a,s,u,l;r=3&t.length,n=t.length-r,i=e,a=3432918353,s=461845907,l=0;while(l<n)u=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*s+(((u>>>16)*s&65535)<<16)&4294967295,i^=u,i=i<<13|i>>>19,o=5*(65535&i)+((5*(i>>>16)&65535)<<16)&4294967295,i=27492+(65535&o)+((58964+(o>>>16)&65535)<<16);switch(u=0,r){case 3:u^=(255&t.charCodeAt(l+2))<<16;case 2:u^=(255&t.charCodeAt(l+1))<<8;case 1:u^=255&t.charCodeAt(l),u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*s+(((u>>>16)*s&65535)<<16)&4294967295,i^=u}return i^=t.length,i^=i>>>16,i=2246822507*(65535&i)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(65535&i)+((3266489909*(i>>>16)&65535)<<16)&4294967295,i^=i>>>16,i>>>0}t.exports=e}),ef=n(function(t){function e(t,e){var r,n=t.length,i=e^n,o=0;while(n>=4)r=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24,r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16),r^=r>>>24,r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^r,n-=4,++o;switch(n){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i^=255&t.charCodeAt(o),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)}return i^=i>>>13,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>15,i>>>0}t.exports=e}),rf=tf,nf=tf,of=ef;rf.murmur3=nf,rf.murmur2=of;var af=7,sf=Number.POSITIVE_INFINITY;function uf(t,e){function r(t,e){var r=0,n=0;e<0&&(e=0);var i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":n=i-af;break;case"bottom-right":case"bottom-left":n=-i+af;break;case"bottom":n=-e+af;break;case"top":n=e-af;break}switch(t){case"top-right":case"bottom-right":r=-i;break;case"top-left":case"bottom-left":r=i;break;case"left":r=e;break;case"right":r=-e;break}return[r,n]}function n(t,e,r){var n=0,i=0;switch(e=Math.abs(e),r=Math.abs(r),t){case"top-right":case"top-left":case"top":i=r-af;break;case"bottom-right":case"bottom-left":case"bottom":i=-r+af;break}switch(t){case"top-right":case"bottom-right":case"right":n=-e;break;case"top-left":case"bottom-left":case"left":n=e;break}return[n,i]}return e[1]!==sf?n(t,e[0],e[1]):r(t,e[0])}function lf(t,e,r,n,i,o){t.createArrays();var a=512*t.overscaling;t.tilePixelRatio=js/a,t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,l={};if("composite"===t.textSizeData.kind){var c=t.textSizeData,p=c.minZoom,h=c.maxZoom;l.compositeTextSizes=[u["text-size"].possiblyEvaluate(new la(p)),u["text-size"].possiblyEvaluate(new la(h))]}if("composite"===t.iconSizeData.kind){var f=t.iconSizeData,d=f.minZoom,m=f.maxZoom;l.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new la(d)),u["icon-size"].possiblyEvaluate(new la(m))]}l.layoutTextSize=u["text-size"].possiblyEvaluate(new la(t.zoom+1)),l.layoutIconSize=u["icon-size"].possiblyEvaluate(new la(t.zoom+1)),l.textMaxSize=u["text-size"].possiblyEvaluate(new la(18));for(var y=s.get("text-line-height")*hp,v="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),g=s.get("text-keep-upright"),_=s.get("text-size"),x=function(){var o=w[b],a=s.get("text-font").evaluate(o,{}).join(","),u=_.evaluate(o,{}),c=l.layoutTextSize.evaluate(o,{}),p=l.layoutIconSize.evaluate(o,{}),h={horizontal:{},vertical:void 0},f=o.text,d=[0,0];if(f){var m=f.toString(),x=s.get("text-letter-spacing").evaluate(o,{})*hp,S=Uo(m)?x:0,E=s.get("text-anchor").evaluate(o,{}),T=s.get("text-variable-anchor");if(!T){var A=s.get("text-radial-offset").evaluate(o,{});d=A?uf(E,[A*hp,sf]):s.get("text-offset").evaluate(o,{}).map(function(t){return t*hp})}var k=v?"center":s.get("text-justify").evaluate(o,{}),I=s.get("symbol-placement"),C="point"===I?s.get("text-max-width").evaluate(o,{})*hp:0,P=function(){t.allowVerticalPlacement&&Fo(m)&&(h.vertical=lh(f,e,r,i,a,C,y,E,"left",S,d,eh.vertical,!0,I,c,u))};if(!v&&T){for(var M="auto"===k?T.map(function(t){return cf(t)}):[k],z=!1,L=0;L<M.length;L++){var D=M[L];if(!h.horizontal[D])if(z)h.horizontal[D]=h.horizontal[0];else{var O=lh(f,e,r,i,a,C,y,"center",D,S,d,eh.horizontal,!1,I,c,u);O&&(h.horizontal[D]=O,z=1===O.positionedLines.length)}}P()}else{"auto"===k&&(k=cf(E));var B=lh(f,e,r,i,a,C,y,E,k,S,d,eh.horizontal,!1,I,c,u);B&&(h.horizontal[k]=B),P(),Fo(m)&&v&&g&&(h.vertical=lh(f,e,r,i,a,C,y,E,k,S,d,eh.vertical,!1,I,c,u))}}var R=void 0,F=!1;if(o.icon&&o.icon.name){var U=n[o.icon.name];U&&(R=Sh(i[o.icon.name],s.get("icon-offset").evaluate(o,{}),s.get("icon-anchor").evaluate(o,{})),F=U.sdf,void 0===t.sdfIcons?t.sdfIcons=U.sdf:t.sdfIcons!==U.sdf&&N("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),U.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==s.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}var j=mf(h.horizontal)||h.vertical;t.iconsInText=!!j&&j.iconsInText,(j||R)&&pf(t,o,h,R,n,l,c,p,d,F)},b=0,w=t.features;b<w.length;b+=1)x();o&&t.generateCollisionDebugBuffers()}function cf(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function pf(t,e,r,n,i,o,a,s,u,l){var c=o.textMaxSize.evaluate(e,{});void 0===c&&(c=a);var p,h=t.layers[0].layout,f=h.get("icon-offset").evaluate(e,{}),d=mf(r.horizontal),m=24,y=a/m,v=t.tilePixelRatio*y,g=t.tilePixelRatio*c/m,_=t.tilePixelRatio*s,x=t.tilePixelRatio*h.get("symbol-spacing"),b=h.get("text-padding")*t.tilePixelRatio,w=h.get("icon-padding")*t.tilePixelRatio,S=h.get("text-max-angle")/180*Math.PI,E="map"===h.get("text-rotation-alignment")&&"point"!==h.get("symbol-placement"),T="map"===h.get("icon-rotation-alignment")&&"point"!==h.get("symbol-placement"),A=h.get("symbol-placement"),k=x/2,I=h.get("icon-text-fit");n&&"none"!==I&&(t.allowVerticalPlacement&&r.vertical&&(p=Eh(n,r.vertical,I,h.get("icon-text-fit-padding"),f,y)),d&&(n=Eh(n,d,I,h.get("icon-text-fit-padding"),f,y)));var C=function(a,s){s.x<0||s.x>=js||s.y<0||s.y>=js||yf(t,s,a,r,n,i,p,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,v,b,E,u,_,w,T,f,e,o,l)};if("line"===A)for(var P=0,M=Fh(e.geometry,0,0,js,js);P<M.length;P+=1)for(var z=M[P],L=Bh(z,x,S,r.vertical||d,n,m,g,t.overscaling,js),D=0,O=L;D<O.length;D+=1){var B=O[D],R=d;R&&vf(t,R.text,k,B)||C(z,B)}else if("line-center"===A)for(var F=0,U=e.geometry;F<U.length;F+=1){var j=U[F];if(j.length>1){var N=Oh(j,S,r.vertical||d,n,m,g);N&&C(j,N)}}else if("Polygon"===e.type)for(var V=0,q=Wl(e.geometry,0);V<q.length;V+=1){var Z=q[V],G=Hh(Z,16);C(Z[0],new Th(G.x,G.y,0))}else if("LineString"===e.type)for(var X=0,W=e.geometry;X<W.length;X+=1){var $=W[X];C($,new Th($[0].x,$[0].y,0))}else if("Point"===e.type)for(var H=0,K=e.geometry;H<K.length;H+=1)for(var Y=K[H],J=0,Q=Y;J<Q.length;J+=1){var tt=Q[J];C([tt],new Th(tt.x,tt.y,0))}}var hf=255,ff=hf*Ah;function df(t,e,r,n,i,o,a,s,u,l,c,p,h,f){var d=Gh(e,r,s,i,o,a,n,t.allowVerticalPlacement),m=t.textSizeData,y=null;"source"===m.kind?(y=[Ah*i.layout.get("text-size").evaluate(a,{})],y[0]>ff&&N(t.layerIds[0]+': Value for "text-size" is >= '+hf+'. Reduce your "text-size".')):"composite"===m.kind&&(y=[Ah*f.compositeTextSizes[0].evaluate(a,{}),Ah*f.compositeTextSizes[1].evaluate(a,{})],(y[0]>ff||y[1]>ff)&&N(t.layerIds[0]+': Value for "text-size" is >= '+hf+'. Reduce your "text-size".')),t.addSymbols(t.text,d,y,s,o,a,l,e,u.lineStartIndex,u.lineLength,h);for(var v=0,g=c;v<g.length;v+=1){var _=g[v];p[_]=t.text.placedSymbolArray.length-1}return 4*d.length}function mf(t){for(var e in t)return t[e];return null}function yf(t,e,r,n,i,o,a,s,u,l,c,p,h,f,d,m,y,v,g,_,x,b,w){var S,E,T,A,k,I=t.addToLineVertexArray(e,r),C=0,P=0,M=0,z=0,L=-1,D=-1,O={},B=rf(""),R=0,F=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(S=s.layout.get("text-offset").evaluate(x,{}).map(function(t){return t*hp}),R=S[0],F=S[1]):(R=s.layout.get("text-radial-offset").evaluate(x,{})*hp,F=sf),t.allowVerticalPlacement&&n.vertical){var U=s.layout.get("text-rotate").evaluate(x,{}),j=U+90,V=n.vertical;A=new Xh(u,r,e,l,c,p,V,h,f,d,t.overscaling,j),a&&(k=new Xh(u,r,e,l,c,p,a,y,v,d,t.overscaling,j))}if(i){var q=s.layout.get("icon-rotate").evaluate(x,{}),Z="none"!==s.layout.get("icon-text-fit"),G=jh(i,q,w,Z),X=a?jh(a,q,w,Z):void 0;T=new Xh(u,r,e,l,c,p,i,y,v,!1,t.overscaling,q),C=4*G.length;var W=t.iconSizeData,$=null;"source"===W.kind?($=[Ah*s.layout.get("icon-size").evaluate(x,{})],$[0]>ff&&N(t.layerIds[0]+': Value for "icon-size" is >= '+hf+'. Reduce your "icon-size".')):"composite"===W.kind&&($=[Ah*b.compositeIconSizes[0].evaluate(x,{}),Ah*b.compositeIconSizes[1].evaluate(x,{})],($[0]>ff||$[1]>ff)&&N(t.layerIds[0]+': Value for "icon-size" is >= '+hf+'. Reduce your "icon-size".')),t.addSymbols(t.icon,G,$,_,g,x,!1,e,I.lineStartIndex,I.lineLength,-1),L=t.icon.placedSymbolArray.length-1,X&&(P=4*X.length,t.addSymbols(t.icon,X,$,_,g,x,eh.vertical,e,I.lineStartIndex,I.lineLength,-1),D=t.icon.placedSymbolArray.length-1)}for(var H in n.horizontal){var K=n.horizontal[H];if(!E){B=rf(K.text);var Y=s.layout.get("text-rotate").evaluate(x,{});E=new Xh(u,r,e,l,c,p,K,h,f,d,t.overscaling,Y)}var J=1===K.positionedLines.length;if(M+=df(t,e,K,o,s,d,x,m,I,n.vertical?eh.horizontal:eh.horizontalOnly,J?Object.keys(n.horizontal):[H],O,L,b),J)break}n.vertical&&(z+=df(t,e,n.vertical,o,s,d,x,m,I,eh.vertical,["vertical"],O,D,b));var Q=E?E.boxStartIndex:t.collisionBoxArray.length,tt=E?E.boxEndIndex:t.collisionBoxArray.length,et=A?A.boxStartIndex:t.collisionBoxArray.length,rt=A?A.boxEndIndex:t.collisionBoxArray.length,nt=T?T.boxStartIndex:t.collisionBoxArray.length,it=T?T.boxEndIndex:t.collisionBoxArray.length,ot=k?k.boxStartIndex:t.collisionBoxArray.length,at=k?k.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=Tf.MAX_GLYPHS&&N("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),t.symbolInstances.emplaceBack(e.x,e.y,O.right>=0?O.right:-1,O.center>=0?O.center:-1,O.left>=0?O.left:-1,O.vertical||-1,L,D,B,Q,tt,et,rt,nt,it,ot,at,l,M,z,C,P,0,h,R,F)}function vf(t,e,r,n){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(n.dist(o[a])<r)return!0}else i[e]=[];return i[e].push(n),!1}var gf=bc.VectorTileFeature.types,_f=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function xf(t,e,r,n,i,o,a,s,u,l,c,p,h){var f=s?Math.min(ff,Math.round(s[0])):0,d=s?Math.min(ff,Math.round(s[1])):0;t.emplaceBack(e,r,Math.round(32*n),Math.round(32*i),o,a,(f<<1)+(u?1:0),d,16*l,16*c,256*p,256*h)}function bf(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r)}function wf(t){for(var e=0,r=t.sections;e<r.length;e+=1){var n=r[e];if($o(n.text))return!0}return!1}var Sf=function(t){this.layoutVertexArray=new Ua,this.indexArray=new Ka,this.programConfigurations=t,this.segments=new ms,this.dynamicLayoutVertexArray=new ja,this.opacityVertexArray=new Na,this.placedSymbolArray=new is};Sf.prototype.upload=function(t,e,r,n){r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,rp.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,np.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,_f,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(t)},Sf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Mo("SymbolBuffers",Sf);var Ef=function(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new ms,this.collisionVertexArray=new Za};Ef.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,ip.members,!0)},Ef.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Mo("CollisionBuffers",Ef);var Tf=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasPaintOverrides=!1,this.hasRTLText=!1;var e=this.layers[0],r=e._unevaluatedLayout._values;this.textSizeData=kh(this.zoom,r["text-size"]),this.iconSizeData=kh(this.zoom,r["icon-size"]);var n=this.layers[0].layout,i=n.get("symbol-sort-key"),o=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==o&&void 0!==i.constantOr(1);var a="viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey;this.sortFeaturesByY=a&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map(function(t){return eh[t]})),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID};function Af(t,e){return e.replace(/{([^{}]+)}/g,function(e,r){return r in t?String(t[r]):""})}Tf.prototype.createArrays=function(){var t=this.layers[0].layout;this.hasPaintOverrides=Mf.hasPaintOverrides(t),this.text=new Sf(new Bs(rp.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new Sf(new Bs(rp.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.textCollisionBox=new Ef(qa,op.members,Ya),this.iconCollisionBox=new Ef(qa,op.members,Ya),this.textCollisionCircle=new Ef(qa,ap.members,Ka),this.iconCollisionCircle=new Ef(qa,ap.members,Ka),this.glyphOffsetArray=new us,this.lineVertexArray=new cs,this.symbolInstances=new as},Tf.prototype.calculateGlyphDependencies=function(t,e,r,n,i){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(r||n)&&i){var a=cp[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},Tf.prototype.populate=function(t,e){var r=this.layers[0],n=r.layout,i=n.get("text-font"),o=n.get("text-field"),a=n.get("icon-image"),s=("constant"!==o.value.kind||o.value.value instanceof kr&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u=("constant"!==a.value.kind||!!a.value.value)&&Object.keys(a.parameters).length>0,l=n.get("symbol-sort-key");if(this.features=[],s||u){for(var c=e.iconDependencies,p=e.glyphDependencies,h=e.availableImages,f=new la(this.zoom),d=0,m=t;d<m.length;d+=1){var y=m[d],v=y.feature,g=y.index,_=y.sourceLayerIndex;if(r._featureFilter(f,v)){var x=void 0;if(s){var b=r.getValueAndResolveTokens("text-field",v,h),w=kr.factory(b);wf(w)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===na()||this.hasRTLText&&sa.isParsed())&&(x=up(w,r,v))}var S=void 0;if(u){var E=r.getValueAndResolveTokens("icon-image",v,h);S=E instanceof Ir?E:Ir.fromString(E)}if(x||S){var T=this.sortFeaturesByKey?l.evaluate(v,{}):void 0,A={text:x,icon:S,index:g,sourceLayerIndex:_,geometry:qs(v),properties:v.properties,type:gf[v.type],sortKey:T};if("undefined"!==typeof v.id&&(A.id=v.id),this.features.push(A),S&&(c[S.name]=!0),x){var k=i.evaluate(v,{}).join(","),I="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(eh.vertical)>=0;for(var C=0,P=x.sections;C<P.length;C+=1){var M=P[C];if(M.image)c[M.image.name]=!0;else{var z=Fo(x.toString()),L=M.fontStack||k,D=p[L]=p[L]||{};this.calculateGlyphDependencies(M.text,D,I,this.allowVerticalPlacement,z)}}}}}}"line"===n.get("symbol-placement")&&(this.features=lp(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},Tf.prototype.update=function(t,e,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r))},Tf.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Tf.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Tf.prototype.upload=function(t){this.uploaded||(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t),this.textCollisionCircle.upload(t),this.iconCollisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Tf.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.textCollisionBox.destroy(),this.iconCollisionBox.destroy(),this.textCollisionCircle.destroy(),this.iconCollisionCircle.destroy()},Tf.prototype.addToLineVertexArray=function(t,e){var r=this.lineVertexArray.length;if(void 0!==t.segment){for(var n=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:n},a<e.length-1&&(n+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},Tf.prototype.addSymbols=function(t,e,r,n,i,o,a,s,u,l,c){var p=this,h=t.indexArray,f=t.layoutVertexArray,d=t.dynamicLayoutVertexArray,m=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray,o.sortKey),y=this.glyphOffsetArray.length,v=m.vertexLength,g=this.allowVerticalPlacement&&a===eh.vertical?Math.PI/2:0,_=function(t){var e=t.tl,n=t.tr,i=t.bl,o=t.br,a=t.tex,u=t.pixelOffsetTL,l=t.pixelOffsetBR,c=t.minFontScaleX,y=t.minFontScaleY,v=m.vertexLength,_=t.glyphOffset[1];xf(f,s.x,s.y,e.x,_+e.y,a.x,a.y,r,t.isSDF,u.x,u.y,c,y),xf(f,s.x,s.y,n.x,_+n.y,a.x+a.w,a.y,r,t.isSDF,l.x,u.y,c,y),xf(f,s.x,s.y,i.x,_+i.y,a.x,a.y+a.h,r,t.isSDF,u.x,l.y,c,y),xf(f,s.x,s.y,o.x,_+o.y,a.x+a.w,a.y+a.h,r,t.isSDF,l.x,l.y,c,y),bf(d,s,g),h.emplaceBack(v,v+1,v+2),h.emplaceBack(v+1,v+2,v+3),m.vertexLength+=4,m.primitiveLength+=2,p.glyphOffsetArray.emplaceBack(t.glyphOffset[0])};if(o.text&&o.text.sections){var x=o.text.sections;if(this.hasPaintOverrides){for(var b,w=function(e,r){void 0===b||b===e&&!r||t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index,{},x[b]),b=e},S=0,E=e;S<E.length;S+=1){var T=E[S];w(T.sectionIndex,!1),_(T)}w(b,!0)}else{for(var A=0,k=e;A<k.length;A+=1){var I=k[A];_(I)}t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index,{},x[0])}}else{for(var C=0,P=e;C<P.length;C+=1){var M=P[C];_(M)}t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index,{})}t.placedSymbolArray.emplaceBack(s.x,s.y,y,this.glyphOffsetArray.length-y,v,u,l,s.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],a,0,!1,0,c)},Tf.prototype._addCollisionDebugVertex=function(t,e,r,n,i,o){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,n,i,Math.round(o.x),Math.round(o.y))},Tf.prototype.addCollisionDebugVertices=function(t,e,r,n,i,o,a,s){var u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=u.vertexLength,c=i.layoutVertexArray,p=i.collisionVertexArray,h=a.anchorX,f=a.anchorY;if(this._addCollisionDebugVertex(c,p,o,h,f,new v(t,e)),this._addCollisionDebugVertex(c,p,o,h,f,new v(r,e)),this._addCollisionDebugVertex(c,p,o,h,f,new v(r,n)),this._addCollisionDebugVertex(c,p,o,h,f,new v(t,n)),u.vertexLength+=4,s){var d=i.indexArray;d.emplaceBack(l,l+1,l+2),d.emplaceBack(l,l+2,l+3),u.primitiveLength+=2}else{var m=i.indexArray;m.emplaceBack(l,l+1),m.emplaceBack(l+1,l+2),m.emplaceBack(l+2,l+3),m.emplaceBack(l+3,l),u.primitiveLength+=4}},Tf.prototype.addDebugCollisionBoxes=function(t,e,r,n){for(var i=t;i<e;i++){var o=this.collisionBoxArray.get(i),a=o.x1,s=o.y1,u=o.x2,l=o.y2,c=o.radius>0;this.addCollisionDebugVertices(a,s,u,l,c?n?this.textCollisionCircle:this.iconCollisionCircle:n?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,r,c)}},Tf.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},Tf.prototype._deserializeCollisionBoxesForSymbol=function(t,e,r,n,i,o,a,s,u){for(var l={},c=e;c<r;c++){var p=t.get(c);if(0===p.radius){l.textBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},l.textFeatureIndex=p.featureIndex;break}l.textCircles||(l.textCircles=[],l.textFeatureIndex=p.featureIndex);var h=1;l.textCircles.push(p.anchorPointX,p.anchorPointY,p.radius,p.signedDistanceFromAnchor,h)}for(var f=n;f<i;f++){var d=t.get(f);if(0===d.radius){l.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},l.verticalTextFeatureIndex=d.featureIndex;break}}for(var m=o;m<a;m++){var y=t.get(m);if(0===y.radius){l.iconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},l.iconFeatureIndex=y.featureIndex;break}}for(var v=s;v<u;v++){var g=t.get(v);if(0===g.radius){l.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},l.verticalIconFeatureIndex=g.featureIndex;break}}return l},Tf.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}},Tf.prototype.hasTextData=function(){return this.text.segments.get().length>0},Tf.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Tf.prototype.hasTextCollisionBoxData=function(){return this.textCollisionBox.segments.get().length>0},Tf.prototype.hasIconCollisionBoxData=function(){return this.iconCollisionBox.segments.get().length>0},Tf.prototype.hasTextCollisionCircleData=function(){return this.textCollisionCircle.segments.get().length>0},Tf.prototype.hasIconCollisionCircleData=function(){return this.iconCollisionCircle.segments.get().length>0},Tf.prototype.addIndicesForPlacedSymbol=function(t,e){for(var r=t.placedSymbolArray.get(e),n=r.vertexStartIndex+4*r.numGlyphs,i=r.vertexStartIndex;i<n;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)},Tf.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),r=Math.cos(t),n=[],i=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);n.push(0|Math.round(e*s.anchorX+r*s.anchorY)),i.push(s.featureIndex)}return o.sort(function(t,e){return n[t]-n[e]||i[e]-i[t]}),o},Tf.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var r=0,n=this.symbolInstanceIndexes;r<n.length;r+=1){var i=n[r],o=this.symbolInstances.get(i);this.featureSortOrder.push(o.featureIndex),[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach(function(t,r,n){t>=0&&n.indexOf(t)===r&&e.addIndicesForPlacedSymbol(e.text,t)}),o.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,o.verticalPlacedTextSymbolIndex),o.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.placedIconSymbolIndex),o.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Mo("SymbolBucket",Tf,{omit:["layers","collisionBoxArray","features","compareText"]}),Tf.MAX_GLYPHS=65535,Tf.addDynamicAttributes=bf;var kf=new Sa({"symbol-placement":new ga(Qe["layout_symbol"]["symbol-placement"]),"symbol-spacing":new ga(Qe["layout_symbol"]["symbol-spacing"]),"symbol-avoid-edges":new ga(Qe["layout_symbol"]["symbol-avoid-edges"]),"symbol-sort-key":new _a(Qe["layout_symbol"]["symbol-sort-key"]),"symbol-z-order":new ga(Qe["layout_symbol"]["symbol-z-order"]),"icon-allow-overlap":new ga(Qe["layout_symbol"]["icon-allow-overlap"]),"icon-ignore-placement":new ga(Qe["layout_symbol"]["icon-ignore-placement"]),"icon-optional":new ga(Qe["layout_symbol"]["icon-optional"]),"icon-rotation-alignment":new ga(Qe["layout_symbol"]["icon-rotation-alignment"]),"icon-size":new _a(Qe["layout_symbol"]["icon-size"]),"icon-text-fit":new ga(Qe["layout_symbol"]["icon-text-fit"]),"icon-text-fit-padding":new ga(Qe["layout_symbol"]["icon-text-fit-padding"]),"icon-image":new _a(Qe["layout_symbol"]["icon-image"]),"icon-rotate":new _a(Qe["layout_symbol"]["icon-rotate"]),"icon-padding":new ga(Qe["layout_symbol"]["icon-padding"]),"icon-keep-upright":new ga(Qe["layout_symbol"]["icon-keep-upright"]),"icon-offset":new _a(Qe["layout_symbol"]["icon-offset"]),"icon-anchor":new _a(Qe["layout_symbol"]["icon-anchor"]),"icon-pitch-alignment":new ga(Qe["layout_symbol"]["icon-pitch-alignment"]),"text-pitch-alignment":new ga(Qe["layout_symbol"]["text-pitch-alignment"]),"text-rotation-alignment":new ga(Qe["layout_symbol"]["text-rotation-alignment"]),"text-field":new _a(Qe["layout_symbol"]["text-field"]),"text-font":new _a(Qe["layout_symbol"]["text-font"]),"text-size":new _a(Qe["layout_symbol"]["text-size"]),"text-max-width":new _a(Qe["layout_symbol"]["text-max-width"]),"text-line-height":new ga(Qe["layout_symbol"]["text-line-height"]),"text-letter-spacing":new _a(Qe["layout_symbol"]["text-letter-spacing"]),"text-justify":new _a(Qe["layout_symbol"]["text-justify"]),"text-radial-offset":new _a(Qe["layout_symbol"]["text-radial-offset"]),"text-variable-anchor":new ga(Qe["layout_symbol"]["text-variable-anchor"]),"text-anchor":new _a(Qe["layout_symbol"]["text-anchor"]),"text-max-angle":new ga(Qe["layout_symbol"]["text-max-angle"]),"text-writing-mode":new ga(Qe["layout_symbol"]["text-writing-mode"]),"text-rotate":new _a(Qe["layout_symbol"]["text-rotate"]),"text-padding":new ga(Qe["layout_symbol"]["text-padding"]),"text-keep-upright":new ga(Qe["layout_symbol"]["text-keep-upright"]),"text-transform":new _a(Qe["layout_symbol"]["text-transform"]),"text-offset":new _a(Qe["layout_symbol"]["text-offset"]),"text-allow-overlap":new ga(Qe["layout_symbol"]["text-allow-overlap"]),"text-ignore-placement":new ga(Qe["layout_symbol"]["text-ignore-placement"]),"text-optional":new ga(Qe["layout_symbol"]["text-optional"])}),If=new Sa({"icon-opacity":new _a(Qe["paint_symbol"]["icon-opacity"]),"icon-color":new _a(Qe["paint_symbol"]["icon-color"]),"icon-halo-color":new _a(Qe["paint_symbol"]["icon-halo-color"]),"icon-halo-width":new _a(Qe["paint_symbol"]["icon-halo-width"]),"icon-halo-blur":new _a(Qe["paint_symbol"]["icon-halo-blur"]),"icon-translate":new ga(Qe["paint_symbol"]["icon-translate"]),"icon-translate-anchor":new ga(Qe["paint_symbol"]["icon-translate-anchor"]),"text-opacity":new _a(Qe["paint_symbol"]["text-opacity"]),"text-color":new _a(Qe["paint_symbol"]["text-color"],{runtimeType:pr,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new _a(Qe["paint_symbol"]["text-halo-color"]),"text-halo-width":new _a(Qe["paint_symbol"]["text-halo-width"]),"text-halo-blur":new _a(Qe["paint_symbol"]["text-halo-blur"]),"text-translate":new ga(Qe["paint_symbol"]["text-translate"]),"text-translate-anchor":new ga(Qe["paint_symbol"]["text-translate-anchor"])}),Cf={paint:If,layout:kf},Pf=function(t){f(void 0!==t.property.overrides),this.type=t.property.overrides?t.property.overrides.runtimeType:sr,this.defaultValue=t};Pf.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},Pf.prototype.eachChild=function(t){if(!this.defaultValue.isConstant()){var e=this.defaultValue.value;t(e._styleExpression.expression)}},Pf.prototype.possibleOutputs=function(){return[void 0]},Pf.prototype.serialize=function(){return null},Mo("FormatSectionOverride",Pf,{omit:["defaultValue"]});var Mf=function(t){function e(e){t.call(this,e,Cf)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e,r){if(t.prototype.recalculate.call(this,e,r),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var n=this.layout.get("text-writing-mode");if(n){for(var i=[],o=0,a=n;o<a.length;o+=1){var s=a[o];i.indexOf(s)<0&&i.push(s)}this.layout._values["text-writing-mode"]=i}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,r){var n=this.layout.get(t).evaluate(e,{},r),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||Ci(i.value)||!n?n:Af(e.properties,n)},e.prototype.createBucket=function(t){return new Tf(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return f(!1),!1},e.prototype._setPaintOverrides=function(){for(var t=0,r=Cf.paint.overridableProperties;t<r.length;t+=1){var n=r[t];if(e.hasPaintOverride(this.layout,n)){var i=this.paint.get(n),o=new Pf(i),a=new Ii(o,i.property.specification),s=null;s="constant"===i.value.kind||"source"===i.value.kind?new Mi("source",a):new zi("composite",a,i.value.zoomStops,i.value._interpolationType),this.paint._values[n]=new ya(i.property,s,i.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,r,n){return!(!this.layout||r.isDataDriven()||n.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var r=t.get("text-field"),n=Cf.paint.properties[e],i=!1,o=function(t){for(var e=0,r=t;e<r.length;e+=1){var o=r[e];if(n.overrides&&n.overrides.hasOverride(o))return void(i=!0)}};if("constant"===r.value.kind&&r.value.value instanceof kr)o(r.value.value.sections);else if("source"===r.value.kind){var a=function(t){if(!i)if(t instanceof Lr&&Mr(t.value)===yr){var e=t.value;o(e.sections)}else t instanceof Rr?o(t.sections):t.eachChild(a)},s=r.value;s._styleExpression&&a(s._styleExpression.expression)}return i},e.hasPaintOverrides=function(t){for(var r=0,n=Cf.paint.overridableProperties;r<n.length;r+=1){var i=n[r];if(e.hasPaintOverride(t,i))return!0}return!1},e}(Ta),zf=new Sa({"background-color":new ga(Qe["paint_background"]["background-color"]),"background-pattern":new ba(Qe["paint_background"]["background-pattern"]),"background-opacity":new ga(Qe["paint_background"]["background-opacity"])}),Lf={paint:zf},Df=function(t){function e(e){t.call(this,e,Lf)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ta),Of=new Sa({"raster-opacity":new ga(Qe["paint_raster"]["raster-opacity"]),"raster-hue-rotate":new ga(Qe["paint_raster"]["raster-hue-rotate"]),"raster-brightness-min":new ga(Qe["paint_raster"]["raster-brightness-min"]),"raster-brightness-max":new ga(Qe["paint_raster"]["raster-brightness-max"]),"raster-saturation":new ga(Qe["paint_raster"]["raster-saturation"]),"raster-contrast":new ga(Qe["paint_raster"]["raster-contrast"]),"raster-resampling":new ga(Qe["paint_raster"]["raster-resampling"]),"raster-fade-duration":new ga(Qe["paint_raster"]["raster-fade-duration"])}),Bf={paint:Of},Rf=function(t){function e(e){t.call(this,e,Bf)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ta);function Ff(t){var e=[],r=t.id;return void 0===r&&e.push({message:"layers."+r+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+r+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),e}var Uf=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){f(!1,"Custom layers cannot be serialized")},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(Ta),jf={circle:Gu,heatmap:nl,hillshade:al,fill:rc,"fill-extrusion":Mc,line:Qc,symbol:Mf,background:Df,raster:Rf};function Nf(t){return"custom"===t.type?new Uf(t):new jf[t.type](t)}var Vf=self.HTMLImageElement,qf=self.HTMLCanvasElement,Zf=self.HTMLVideoElement,Gf=self.ImageData,Xf=function(t,e,r,n){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,n)};Xf.prototype.update=function(t,e,r){var n=t.width,i=t.height,o=(!this.size||this.size[0]!==n||this.size[1]!==i)&&!r,a=this,s=a.context,u=s.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),u.bindTexture(u.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===u.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[n,i],t instanceof Vf||t instanceof qf||t instanceof Zf||t instanceof Gf?u.texImage2D(u.TEXTURE_2D,0,this.format,this.format,u.UNSIGNED_BYTE,t):u.texImage2D(u.TEXTURE_2D,0,this.format,n,i,0,this.format,u.UNSIGNED_BYTE,t.data);else{var l=r||{x:0,y:0},c=l.x,p=l.y;t instanceof Vf||t instanceof qf||t instanceof Zf||t instanceof Gf?u.texSubImage2D(u.TEXTURE_2D,0,c,p,u.RGBA,u.UNSIGNED_BYTE,t):u.texSubImage2D(u.TEXTURE_2D,0,c,p,n,i,u.RGBA,u.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&u.generateMipmap(u.TEXTURE_2D)},Xf.prototype.bind=function(t,e,r){var n=this,i=n.context,o=i.gl;o.bindTexture(o.TEXTURE_2D,this.texture),r!==o.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=o.LINEAR),t!==this.filter&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,r||t),this.filter=t),e!==this.wrap&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,e),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,e),this.wrap=e)},Xf.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},Xf.prototype.destroy=function(){var t=this.context,e=t.gl;e.deleteTexture(this.texture),this.texture=null};var Wf=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!==typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Wf.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){t._triggered=!1,t._callback()},0))},Wf.prototype.remove=function(){delete this._channel,this._callback=function(){}};var $f=function(t,e,r){this.target=t,this.parent=e,this.mapId=r,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},D(["receive","process"],this),this.invoker=new Wf(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=G()?t:self};function Hf(t,e,r){e=Math.pow(2,r)-e-1;var n=Kf(256*t,256*e,r),i=Kf(256*(t+1),256*(e+1),r);return n[0]+","+n[1]+","+i[0]+","+i[1]}function Kf(t,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r),i=t*n-2*Math.PI*6378137/2,o=e*n-2*Math.PI*6378137/2;return[i,o]}$f.prototype.send=function(t,e,r,n,i){var o=this;void 0===i&&(i=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(this.callbacks[a]=r);var s=$(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!r,targetMapId:n,mustQueue:i,sourceMapId:this.mapId,data:Do(e,s)},s),{cancel:function(){r&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:n,sourceMapId:o.mapId})}}},$f.prototype.receive=function(t){var e=t.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[r];var n=this.cancelCallbacks[r];delete this.cancelCallbacks[r],n&&n()}else G()||e.mustQueue?(this.tasks[r]=e,this.taskQueue.push(r),this.invoker.trigger()):this.processTask(r,e)},$f.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},$f.prototype.processTask=function(t,e){var r=this;if("<response>"===e.type){var n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(Oo(e.error)):n(null,Oo(e.data)))}else{var i=!1,o=$(this.globalScope)?void 0:[],a=e.hasCallback?function(e,n){i=!0,delete r.cancelCallbacks[t],r.target.postMessage({id:t,type:"<response>",sourceMapId:r.mapId,error:e?Do(e):null,data:Do(n,o)},o)}:function(t){i=!0},s=null,u=Oo(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,u,a);else if(this.parent.getWorkerSource){var l=e.type.split("."),c=this.parent.getWorkerSource(e.sourceMapId,l[0],u.source);s=c[l[1]](u,a)}else a(new Error("Could not find function "+e.type));!i&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},$f.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Yf=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Yf.prototype.setNorthEast=function(t){return this._ne=t instanceof Jf?new Jf(t.lng,t.lat):Jf.convert(t),this},Yf.prototype.setSouthWest=function(t){return this._sw=t instanceof Jf?new Jf(t.lng,t.lat):Jf.convert(t),this},Yf.prototype.extend=function(t){var e,r,n=this._sw,i=this._ne;if(t instanceof Jf)e=t,r=t;else{if(!(t instanceof Yf))return Array.isArray(t)?t.every(Array.isArray)?this.extend(Yf.convert(t)):this.extend(Jf.convert(t)):this;if(e=t._sw,r=t._ne,!e||!r)return this}return n||i?(n.lng=Math.min(e.lng,n.lng),n.lat=Math.min(e.lat,n.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new Jf(e.lng,e.lat),this._ne=new Jf(r.lng,r.lat)),this},Yf.prototype.getCenter=function(){return new Jf((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Yf.prototype.getSouthWest=function(){return this._sw},Yf.prototype.getNorthEast=function(){return this._ne},Yf.prototype.getNorthWest=function(){return new Jf(this.getWest(),this.getNorth())},Yf.prototype.getSouthEast=function(){return new Jf(this.getEast(),this.getSouth())},Yf.prototype.getWest=function(){return this._sw.lng},Yf.prototype.getSouth=function(){return this._sw.lat},Yf.prototype.getEast=function(){return this._ne.lng},Yf.prototype.getNorth=function(){return this._ne.lat},Yf.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Yf.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Yf.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Yf.prototype.contains=function(t){var e=Jf.convert(t),r=e.lng,n=e.lat,i=this._sw.lat<=n&&n<=this._ne.lat,o=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(o=this._sw.lng>=r&&r>=this._ne.lng),i&&o},Yf.convert=function(t){return!t||t instanceof Yf?t:new Yf(t)};var Jf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Jf.prototype.wrap=function(){return new Jf(E(this.lng,-180,180),this.lat)},Jf.prototype.toArray=function(){return[this.lng,this.lat]},Jf.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Jf.prototype.toBounds=function(t){void 0===t&&(t=0);var e=40075017,r=360*t/e,n=r/Math.cos(Math.PI/180*this.lat);return new Yf(new Jf(this.lng-n,this.lat-r),new Jf(this.lng+n,this.lat+r))},Jf.convert=function(t){if(t instanceof Jf)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Jf(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"===typeof t&&null!==t)return new Jf(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Qf=2*Math.PI*6378137;function td(t){return Qf*Math.cos(t*Math.PI/180)}function ed(t){return(180+t)/360}function rd(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function nd(t,e){return t/td(e)}function id(t){return 360*t-180}function od(t){var e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function ad(t,e){return t*td(od(e))}function sd(t){return 1/Math.cos(t*Math.PI/180)}var ud=function(t,e,r){void 0===r&&(r=0),this.x=+t,this.y=+e,this.z=+r};ud.fromLngLat=function(t,e){void 0===e&&(e=0);var r=Jf.convert(t);return new ud(ed(r.lng),rd(r.lat),nd(e,r.lat))},ud.prototype.toLngLat=function(){return new Jf(id(this.x),od(this.y))},ud.prototype.toAltitude=function(){return ad(this.z,this.y)},ud.prototype.meterInMercatorCoordinateUnits=function(){return 1/Qf*sd(od(this.y))};var ld=function(t,e,r){f(t>=0&&t<=25),f(e>=0&&e<Math.pow(2,t)),f(r>=0&&r<Math.pow(2,t)),this.z=t,this.x=e,this.y=r,this.key=hd(0,t,e,r)};ld.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},ld.prototype.url=function(t,e){var r=Hf(this.x,this.y,this.z),n=fd(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",n).replace("{bbox-epsg-3857}",r)},ld.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new v((t.x*e-this.x)*js,(t.y*e-this.y)*js)},ld.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var cd=function(t,e){this.wrap=t,this.canonical=e,this.key=hd(t,e.z,e.x,e.y)},pd=function(t,e,r,n,i){f(t>=r),this.overscaledZ=t,this.wrap=e,this.canonical=new ld(r,+n,+i),this.key=hd(e,t,n,i)};function hd(t,e,r,n){t*=2,t<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*n+r)+e}function fd(t,e,r){for(var n,i="",o=t;o>0;o--)n=1<<o-1,i+=(e&n?1:0)+(r&n?2:0);return i}pd.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},pd.prototype.scaledTo=function(t){f(t<=this.overscaledZ);var e=this.canonical.z-t;return t>this.canonical.z?new pd(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new pd(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},pd.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},pd.prototype.children=function(t){if(this.overscaledZ>=t)return[new pd(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new pd(e,this.wrap,e,r,n),new pd(e,this.wrap,e,r+1,n),new pd(e,this.wrap,e,r,n+1),new pd(e,this.wrap,e,r+1,n+1)]},pd.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},pd.prototype.wrapped=function(){return new pd(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},pd.prototype.unwrapTo=function(t){return new pd(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},pd.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},pd.prototype.toUnwrapped=function(){return new cd(this.wrap,this.canonical)},pd.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},pd.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new ud(t.x-this.wrap,t.y))},Mo("CanonicalTileID",ld),Mo("OverscaledTileID",pd,{omit:["posMatrix"]});var dd=function(t,e,r){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return N('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var n=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=r||"mapbox";for(var i=0;i<n;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(n,i)]=this.data[this._idx(n-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,n)]=this.data[this._idx(i,n-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(n,-1)]=this.data[this._idx(n-1,0)],this.data[this._idx(-1,n)]=this.data[this._idx(0,n-1)],this.data[this._idx(n,n)]=this.data[this._idx(n-1,n-1)]};dd.prototype.get=function(t,e){var r=new Uint8Array(this.data.buffer),n=4*this._idx(t,e),i="terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox;return i(r[n],r[n+1],r[n+2])},dd.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},dd.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},dd.prototype._unpackMapbox=function(t,e,r){return(256*t*256+256*e+r)/10-1e4},dd.prototype._unpackTerrarium=function(t,e,r){return 256*t+e+r/256-32768},dd.prototype.getPixels=function(){return new Qu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},dd.prototype.backfillBorder=function(t,e,r){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var n=e*this.dim,i=e*this.dim+this.dim,o=r*this.dim,a=r*this.dim+this.dim;switch(e){case-1:n=i-1;break;case 1:i=n+1;break}switch(r){case-1:o=a-1;break;case 1:a=o+1;break}for(var s=-e*this.dim,u=-r*this.dim,l=o;l<a;l++)for(var c=n;c<i;c++)this.data[this._idx(c,l)]=t.data[this._idx(c+s,l+u)]},Mo("DEMData",dd);var md=Ma([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function yd(t,e){var r={};if(!e)return r;for(var n=function(){var t=o[i],n=t.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==n.length){t.layers=n,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(t){return n.filter(function(e){return e.id===t})[0]}));for(var a=0,s=n;a<s.length;a+=1){var u=s[a];r[u.id]=t}}},i=0,o=t;i<o.length;i+=1)n();return r}var vd=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r}};vd.prototype.encode=function(t){return f(t in this._stringToNumber),this._stringToNumber[t]},vd.prototype.decode=function(t){return f(t<this._numberToString.length),this._numberToString[t]};var gd=function(t,e,r,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=r,t._y=n,this.properties=t.properties,null!=t.id&&(this.id=t.id)},_d={geometry:{configurable:!0}};_d.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},_d.geometry.set=function(t){this._geometry=t},gd.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(gd.prototype,_d);var xd=function(){this.state={},this.stateChanges={},this.deletedStates={}};xd.prototype.updateState=function(t,e,r){var n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},I(this.stateChanges[t][n],r),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==n&&(this.deletedStates[t][i]=null);else{var o=this.deletedStates[t]&&null===this.deletedStates[t][n];if(o)for(var a in this.deletedStates[t][n]={},this.state[t][n])r[a]||(this.deletedStates[t][n][a]=null);else for(var s in r){var u=this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][s];u&&delete this.deletedStates[t][n][s]}}},xd.prototype.removeFeatureState=function(t,e,r){var n=null===this.deletedStates[t];if(!n){var i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&void 0!==e&&e>=0)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][r]=null);else if(void 0!==e&&e>=0){var o=this.stateChanges[t]&&this.stateChanges[t][i];if(o)for(r in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][r]=null;else this.deletedStates[t][i]=null}else this.deletedStates[t]=null}},xd.prototype.getState=function(t,e){var r=String(e),n=this.state[t]||{},i=this.stateChanges[t]||{},o=I({},n[r],i[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var a=this.deletedStates[t][e];if(null===a)return{};for(var s in a)delete o[s]}return o},xd.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},xd.prototype.coalesceChanges=function(t,e){var r={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var i={};for(var o in this.stateChanges[n])this.state[n][o]||(this.state[n][o]={}),I(this.state[n][o],this.stateChanges[n][o]),i[o]=this.state[n][o];r[n]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var u in this.state[a])s[u]={},this.state[a][u]={};else for(var l in this.deletedStates[a]){var c=null===this.deletedStates[a][l];if(c)this.state[a][l]={};else for(var p=0,h=Object.keys(this.deletedStates[a][l]);p<h.length;p+=1){var f=h[p];delete this.state[a][l][f]}s[l]=this.state[a][l]}r[a]=r[a]||{},I(r[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var d in t){var m=t[d];m.setFeatureState(r,e)}};var bd=function(t,e,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new Ao(js,16,0),this.grid3D=new Ao(js,16,0),this.featureIndexArray=r||new hs};function wd(t){for(var e=1/0,r=1/0,n=-1/0,i=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),i=Math.max(i,s.y)}return{minX:e,minY:r,maxX:n,maxY:i}}function Sd(t,e){return e-t}bd.prototype.insert=function(t,e,r,n,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],c=[1/0,1/0,-1/0,-1/0],p=0;p<l.length;p++){var h=l[p];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<js&&c[1]<js&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},bd.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new bc.VectorTile(new yp(this.rawTileData)).layers,this.sourceLayerCoder=new vd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},bd.prototype.query=function(t,e,r){var n=this;this.loadVTLayers();for(var i=t.params||{},o=js/t.tileSize/t.scale,a=Hi(i.filter),s=t.queryGeometry,u=t.queryPadding*o,l=wd(s),c=this.grid.query(l.minX-u,l.minY-u,l.maxX+u,l.maxY+u),p=wd(t.cameraQueryGeometry),h=this.grid3D.query(p.minX-u,p.minY-u,p.maxX+u,p.maxY+u,function(e,r,n,i){return nu(t.cameraQueryGeometry,e-u,r-u,n+u,i+u)}),f=0,d=h;f<d.length;f+=1){var m=d[f];c.push(m)}c.sort(Sd);for(var y,v={},g=function(u){var l=c[u];if(l!==y){y=l;var p=n.featureIndexArray.get(l),h=null;n.loadMatchingFeature(v,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,a,i.layers,e,function(e,i){h||(h=qs(e));var a={};return e.id&&(a=r.getState(i.sourceLayer||"_geojsonTileLayer",e.id)),i.queryIntersectsFeature(s,e,a,h,n.z,t.transform,o,t.pixelPosMatrix)})}},_=0;_<c.length;_++)g(_);return v},bd.prototype.loadMatchingFeature=function(t,e,r,n,i,o,a,s){var u=this.bucketLayerIDs[e];if(!o||U(o,u)){var l=this.sourceLayerCoder.decode(r),c=this.vtLayers[l],p=c.feature(n);if(i(new la(this.tileID.overscaledZ),p))for(var h=0;h<u.length;h++){var f=u[h];if(!(o&&o.indexOf(f)<0)){var d=a[f];if(d){var m=!s||s(p,d);if(m){var y=new gd(p,this.z,this.x,this.y);y.layer=d.serialize();var v=t[f];void 0===v&&(v=t[f]=[]),v.push({featureIndex:n,feature:y,intersectionZ:m})}}}}}},bd.prototype.lookupSymbolFeatures=function(t,e,r,n,i,o){var a={};this.loadVTLayers();for(var s=Hi(n),u=0,l=t;u<l.length;u+=1){var c=l[u];this.loadMatchingFeature(a,e,r,c,s,i,o)}return a},bd.prototype.hasLayer=function(t){for(var e=0,r=this.bucketLayerIDs;e<r.length;e+=1)for(var n=r[e],i=0,o=n;i<o.length;i+=1){var a=o[i];if(t===a)return!0}return!1},Mo("FeatureIndex",bd,{omit:["rawTileData","sourceLayerCoder"]});var Ed=3e4,Td=function(t,e){this.tileID=t,this.uid=M(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Td.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<ot.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Td.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Td.prototype.loadVectorData=function(t,e,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var n in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=yd(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[n];if(i instanceof Tf){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof Tf&&a.hasRTLText){this.hasRTLText=!0,ua();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new rs},Td.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Td.prototype.getBucket=function(t){return this.buckets[t.id]},Td.prototype.upload=function(t){for(var e in this.buckets){var r=this.buckets[e];r.uploadPending()&&r.upload(t)}var n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Xf(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Xf(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},Td.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},Td.prototype.queryRenderedFeatures=function(t,e,r,n,i,o,a,s,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:i,tileSize:this.tileSize,pixelPosMatrix:u,transform:a,params:o,queryPadding:this.queryPadding*s},t,e):{}},Td.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),n=e?e.sourceLayer:"",i=r._geojsonTileLayer||r[n];if(i)for(var o=Hi(e&&e.filter),a=this.tileID.canonical,s=a.z,u=a.x,l=a.y,c={z:s,x:u,y:l},p=0;p<i.length;p++){var h=i.feature(p);if(o(new la(this.tileID.overscaledZ),h)){var f=new gd(h,s,u,l);f.tile=c,t.push(f)}}}},Td.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer),delete this.mask},Td.prototype.setMask=function(t,e){if(!_(this.mask,t)&&(this.clearMask(),this.mask=t,!_(t,{0:!0}))){var r=new Oa,n=new Ka;this.segments=new ms,this.segments.prepareSegment(0,r,n);for(var i=Object.keys(t),o=0;o<i.length;o++){var a=t[+i[o]],s=js>>a.z,u=new v(a.x*s,a.y*s),l=new v(u.x+s,u.y+s),c=this.segments.prepareSegment(4,r,n);r.emplaceBack(u.x,u.y,u.x,u.y),r.emplaceBack(l.x,u.y,l.x,u.y),r.emplaceBack(u.x,l.y,u.x,l.y),r.emplaceBack(l.x,l.y,l.x,l.y);var p=c.vertexLength;n.emplaceBack(p,p+1,p+2),n.emplaceBack(p+1,p+2,p+3),c.vertexLength+=4,c.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(r,md.members),this.maskedIndexBuffer=e.createIndexBuffer(n)}},Td.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Td.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Td.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var r=X(t.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),i=!1;if(this.expirationTime>n)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=n+Math.max(o,Ed):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Td.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Td.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var r=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets){var i=this.buckets[n],o=i.layers[0]["sourceLayer"]||"_geojsonTileLayer",a=r[o],s=t[o];a&&s&&0!==Object.keys(s).length&&(i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(n).queryRadius(i))))}}},Td.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Td.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ot.now()},Td.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Td.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=ot.now()+t},Td.prototype.setDependencies=function(t,e){for(var r={},n=0,i=e;n<i.length;n+=1){var o=i[n];r[o]=!0}this.dependencies[t]=r},Td.prototype.hasDependency=function(t,e){for(var r=0,n=t;r<n.length;r+=1){var i=n[r],o=this.dependencies[i];if(o)for(var a=0,s=e;a<s.length;a+=1){var u=s[a];if(o[u])return!0}}return!1};var Ad=["type","source","source-layer","minzoom","maxzoom","filter","layout"];t.Actor=$f,t.AlphaImage=Ju,t.CanonicalTileID=ld,t.CollisionBoxArray=rs,t.Color=Er,t.DEMData=dd,t.DataConstantProperty=ga,t.DictionaryCoder=vd,t.EXTENT=js,t.ErrorEvent=de,t.EvaluationParameters=la,t.Event=fe,t.Evented=me,t.FeatureIndex=bd,t.FillBucket=Jl,t.FillExtrusionBucket=Ac,t.ImageAtlas=th,t.ImagePosition=Jp,t.LineBucket=Wc,t.LngLat=Jf,t.LngLatBounds=Yf,t.MercatorCoordinate=ud,t.ONE_EM=hp,t.OverscaledTileID=pd,t.Point=v,t.Point$1=v,t.ProgramConfiguration=Os,t.Properties=Sa,t.Protobuf=yp,t.RGBAImage=Qu,t.RequestManager=dt,t.ResourceType=$t,t.SegmentVector=ms,t.SourceFeatureState=xd,t.StructArrayLayout1ui2=Ja,t.StructArrayLayout2i4=Da,t.StructArrayLayout2ui4=Ya,t.StructArrayLayout3ui6=Ka,t.StructArrayLayout4i8=Oa,t.SymbolBucket=Tf,t.Texture=Xf,t.Tile=Td,t.Transitionable=ha,t.Uniform1f=ws,t.Uniform1i=bs,t.Uniform2f=Ss,t.Uniform3f=Es,t.Uniform4f=Ts,t.UniformColor=As,t.UniformMatrix4f=Is,t.UnwrappedTileID=cd,t.ValidationError=tr,t.WritingMode=eh,t.ZoomHistory=Bo,t.addDynamicAttributes=bf,t.assert=f,t.asyncAll=T,t.bezier=b,t.bindAll=D,t.browser=ot,t.cacheEntryPossiblyAdded=Zt,t.clamp=S,t.clearTileCache=Xt,t.clone=gu,t.clone$1=F,t.config=at,t.create=vu,t.create$1=mu,t.create$2=fu,t.createCommonjsModule=n,t.createExpression=Pi,t.createLayout=Ma,t.createStyleLayer=Nf,t.deepEqual=_,t.ease=w,t.emitValidationErrors=To,t.endsWith=O,t.enforceCacheSizeLimit=Gt,t.evaluateSizeForFeature=Ih,t.evaluateSizeForZoom=Ch,t.evaluateVariableOffset=uf,t.evented=ra,t.extend=I,t.featureFilter=Hi,t.filterObject=R,t.fromRotation=yu,t.getAnchorAlignment=_h,t.getAnchorJustification=cf,t.getArrayBuffer=re,t.getImage=le,t.getJSON=ee,t.getRTLTextPluginStatus=na,t.getReferrer=Kt,t.getVideo=ce,t.identity=_u,t.invert=xu,t.isChar=Ro,t.isMapboxURL=mt,t.isSafari=$,t.keysDifference=k,t.makeRequest=te,t.mapObject=B,t.mercatorXfromLng=ed,t.mercatorYfromLat=rd,t.mercatorZfromAltitude=nd,t.multiply=bu,t.mvt=bc,t.number=tn,t.ortho=ku,t.parseGlyphPBF=$p,t.pbf=yp,t.performSymbolLayout=lf,t.perspective=Au,t.pick=C,t.plugin=sa,t.polygonIntersectsPolygon=Xs,t.postMapLoadEvent=zt,t.postTurnstileEvent=Pt,t.potpack=Kp,t.rasterBoundsAttributes=md,t.refProperties=Ad,t.register=Mo,t.registerForPluginStateChange=ia,t.rotate=du,t.rotateX=Eu,t.rotateZ=Tu,t.scale=Su,t.setCacheLimits=Wt,t.setRTLTextPlugin=oa,t.sphericalToCartesian=Z,t.styleSpec=Qe,t.symbolSize=Ph,t.transformMat3=Du,t.transformMat4=Fu,t.translate=wu,t.triggerPluginCompletionEvent=ta,t.uniqueId=M,t.validateCustomStyleLayer=Ff,t.validateLight=wo,t.validateStyle=bo,t.values=A,t.vectorTile=bc,t.version=d,t.warnOnce=N,t.webpSupported=st,t.window=self,t.wrap=E}),o(["./shared"],function(t){function e(t){var r=typeof t;if("number"===r||"boolean"===r||"string"===r||void 0===t||null===t)return JSON.stringify(t);if(Array.isArray(t)){for(var n="[",i=0,o=t;i<o.length;i+=1){var a=o[i];n+=e(a)+","}return n+"]"}for(var s=Object.keys(t).sort(),u="{",l=0;l<s.length;l++)u+=JSON.stringify(s[l])+":"+e(t[s[l]])+",";return u+"}"}function r(r){for(var n="",i=0,o=t.refProperties;i<o.length;i+=1){var a=o[i];n+="/"+e(r[a])}return n}function n(t,e){for(var n={},i=0;i<t.length;i++){var o=e&&e[t[i].id]||r(t[i]);e&&(e[t[i].id]=o);var a=n[o];a||(a=n[o]=[]),a.push(t[i])}var s=[];for(var u in n)s.push(n[u]);return s}var i=function(t){this.keyCache={},t&&this.replace(t)};i.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},i.prototype.update=function(e,r){for(var i=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=t.createStyleLayer(s);u._featureFilter=t.featureFilter(u.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var l=0,c=r;l<c.length;l+=1){var p=c[l];delete this.keyCache[p],delete this._layerConfigs[p],delete this._layers[p]}this.familiesBySource={};for(var h=n(t.values(this._layerConfigs),this.keyCache),f=0,d=h;f<d.length;f+=1){var m=d[f],y=m.map(function(t){return i._layers[t.id]}),v=y[0];if("none"!==v.visibility){var g=v.source||"",_=this.familiesBySource[g];_||(_=this.familiesBySource[g]={});var x=v.sourceLayer||"_geojsonTileLayer",b=_[x];b||(b=_[x]=[]),b.push(y)}}};var o=1,a=function(e){var r={},n=[];for(var i in e){var a=e[i],s=r[i]={};for(var u in a){var l=a[+u];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var c={x:0,y:0,w:l.bitmap.width+2*o,h:l.bitmap.height+2*o};n.push(c),s[u]={rect:c,metrics:l.metrics}}}}var p=t.potpack(n),h=p.w,f=p.h,d=new t.AlphaImage({width:h||1,height:f||1});for(var m in e){var y=e[m];for(var v in y){var g=y[+v];if(g&&0!==g.bitmap.width&&0!==g.bitmap.height){var _=r[m][v].rect;t.AlphaImage.copy(g.bitmap,d,{x:0,y:0},{x:_.x+o,y:_.y+o},g.bitmap)}}}this.image=d,this.positions=r};t.register("GlyphAtlas",a);var s=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies};function u(e,r,n){for(var i=new t.EvaluationParameters(r),o=0,a=e;o<a.length;o+=1){var s=a[o];s.recalculate(i,n)}}s.prototype.parse=function(e,r,n,i,o){var s=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var l=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID);c.bucketLayerIDs=[];var p,h,f,d,m={},y={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:n},v=r.familiesBySource[this.source];for(var g in v){var _=e.layers[g];if(_){1===_.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+g+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var x=l.encode(g),b=[],w=0;w<_.length;w++){var S=_.feature(w);b.push({feature:S,index:w,sourceLayerIndex:x})}for(var E=0,T=v[g];E<T.length;E+=1){var A=T[E],k=A[0];if(t.assert(k.source===this.source),!(k.minzoom&&this.zoom<Math.floor(k.minzoom))&&!(k.maxzoom&&this.zoom>=k.maxzoom)&&"none"!==k.visibility){u(A,this.zoom,n);var I=m[k.id]=k.createBucket({index:c.bucketLayerIDs.length,layers:A,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:x,sourceID:this.source});I.populate(b,y),c.bucketLayerIDs.push(A.map(function(t){return t.id}))}}}}var C=t.mapObject(y.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(C).length?i.send("getGlyphs",{uid:this.uid,stacks:C},function(t,e){p||(p=t,h=e,z.call(s))}):h={};var P=Object.keys(y.iconDependencies);P.length?i.send("getImages",{icons:P,source:this.source,tileID:this.tileID,type:"icons"},function(t,e){p||(p=t,f=e,z.call(s))}):f={};var M=Object.keys(y.patternDependencies);function z(){if(p)return o(p);if(h&&f&&d){var e=new a(h),r=new t.ImageAtlas(f,d);for(var i in m){var s=m[i];s instanceof t.SymbolBucket?(u(s.layers,this.zoom,n),t.performSymbolLayout(s,h,e.positions,f,r.iconPositions,this.showCollisionBoxes)):s.hasPattern&&(s instanceof t.LineBucket||s instanceof t.FillBucket||s instanceof t.FillExtrusionBucket)&&(u(s.layers,this.zoom,n),s.addFeatures(y,r.patternPositions))}this.status="done",o(null,{buckets:t.values(m).filter(function(t){return!t.isEmpty()}),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:r,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?e.positions:null})}}M.length?i.send("getImages",{icons:M,source:this.source,tileID:this.tileID,type:"patterns"},function(t,e){p||(p=t,d=e,z.call(s))}):d={},z.call(this)};var l="undefined"!==typeof performance,c={getEntriesByName:function(t){return!!(l&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(l&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,r){return!!(l&&performance&&performance.measure)&&performance.measure(t,e,r)},clearMarks:function(t){return!!(l&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(l&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}},p=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},c.mark(this._marks.start)};function h(e,r){var n=t.getArrayBuffer(e.request,function(e,n,i,o){e?r(e):n&&r(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(n)),rawData:n,cacheControl:i,expires:o})});return function(){n.cancel(),r()}}p.prototype.finish=function(){c.mark(this._marks.end);var t=c.getEntriesByName(this._marks.measure);return 0===t.length&&(c.measure(this._marks.measure,this._marks.start,this._marks.end),t=c.getEntriesByName(this._marks.measure),c.clearMarks(this._marks.start),c.clearMarks(this._marks.end),c.clearMeasures(this._marks.measure)),t},c.Performance=p;var f=function(t,e,r,n){this.actor=t,this.layerIndex=e,this.availableImages=r,this.loadVectorData=n||h,this.loading={},this.loaded={}};f.prototype.loadTile=function(e,r){var n=this,i=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new c.Performance(e.request),a=this.loading[i]=new s(e);a.abort=this.loadVectorData(e,function(e,s){if(delete n.loading[i],e||!s)return a.status="done",n.loaded[i]=a,r(e);var u=s.rawData,l={};s.expires&&(l.expires=s.expires),s.cacheControl&&(l.cacheControl=s.cacheControl);var c={};if(o){var p=o.finish();p&&(c.resourceTiming=JSON.parse(JSON.stringify(p)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,n.layerIndex,n.availableImages,n.actor,function(e,n){if(e||!n)return r(e);r(null,t.extend({rawTileData:u.slice(0)},n,l,c))}),n.loaded=n.loaded||{},n.loaded[i]=a})},f.prototype.reloadTile=function(t,e){var r=this,n=this.loaded,i=t.uid,o=this;if(n&&n[i]){var a=n[i];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,n){var i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,r.availableImages,o.actor,i)),e(t,n)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},f.prototype.abortTile=function(t,e){var r=this.loading,n=t.uid;r&&r[n]&&r[n].abort&&(r[n].abort(),delete r[n]),e()},f.prototype.removeTile=function(t,e){var r=this.loaded,n=t.uid;r&&r[n]&&delete r[n],e()};var d=function(){this.loaded={}};d.prototype.loadTile=function(e,r){var n=e.uid,i=e.encoding,o=e.rawImageData,a=new t.DEMData(n,o,i);this.loaded=this.loaded||{},this.loaded[n]=a,r(null,a)},d.prototype.removeTile=function(t){var e=this.loaded,r=t.uid;e&&e[r]&&delete e[r]};var m=6378137,y=1/298.257223563,v=6356752.3142,g={RADIUS:m,FLATTENING:y,POLAR_RADIUS:v},_=b,x=S;function b(t){var e,r=0;switch(t.type){case"Polygon":return w(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)r+=w(t.coordinates[e]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)r+=b(t.geometries[e]);return r}}function w(t){var e=0;if(t&&t.length>0){e+=Math.abs(S(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(S(t[r]))}return e}function S(t){var e,r,n,i,o,a,s,u=0,l=t.length;if(l>2){for(s=0;s<l;s++)s===l-2?(i=l-2,o=l-1,a=0):s===l-1?(i=l-1,o=0,a=1):(i=s,o=s+1,a=s+2),e=t[i],r=t[o],n=t[a],u+=(E(n[0])-E(e[0]))*Math.sin(E(r[1]));u=u*g.RADIUS*g.RADIUS/2}return u}function E(t){return t*Math.PI/180}var T={geometry:_,ring:x},A=k;function k(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(I(k,e)),t;case"GeometryCollection":return t.geometries=t.geometries.map(I(k,e)),t;case"Feature":return t.geometry=k(t.geometry,e),t;case"Polygon":case"MultiPolygon":return C(t,e);default:return t}}function I(t,e){return function(r){return t(r,e)}}function C(t,e){return"Polygon"===t.type?t.coordinates=P(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(I(P,e))),t}function P(t,e){e=!!e,t[0]=M(t[0],e);for(var r=1;r<t.length;r++)t[r]=M(t[r],!e);return t}function M(t,e){return z(t)===e?t:t.reverse()}function z(t){return T.ring(t)>=0}var L=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,D=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};D.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],r=0,n=this._feature.geometry;r<n.length;r+=1){var i=n[r];e.push([new t.Point$1(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=s[a],l=[],c=0,p=u;c<p.length;c+=1){var h=p[c];l.push(new t.Point$1(h[0],h[1]))}o.push(l)}return o},D.prototype.toGeoJSON=function(t,e,r){return L.call(this,t,e,r)};var O=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};O.prototype.feature=function(t){return new D(this._features[t])};var B=t.vectorTile.VectorTileFeature,R=F;function F(t,e){this.options=e||{},this.features=t,this.length=t.length}function U(t,e){this.id="number"===typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}F.prototype.feature=function(t){return new U(this.features[t],this.options.extent)},U.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var r=0;r<e.length;r++){for(var n=e[r],i=[],o=0;o<n.length;o++)i.push(new t.Point$1(n[o][0],n[o][1]));this.geometry.push(i)}return this.geometry},U.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,r=-1/0,n=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),r=Math.max(r,u.x),n=Math.min(n,u.y),i=Math.max(i,u.y)}return[e,n,r,i]},U.prototype.toGeoJSON=B.prototype.toGeoJSON;var j=Z,N=Z,V=G,q=R;function Z(e){var r=new t.pbf;return X(e,r),r.finish()}function G(t,e){e=e||{};var r={};for(var n in t)r[n]=new R(t[n].features,e),r[n].name=n,r[n].version=e.version,r[n].extent=e.extent;return Z({layers:r})}function X(t,e){for(var r in t.layers)e.writeMessage(3,W,t.layers[r])}function W(t,e){var r;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<t.length;r++)n.feature=t.feature(r),e.writeMessage(2,$,n);var i=n.keys;for(r=0;r<i.length;r++)e.writeStringField(3,i[r]);var o=n.values;for(r=0;r<o.length;r++)e.writeMessage(4,Q,o[r])}function $(t,e){var r=t.feature;void 0!==r.id&&e.writeVarintField(1,r.id),e.writeMessage(2,H,t),e.writeVarintField(3,r.type),e.writeMessage(4,J,r)}function H(t,e){var r=t.feature,n=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in r.properties){var u=o[s];"undefined"===typeof u&&(n.push(s),u=n.length-1,o[s]=u),e.writeVarint(u);var l=r.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var p=c+":"+l,h=a[p];"undefined"===typeof h&&(i.push(l),h=i.length-1,a[p]=h),e.writeVarint(h)}}function K(t,e){return(e<<3)+(7&t)}function Y(t){return t<<1^t>>31}function J(t,e){for(var r=t.loadGeometry(),n=t.type,i=0,o=0,a=r.length,s=0;s<a;s++){var u=r[s],l=1;1===n&&(l=u.length),e.writeVarint(K(1,l));for(var c=3===n?u.length-1:u.length,p=0;p<c;p++){1===p&&1!==n&&e.writeVarint(K(2,c-1));var h=u[p].x-i,f=u[p].y-o;e.writeVarint(Y(h)),e.writeVarint(Y(f)),i+=h,o+=f}3===n&&e.writeVarint(K(7,1))}}function Q(t,e){var r=typeof t;"string"===r?e.writeStringField(1,t):"boolean"===r?e.writeBooleanField(7,t):"number"===r&&(t%1!==0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function tt(t,e,r,n,i,o){if(!(i-n<=r)){var a=n+i>>1;et(t,e,a,n,i,o%2),tt(t,e,r,n,a-1,o+1),tt(t,e,r,a+1,i,o+1)}}function et(t,e,r,n,i,o){while(i>n){if(i-n>600){var a=i-n+1,s=r-n+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1),p=Math.max(n,Math.floor(r-s*l/a+c)),h=Math.min(i,Math.floor(r+(a-s)*l/a+c));et(t,e,r,p,h,o)}var f=e[2*r+o],d=n,m=i;rt(t,e,n,r),e[2*i+o]>f&&rt(t,e,n,i);while(d<m){rt(t,e,d,m),d++,m--;while(e[2*d+o]<f)d++;while(e[2*m+o]>f)m--}e[2*n+o]===f?rt(t,e,n,m):(m++,rt(t,e,m,i)),m<=r&&(n=m+1),r<=m&&(i=m-1)}}function rt(t,e,r,n){nt(t,r,n),nt(e,2*r,2*n),nt(e,2*r+1,2*n+1)}function nt(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function it(t,e,r,n,i,o,a){var s,u,l=[0,t.length-1,0],c=[];while(l.length){var p=l.pop(),h=l.pop(),f=l.pop();if(h-f<=a)for(var d=f;d<=h;d++)s=e[2*d],u=e[2*d+1],s>=r&&s<=i&&u>=n&&u<=o&&c.push(t[d]);else{var m=Math.floor((f+h)/2);s=e[2*m],u=e[2*m+1],s>=r&&s<=i&&u>=n&&u<=o&&c.push(t[m]);var y=(p+1)%2;(0===p?r<=s:n<=u)&&(l.push(f),l.push(m-1),l.push(y)),(0===p?i>=s:o>=u)&&(l.push(m+1),l.push(h),l.push(y))}}return c}function ot(t,e,r,n,i,o){var a=[0,t.length-1,0],s=[],u=i*i;while(a.length){var l=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o)for(var h=p;h<=c;h++)at(e[2*h],e[2*h+1],r,n)<=u&&s.push(t[h]);else{var f=Math.floor((p+c)/2),d=e[2*f],m=e[2*f+1];at(d,m,r,n)<=u&&s.push(t[f]);var y=(l+1)%2;(0===l?r-i<=d:n-i<=m)&&(a.push(p),a.push(f-1),a.push(y)),(0===l?r+i>=d:n+i>=m)&&(a.push(f+1),a.push(c),a.push(y))}}return s}function at(t,e,r,n){var i=t-r,o=e-n;return i*i+o*o}j.fromVectorTileJs=N,j.fromGeojsonVt=V,j.GeoJSONWrapper=q;var st=function(t){return t[0]},ut=function(t){return t[1]},lt=function(t,e,r,n,i){void 0===e&&(e=st),void 0===r&&(r=ut),void 0===n&&(n=64),void 0===i&&(i=Float64Array),this.nodeSize=n,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length),u=0;u<t.length;u++)a[u]=u,s[2*u]=e(t[u]),s[2*u+1]=r(t[u]);tt(a,s,n,0,a.length-1,0)};lt.prototype.range=function(t,e,r,n){return it(this.ids,this.coords,t,e,r,n,this.nodeSize)},lt.prototype.within=function(t,e,r){return ot(this.ids,this.coords,t,e,r,this.nodeSize)};var ct={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},pt=function(t){this.options=xt(Object.create(ct),t),this.trees=new Array(this.options.maxZoom+1)};function ht(t,e,r,n,i){return{x:t,y:e,zoom:1/0,id:r,parentId:-1,numPoints:n,properties:i}}function ft(t,e){var r=t.geometry.coordinates,n=r[0],i=r[1];return{x:yt(n),y:vt(i),zoom:1/0,index:e,parentId:-1}}function dt(t){return{type:"Feature",id:t.id,properties:mt(t),geometry:{type:"Point",coordinates:[gt(t.x),_t(t.y)]}}}function mt(t){var e=t.numPoints,r=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return xt(xt({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:r})}function yt(t){return t/360+.5}function vt(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function gt(t){return 360*(t-.5)}function _t(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function xt(t,e){for(var r in e)t[r]=e[r];return t}function bt(t){return t.x}function wt(t){return t.y}function St(t,e,r,n){for(var i,o=n,a=r-e>>1,s=r-e,u=t[e],l=t[e+1],c=t[r],p=t[r+1],h=e+3;h<r;h+=3){var f=Et(t[h],t[h+1],u,l,c,p);if(f>o)i=h,o=f;else if(f===o){var d=Math.abs(h-a);d<s&&(i=h,s=d)}}o>n&&(i-e>3&&St(t,e,i,n),t[i+2]=o,r-i>3&&St(t,i,r,n))}function Et(t,e,r,n,i,o){var a=i-r,s=o-n;if(0!==a||0!==s){var u=((t-r)*a+(e-n)*s)/(a*a+s*s);u>1?(r=i,n=o):u>0&&(r+=a*u,n+=s*u)}return a=t-r,s=e-n,a*a+s*s}function Tt(t,e,r,n){var i={id:"undefined"===typeof t?null:t,type:e,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return At(i),i}function At(t){var e=t.geometry,r=t.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)kt(t,e);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<e.length;n++)kt(t,e[n]);else if("MultiPolygon"===r)for(n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++)kt(t,e[n][i])}function kt(t,e){for(var r=0;r<e.length;r+=3)t.minX=Math.min(t.minX,e[r]),t.minY=Math.min(t.minY,e[r+1]),t.maxX=Math.max(t.maxX,e[r]),t.maxY=Math.max(t.maxY,e[r+1])}function It(t,e){var r=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)Ct(r,t.features[n],e,n);else"Feature"===t.type?Ct(r,t,e):Ct(r,{geometry:t},e);return r}function Ct(t,e,r,n){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],u=e.id;if(r.promoteId?u=e.properties[r.promoteId]:r.generateId&&(u=n||0),"Point"===o)Pt(i,s);else if("MultiPoint"===o)for(var l=0;l<i.length;l++)Pt(i[l],s);else if("LineString"===o)Mt(i,s,a,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(l=0;l<i.length;l++)s=[],Mt(i[l],s,a,!1),t.push(Tt(u,"LineString",s,e.properties));return}zt(i,s,a,!1)}else if("Polygon"===o)zt(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<e.geometry.geometries.length;l++)Ct(t,{id:u,geometry:e.geometry.geometries[l],properties:e.properties},r,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var c=[];zt(i[l],c,a,!0),s.push(c)}}t.push(Tt(u,o,s,e.properties))}}function Pt(t,e){e.push(Lt(t[0])),e.push(Dt(t[1])),e.push(0)}function Mt(t,e,r,n){for(var i,o,a=0,s=0;s<t.length;s++){var u=Lt(t[s][0]),l=Dt(t[s][1]);e.push(u),e.push(l),e.push(0),s>0&&(a+=n?(i*l-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-o,2))),i=u,o=l}var c=e.length-3;e[2]=1,St(e,0,c,r),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function zt(t,e,r,n){for(var i=0;i<t.length;i++){var o=[];Mt(t[i],o,r,n),e.push(o)}}function Lt(t){return t/360+.5}function Dt(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function Ot(t,e,r,n,i,o,a,s){if(r/=e,n/=e,o>=r&&a<n)return t;if(a<r||o>=n)return null;for(var u=[],l=0;l<t.length;l++){var c=t[l],p=c.geometry,h=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(f>=r&&d<n)u.push(c);else if(!(d<r||f>=n)){var m=[];if("Point"===h||"MultiPoint"===h)Bt(p,m,r,n,i);else if("LineString"===h)Rt(p,m,r,n,i,!1,s.lineMetrics);else if("MultiLineString"===h)Ut(p,m,r,n,i,!1);else if("Polygon"===h)Ut(p,m,r,n,i,!0);else if("MultiPolygon"===h)for(var y=0;y<p.length;y++){var v=[];Ut(p[y],v,r,n,i,!0),v.length&&m.push(v)}if(m.length){if(s.lineMetrics&&"LineString"===h){for(y=0;y<m.length;y++)u.push(Tt(c.id,h,m[y],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),u.push(Tt(c.id,h,m,c.tags))}}}return u.length?u:null}function Bt(t,e,r,n,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=r&&a<=n&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function Rt(t,e,r,n,i,o,a){for(var s,u,l=Ft(t),c=0===i?Nt:Vt,p=t.start,h=0;h<t.length-3;h+=3){var f=t[h],d=t[h+1],m=t[h+2],y=t[h+3],v=t[h+4],g=0===i?f:d,_=0===i?y:v,x=!1;a&&(s=Math.sqrt(Math.pow(f-y,2)+Math.pow(d-v,2))),g<r?_>r&&(u=c(l,f,d,y,v,r),a&&(l.start=p+s*u)):g>n?_<n&&(u=c(l,f,d,y,v,n),a&&(l.start=p+s*u)):jt(l,f,d,m),_<r&&g>=r&&(u=c(l,f,d,y,v,r),x=!0),_>n&&g<=n&&(u=c(l,f,d,y,v,n),x=!0),!o&&x&&(a&&(l.end=p+s*u),e.push(l),l=Ft(t)),a&&(p+=s)}var b=t.length-3;f=t[b],d=t[b+1],m=t[b+2],g=0===i?f:d,g>=r&&g<=n&&jt(l,f,d,m),b=l.length-3,o&&b>=3&&(l[b]!==l[0]||l[b+1]!==l[1])&&jt(l,l[0],l[1],l[2]),l.length&&e.push(l)}function Ft(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function Ut(t,e,r,n,i,o){for(var a=0;a<t.length;a++)Rt(t[a],e,r,n,i,o,!1)}function jt(t,e,r,n){t.push(e),t.push(r),t.push(n)}function Nt(t,e,r,n,i,o){var a=(o-e)/(n-e);return t.push(o),t.push(r+(i-r)*a),t.push(1),a}function Vt(t,e,r,n,i,o){var a=(o-r)/(i-r);return t.push(e+(n-e)*a),t.push(o),t.push(1),a}function qt(t,e){var r=e.buffer/e.extent,n=t,i=Ot(t,1,-1-r,r,0,-1,2,e),o=Ot(t,1,1-r,2+r,0,-1,2,e);return(i||o)&&(n=Ot(t,1,-r,1+r,0,-1,2,e)||[],i&&(n=Zt(i,1).concat(n)),o&&(n=n.concat(Zt(o,-1)))),n}function Zt(t,e){for(var r=[],n=0;n<t.length;n++){var i,o=t[n],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=Gt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(Gt(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(Gt(o.geometry[s][l],e));i.push(u)}r.push(Tt(o.id,a,i,o.tags))}return r}function Gt(t,e){var r=[];r.size=t.size,void 0!==t.start&&(r.start=t.start,r.end=t.end);for(var n=0;n<t.length;n+=3)r.push(t[n]+e,t[n+1],t[n+2]);return r}function Xt(t,e){if(t.transformed)return t;var r,n,i,o=1<<t.z,a=t.x,s=t.y;for(r=0;r<t.features.length;r++){var u=t.features[r],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(n=0;n<l.length;n+=2)u.geometry.push(Wt(l[n],l[n+1],e,o,a,s));else for(n=0;n<l.length;n++){var p=[];for(i=0;i<l[n].length;i+=2)p.push(Wt(l[n][i],l[n][i+1],e,o,a,s));u.geometry.push(p)}}return t.transformed=!0,t}function Wt(t,e,r,n,i,o){return[Math.round(r*(t*n-i)),Math.round(r*(e*n-o))]}function $t(t,e,r,n,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,Ht(a,t[s],o,i);var u=t[s].minX,l=t[s].minY,c=t[s].maxX,p=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),p>a.maxY&&(a.maxY=p)}return a}function Ht(t,e,r,n){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Kt(a,i,t,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Kt(a,i[s],t,r,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)Kt(a,l[s],t,r,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&n.lineMetrics){for(var p in c={},e.tags)c[p]=e.tags[p];c["mapbox_clip_start"]=i.start/i.size,c["mapbox_clip_end"]=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(h.id=e.id),t.features.push(h)}}function Kt(t,e,r,n,i,o){var a=n*n;if(n>0&&e.size<(i?a:n))r.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===n||e[u+2]>a)&&(r.numSimplified++,s.push(e[u]),s.push(e[u+1])),r.numPoints++;i&&Yt(s,o),t.push(s)}}function Yt(t,e){for(var r=0,n=0,i=t.length,o=i-2;n<i;o=n,n+=2)r+=(t[n]-t[o])*(t[n+1]+t[o+1]);if(r>0===e)for(n=0,i=t.length;n<i/2;n+=2){var a=t[n],s=t[n+1];t[n]=t[i-2-n],t[n+1]=t[i-1-n],t[i-2-n]=a,t[i-1-n]=s}}function Jt(t,e){return new Qt(t,e)}function Qt(t,e){e=this.options=ee(Object.create(this.options),e);var r=e.debug;if(r&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=It(t,e);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=qt(n,e),n.length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function te(t,e,r){return 32*((1<<t)*r+e)+t}function ee(t,e){for(var r in e)t[r]=e[r];return t}function re(t,e){var r=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var n=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!n)return e(null,null);var i=new O(n.features),o=j(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}pt.prototype.load=function(t){var e=this.options,r=e.log,n=e.minZoom,i=e.maxZoom,o=e.nodeSize;r&&console.time("total time");var a="prepare "+t.length+" points";r&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(ft(t[u],u));this.trees[i+1]=new lt(s,bt,wt,o,Float32Array),r&&console.timeEnd(a);for(var l=i;l>=n;l--){var c=+Date.now();s=this._cluster(s,l),this.trees[l]=new lt(s,bt,wt,o,Float32Array),r&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-c)}return r&&console.timeEnd("total time"),this},pt.prototype.getClusters=function(t,e){var r=((t[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)r=-180,i=180;else if(r>i){var a=this.getClusters([r,n,180,o],e),s=this.getClusters([-180,n,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],l=u.range(yt(r),vt(o),yt(i),vt(n)),c=[],p=0,h=l;p<h.length;p+=1){var f=h[p],d=u.points[f];c.push(d.numPoints?dt(d):this.points[d.index])}return c},pt.prototype.getChildren=function(t){var e=this._getOriginId(t),r=this._getOriginZoom(t),n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);var o=i.points[e];if(!o)throw new Error(n);for(var a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=i.within(o.x,o.y,a),u=[],l=0,c=s;l<c.length;l+=1){var p=c[l],h=i.points[p];h.parentId===t&&u.push(h.numPoints?dt(h):this.points[h.index])}if(0===u.length)throw new Error(n);return u},pt.prototype.getLeaves=function(t,e,r){e=e||10,r=r||0;var n=[];return this._appendLeaves(n,t,e,r,0),n},pt.prototype.getTile=function(t,e,r){var n=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius,u=s/a,l=(r-u)/i,c=(r+1+u)/i,p={features:[]};return this._addTileFeatures(n.range((e-u)/i,l,(e+1+u)/i,c),n.points,e,r,i,p),0===e&&this._addTileFeatures(n.range(1-u/i,l,1,c),n.points,i,r,i,p),e===i-1&&this._addTileFeatures(n.range(0,l,u/i,c),n.points,-1,r,i,p),p.features.length?p:null},pt.prototype.getClusterExpansionZoom=function(t){var e=this._getOriginZoom(t)-1;while(e<=this.options.maxZoom){var r=this.getChildren(t);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e},pt.prototype._appendLeaves=function(t,e,r,n,i){for(var o=this.getChildren(e),a=0,s=o;a<s.length;a+=1){var u=s[a],l=u.properties;if(l&&l.cluster?i+l.point_count<=n?i+=l.point_count:i=this._appendLeaves(t,l.cluster_id,r,n,i):i<n?i++:t.push(u),t.length===r)break}return i},pt.prototype._addTileFeatures=function(t,e,r,n,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a],l=e[u],c=l.numPoints,p={type:1,geometry:[[Math.round(this.options.extent*(l.x*i-r)),Math.round(this.options.extent*(l.y*i-n))]],tags:c?mt(l):this.points[l.index].properties},h=void 0;c?h=l.id:this.options.generateId?h=l.index:this.points[l.index].id&&(h=this.points[l.index].id),void 0!==h&&(p.id=h),o.features.push(p)}},pt.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},pt.prototype._cluster=function(t,e){for(var r=[],n=this.options,i=n.radius,o=n.extent,a=n.reduce,s=i/(o*Math.pow(2,e)),u=0;u<t.length;u++){var l=t[u];if(!(l.zoom<=e)){l.zoom=e;for(var c=this.trees[e+1],p=c.within(l.x,l.y,s),h=l.numPoints||1,f=l.x*h,d=l.y*h,m=a&&h>1?this._map(l,!0):null,y=(u<<5)+(e+1)+this.points.length,v=0,g=p;v<g.length;v+=1){var _=g[v],x=c.points[_];if(!(x.zoom<=e)){x.zoom=e;var b=x.numPoints||1;f+=x.x*b,d+=x.y*b,h+=b,x.parentId=y,a&&(m||(m=this._map(l,!0)),a(m,this._map(x)))}}1===h?r.push(l):(l.parentId=y,r.push(ht(f/h,d/h,y,h,m)))}}return r},pt.prototype._getOriginId=function(t){return t-this.points.length>>5},pt.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},pt.prototype._map=function(t,e){if(t.numPoints)return e?xt({},t.properties):t.properties;var r=this.points[t.index].properties,n=this.options.map(r);return e&&n===r?xt({},n):n},Qt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qt.prototype.splitTile=function(t,e,r,n,i,o,a){var s=[t,e,r,n],u=this.options,l=u.debug;while(s.length){n=s.pop(),r=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,p=te(e,r,n),h=this.tiles[p];if(!h&&(l>1&&console.time("creation"),h=this.tiles[p]=$t(t,e,r,n,u),this.tileCoords.push({z:e,x:r,y:n}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,r,n,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var f="z"+e;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(h.source=t,i){if(e===u.maxZoom||e===i)continue;var d=1<<i-e;if(r!==Math.floor(o/d)||n!==Math.floor(a/d))continue}else if(e===u.indexMaxZoom||h.numPoints<=u.indexMaxPoints)continue;if(h.source=null,0!==t.length){l>1&&console.time("clipping");var m,y,v,g,_,x,b=.5*u.buffer/u.extent,w=.5-b,S=.5+b,E=1+b;m=y=v=g=null,_=Ot(t,c,r-b,r+S,0,h.minX,h.maxX,u),x=Ot(t,c,r+w,r+E,0,h.minX,h.maxX,u),t=null,_&&(m=Ot(_,c,n-b,n+S,1,h.minY,h.maxY,u),y=Ot(_,c,n+w,n+E,1,h.minY,h.maxY,u),_=null),x&&(v=Ot(x,c,n-b,n+S,1,h.minY,h.maxY,u),g=Ot(x,c,n+w,n+E,1,h.minY,h.maxY,u),x=null),l>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*r,2*n),s.push(y||[],e+1,2*r,2*n+1),s.push(v||[],e+1,2*r+1,2*n),s.push(g||[],e+1,2*r+1,2*n+1)}}},Qt.prototype.getTile=function(t,e,r){var n=this.options,i=n.extent,o=n.debug;if(t<0||t>24)return null;var a=1<<t;e=(e%a+a)%a;var s=te(t,e,r);if(this.tiles[s])return Xt(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,r);var u,l=t,c=e,p=r;while(!u&&l>0)l--,c=Math.floor(c/2),p=Math.floor(p/2),u=this.tiles[te(l,c,p)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,p),o>1&&console.time("drilling down"),this.splitTile(u.source,l,c,p,t,e,r),o>1&&console.timeEnd("drilling down"),this.tiles[s]?Xt(this.tiles[s],i):null):null};var ne=function(e){function r(t,r,n,i){e.call(this,t,r,n,re),i&&(this.loadGeoJSON=i)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},r.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var r=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(n&&n.request&&n.request.collectResourceTiming)&&new c.Performance(n.request);this.loadGeoJSON(n,function(t,o){if(t||!o)return r(t);if("object"!==typeof o)return r(new Error("Input data given to '"+n.source+"' is not a valid GeoJSON object."));A(o,!0);try{e._geoJSONIndex=n.cluster?new pt(ie(n)).load(o.features):Jt(o,n.geojsonVtOptions)}catch(t){return r(t)}e.loaded={};var a={};if(i){var s=i.finish();s&&(a.resourceTiming={},a.resourceTiming[n.source]=JSON.parse(JSON.stringify(s)))}r(null,a)})}else t.assert(!1)},r.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},r.prototype.reloadTile=function(t,r){var n=this.loaded,i=t.uid;return n&&n[i]?e.prototype.reloadTile.call(this,t,r):this.loadTile(t,r)},r.prototype.loadGeoJSON=function(e,r){if(e.request)t.getJSON(e.request,r);else{if("string"!==typeof e.data)return r(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return r(null,JSON.parse(e.data))}catch(n){return r(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},r.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},r.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},r.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},r.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},r}(f);function ie(e){var r=e.superclusterOptions,n=e.clusterProperties;if(!n||!r)return r;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},u=Object.keys(n),l=0,c=u;l<c.length;l+=1){var p=c[l],h=n[p],f=h[0],d=h[1],m=t.createExpression(d),y=t.createExpression("string"===typeof f?[f,["accumulated"],["get",p]]:f);t.assert("success"===m.result),t.assert("success"===y.result),i[p]=m.value,o[p]=y.value}return r.map=function(t){s.properties=t;for(var e={},r=0,n=u;r<n.length;r+=1){var o=n[r];e[o]=i[o].evaluate(a,s)}return e},r.reduce=function(t,e){s.properties=e;for(var r=0,n=u;r<n.length;r+=1){var i=n[r];a.accumulated=t[i],t[i]=o[i].evaluate(a,s)}},r}var oe=function(e){var r=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:f,geojson:ne},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(r.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');r.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin["applyArabicShaping"]=e.applyArabicShaping,t.plugin["processBidirectionalText"]=e.processBidirectionalText,t.plugin["processStyledBidirectionalText"]=e.processStyledBidirectionalText}};return oe.prototype.setReferrer=function(t,e){this.referrer=e},oe.prototype.setImages=function(t,e,r){this.availableImages[t]=e,r()},oe.prototype.setLayers=function(t,e,r){this.getLayerIndex(t).replace(e),r()},oe.prototype.updateLayers=function(t,e,r){this.getLayerIndex(t).update(e.layers,e.removedIds),r()},oe.prototype.loadTile=function(e,r,n){t.assert(r.type),this.getWorkerSource(e,r.type,r.source).loadTile(r,n)},oe.prototype.loadDEMTile=function(t,e,r){this.getDEMWorkerSource(t,e.source).loadTile(e,r)},oe.prototype.reloadTile=function(e,r,n){t.assert(r.type),this.getWorkerSource(e,r.type,r.source).reloadTile(r,n)},oe.prototype.abortTile=function(e,r,n){t.assert(r.type),this.getWorkerSource(e,r.type,r.source).abortTile(r,n)},oe.prototype.removeTile=function(e,r,n){t.assert(r.type),this.getWorkerSource(e,r.type,r.source).removeTile(r,n)},oe.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},oe.prototype.removeSource=function(e,r,n){if(t.assert(r.type),t.assert(r.source),this.workerSources[e]&&this.workerSources[e][r.type]&&this.workerSources[e][r.type][r.source]){var i=this.workerSources[e][r.type][r.source];delete this.workerSources[e][r.type][r.source],void 0!==i.removeSource?i.removeSource(r,n):n()}},oe.prototype.loadWorkerSource=function(t,e,r){try{this.self.importScripts(e.url),r()}catch(n){r(n.toString())}},oe.prototype.syncRTLPluginState=function(e,r,n){try{t.plugin.setState(r);var i=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=i){this.self.importScripts(i);var o=t.plugin.isParsed(),a=o?void 0:new Error("RTL Text Plugin failed to import scripts from "+i);n(a,o)}}catch(s){n(s.toString())}},oe.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},oe.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e},oe.prototype.getWorkerSource=function(t,e,r){var n=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][r]){var i={send:function(e,r,i){n.actor.send(e,r,i,t)}};this.workerSources[t][e][r]=new this.workerSourceTypes[e](i,this.getLayerIndex(t),this.getAvailableImages(t))}return this.workerSources[t][e][r]},oe.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new d),this.demWorkerSources[t][e]},oe.prototype.enforceCacheSizeLimit=function(e,r){t.enforceCacheSizeLimit(r)},"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof t.window&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new oe(t.window)),oe}),o(["./shared"],function(t){var e=t.createCommonjsModule(function(t){function e(t){return!!(r()&&n()&&i()&&o()&&a()&&s()&&u()&&l()&&p(t&&t.failIfMajorPerformanceCaveat))}function r(){return"undefined"!==typeof window&&"undefined"!==typeof document}function n(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function i(){return Function.prototype&&Function.prototype.bind}function o(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function a(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function s(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,r=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(r);try{e=new Worker(n),t=!0}catch(i){t=!1}return e&&e.terminate(),URL.revokeObjectURL(n),t}function u(){return"Uint8ClampedArray"in window}function l(){return ArrayBuffer.isView}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var c={};function p(t){return void 0===c[t]&&(c[t]=h(t)),c[t]}function h(t){var r=document.createElement("canvas"),n=Object.create(e.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,r.probablySupportsContext?r.probablySupportsContext("webgl",n)||r.probablySupportsContext("experimental-webgl",n):r.supportsContext?r.supportsContext("webgl",n)||r.supportsContext("experimental-webgl",n):r.getContext("webgl",n)||r.getContext("experimental-webgl",n)}e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),r={create:function(e,r,n){var i=t.window.document.createElement(e);return void 0!==r&&(i.className=r),n&&n.appendChild(i),i},createNS:function(e,r){var n=t.window.document.createElementNS(e,r);return n}},n=t.window.document.documentElement.style;function i(t){if(!n)return t[0];for(var e=0;e<t.length;e++)if(t[e]in n)return t[e];return t[0]}var o,a=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);r.disableDrag=function(){n&&a&&(o=n[a],n[a]="none")},r.enableDrag=function(){n&&a&&(n[a]=o)};var s=i(["transform","WebkitTransform"]);r.setTransform=function(t,e){t.style[s]=e};var u=!1;try{var l=Object.defineProperty({},"passive",{get:function(){u=!0}});t.window.addEventListener("test",l,l),t.window.removeEventListener("test",l,l)}catch(Wa){u=!1}r.addEventListener=function(t,e,r,n){void 0===n&&(n={}),"passive"in n&&u?t.addEventListener(e,r,n):t.addEventListener(e,r,n.capture)},r.removeEventListener=function(t,e,r,n){void 0===n&&(n={}),"passive"in n&&u?t.removeEventListener(e,r,n):t.removeEventListener(e,r,n.capture)};var c=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",c,!0)};function p(e,r,n){var i,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",u=t.getJSON(r.transformRequest(r.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),function(t,e){u=null,a||(a=t,i=e,c())}),l=t.getImage(r.transformRequest(r.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),function(t,e){l=null,a||(a=t,o=e,c())});function c(){if(a)n(a);else if(i&&o){var e=t.browser.getImageData(o),r={};for(var s in i){var u=i[s],l=u.width,c=u.height,p=u.x,h=u.y,f=u.sdf,d=u.pixelRatio,m=u.stretchX,y=u.stretchY,v=u.content,g=new t.RGBAImage({width:l,height:c});t.RGBAImage.copy(e,g,{x:p,y:h},{x:0,y:0},{width:l,height:c}),r[s]={data:g,pixelRatio:d,sdf:f,stretchX:m,stretchY:y,content:v}}n(null,r)}}return{cancel:function(){u&&(u.cancel(),u=null),l&&(l.cancel(),l=null)}}}function h(t){var e=t.userImage;if(e&&e.render){var r=e.render();if(r)return t.data.replace(new Uint8Array(e.data.buffer)),!0}return!1}r.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",c,!0)},0)},r.mousePos=function(e,r){var n=e.getBoundingClientRect(),i=t.window.TouchEvent&&r instanceof t.window.TouchEvent?r.touches[0]:r;return new t.Point(i.clientX-n.left-e.clientLeft,i.clientY-n.top-e.clientTop)},r.touchPos=function(e,r){for(var n=e.getBoundingClientRect(),i=[],o="touchend"===r.type?r.changedTouches:r.touches,a=0;a<o.length;a++)i.push(new t.Point(o[a].clientX-n.left-e.clientLeft,o[a].clientY-n.top-e.clientTop));return i},r.mouseButton=function(e){return t.assert("mousedown"===e.type||"mouseup"===e.type),"undefined"!==typeof t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},r.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var f=1,d=function(e){function r(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.isLoaded=function(){return this.loaded},r.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,r=this.requestors;e<r.length;e+=1){var n=r[e],i=n.ids,o=n.callback;this._notify(i,o)}this.requestors=[]}},r.prototype.getImage=function(t){return this.images[t]},r.prototype.addImage=function(e,r){t.assert(!this.images[e]),this._validate(e,r)&&(this.images[e]=r)},r.prototype._validate=function(e,r){var n=!0;return this._validateStretch(r.stretchX,r.data&&r.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),n=!1),this._validateStretch(r.stretchY,r.data&&r.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),n=!1),this._validateContent(r.content,r)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),n=!1),n},r.prototype._validateStretch=function(t,e){if(!t)return!0;for(var r=0,n=0,i=t;n<i.length;n+=1){var o=i[n];if(o[0]<r||o[1]<o[0]||e<o[1])return!1;r=o[1]}return!0},r.prototype._validateContent=function(t,e){return!t||4===t.length&&(!(t[0]<0||e.data.width<t[0])&&(!(t[1]<0||e.data.height<t[1])&&(!(t[2]<0||e.data.width<t[2])&&(!(t[3]<0||e.data.height<t[3])&&(!(t[2]<t[0])&&!(t[3]<t[1]))))))},r.prototype.updateImage=function(e,r){var n=this.images[e];t.assert(n),t.assert(n.data.width===r.data.width),t.assert(n.data.height===r.data.height),r.version=n.version+1,this.images[e]=r,this.updatedImages[e]=!0},r.prototype.removeImage=function(e){t.assert(this.images[e]);var r=this.images[e];delete this.images[e],delete this.patterns[e],r.userImage&&r.userImage.onRemove&&r.userImage.onRemove()},r.prototype.listImages=function(){return Object.keys(this.images)},r.prototype.getImages=function(t,e){var r=!0;if(!this.isLoaded())for(var n=0,i=t;n<i.length;n+=1){var o=i[n];this.images[o]||(r=!1)}this.isLoaded()||r?this._notify(t,e):this.requestors.push({ids:t,callback:e})},r.prototype._notify=function(e,r){for(var n={},i=0,o=e;i<o.length;i+=1){var a=o[i];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?n[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}r(null,n)},r.prototype.getPixelSize=function(){var t=this.atlasImage,e=t.width,r=t.height;return{width:e,height:r}},r.prototype.getPattern=function(e){var r=this.patterns[e],n=this.getImage(e);if(!n)return null;if(r&&r.position.version===n.version)return r.position;if(r)r.position.version=n.version;else{var i=n.data.width+2*f,o=n.data.height+2*f,a={w:i,h:o,x:0,y:0},s=new t.ImagePosition(a,n);this.patterns[e]={bin:a,position:s}}return this._updatePatternAtlas(),this.patterns[e].position},r.prototype.bind=function(e){var r=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)},r.prototype._updatePatternAtlas=function(){var e=[];for(var r in this.patterns)e.push(this.patterns[r].bin);var n=t.potpack(e),i=n.w,o=n.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var u=this.patterns[s],l=u.bin,c=l.x+f,p=l.y+f,h=this.images[s].data,d=h.width,m=h.height;t.RGBAImage.copy(h,a,{x:0,y:0},{x:c,y:p},{width:d,height:m}),t.RGBAImage.copy(h,a,{x:0,y:m-1},{x:c,y:p-1},{width:d,height:1}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:c,y:p+m},{width:d,height:1}),t.RGBAImage.copy(h,a,{x:d-1,y:0},{x:c-1,y:p},{width:1,height:m}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:c+d,y:p},{width:1,height:m})}this.dirty=!0},r.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},r.prototype.dispatchRenderCallbacks=function(e){for(var r=0,n=e;r<n.length;r+=1){var i=n[r];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var o=this.images[i];t.assert(o);var a=h(o);a&&this.updateImage(i,o)}}},r}(t.Evented);function m(e,r,n,i,o){var a=256*r,s=a+255,u=i.transformRequest(i.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,function(e,r){if(e)o(e);else if(r){for(var n={},i=0,a=t.parseGlyphPBF(r);i<a.length;i+=1){var s=a[i];n[s.id]=s}o(null,n)}})}var y=_,v=_,g=1e20;function _(t,e,r,n,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function x(t,e,r,n,i,o,a){for(var s=0;s<e;s++){for(var u=0;u<r;u++)n[u]=t[u*e+s];for(b(n,i,o,a,r),u=0;u<r;u++)t[u*e+s]=i[u]}for(u=0;u<r;u++){for(s=0;s<e;s++)n[s]=t[u*e+s];for(b(n,i,o,a,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(i[s])}}function b(t,e,r,n,i){r[0]=0,n[0]=-g,n[1]=+g;for(var o=1,a=0;o<i;o++){var s=(t[o]+o*o-(t[r[a]]+r[a]*r[a]))/(2*o-2*r[a]);while(s<=n[a])a--,s=(t[o]+o*o-(t[r[a]]+r[a]*r[a]))/(2*o-2*r[a]);a++,r[a]=o,n[a]=s,n[a+1]=+g}for(o=0,a=0;o<i;o++){while(n[a+1]<o)a++;e[o]=(o-r[a])*(o-r[a])+t[r[a]]}}_.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),r=new Uint8ClampedArray(this.size*this.size),n=0;n<this.size*this.size;n++){var i=e.data[4*n+3]/255;this.gridOuter[n]=1===i?0:0===i?g:Math.pow(Math.max(0,.5-i),2),this.gridInner[n]=1===i?g:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(x(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),x(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++){var o=this.gridOuter[n]-this.gridInner[n];r[n]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return r},y.default=v;var w=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};w.prototype.setURL=function(t){this.url=t},w.prototype.getGlyphs=function(e,r){var n=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1){var u=s[a];i.push({stack:o,id:u})}t.asyncAll(i,function(t,e){var r=t.stack,i=t.id,o=n.entries[r];o||(o=n.entries[r]={glyphs:{},requests:{}});var a=o.glyphs[i];if(void 0===a){if(a=n._tinySDF(o,r,i),a)return o.glyphs[i]=a,void e(null,{stack:r,id:i,glyph:a});var s=Math.floor(i/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var u=o.requests[s];u||(u=o.requests[s]=[],w.loadGlyphRange(r,s,n.url,n.requestManager,function(t,e){if(e)for(var r in e)n._doesCharSupportLocalGlyph(+r)||(o.glyphs[+r]=e[+r]);for(var i=0,a=u;i<a.length;i+=1){var l=a[i];l(t,e)}delete o.requests[s]})),u.push(function(t,n){t?e(t):n&&e(null,{stack:r,id:i,glyph:n[i]||null})})}}else e(null,{stack:r,id:i,glyph:a})},function(t,e){if(t)r(t);else if(e){for(var n={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(n[s]||(n[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}r(null,n)}})},w.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar["Hiragana"](e)||t.isChar["Katakana"](e))},w.prototype._tinySDF=function(e,r,n){var i=this.localIdeographFontFamily;if(i&&this._doesCharSupportLocalGlyph(n)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(r)?a="900":/medium/i.test(r)?a="500":/light/i.test(r)&&(a="200"),o=e.tinySDF=new w.TinySDF(24,3,8,.25,i,a)}return{id:n,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},w.loadGlyphRange=m,w.TinySDF=y;var S=function(){this.specification=t.styleSpec.light.position};S.prototype.possiblyEvaluate=function(e,r){return t.sphericalToCartesian(e.expression.evaluate(r))},S.prototype.interpolate=function(e,r,n){return{x:t.number(e.x,r.x,n),y:t.number(e.y,r.y,n),z:t.number(e.z,r.z,n)}};var E=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new S,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),T="-transition",A=function(e){function r(r){e.call(this),this._transitionable=new t.Transitionable(E),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getLight=function(){return this._transitionable.serialize()},r.prototype.setLight=function(e,r){if(void 0===r&&(r={}),!this._validate(t.validateLight,e,r))for(var n in e){var i=e[n];t.endsWith(n,T)?this._transitionable.setTransition(n.slice(0,-T.length),i):this._transitionable.setValue(n,i)}},r.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},r.prototype.hasTransition=function(){return this._transitioning.hasTransition()},r.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},r.prototype._validate=function(e,r,n){return(!n||!1!==n.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},r}(t.Evented),k=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};k.prototype.getDash=function(t,e){var r=t.join(",")+String(e);return this.positions[r]||(this.positions[r]=this.addDash(t,e)),this.positions[r]},k.prototype.addDash=function(e,r){var n=r?7:0,i=2*n+1,o=128;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var a=0,s=0;s<e.length;s++)a+=e[s];for(var u=this.width/a,l=u/2,c=e.length%2===1,p=-n;p<=n;p++)for(var h=this.nextRow+n+p,f=this.width*h,d=c?-e[e.length-1]:0,m=e[0],y=1,v=0;v<this.width;v++){while(m<v/u)d=m,m+=e[y],c&&y===e.length-1&&(m+=e[0]),y++;var g=Math.abs(v-d*u),_=Math.abs(v-m*u),x=Math.min(g,_),b=y%2===1,w=void 0;if(r){var S=n?p/n*(l+1):0;if(b){var E=l-Math.abs(S);w=Math.sqrt(x*x+E*E)}else w=l-Math.sqrt(x*x+S*S)}else w=(b?1:-1)*x;this.data[3+4*(f+v)]=Math.max(0,Math.min(255,w+o))}var T={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:a};return this.nextRow+=i,this.dirty=!0,T},k.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var I=function e(r,n){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=i[o],s=new e.Actor(a,n,this.id);s.name="Worker "+o,this.actors.push(s)}t.assert(this.actors.length)};function C(e,r,n){var i=function(i,o){if(i)return n(i);if(o){var a=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map(function(t){return t.id})),e.url&&(a.tiles=r.canonicalizeTileset(a,e.url)),n(null,a)}};return e.url?t.getJSON(r.transformRequest(r.normalizeSourceURL(e.url),t.ResourceType.Source),i):t.browser.frame(function(){return i(null,e)})}I.prototype.broadcast=function(e,r,n){t.assert(this.actors.length),n=n||function(){},t.asyncAll(this.actors,function(t,n){t.send(e,r,n)},n)},I.prototype.getActor=function(){return t.assert(this.actors.length),this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},I.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},I.Actor=t.Actor;var P=function(e,r,n){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=r||0,this.maxzoom=n||24};P.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},P.prototype.contains=function(e){var r=Math.pow(2,e.z),n={minX:Math.floor(t.mercatorXfromLng(this.bounds.getWest())*r),minY:Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*r),maxX:Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*r),maxY:Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*r)},i=e.x>=n.minX&&e.x<n.maxX&&e.y>=n.minY&&e.y<n.maxY;return i};var M=function(e){function r(r,n,i,o){if(e.call(this),this.id=r,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(r,n){e._tileJSONRequest=null,e._loaded=!0,r?e.fire(new t.ErrorEvent(r)):n&&(t.extend(e,n),n.bounds&&(e.tileBounds=new P(n.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(n.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(n.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},r.prototype.loaded=function(){return this._loaded},r.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},r.prototype.serialize=function(){return t.extend({},this._options)},r.prototype.loadTile=function(e,r){var n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,null),i={request:this.map._requestManager.transformRequest(n,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function o(n,i){return delete e.request,e.aborted?r(null):n&&404!==n.status?r(n):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),r(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=r:e.request=e.actor.send("reloadTile",i,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",i,o.bind(this)))},r.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},r.prototype.unloadTile=function(t){t.unloadVectorData(),t.clearMask(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},r.prototype.hasTransition=function(){return!1},r}(t.Evented),z=function(e){function r(r,n,i,o){e.call(this),this.id=r,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(r,n){e._tileJSONRequest=null,e._loaded=!0,r?e.fire(new t.ErrorEvent(r)):n&&(t.extend(e,n),n.bounds&&(e.tileBounds=new P(n.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(n.tiles),t.postMapLoadEvent(n.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},r.prototype.loaded=function(){return this._loaded},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},r.prototype.serialize=function(){return t.extend({},this._options)},r.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},r.prototype.loadTile=function(e,r){var n=this,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",r(null);else if(i)e.state="errored",r(i);else if(o){n.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=n.map.painter.context,s=a.gl;e.texture=n.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(n.dispatcher),r(null)}})},r.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},r.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),t.clearMask(),e()},r.prototype.hasTransition=function(){return!1},r}(t.Evented),L=function(e){function r(r,n,i,o){e.call(this,r,n,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},r.prototype.loadTile=function(e,r){var n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);function i(n,i){if(delete e.request,e.aborted)e.state="unloaded",r(null);else if(n)e.state="errored",r(n);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var a=t.browser.getImageData(i,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,o.bind(this)))}}function o(t,n){t&&(e.state="errored",r(t)),n&&(e.dem=n,e.needsHillshadePrepare=!0,e.state="loaded",r(null))}e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),i.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},r.prototype._getNeighboringTiles=function(e){var r=e.canonical,n=Math.pow(2,r.z),i=(r.x-1+n)%n,o=0===r.x?e.wrap-1:e.wrap,a=(r.x+1+n)%n,s=r.x+1===n?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,r.z,i,r.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,r.z,a,r.y).key]={backfilled:!1},r.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,r.z,i,r.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,r.z,a,r.y-1).key]={backfilled:!1}),r.y+1<n&&(u[new t.OverscaledTileID(e.overscaledZ,o,r.z,i,r.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,r.z,a,r.y+1).key]={backfilled:!1}),u},r.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.clearMask(),t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},r}(z),D=function(e){function r(r,n,i,o){e.call(this),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(o),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution);var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(n.clusterRadius||50)*a,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties},n.workerOptions)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(r){if(r)e.fire(new t.ErrorEvent(r));else{var n={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(n.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",n))}})},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.setData=function(e){var r=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)r.fire(new t.ErrorEvent(e));else{var n={dataType:"source",sourceDataType:"content"};r._collectResourceTiming&&r._resourceTiming&&r._resourceTiming.length>0&&(n.resourceTiming=r._resourceTiming,r._resourceTiming=[]),r.fire(new t.Event("data",n))}}),this},r.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},r.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},r.prototype.getClusterLeaves=function(t,e,r,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:r},n),this},r.prototype._updateWorkerData=function(e){var r=this;this._loaded=!1;var n=t.extend({},this.workerOptions),i=this._data;"string"===typeof i?(n.request=this.map._requestManager.transformRequest(t.browser.resolveURL(i),t.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(i),this.actor.send(this.type+".loadData",n,function(t,i){r._removed||i&&i.abandoned||(r._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[r.id]&&(r._resourceTiming=i.resourceTiming[r.id].slice(0)),r.actor.send(r.type+".coalesce",{source:n.source},null),e(t))})},r.prototype.loaded=function(){return this._loaded},r.prototype.loadTile=function(e,r){var n=this,i=e.actor?"reloadTile":"loadTile";e.actor=this.actor;var o={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.request=this.actor.send(i,o,function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?r(null):t?r(t):(e.loadVectorData(o,n.map.painter,"reloadTile"===i),r(null))})},r.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},r.prototype.unloadTile=function(t){t.unloadVectorData(),t.clearMask(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},r.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},r.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},r.prototype.hasTransition=function(){return!1},r}(t.Evented),O=function(e){function r(t,r,n,i){e.call(this),this.id=t,this.dispatcher=n,this.coordinates=r.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=r}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(e,r){var n=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(i,o){n._loaded=!0,i?n.fire(new t.ErrorEvent(i)):o&&(n.image=o,e&&(n.coordinates=e),r&&r(),n._finishLoading())})},r.prototype.loaded=function(){return this._loaded},r.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null}),this):this},r.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.setCoordinates=function(e){var r=this;this.coordinates=e;var n=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=B(n),this.minzoom=this.maxzoom=this.tileID.z;var i=n.map(function(t){return r.tileID.getTilePoint(t)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},r.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,r=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[n];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},r.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},r.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},r.prototype.hasTransition=function(){return!1},r}(t.Evented);function B(e){for(var r=1/0,n=1/0,i=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var u=s[a];r=Math.min(r,u.x),n=Math.min(n,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}var l=i-r,c=o-n,p=Math.max(l,c),h=Math.max(0,Math.floor(-Math.log(p)/Math.LN2)),f=Math.pow(2,h);return new t.CanonicalTileID(h,Math.floor((r+i)/2*f),Math.floor((n+o)/2*f))}var R=function(e){function r(t,r,n,i){e.call(this,t,r,n,i),this.roundZoom=!0,this.type="video",this.options=r}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){var e=this;this._loaded=!1;var r=this.options;this.urls=[];for(var n=0,i=r.urls;n<i.length;n+=1){var o=i[n];this.urls.push(this.map._requestManager.transformRequest(o,t.ResourceType.Source).url)}t.getVideo(this.urls,function(r,n){e._loaded=!0,r?e.fire(new t.ErrorEvent(r)):n&&(e.video=n,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},r.prototype.pause=function(){this.video&&this.video.pause()},r.prototype.play=function(){this.video&&this.video.play()},r.prototype.seek=function(e){if(this.video){var r=this.video.seekable;e<r.start(0)||e>r.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+r.start(0)+" and "+r.end(0)+"-second mark."))):this.video.currentTime=e}},r.prototype.getVideo=function(){return this.video},r.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},r.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,r=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[n];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},r.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},r.prototype.hasTransition=function(){return this.video&&!this.video.paused},r}(O),F=function(e){function r(r,n,i,o){e.call(this,r,n,i,o),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!==typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'missing required property "coordinates"'))),n.animate&&"boolean"!==typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"===typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},r.prototype.getCanvas=function(){return this.canvas},r.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},r.prototype.onRemove=function(){this.pause()},r.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var r=this.map.painter.context,n=r.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(r,this.canvas,n.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},r.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},r.prototype.hasTransition=function(){return this._playing},r.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var r=e[t];if(isNaN(r)||r<=0)return!0}return!1},r}(O),U={vector:M,raster:z,"raster-dem":L,geojson:D,video:R,image:O,canvas:F},j=function(e,r,n,i){var o=new U[r.type](e,r,n,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o},N=function(t){return U[t]},V=function(t,e){U[t]=e};function q(e,r){var n=t.identity([]);return t.translate(n,n,[1,1,0]),t.scale(n,n,[.5*e.width,.5*e.height,1]),t.multiply(n,n,e.calculatePosMatrix(r.toUnwrapped()))}function Z(t,e,r){if(t)for(var n=0,i=t;n<i.length;n+=1){var o=i[n],a=e[o];if(a&&a.source===r&&"fill-extrusion"===a.type)return!0}else for(var s in e){var u=e[s];if(u.source===r&&"fill-extrusion"===u.type)return!0}return!1}function G(t,e,r,n,i){var o=Z(n&&n.layers,e,t.id),a=i.maxPitchScaleFactor(),s=t.tilesIn(r,a,o);s.sort($);for(var u=[],l=0,c=s;l<c.length;l+=1){var p=c[l];u.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(e,t._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,n,i,a,q(t.transform,p.tileID))})}var h=H(u);for(var f in h)h[f].forEach(function(e){var r=e.feature,n=t.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=n});return h}function X(e,r,n,i,o,a){for(var s={},u=o.queryRenderedSymbols(n),l=[],c=0,p=Object.keys(u).map(Number);c<p.length;c+=1){var h=p[c];l.push(a[h])}l.sort($);for(var f=function(){var r=m[d],n=r.featureIndex.lookupSymbolFeatures(u[r.bucketInstanceId],r.bucketIndex,r.sourceLayerIndex,i.filter,i.layers,e);for(var o in n){var a=s[o]=s[o]||[],l=n[o];l.sort(function(e,n){var i=r.featureSortOrder;if(i){var o=i.indexOf(e.featureIndex),a=i.indexOf(n.featureIndex);return t.assert(o>=0),t.assert(a>=0),a-o}return n.featureIndex-e.featureIndex});for(var c=0,p=l;c<p.length;c+=1){var h=p[c];a.push(h)}}},d=0,m=l;d<m.length;d+=1)f();var y=function(t){s[t].forEach(function(n){var i=n.feature,o=e[t],a=r[o.source],s=a.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=s})};for(var v in s)y(v);return s}function W(t,e){for(var r=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),n=[],i={},o=0;o<r.length;o++){var a=r[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(n,e))}return n}function $(t,e){var r=t.tileID,n=e.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}function H(t){for(var e={},r={},n=0,i=t;n<i.length;n+=1){var o=i[n],a=o.queryResults,s=o.wrappedTileID,u=r[s]=r[s]||{};for(var l in a)for(var c=a[l],p=u[l]=u[l]||{},h=e[l]=e[l]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];p[m.featureIndex]||(p[m.featureIndex]=!0,h.push(m))}}return e}var K=function(t,e){this.max=t,this.onRemove=e,this.reset()};K.prototype.reset=function(){for(var t in this.data)for(var e=0,r=this.data[t];e<r.length;e+=1){var n=r[e];n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value)}return this.data={},this.order=[],this},K.prototype.add=function(t,e,r){var n=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==r&&(o.timeout=setTimeout(function(){n.remove(t,o)},r)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},K.prototype.has=function(t){return t.wrapped().key in this.data},K.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},K.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},K.prototype.get=function(t){if(!this.has(t))return null;var e=this.data[t.wrapped().key][0];return e.value},K.prototype.remove=function(t,e){if(!this.has(t))return this;var r=t.wrapped().key,n=void 0===e?0:this.data[r].indexOf(e),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this},K.prototype.setMaxSize=function(t){this.max=t;while(this.order.length>this.max){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},K.prototype.filter=function(t){var e=[];for(var r in this.data)for(var n=0,i=this.data[r];n<i.length;n+=1){var o=i[n];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var u=s[a];this.remove(u.value.tileID,u)}};var Y=function(t,e,r){this.context=t;var n=t.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Y.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Y.prototype.updateData=function(e){var r=this.context.gl;t.assert(this.dynamicDraw),this.context.unbindVAO(),this.bind(),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},Y.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var J={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Q=function(t,e,r,n){this.length=e.length,this.attributes=r,this.itemSize=e.bytesPerElement,this.dynamicDraw=n,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Q.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Q.prototype.updateData=function(e){t.assert(e.length===this.length);var r=this.context.gl;this.bind(),r.bufferSubData(r.ARRAY_BUFFER,0,e.arrayBuffer)},Q.prototype.enableAttributes=function(t,e){for(var r=0;r<this.attributes.length;r++){var n=this.attributes[r],i=e.attributes[n.name];void 0!==i&&t.enableVertexAttribArray(i)}},Q.prototype.setVertexAttribPointers=function(t,e,r){for(var n=0;n<this.attributes.length;n++){var i=this.attributes[n],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[J[i.type]],!1,this.itemSize,i.offset+this.itemSize*(r||0))}},Q.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var tt=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};tt.prototype.get=function(){return this.current},tt.prototype.set=function(t){},tt.prototype.getDefault=function(){return this.default},tt.prototype.setDefault=function(){this.set(this.default)};var et=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getDefault=function(){return t.Color.transparent},r.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},r}(tt),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(tt),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(tt),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(tt),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(tt),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(tt),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(tt),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(tt),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(tt),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(tt),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(tt),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(tt),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(tt),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(tt),mt=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getDefault=function(){return t.Color.transparent},r.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},r}(tt),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(tt),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(tt),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(tt),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(tt),xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(tt),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(tt),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(tt),St=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(tt),Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(tt),Tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(tt),At=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(tt),kt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(tt),It=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(tt),Ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(tt),Pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(tt),Mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(tt),zt=function(t){function e(e,r){t.call(this,e),this.context=e,this.parent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e}(tt),Lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(zt),Dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(zt),Ot=function(t,e,r){this.context=t,this.width=e,this.height=r;var n=t.gl,i=this.framebuffer=n.createFramebuffer();this.colorAttachment=new Lt(t,i),this.depthAttachment=new Dt(t,i)};Ot.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var r=this.depthAttachment.get();r&&t.deleteRenderbuffer(r),t.deleteFramebuffer(this.framebuffer)};var Bt=519,Rt=function(t,e,r){this.func=t,this.mask=e,this.range=r};Rt.ReadOnly=!1,Rt.ReadWrite=!0,Rt.disabled=new Rt(Bt,Rt.ReadOnly,[0,1]);var Ft=519,Ut=7680,jt=function(t,e,r,n,i,o){this.test=t,this.ref=e,this.mask=r,this.fail=n,this.depthFail=i,this.pass=o};jt.disabled=new jt({func:Ft,mask:0},0,0,Ut,Ut,Ut);var Nt=0,Vt=1,qt=771,Zt=function(t,e,r){this.blendFunction=t,this.blendColor=e,this.mask=r};Zt.Replace=[Vt,Nt],Zt.disabled=new Zt(Zt.Replace,t.Color.transparent,[!1,!1,!1,!1]),Zt.unblended=new Zt(Zt.Replace,t.Color.transparent,[!0,!0,!0,!0]),Zt.alphaBlended=new Zt([Vt,qt],t.Color.transparent,[!0,!0,!0,!0]);var Gt=1029,Xt=2305,Wt=function(t,e,r){this.enable=t,this.mode=e,this.frontFace=r};Wt.disabled=new Wt(!1,Gt,Xt),Wt.backCCW=new Wt(!0,Gt,Xt);var $t=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new et(this),this.clearDepth=new rt(this),this.clearStencil=new nt(this),this.colorMask=new it(this),this.depthMask=new ot(this),this.stencilMask=new at(this),this.stencilFunc=new st(this),this.stencilOp=new ut(this),this.stencilTest=new lt(this),this.depthRange=new ct(this),this.depthTest=new pt(this),this.depthFunc=new ht(this),this.blend=new ft(this),this.blendFunc=new dt(this),this.blendColor=new mt(this),this.blendEquation=new yt(this),this.cullFace=new vt(this),this.cullFaceSide=new gt(this),this.frontFace=new _t(this),this.program=new xt(this),this.activeTexture=new bt(this),this.viewport=new wt(this),this.bindFramebuffer=new St(this),this.bindRenderbuffer=new Et(this),this.bindTexture=new Tt(this),this.bindVertexBuffer=new At(this),this.bindElementBuffer=new kt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new It(this),this.pixelStoreUnpack=new Ct(this),this.pixelStoreUnpackPremultiplyAlpha=new Pt(this),this.pixelStoreUnpackFlipY=new Mt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query")};$t.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},$t.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},$t.prototype.createIndexBuffer=function(t,e){return new Y(this,t,e)},$t.prototype.createVertexBuffer=function(t,e,r){return new Q(this,t,e,r)},$t.prototype.createRenderbuffer=function(t,e,r){var n=this.gl,i=n.createRenderbuffer();return this.bindRenderbuffer.set(i),n.renderbufferStorage(n.RENDERBUFFER,t,e,r),this.bindRenderbuffer.set(null),i},$t.prototype.createFramebuffer=function(t,e){return new Ot(this,t,e)},$t.prototype.clear=function(t){var e=t.color,r=t.depth,n=this.gl,i=0;e&&(i|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),"undefined"!==typeof r&&(i|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),n.clear(i)},$t.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},$t.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},$t.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},$t.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,Zt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},$t.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ht=function(e){function r(r,n,i){var o=this;e.call(this),this.id=r,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=j(r,n,i,this),this._tiles={},this._cache=new K(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},r.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},r.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},r.prototype.getSource=function(){return this._source},r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},r.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},r.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},r.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},r.prototype.serialize=function(){return this._source.serialize()},r.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var r=this._tiles[e];r.upload(t),r.prepare(this.map.style.imageManager)}},r.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(Kt)},r.prototype.getRenderableIds=function(e){var r=this,n=[];for(var i in this._tiles)this._isIdRenderable(+i,e)&&n.push(+i);return e?n.sort(function(e,n){var i=r._tiles[e].tileID,o=r._tiles[n].tileID,a=new t.Point(i.canonical.x,i.canonical.y)._rotate(r.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(r.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x}):n.sort(Kt)},r.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},r.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},r.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},r.prototype._reloadTile=function(t,e){var r=this._tiles[t];r&&("loading"!==r.state&&(r.state=e),this._loadTile(r,this._tileLoaded.bind(this,r,t,e)))},r.prototype._tileLoaded=function(e,r,n,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},r.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),r=0;r<e.length;r++){var n=e[r];if(t.neighboringTiles&&t.neighboringTiles[n]){var i=this.getTileByID(n);o(t,i),o(i,t)}}function o(t,e){t.needsHillshadePrepare=!0;var r=e.tileID.canonical.x-t.tileID.canonical.x,n=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,r,n),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},r.prototype.getTile=function(t){return this.getTileByID(t.key)},r.prototype.getTileByID=function(t){return this._tiles[t]},r.prototype._retainLoadedChildren=function(t,e,r,n){for(var i in this._tiles){var o=this._tiles[i];if(!(n[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>r)){var a=o.tileID;while(o&&o.tileID.overscaledZ>e+1){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[s.key],o&&o.hasData()&&(a=s)}var u=a;while(u.overscaledZ>e)if(u=u.scaledTo(u.overscaledZ-1),t[u.key]){n[a.key]=a;break}}}},r.prototype.findLoadedParent=function(t,e){for(var r=t.overscaledZ-1;r>=e;r--){var n=t.scaledTo(r);if(!n)return;var i=String(n.key),o=this._tiles[i];if(o&&o.hasData())return o;if(this._cache.has(n))return this._cache.get(n)}},r.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,r=Math.ceil(t.height/this._source.tileSize)+1,n=e*r,i=5,o=Math.floor(n*i),a="number"===typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(a)},r.prototype.handleWrapJump=function(t){var e=void 0===this._prevLng?t:this._prevLng,r=t-e,n=r/360,i=Math.round(n);if(this._prevLng=t,i){var o={};for(var a in this._tiles){var s=this._tiles[a];s.tileID=s.tileID.unwrapTo(s.tileID.wrap+i),o[s.tileID.key]=s}for(var u in this._tiles=o,this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(var l in this._tiles){var c=this._tiles[l];this._setTileReloadTimer(l,c)}}},r.prototype.update=function(e){var n=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return n._source.hasTile(t)}))):i=[];var o=e.coveringZoomLevel(this._source),a=Math.max(o-r.maxOverzooming,this._source.minzoom),s=Math.max(o+r.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(i,o);if(Yt(this._source.type)){for(var l={},c={},p=Object.keys(u),h=0,f=p;h<f.length;h+=1){var d=f[h],m=u[d];t.assert(m.key===+d);var y=this._tiles[d];if(y&&!(y.fadeEndTime&&y.fadeEndTime<=t.browser.now())){var v=this.findLoadedParent(m,a);v&&(this._addTile(v.tileID),l[v.tileID.key]=v.tileID),c[d]=m}}for(var g in this._retainLoadedChildren(c,o,s,u),l)u[g]||(this._coveredTiles[g]=!0,u[g]=l[g])}for(var _ in u)this._tiles[_].clearFadeHold();for(var x=t.keysDifference(this._tiles,u),b=0,w=x;b<w.length;b+=1){var S=w[b],E=this._tiles[S];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(this.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||this._removeTile(S)}}},r.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},r.prototype._updateRetainedTiles=function(t,e){for(var n={},i={},o=Math.max(e-r.maxOverzooming,this._source.minzoom),a=Math.max(e+r.maxUnderzooming,this._source.minzoom),s={},u=0,l=t;u<l.length;u+=1){var c=l[u],p=this._addTile(c);n[c.key]=c,p.hasData()||e<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,e,a,n);for(var h=0,f=t;h<f.length;h+=1){var d=f[h],m=this._tiles[d.key];if(!m.hasData()){if(e+1>this._source.maxzoom){var y=d.children(this._source.maxzoom)[0],v=this.getTile(y);if(v&&v.hasData()){n[y.key]=y;continue}}else{var g=d.children(this._source.maxzoom);if(n[g[0].key]&&n[g[1].key]&&n[g[2].key]&&n[g[3].key])continue}for(var _=m.wasRequested(),x=d.overscaledZ-1;x>=o;--x){var b=d.scaledTo(x);if(i[b.key])break;if(i[b.key]=!0,m=this.getTile(b),!m&&_&&(m=this._addTile(b)),m&&(n[b.key]=b,_=m.wasRequested(),m.hasData()))break}}}return n},r.prototype._addTile=function(e){var r=this._tiles[e.key];if(r)return r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));var n=Boolean(r);return n||(r=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(r,this._tileLoaded.bind(this,r,e.key,r.state))),r?(r.uses++,this._tiles[e.key]=r,n||this._source.fire(new t.Event("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r):null},r.prototype._setTileReloadTimer=function(t,e){var r=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout(function(){r._reloadTile(t,"expired"),delete r._timers[t]},n))},r.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},r.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},r.prototype.tilesIn=function(e,r,n){var i=this,o=[],a=this.transform;if(!a)return o;for(var s=n?a.getCameraQueryGeometry(e):e,u=e.map(function(t){return a.pointCoordinate(t)}),l=s.map(function(t){return a.pointCoordinate(t)}),c=this.getIds(),p=1/0,h=1/0,f=-1/0,d=-1/0,m=0,y=l;m<y.length;m+=1){var v=y[m];p=Math.min(p,v.x),h=Math.min(h,v.y),f=Math.max(f,v.x),d=Math.max(d,v.y)}for(var g=function(e){var n=i._tiles[c[e]];if(!n.holdingForFade()){var s=n.tileID,m=Math.pow(2,a.zoom-n.tileID.overscaledZ),y=r*n.queryPadding*t.EXTENT/n.tileSize/m,v=[s.getTilePoint(new t.MercatorCoordinate(p,h)),s.getTilePoint(new t.MercatorCoordinate(f,d))];if(v[0].x-y<t.EXTENT&&v[0].y-y<t.EXTENT&&v[1].x+y>=0&&v[1].y+y>=0){var g=u.map(function(t){return s.getTilePoint(t)}),_=l.map(function(t){return s.getTilePoint(t)});o.push({tile:n,tileID:s,queryGeometry:g,cameraQueryGeometry:_,scale:m})}}},_=0;_<c.length;_++)g(_);return o},r.prototype.getVisibleCoordinates=function(t){for(var e=this,r=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),n=0,i=r;n<i.length;n+=1){var o=i[n];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return r},r.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Yt(this._source.type))for(var e in this._tiles){var r=this._tiles[e];if(void 0!==r.fadeEndTime&&r.fadeEndTime>=t.browser.now())return!0}return!1},r.prototype.setFeatureState=function(t,e,r){t=t||"_geojsonTileLayer",this._state.updateState(t,e,r)},r.prototype.removeFeatureState=function(t,e,r){t=t||"_geojsonTileLayer",this._state.removeFeatureState(t,e,r)},r.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},r.prototype.setDependencies=function(t,e,r){var n=this._tiles[t];n&&n.setDependencies(e,r)},r.prototype.reloadTilesForDependencies=function(t,e){for(var r in this._tiles){var n=this._tiles[r];n.hasDependency(t,e)&&this._reloadTile(r,"reloading")}this._cache.filter(function(r){return!r.hasDependency(t,e)})},r}(t.Evented);function Kt(t,e){return t%32-e%32||e-t}function Yt(t){return"raster"===t||"image"===t||"video"===t}function Jt(){return new t.window.Worker(Xa.workerUrl)}Ht.maxOverzooming=10,Ht.maxUnderzooming=3;var Qt=function(){this.active={}};Qt.prototype.acquire=function(t){if(!this.workers){this.workers=[];while(this.workers.length<Qt.workerCount)this.workers.push(new Jt)}return this.active[t]=!0,this.workers.slice()},Qt.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var te,ee=Math.floor(t.browser.hardwareConcurrency/2);function re(){return te||(te=new Qt),te}function ne(e,r){var n={};for(var i in e)"ref"!==i&&(n[i]=e[i]);return t.refProperties.forEach(function(t){t in r&&(n[t]=r[t])}),n}function ie(t){t=t.slice();for(var e=Object.create(null),r=0;r<t.length;r++)e[t[r].id]=t[r];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=ne(t[n],e[t[n].ref]));return t}Qt.workerCount=Math.max(Math.min(ee,6),1);var oe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ae(t,e,r){r.push({command:oe.addSource,args:[t,e[t]]})}function se(t,e,r){e.push({command:oe.removeSource,args:[t]}),r[t]=!0}function ue(t,e,r,n){se(t,r,n),ae(t,e,r)}function le(e,r,n){var i;for(i in e[n])if(e[n].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[n][i],r[n][i]))return!1;for(i in r[n])if(r[n].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[n][i],r[n][i]))return!1;return!0}function ce(e,r,n,i){var o;for(o in e=e||{},r=r||{},e)e.hasOwnProperty(o)&&(r.hasOwnProperty(o)||se(o,n,i));for(o in r)r.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],r[o])||("geojson"===e[o].type&&"geojson"===r[o].type&&le(e,r,o)?n.push({command:oe.setGeoJSONSourceData,args:[o,r[o].data]}):ue(o,r,n,i)):ae(o,r,n))}function pe(e,r,n,i,o,a){var s;for(s in e=e||{},r=r||{},e)e.hasOwnProperty(s)&&(t.deepEqual(e[s],r[s])||n.push({command:a,args:[i,s,r[s],o]}));for(s in r)r.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],r[s])||n.push({command:a,args:[i,s,r[s],o]}))}function he(t){return t.id}function fe(t,e){return t[e.id]=e,t}function de(e,r,n){e=e||[],r=r||[];var i,o,a,s,u,l,c,p=e.map(he),h=r.map(he),f=e.reduce(fe,{}),d=r.reduce(fe,{}),m=p.slice(),y=Object.create(null);for(i=0,o=0;i<p.length;i++)a=p[i],d.hasOwnProperty(a)?o++:(n.push({command:oe.removeLayer,args:[a]}),m.splice(m.indexOf(a,o),1));for(i=0,o=0;i<h.length;i++)a=h[h.length-1-i],m[m.length-1-i]!==a&&(f.hasOwnProperty(a)?(n.push({command:oe.removeLayer,args:[a]}),m.splice(m.lastIndexOf(a,m.length-o),1)):o++,l=m[m.length-i],n.push({command:oe.addLayer,args:[d[a],l]}),m.splice(m.length-i,0,a),y[a]=!0);for(i=0;i<h.length;i++)if(a=h[i],s=f[a],u=d[a],!y[a]&&!t.deepEqual(s,u))if(t.deepEqual(s.source,u.source)&&t.deepEqual(s["source-layer"],u["source-layer"])&&t.deepEqual(s.type,u.type)){for(c in pe(s.layout,u.layout,n,a,null,oe.setLayoutProperty),pe(s.paint,u.paint,n,a,null,oe.setPaintProperty),t.deepEqual(s.filter,u.filter)||n.push({command:oe.setFilter,args:[a,u.filter]}),t.deepEqual(s.minzoom,u.minzoom)&&t.deepEqual(s.maxzoom,u.maxzoom)||n.push({command:oe.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?pe(s[c],u[c],n,a,c.slice(6),oe.setPaintProperty):t.deepEqual(s[c],u[c])||n.push({command:oe.setLayerProperty,args:[a,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?pe(s[c],u[c],n,a,c.slice(6),oe.setPaintProperty):t.deepEqual(s[c],u[c])||n.push({command:oe.setLayerProperty,args:[a,c,u[c]]}))}else n.push({command:oe.removeLayer,args:[a]}),l=m[m.lastIndexOf(a)+1],n.push({command:oe.addLayer,args:[u,l]})}function me(e,r){if(!e)return[{command:oe.setStyle,args:[r]}];var n=[];try{if(!t.deepEqual(e.version,r.version))return[{command:oe.setStyle,args:[r]}];t.deepEqual(e.center,r.center)||n.push({command:oe.setCenter,args:[r.center]}),t.deepEqual(e.zoom,r.zoom)||n.push({command:oe.setZoom,args:[r.zoom]}),t.deepEqual(e.bearing,r.bearing)||n.push({command:oe.setBearing,args:[r.bearing]}),t.deepEqual(e.pitch,r.pitch)||n.push({command:oe.setPitch,args:[r.pitch]}),t.deepEqual(e.sprite,r.sprite)||n.push({command:oe.setSprite,args:[r.sprite]}),t.deepEqual(e.glyphs,r.glyphs)||n.push({command:oe.setGlyphs,args:[r.glyphs]}),t.deepEqual(e.transition,r.transition)||n.push({command:oe.setTransition,args:[r.transition]}),t.deepEqual(e.light,r.light)||n.push({command:oe.setLight,args:[r.light]});var i={},o=[];ce(e.sources,r.sources,o,i);var a=[];e.layers&&e.layers.forEach(function(t){i[t.source]?n.push({command:oe.removeLayer,args:[t.id]}):a.push(t)}),n=n.concat(o),de(a,r.layers,n)}catch(s){console.warn("Unable to compute style diff:",s),n=[{command:oe.setStyle,args:[r]}]}return n}var ye=function(t,e,r){var n=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(e/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)n.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function ve(e,r,n,i,o){var a=t.create();return r?(t.scale(a,a,[1/o,1/o,1]),n||t.rotateZ(a,a,i.angle)):t.multiply(a,i.labelPlaneMatrix,e),a}function ge(e,r,n,i,o){if(r){var a=t.clone(e);return t.scale(a,a,[o,o,1]),n||t.rotateZ(a,a,-i.angle),a}return i.glCoordMatrix}function _e(e,r){var n=[e.x,e.y,0,1];Ce(n,n,r);var i=n[3];return{point:new t.Point(n[0]/i,n[1]/i),signedDistanceFromCamera:i}}function xe(t,e){var r=t[0]/t[3],n=t[1]/t[3],i=r>=-e[0]&&r<=e[0]&&n>=-e[1]&&n<=e[1];return i}function be(e,r,n,i,o,a,s,u){var l=i?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(l,n.transform.zoom),p=[256/n.width*2+1,256/n.height*2+1],h=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;h.clear();for(var f=e.lineVertexArray,d=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=n.transform.width/n.transform.height,y=!1,v=0;v<d.length;v++){var g=d.get(v);if(g.hidden||g.writingMode===t.WritingMode.vertical&&!y)Ie(g.numGlyphs,h);else{y=!1;var _=[g.anchorX,g.anchorY,0,1];if(t.transformMat4(_,_,r),xe(_,p)){var x=_[3],b=.5+x/n.transform.cameraToCenterDistance*.5,w=t.evaluateSizeForFeature(l,c,g),S=s?w*b:w/b,E=new t.Point(g.anchorX,g.anchorY),T=_e(E,o).point,A={},k=Ee(g,S,!1,u,r,o,a,e.glyphOffsetArray,f,h,T,E,A,m);y=k.useVertical,(k.notEnoughRoom||y||k.needsFlipping&&Ee(g,S,!0,u,r,o,a,e.glyphOffsetArray,f,h,T,E,A,m).notEnoughRoom)&&Ie(g.numGlyphs,h)}else Ie(g.numGlyphs,h)}}i?e.text.dynamicLayoutVertexBuffer.updateData(h):e.icon.dynamicLayoutVertexBuffer.updateData(h)}function we(t,e,r,n,i,o,a,s,u,l,c,p){var h=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),y=e.getoffsetX(h-1),v=Ae(t*m,r,n,i,o,a,s.segment,f,d,u,l,c,p);if(!v)return null;var g=Ae(t*y,r,n,i,o,a,s.segment,f,d,u,l,c,p);return g?{first:v,last:g}:null}function Se(e,r,n,i){if(e===t.WritingMode.horizontal){var o=Math.abs(n.y-r.y),a=Math.abs(n.x-r.x)*i;if(o>a)return{useVertical:!0}}return(e===t.WritingMode.vertical?r.y<n.y:r.x>n.x)?{needsFlipping:!0}:null}function Ee(e,r,n,i,o,a,s,u,l,c,p,h,f,d){var m,y=r/24,v=e.lineOffsetX*y,g=e.lineOffsetY*y;if(e.numGlyphs>1){var _=e.glyphStartIndex+e.numGlyphs,x=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,w=we(y,u,v,g,n,p,h,e,l,a,f,!1);if(!w)return{notEnoughRoom:!0};var S=_e(w.first.point,s).point,E=_e(w.last.point,s).point;if(i&&!n){var T=Se(e.writingMode,S,E,d);if(T)return T}m=[w.first];for(var A=e.glyphStartIndex+1;A<_-1;A++)m.push(Ae(y*u.getoffsetX(A),v,g,n,p,h,e.segment,x,b,l,a,f,!1));m.push(w.last)}else{if(i&&!n){var k=_e(h,o).point,I=e.lineStartIndex+e.segment+1,C=new t.Point(l.getx(I),l.gety(I)),P=_e(C,o),M=P.signedDistanceFromCamera>0?P.point:Te(h,C,k,1,o),z=Se(e.writingMode,k,M,d);if(z)return z}var L=Ae(y*u.getoffsetX(e.glyphStartIndex),v,g,n,p,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,f,!1);if(!L)return{notEnoughRoom:!0};m=[L]}for(var D=0,O=m;D<O.length;D+=1){var B=O[D];t.addDynamicAttributes(c,B.point,B.angle)}return{}}function Te(t,e,r,n,i){var o=_e(t.add(t.sub(e)._unit()),i).point,a=r.sub(o);return r.add(a._mult(n/a.mag()))}function Ae(e,r,n,i,o,a,s,u,l,c,p,h,f){var d=i?e-r:e+r,m=d>0?1:-1,y=0;i&&(m*=-1,y=Math.PI),m<0&&(y+=Math.PI);var v=m>0?u+s:u+s+1,g=v,_=o,x=o,b=0,w=0,S=Math.abs(d);while(b+w<=S){if(v+=m,v<u||v>=l)return null;if(x=_,_=h[v],void 0===_){var E=new t.Point(c.getx(v),c.gety(v)),T=_e(E,p);if(T.signedDistanceFromCamera>0)_=h[v]=T.point;else{var A=v-m,k=0===b?a:new t.Point(c.getx(A),c.gety(A));_=Te(k,E,x,S-b+1,p)}}b+=w,w=x.dist(_)}var I=(S-b)/w,C=_.sub(x),P=C.mult(I)._add(x);P._add(C._unit()._perp()._mult(n*m));var M=y+Math.atan2(_.y-x.y,_.x-x.x);return{point:P,angle:M,tileDistance:f?{prevTileDistance:v-m===g?0:c.gettileUnitDistanceFromAnchor(v-m),lastSegmentViewportDistance:S-b}:null}}ye.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},ye.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},ye.prototype.insertCircle=function(t,e,r,n){this._forEachCell(e-n,r-n,e+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(r),this.circles.push(n)},ye.prototype._insertBoxCell=function(t,e,r,n,i,o){this.boxCells[i].push(o)},ye.prototype._insertCircleCell=function(t,e,r,n,i,o){this.circleCells[i].push(o)},ye.prototype._query=function(t,e,r,n,i,o){if(r<0||t>this.width||n<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=r&&this.height<=n){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],p=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-p,y1:c-p,x2:l+p,y2:c+p})}return o?a.filter(o):a}var h={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,r,n,this._queryCell,a,h,o),i?a.length>0:a},ye.prototype._queryCircle=function(t,e,r,n,i){var o=t-r,a=t+r,s=e-r,u=e+r;if(a<0||o>this.width||u<0||s>this.height)return!n&&[];var l=[],c={hitTest:n,circle:{x:t,y:e,radius:r},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,u,this._queryCellCircle,l,c,i),n?l.length>0:l},ye.prototype.query=function(t,e,r,n,i){return this._query(t,e,r,n,!1,i)},ye.prototype.hitTest=function(t,e,r,n,i){return this._query(t,e,r,n,!0,i)},ye.prototype.hitTestCircle=function(t,e,r,n){return this._queryCircle(t,e,r,!0,n)},ye.prototype._queryCell=function(t,e,r,n,i,o,a,s){var u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,p=0,h=l;p<h.length;p+=1){var f=h[p];if(!u.box[f]){u.box[f]=!0;var d=4*f;if(t<=c[d+2]&&e<=c[d+3]&&r>=c[d+0]&&n>=c[d+1]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var m=this.circleCells[i];if(null!==m)for(var y=this.circles,v=0,g=m;v<g.length;v+=1){var _=g[v];if(!u.circle[_]){u.circle[_]=!0;var x=3*_;if(this._circleAndRectCollide(y[x],y[x+1],y[x+2],t,e,r,n)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var b=y[x],w=y[x+1],S=y[x+2];o.push({key:this.circleKeys[_],x1:b-S,y1:w-S,x2:b+S,y2:w+S})}}}},ye.prototype._queryCellCircle=function(t,e,r,n,i,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var p=this.bboxes,h=0,f=c;h<f.length;h+=1){var d=f[h];if(!l.box[d]){l.box[d]=!0;var m=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,p[m+0],p[m+1],p[m+2],p[m+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var y=this.circleCells[i];if(null!==y)for(var v=this.circles,g=0,_=y;g<_.length;g+=1){var x=_[g];if(!l.circle[x]){l.circle[x]=!0;var b=3*x;if(this._circlesCollide(v[b],v[b+1],v[b+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[x])))return o.push(!0),!0}}},ye.prototype._forEachCell=function(t,e,r,n,i,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(r),p=this._convertToYCellCoord(n),h=u;h<=c;h++)for(var f=l;f<=p;f++){var d=this.xCellCount*f+h;if(i.call(this,t,e,r,n,d,o,a,s))return}},ye.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},ye.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},ye.prototype._circlesCollide=function(t,e,r,n,i,o){var a=n-t,s=i-e,u=r+o;return u*u>a*a+s*s},ye.prototype._circleAndRectCollide=function(t,e,r,n,i,o,a){var s=(o-n)/2,u=Math.abs(t-(n+s));if(u>s+r)return!1;var l=(a-i)/2,c=Math.abs(e-(i+l));if(c>l+r)return!1;if(u<=s||c<=l)return!0;var p=u-s,h=c-l;return p*p+h*h<=r*r};var ke=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ie(t,e){for(var r=0;r<t;r++){var n=e.length;e.resize(n+4),e.float32.set(ke,3*n)}}function Ce(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t[3]=r[3]*n+r[7]*i+r[15],t}var Pe=100,Me=function(t,e,r){void 0===e&&(e=new ye(t.width+2*Pe,t.height+2*Pe,25)),void 0===r&&(r=new ye(t.width+2*Pe,t.height+2*Pe,25)),this.transform=t,this.grid=e,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Pe,this.screenBottomBoundary=t.height+Pe,this.gridRightBoundary=t.width+2*Pe,this.gridBottomBoundary=t.height+2*Pe};function ze(t,e,r){t[e+4]=r?1:0}function Le(e,r,n){return r*(t.EXTENT/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}Me.prototype.placeCollisionBox=function(t,e,r,n,i){var o=this.projectAndGetPerspectiveRatio(n,t.anchorPointX,t.anchorPointY),a=r*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!e&&this.grid.hitTest(s,u,l,c,i)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},Me.prototype.approximateTileDistance=function(t,e,r,n,i){var o=i?1:n/this.pitchfactor,a=t.lastSegmentViewportDistance*r;return t.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(e))},Me.prototype.placeCollisionCircles=function(e,r,n,i,o,a,s,u,l,c,p,h,f){var d=[],m=this.projectAnchor(l,o.anchorX,o.anchorY),y={},v=u/24,g=o.lineOffsetX*u,_=o.lineOffsetY*u,x=new t.Point(o.anchorX,o.anchorY),b=_e(x,c).point,w=we(v,s,g,_,!1,b,x,o,a,c,y,!0),S=!1,E=!1,T=!0,A=m.perspectiveRatio*i,k=1/(i*n),I=0,C=0;w&&(I=this.approximateTileDistance(w.first.tileDistance,w.first.angle,k,m.cameraDistance,h),C=this.approximateTileDistance(w.last.tileDistance,w.last.angle,k,m.cameraDistance,h));for(var P=0;P<e.length;P+=5){var M=e[P],z=e[P+1],L=e[P+2],D=e[P+3];if(!w||D<-I||D>C)ze(e,P,!1);else{var O=this.projectPoint(l,M,z),B=L*A,R=d.length>0;if(R){var F=O.x-d[d.length-4],U=O.y-d[d.length-3],j=B*B*2>F*F+U*U;if(j){var N=P+8<e.length;if(N){var V=e[P+8];if(V>-I&&V<C){ze(e,P,!1);continue}}}}var q=P/5;d.push(O.x,O.y,B,q),ze(e,P,!0);var Z=O.x-B,G=O.y-B,X=O.x+B,W=O.y+B;if(T=T&&this.isOffscreen(Z,G,X,W),E=E||this.isInsideGrid(Z,G,X,W),!r&&this.grid.hitTestCircle(O.x,O.y,B,f)){if(!p)return{circles:[],offscreen:!1};S=!0}}}return{circles:S||!E?[]:d,offscreen:T}},Me.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var r=[],n=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var l=u[s],c=new t.Point(l.x+Pe,l.y+Pe);n=Math.min(n,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),r.push(c)}for(var p=this.grid.query(n,i,o,a).concat(this.ignoredGrid.query(n,i,o,a)),h={},f={},d=0,m=p;d<m.length;d+=1){var y=m[d],v=y.key;if(void 0===h[v.bucketInstanceId]&&(h[v.bucketInstanceId]={}),!h[v.bucketInstanceId][v.featureIndex]){var g=[new t.Point(y.x1,y.y1),new t.Point(y.x2,y.y1),new t.Point(y.x2,y.y2),new t.Point(y.x1,y.y2)];t.polygonIntersectsPolygon(r,g)&&(h[v.bucketInstanceId][v.featureIndex]=!0,void 0===f[v.bucketInstanceId]&&(f[v.bucketInstanceId]=[]),f[v.bucketInstanceId].push(v.featureIndex))}}return f},Me.prototype.insertCollisionBox=function(t,e,r,n,i){var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:r,featureIndex:n,collisionGroupID:i};o.insert(a,t[0],t[1],t[2],t[3])},Me.prototype.insertCollisionCircles=function(t,e,r,n,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:r,featureIndex:n,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},Me.prototype.projectAnchor=function(t,e,r){var n=[e,r,0,1];return Ce(n,n,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5,cameraDistance:n[3]}},Me.prototype.projectPoint=function(e,r,n){var i=[r,n,0,1];return Ce(i,i,e),new t.Point((i[0]/i[3]+1)/2*this.transform.width+Pe,(-i[1]/i[3]+1)/2*this.transform.height+Pe)},Me.prototype.projectAndGetPerspectiveRatio=function(e,r,n){var i=[r,n,0,1];Ce(i,i,e);var o=new t.Point((i[0]/i[3]+1)/2*this.transform.width+Pe,(-i[1]/i[3]+1)/2*this.transform.height+Pe);return{point:o,perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},Me.prototype.isOffscreen=function(t,e,r,n){return r<Pe||t>=this.screenRightBoundary||n<Pe||e>this.screenBottomBoundary},Me.prototype.isInsideGrid=function(t,e,r,n){return r>=0&&t<this.gridRightBoundary&&n>=0&&e<this.gridBottomBoundary};var De=function(t,e,r,n){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):n&&r?1:0,this.placed=r};De.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Oe=function(t,e,r,n,i){this.text=new De(t?t.text:null,e,r,i),this.icon=new De(t?t.icon:null,e,n,i)};Oe.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Be=function(t,e,r){this.text=t,this.icon=e,this.skipFade=r},Re=function(t,e,r,n,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=r,this.bucketIndex=n,this.tileID=i},Fe=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function Ue(e,r,n,i,o){var a=t.getAnchorAlignment(e),s=a.horizontalAlign,u=a.verticalAlign,l=-(s-.5)*r,c=-(u-.5)*n,p=t.evaluateVariableOffset(e,i);return new t.Point(l+p[0]*o,c+p[1]*o)}function je(e,r,n,i,o,a){var s=e.x1,u=e.x2,l=e.y1,c=e.y2,p=e.anchorPointX,h=e.anchorPointY,f=new t.Point(r,n);return i&&f._rotate(o?a:-a),{x1:s+f.x,y1:l+f.y,x2:u+f.x,y2:c+f.y,anchorPointX:p,anchorPointY:h}}Fe.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var Ne=function(t,e,r,n){this.transform=t.clone(),this.collisionIndex=new Me(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Fe(r),this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}};function Ve(t,e,r,n,i){t.emplaceBack(e?1:0,r?1:0,n||0,i||0),t.emplaceBack(e?1:0,r?1:0,n||0,i||0),t.emplaceBack(e?1:0,r?1:0,n||0,i||0),t.emplaceBack(e?1:0,r?1:0,n||0,i||0)}Ne.prototype.placeLayerTile=function(e,r,n,i){var o=r.getBucket(e),a=r.latestFeatureIndex;if(o&&a&&e.id===o.layerIds[0]){var s=r.collisionBoxArray,u=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,p=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),h=ve(p,"map"===u.get("text-pitch-alignment"),"map"===u.get("text-rotation-alignment"),this.transform,Le(r,1,this.transform.zoom)),f=ve(p,"map"===u.get("icon-pitch-alignment"),"map"===u.get("icon-rotation-alignment"),this.transform,Le(r,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new Re(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID),this.placeLayerBucket(o,p,h,f,l,c,n,r.holdingForFade(),i,s)}},Ne.prototype.attemptAnchorPlacement=function(e,r,n,i,o,a,s,u,l,c,p,h,f,d,m){var y,v=[h.textOffset0,h.textOffset1],g=Ue(e,n,i,v,o),_=this.collisionIndex.placeCollisionBox(je(r,g.x,g.y,a,s,this.transform.angle),p,u,l,c.predicate);if(m){var x=this.collisionIndex.placeCollisionBox(je(m,g.x,g.y,a,s,this.transform.angle),p,u,l,c.predicate);if(0===x.box.length)return}if(_.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(y=this.prevPlacement.variableOffsets[h.crossTileID].anchor),t.assert(0!==h.crossTileID),this.variableOffsets[h.crossTileID]={textOffset:v,width:n,height:i,anchor:e,textBoxScale:o,prevAnchor:y},this.markUsedJustification(f,e,h,d),f.allowVerticalPlacement&&(this.markUsedOrientation(f,d,h),this.placedOrientations[h.crossTileID]=d),{shift:g,placedGlyphBoxes:_}},Ne.prototype.placeLayerBucket=function(e,r,n,i,o,a,s,u,l,c){var p=this,h=e.layers[0].layout,f=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom),d=h.get("text-optional"),m=h.get("icon-optional"),y=h.get("text-allow-overlap"),v=h.get("icon-allow-overlap"),g=y&&(v||!e.hasIconData()||m),_=v&&(y||!e.hasTextData()||d),x=this.collisionGroups.get(e.sourceID),b="map"===h.get("text-rotation-alignment"),w="map"===h.get("text-pitch-alignment"),S="none"!==h.get("icon-text-fit"),E="viewport-y"===h.get("symbol-z-order");!e.collisionArrays&&c&&e.deserializeCollisionBoxes(c);var T=function(i,c){if(!l[i.crossTileID])if(u)p.placements[i.crossTileID]=new Be(!1,!1,!1);else{var E=!1,T=!1,A=!0,k=null,I={box:null,offscreen:null},C={box:null,offscreen:null},P=null,M=null,z=null,L=0,D=0,O=0;c.textFeatureIndex&&(L=c.textFeatureIndex),c.verticalTextFeatureIndex&&(D=c.verticalTextFeatureIndex);var B=c.textBox;if(B){var R=function(r){var n=t.WritingMode.horizontal;if(e.allowVerticalPlacement&&!r&&p.prevPlacement){var o=p.prevPlacement.placedOrientations[i.crossTileID];o&&(p.placedOrientations[i.crossTileID]=o,n=o,p.markUsedOrientation(e,n,i))}return n},F=function(r,n){if(e.allowVerticalPlacement&&i.numVerticalGlyphVertices>0&&c.verticalTextBox)for(var o=0,a=e.writingModes;o<a.length;o+=1){var s=a[o];if(s===t.WritingMode.vertical?(I=n(),C=I):I=r(),I&&I.box&&I.box.length)break}else I=r()};if(h.get("text-variable-anchor")){var U=h.get("text-variable-anchor");if(p.prevPlacement&&p.prevPlacement.variableOffsets[i.crossTileID]){var j=p.prevPlacement.variableOffsets[i.crossTileID];U.indexOf(j.anchor)>0&&(U=U.filter(function(t){return t!==j.anchor}),U.unshift(j.anchor))}var N=function(t,n,o){for(var s=t.x2-t.x1,u=t.y2-t.y1,l=i.textBoxScale,c=S&&!v?n:null,h={box:[],offscreen:!1},f=y?2*U.length:U.length,d=0;d<f;++d){var m=U[d%U.length],g=d>=U.length,_=p.attemptAnchorPlacement(m,t,s,u,l,b,w,a,r,x,g,i,e,o,c);if(_&&(h=_.placedGlyphBoxes,h&&h.box&&h.box.length)){E=!0,k=_.shift;break}}return h},V=function(){return N(B,c.iconBox,t.WritingMode.horizontal)},q=function(){var r=c.verticalTextBox,n=I&&I.box&&I.box.length;return e.allowVerticalPlacement&&!n&&i.numVerticalGlyphVertices>0&&r?N(r,c.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}};F(V,q),I&&(E=I.box,A=I.offscreen);var Z=R(I&&I.box);if(!E&&p.prevPlacement){var G=p.prevPlacement.variableOffsets[i.crossTileID];G&&(p.variableOffsets[i.crossTileID]=G,p.markUsedJustification(e,G.anchor,i,Z))}}else{var X=function(t,n){var o=p.collisionIndex.placeCollisionBox(t,h.get("text-allow-overlap"),a,r,x.predicate);return o&&o.box&&o.box.length&&(p.markUsedOrientation(e,n,i),p.placedOrientations[i.crossTileID]=n),o},W=function(){return X(B,t.WritingMode.horizontal)},$=function(){var r=c.verticalTextBox;return e.allowVerticalPlacement&&i.numVerticalGlyphVertices>0&&r?X(r,t.WritingMode.vertical):{box:null,offscreen:null}};F(W,$),R(I&&I.box&&I.box.length)}}P=I,E=P&&P.box&&P.box.length>0,A=P&&P.offscreen;var H=c.textCircles;if(H){var K=e.text.placedSymbolArray.get(i.centerJustifiedTextSymbolIndex),Y=t.evaluateSizeForFeature(e.textSizeData,f,K);M=p.collisionIndex.placeCollisionCircles(H,h.get("text-allow-overlap"),o,a,K,e.lineVertexArray,e.glyphOffsetArray,Y,r,n,s,w,x.predicate),E=h.get("text-allow-overlap")||M.circles.length>0,A=A&&M.offscreen}if(c.iconFeatureIndex&&(O=c.iconFeatureIndex),c.iconBox){var J=function(t){var e=S&&k?je(t,k.x,k.y,b,w,p.transform.angle):t;return p.collisionIndex.placeCollisionBox(e,h.get("icon-allow-overlap"),a,r,x.predicate)};C&&C.box&&C.box.length&&c.verticalIconBox?(z=J(c.verticalIconBox),T=z.box.length>0):(z=J(c.iconBox),T=z.box.length>0),A=A&&z.offscreen}var Q=d||0===i.numHorizontalGlyphVertices&&0===i.numVerticalGlyphVertices,tt=m||0===i.numIconVertices;Q||tt?tt?Q||(T=T&&E):E=T&&E:T=E=T&&E,E&&P&&P.box&&(C&&C.box&&D?p.collisionIndex.insertCollisionBox(P.box,h.get("text-ignore-placement"),e.bucketInstanceId,D,x.ID):p.collisionIndex.insertCollisionBox(P.box,h.get("text-ignore-placement"),e.bucketInstanceId,L,x.ID)),T&&z&&p.collisionIndex.insertCollisionBox(z.box,h.get("icon-ignore-placement"),e.bucketInstanceId,O,x.ID),E&&M&&p.collisionIndex.insertCollisionCircles(M.circles,h.get("text-ignore-placement"),e.bucketInstanceId,L,x.ID),t.assert(0!==i.crossTileID),t.assert(0!==e.bucketInstanceId),p.placements[i.crossTileID]=new Be(E||g,T||_,A||e.justReloaded),l[i.crossTileID]=!0}};if(E)for(var A=e.getSortedSymbolIndexes(this.transform.angle),k=A.length-1;k>=0;--k){var I=A[k];T(e.symbolInstances.get(I),e.collisionArrays[I])}else for(var C=0;C<e.symbolInstances.length;++C)T(e.symbolInstances.get(C),e.collisionArrays[C]);e.justReloaded=!1},Ne.prototype.markUsedJustification=function(e,r,n,i){var o,a={left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex};o=i===t.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:a[t.getAnchorJustification(r)];for(var s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex],u=0,l=s;u<l.length;u+=1){var c=l[u];c>=0&&(e.text.placedSymbolArray.get(c).crossTileID=o>=0&&c!==o?0:n.crossTileID)}},Ne.prototype.markUsedOrientation=function(e,r,n){for(var i=r===t.WritingMode.horizontal||r===t.WritingMode.horizontalOnly?r:0,o=r===t.WritingMode.vertical?r:0,a=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex],s=0,u=a;s<u.length;s+=1){var l=u[s];e.text.placedSymbolArray.get(l).placedOrientation=i}n.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=o)},Ne.prototype.commit=function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var r=this.prevPlacement,n=!1;this.prevZoomAdjustment=r?r.zoomAdjustment(this.transform.zoom):0;var i=r?r.symbolFadeChange(e):1,o=r?r.opacities:{},a=r?r.variableOffsets:{},s=r?r.placedOrientations:{};for(var u in this.placements){var l=this.placements[u],c=o[u];c?(this.opacities[u]=new Oe(c,i,l.text,l.icon),n=n||l.text!==c.text.placed||l.icon!==c.icon.placed):(this.opacities[u]=new Oe(null,i,l.text,l.icon,l.skipFade),n=n||l.text||l.icon)}for(var p in o){var h=o[p];if(!this.opacities[p]){var f=new Oe(h,i,!1,!1);f.isHidden()||(this.opacities[p]=f,n=n||h.text.placed||h.icon.placed)}}for(var d in a)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=a[d]);for(var m in s)this.placedOrientations[m]||!this.opacities[m]||this.opacities[m].isHidden()||(this.placedOrientations[m]=s[m]);t.assert(!r||void 0!==r.lastPlacementChangeTime),n?this.lastPlacementChangeTime=e:"number"!==typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=r?r.lastPlacementChangeTime:e)},Ne.prototype.updateLayerOpacities=function(t,e){for(var r={},n=0,i=e;n<i.length;n+=1){var o=i[n],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,r,o.collisionBoxArray)}},Ne.prototype.updateBucketOpacities=function(e,r,n){var i=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear(),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexArray.clear(),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexArray.clear();var o=e.layers[0].layout,a=new Oe(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),l=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),p="map"===o.get("text-pitch-alignment"),h="none"!==o.get("icon-text-fit"),f=new Oe(null,0,s&&(u||!e.hasIconData()||o.get("icon-optional")),u&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData())&&e.deserializeCollisionBoxes(n);for(var d=function(t,e,r){for(var n=0;n<e/4;n++)t.opacityVertexArray.emplaceBack(r)},m=function(n){var o=e.symbolInstances.get(n),s=o.numHorizontalGlyphVertices,u=o.numVerticalGlyphVertices,m=o.crossTileID,y=r[m],v=i.opacities[m];y?v=a:v||(v=f,i.opacities[m]=v),r[m]=!0;var g=s>0||u>0,_=o.numIconVertices>0,x=i.placedOrientations[o.crossTileID],b=x===t.WritingMode.vertical,w=x===t.WritingMode.horizontal||x===t.WritingMode.horizontalOnly;if(g){var S=Ke(v.text),E=b?Ye:S;d(e.text,s,E);var T=w?Ye:S;d(e.text,u,T);var A=v.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach(function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=A||b?1:0)}),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=A||w?1:0);var k=i.variableOffsets[o.crossTileID];k&&i.markUsedJustification(e,k.anchor,o,x);var I=i.placedOrientations[o.crossTileID];I&&(i.markUsedJustification(e,"left",o,I),i.markUsedOrientation(e,I,o))}if(_){var C=Ke(v.icon),P=!(h&&o.verticalPlacedIconSymbolIndex&&b);if(o.placedIconSymbolIndex>=0){var M=P?C:Ye;d(e.icon,o.numIconVertices,M),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=v.icon.isHidden()}if(o.verticalPlacedIconSymbolIndex>=0){var z=P?Ye:C;d(e.icon,o.numVerticalIconVertices,z),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=v.icon.isHidden()}}if(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData()){var L=e.collisionArrays[n];if(L){var D=new t.Point(0,0);if(L.textBox||L.verticalTextBox){var O=!0;if(l){var B=i.variableOffsets[m];B?(D=Ue(B.anchor,B.width,B.height,B.textOffset,B.textBoxScale),c&&D._rotate(p?i.transform.angle:-i.transform.angle)):O=!1}L.textBox&&Ve(e.textCollisionBox.collisionVertexArray,v.text.placed,!O||b,D.x,D.y),L.verticalTextBox&&Ve(e.textCollisionBox.collisionVertexArray,v.text.placed,!O||w,D.x,D.y)}var R=Boolean(!w&&L.verticalIconBox);L.iconBox&&Ve(e.iconCollisionBox.collisionVertexArray,v.icon.placed,R,h?D.x:0,h?D.y:0),L.verticalIconBox&&Ve(e.iconCollisionBox.collisionVertexArray,v.icon.placed,!R,h?D.x:0,h?D.y:0);var F=L.textCircles;if(F&&e.hasTextCollisionCircleData())for(var U=0;U<F.length;U+=5){var j=y||0===F[U+4];Ve(e.textCollisionCircle.collisionVertexArray,v.text.placed,j)}}}},y=0;y<e.symbolInstances.length;y++)m(y);e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexBuffer&&e.iconCollisionCircle.collisionVertexBuffer.updateData(e.iconCollisionCircle.collisionVertexArray),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexBuffer&&e.textCollisionCircle.collisionVertexBuffer.updateData(e.textCollisionCircle.collisionVertexArray),t.assert(e.text.opacityVertexArray.length===e.text.layoutVertexArray.length/4),t.assert(e.icon.opacityVertexArray.length===e.icon.layoutVertexArray.length/4)},Ne.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Ne.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},Ne.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},Ne.prototype.stillRecent=function(t,e){var r=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*r>t},Ne.prototype.setStale=function(){this.stale=!0};var qe=Math.pow(2,25),Ze=Math.pow(2,24),Ge=Math.pow(2,17),Xe=Math.pow(2,16),We=Math.pow(2,9),$e=Math.pow(2,8),He=Math.pow(2,1);function Ke(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,r=Math.floor(127*t.opacity);return r*qe+e*Ze+r*Ge+e*Xe+r*We+e*$e+r*He+e}var Ye=0,Je=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};Je.prototype.continuePlacement=function(t,e,r,n,i){while(this._currentTileIndex<t.length){var o=t[this._currentTileIndex];if(e.placeLayerTile(n,o,r,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0}};var Qe=function(t,e,r,n,i,o,a){this.placement=new Ne(t,i,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1};Qe.prototype.isDone=function(){return this._done},Qe.prototype.continuePlacement=function(e,r,n){var i=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!i._forceFullPlacement&&e>2};while(this._currentPlacementIndex>=0){var s=e[this._currentPlacementIndex],u=r[s],l=this.placement.collisionIndex.transform.zoom;if("symbol"===u.type&&(!u.minzoom||u.minzoom<=l)&&(!u.maxzoom||u.maxzoom>l)){this._inProgressLayer||(this._inProgressLayer=new Je);var c=this._inProgressLayer.continuePlacement(n[u.source],this.placement,this._showCollisionBoxes,u,a);if(c)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Qe.prototype.commit=function(t){return this.placement.commit(t),this.placement};var tr=512/t.EXTENT/2,er=function(t,e,r){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var n=0;n<e.length;n++){var i=e.get(n),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}};er.prototype.getScaledCoordinates=function(e,r){var n=r.canonical.z-this.tileID.canonical.z,i=tr/Math.pow(2,n);return{x:Math.floor((r.canonical.x*t.EXTENT+e.anchorX)*i),y:Math.floor((r.canonical.y*t.EXTENT+e.anchorY)*i)}},er.prototype.findMatches=function(t,e,r){for(var n=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,l=a;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=n&&Math.abs(c.coord.y-s.y)<=n&&!r[c.crossTileID]){r[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var rr=function(){this.maxCrossTileID=0};rr.prototype.generate=function(){return++this.maxCrossTileID};var nr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};nr.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var r in this.indexes){var n=this.indexes[r],i={};for(var o in n){var a=n[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[r]=i}this.lng=t},nr.prototype.addBucket=function(t,e,r){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var n=0;n<e.symbolInstances.length;n++){var i=e.symbolInstances.get(n);i.crossTileID=0}this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var o=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var s=this.indexes[a];if(Number(a)>t.overscaledZ)for(var u in s){var l=s[u];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,o)}else{var c=t.scaledTo(Number(a)),p=s[c.key];p&&p.findMatches(e.symbolInstances,t,o)}}for(var h=0;h<e.symbolInstances.length;h++){var f=e.symbolInstances.get(h);f.crossTileID||(f.crossTileID=r.generate(),o[f.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new er(t,e.symbolInstances,e.bucketInstanceId),!0},nr.prototype.removeBucketCrossTileIDs=function(t,e){for(var r in e.indexedSymbolInstances)for(var n=0,i=e.indexedSymbolInstances[r];n<i.length;n+=1){var o=i[n];delete this.usedCrossTileIDs[t][o.crossTileID]}},nr.prototype.removeStaleBuckets=function(t){var e=!1;for(var r in this.indexes){var n=this.indexes[r];for(var i in n)t[n[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[i]),delete n[i],e=!0)}return e};var ir=function(){this.layerIndexes={},this.crossTileIDs=new rr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ir.prototype.addLayer=function(t,e,r){var n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new nr);var i=!1,o={};n.handleWrapJump(r);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),o[l.bucketInstanceId]=!0)}return n.removeStaleBuckets(o)&&(i=!0),i},ir.prototype.pruneUnusedLayers=function(t){var e={};for(var r in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[r]||delete this.layerIndexes[r]};var or=function(e,r){return t.emitValidationErrors(e,r&&r.filter(function(t){return"source.canvas"!==t.identifier}))},ar=t.pick(oe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),sr=t.pick(oe,["setCenter","setZoom","setBearing","setPitch"]),ur=function(e){function r(n,i){var o=this;void 0===i&&(i={}),e.call(this),this.map=n,this.dispatcher=new I(re(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new w(n._requestManager,i.localIdeographFontFamily),this.lineAtlas=new k(256,512),this.crossTileSymbolIndex=new ir,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=r.registerForPluginStateChange(function(e){var r={pluginStatus:e.pluginStatus,pluginURL:e.pluginURL};a.dispatcher.broadcast("syncRTLPluginState",r,function(e,r){if(t.triggerPluginCompletionEvent(e),r){var n=r.every(function(t){return t});if(n)for(var i in a.sourceCaches)a.sourceCaches[i].reload()}})}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var r=e.getSource();if(r&&r.vectorLayerIds)for(var n in o._layers){var i=o._layers[n];i.source===r.id&&o._validateLayer(i)}}}})}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.loadURL=function(e,r){var n=this;void 0===r&&(r={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"===typeof r.validate?r.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,r.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,function(e,r){n._request=null,e?n.fire(new t.ErrorEvent(e)):r&&n._load(r,i)})},r.prototype.loadJSON=function(e,r){var n=this;void 0===r&&(r={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){n._request=null,n._load(e,!1!==r.validate)})},r.prototype._load=function(e,r){var n=this;if(!r||!or(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(i,e.sources[i],{validate:!1});e.sprite?this._spriteRequest=p(e.sprite,this.map._requestManager,function(e,r){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n.dispatcher.broadcast("setImages",n.imageManager.listImages()),n.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var o=ie(this.stylesheet.layers);this._order=o.map(function(t){return t.id}),this._layers={};for(var a=0,s=o;a<s.length;a+=1){var u=s[a];u=t.createStyleLayer(u),u.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=u}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new A(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},r.prototype._validateLayer=function(e){var r=this.sourceCaches[e.source];if(r){var n=e.sourceLayer;if(n){var i=r.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(n))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+n+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},r.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},r.prototype._serializeLayers=function(t){for(var e=[],r=0,n=t;r<n.length;r+=1){var i=n[r],o=this._layers[i];"custom"!==o.type&&e.push(o.serialize())}return e},r.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},r.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},r.prototype.update=function(e){if(this._loaded){var r=this._changed;if(this._changed){var n=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(n.length||i.length)&&this._updateWorkerLayers(n,i),this._updatedSources){var a=this._updatedSources[o];t.assert("reload"===a||"clear"===a),"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var u in this.sourceCaches)this.sourceCaches[u].used=!1;for(var l=0,c=this._order;l<c.length;l+=1){var p=c[l],h=this._layers[p];h.recalculate(e,this.imageManager.listImages()),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,r&&this.fire(new t.Event("data",{dataType:"style"}))}},r.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},r.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},r.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},r.prototype.setState=function(e){var r=this;if(this._checkLoaded(),or(this,t.validateStyle(e)))return!1;e=t.clone$1(e),e.layers=ie(e.layers);var n=me(this.serialize(),e).filter(function(t){return!(t.command in sr)});if(0===n.length)return!1;var i=n.filter(function(t){return!(t.command in ar)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return n.forEach(function(t){"setTransition"!==t.command&&r[t.command].apply(r,t.args)}),this.stylesheet=e,!0},r.prototype.addImage=function(e,r){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,r),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},r.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},r.prototype.getImage=function(t){return this.imageManager.getImage(t)},r.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},r.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},r.prototype.addSource=function(e,r,n){var i=this;if(void 0===n&&(n={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!r.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(r).join(", ")+".");var o=["vector","raster","geojson","video","image"],a=o.indexOf(r.type)>=0;if(!a||!this._validate(t.validateStyle.source,"sources."+e,r,null,n)){this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);var s=this.sourceCaches[e]=new Ht(e,r,this.dispatcher);s.style=this,s.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:s.serialize(),sourceId:e}}),s.onAdd(this.map),this._changed=!0}},r.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var r in this._layers)if(this._layers[r].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+r+'" is using it.')));var n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.clearTiles(),n.onRemove&&n.onRemove(this.map),this._changed=!0},r.prototype.setGeoJSONSourceData=function(e,r){this._checkLoaded(),t.assert(void 0!==this.sourceCaches[e],"There is no source with this ID");var n=this.sourceCaches[e].getSource();t.assert("geojson"===n.type),n.setData(r),this._changed=!0},r.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},r.prototype.addLayer=function(e,r,n){void 0===n&&(n={}),this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===e.type){if(or(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"===typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},n))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}})}var a=r?this._order.indexOf(r):this._order.length;if(r&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},r.prototype.moveLayer=function(e,r){this._checkLoaded(),this._changed=!0;var n=this._layers[e];if(n){if(e!==r){var i=this._order.indexOf(e);this._order.splice(i,1);var o=r?this._order.indexOf(r):this._order.length;r&&-1===o?this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" does not exist on this map.'))):(this._order.splice(o,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},r.prototype.removeLayer=function(e){this._checkLoaded();var r=this._layers[e];if(r){r.setEventedParent(null);var n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=r,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],r.onRemove&&r.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},r.prototype.getLayer=function(t){return this._layers[t]},r.prototype.setLayerZoomRange=function(e,r,n){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===r&&i.maxzoom===n||(null!=r&&(i.minzoom=r),null!=n&&(i.maxzoom=n),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},r.prototype.setFilter=function(e,r,n){void 0===n&&(n={}),this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.deepEqual(i.filter,r))return null===r||void 0===r?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",r,null,n)||(i.filter=t.clone$1(r),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},r.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},r.prototype.setLayoutProperty=function(e,r,n,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(r),n)||(o.setLayoutProperty(r,n,i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},r.prototype.getLayoutProperty=function(e,r){var n=this.getLayer(e);if(n)return n.getLayoutProperty(r);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},r.prototype.setPaintProperty=function(e,r,n,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);if(o){if(!t.deepEqual(o.getPaintProperty(r),n)){var a=o.setPaintProperty(r,n,i);a&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},r.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},r.prototype.setFeatureState=function(e,r){this._checkLoaded();var n=e.source,i=e.sourceLayer,o=this.sourceCaches[n],a=parseInt(e.id,10);if(void 0!==o){var s=o.getSource().type;"geojson"===s&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||i?isNaN(a)||a<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):o.setFeatureState(i,a,r):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},r.prototype.removeFeatureState=function(e,r){this._checkLoaded();var n=e.source,i=this.sourceCaches[n];if(void 0!==i){var o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0,s=parseInt(e.id,10);"vector"!==o||a?void 0!==e.id&&isNaN(s)||s<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))):r&&"string"!==typeof e.id&&"number"!==typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):i.removeFeatureState(a,s,r):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},r.prototype.getFeatureState=function(e){this._checkLoaded();var r=e.source,n=e.sourceLayer,i=this.sourceCaches[r],o=parseInt(e.id,10);if(void 0!==i){var a=i.getSource().type;if("vector"!==a||n){if(!(isNaN(o)||o<0))return i.getFeatureState(n,o);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},r.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},r.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},r.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},r.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,r=function(t){return"fill-extrusion"===e._layers[t].type},n={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(r(a)){n[a]=o;for(var s=0,u=t;s<u.length;s+=1){var l=u[s],c=l[a];if(c)for(var p=0,h=c;p<h.length;p+=1){var f=h[p];i.push(f)}}}}i.sort(function(t,e){return e.intersectionZ-t.intersectionZ});for(var d=[],m=this._order.length-1;m>=0;m--){var y=this._order[m];if(r(y))for(var v=i.length-1;v>=0;v--){var g=i[v].feature;if(n[g.layer.id]<m)break;d.push(g),i.pop()}else for(var _=0,x=t;_<x.length;_+=1){var b=x[_],w=b[y];if(w)for(var S=0,E=w;S<E.length;S+=1){var T=E[S];d.push(T.feature)}}}return d},r.prototype.queryRenderedFeatures=function(e,r,n){r&&r.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",r.filter,null,r);var i={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=r.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[u.source]=!0}}var l=[];for(var c in this.sourceCaches)r.layers&&!i[c]||l.push(G(this.sourceCaches[c],this._layers,e,r,n));return this.placement&&l.push(X(this._layers,this.sourceCaches,e,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(l)},r.prototype.querySourceFeatures=function(e,r){r&&r.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",r.filter,null,r);var n=this.sourceCaches[e];return n?W(n,r):[]},r.prototype.addSourceType=function(t,e,n){return r.getSourceType(t)?n(new Error('A source type called "'+t+'" already exists.')):(r.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},r.prototype.getLight=function(){return this.light.getLight()},r.prototype.setLight=function(e,r){void 0===r&&(r={}),this._checkLoaded();var n=this.light.getLight(),i=!1;for(var o in e)if(!t.deepEqual(e[o],n[o])){i=!0;break}if(i){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,r),this.light.updateTransitions(a)}},r.prototype._validate=function(e,r,n,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&or(this,e.call(t.validateStyle,t.extend({key:r,style:this.serialize(),value:n,styleSpec:t.styleSpec},i)))},r.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers){var r=this._layers[e];r.setEventedParent(null)}for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},r.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},r.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},r.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},r.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},r.prototype._updatePlacement=function(e,r,n,i){for(var o=!1,a=!1,s={},u=0,l=this._order;u<l.length;u+=1){var c=l[u],p=this._layers[c];if("symbol"===p.type){if(!s[p.source]){var h=this.sourceCaches[p.source];s[p.source]=h.getRenderableIds(!0).map(function(t){return h.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var f=this.crossTileSymbolIndex.addLayer(p,s[p.source],e.center.lng);o=o||f}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged||0===n;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Qe(e,this._order,d,r,n,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var m=0,y=this._order;m<y.length;m+=1){var v=y[m],g=this._layers[v];"symbol"===g.type&&this.placement.updateLayerOpacities(g,s[g.source])}var _=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now());return _},r.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},r.prototype.getImages=function(t,e,r){this.imageManager.getImages(e.icons,r),this._updateTilesForChangedImages();var n=this.sourceCaches[e.source];n&&n.setDependencies(e.tileID.key,e.type,e.icons)},r.prototype.getGlyphs=function(t,e,r){this.glyphManager.getGlyphs(e.stacks,r)},r.prototype.getResource=function(e,r,n){return t.makeRequest(r,n)},r}(t.Evented);ur.getSourceType=N,ur.setSourceType=V,ur.registerForPluginStateChange=t.registerForPluginStateChange;var lr=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),cr="#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",pr="#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_color(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n",hr="uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",fr="attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n",dr="uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",mr="uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n",yr="varying vec3 v_data;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vr="uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform lowp float u_device_pixel_ratio;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\nvarying vec3 v_data;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / u_device_pixel_ratio / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n",gr="void main() {\n    gl_FragColor = vec4(1.0);\n}\n",_r="attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n",xr="uniform highp float u_intensity;\n\nvarying vec2 v_extrude;\n\n#pragma mapbox: define highp float weight\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",br="\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n",wr="uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",Sr="uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n",Er="\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",Tr="attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\nattribute vec2 a_shift;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += (a_extrude + a_shift) * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n",Ar="uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",kr="attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n",Ir="uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",Cr="attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n",Pr="#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Mr="attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n",zr="varying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Lr="attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n",Dr="\nuniform vec2 u_texsize;\nuniform sampler2D u_image;\nuniform float u_fade;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_fade) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Or="uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec4 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n",Br="uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_fade) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Rr="uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec4 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileZoomRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileZoomRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileZoomRatio, a_pos);\n}\n",Fr="varying vec4 v_color;\n\nvoid main() {\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Ur="uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\nuniform float u_vertical_gradient;\nuniform lowp float u_opacity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize highp float base\n    #pragma mapbox: initialize highp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        // This avoids another branching statement, but multiplies by a constant of 0.84 if no vertical gradient,\n        // and otherwise calculates the gradient based on base + height\n        directional *= (\n            (1.0 - u_vertical_gradient) +\n            (u_vertical_gradient * clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0)));\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n    v_color *= u_opacity;\n}\n",jr="uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_fade);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Nr="uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_height_factor;\nuniform vec4 u_scale;\nuniform float u_vertical_gradient;\nuniform lowp float u_opacity;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        // This avoids another branching statement, but multiplies by a constant of 0.84 if no vertical gradient,\n        // and otherwise calculates the gradient based on base + height\n        directional *= (\n            (1.0 - u_vertical_gradient) +\n            (u_vertical_gradient * clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0)));\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n    v_lighting *= u_opacity;\n}\n",Vr="#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\nuniform vec4 u_unpack;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    data.a = -1.0;\n    return dot(data, u_unpack) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a=0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",qr="uniform mat4 u_matrix;\nuniform vec2 u_dimension;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    highp vec2 epsilon = 1.0 / u_dimension;\n    float scale = (u_dimension.x - 2.0) / u_dimension.x;\n    v_pos = (a_texture_pos / 8192.0) * scale + epsilon;\n}\n",Zr="uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Gr="uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n",Xr="uniform lowp float u_device_pixel_ratio;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / u_device_pixel_ratio) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Wr="// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_units_to_pixels;\nuniform lowp float u_device_pixel_ratio;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    // the distance over which the line edge fades out.\n    // Retina devices need a smaller distance to avoid aliasing.\n    float ANTIALIASING = 1.0 / u_device_pixel_ratio / 2.0;\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos = floor(a_pos_normal * 0.5);\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    // We store these in the least significant bit of a_pos_normal\n    mediump vec2 normal = a_pos_normal - 2.0 * pos;\n    normal.y = normal.y * 2.0 - 1.0;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n",$r="uniform lowp float u_device_pixel_ratio;\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / u_device_pixel_ratio) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Hr="\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform lowp float u_device_pixel_ratio;\nuniform vec2 u_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    // the distance over which the line edge fades out.\n    // Retina devices need a smaller distance to avoid aliasing.\n    float ANTIALIASING = 1.0 / u_device_pixel_ratio / 2.0;\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos = floor(a_pos_normal * 0.5);\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    // We store these in the least significant bit of a_pos_normal\n    mediump vec2 normal = a_pos_normal - 2.0 * pos;\n    normal.y = normal.y * 2.0 - 1.0;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n",Kr="uniform lowp float u_device_pixel_ratio;\nuniform vec2 u_texsize;\nuniform float u_fade;\nuniform mediump vec4 u_scale;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileZoomRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    vec2 pattern_size_a = vec2(display_size_a.x * fromScale / tileZoomRatio, display_size_a.y);\n    vec2 pattern_size_b = vec2(display_size_b.x * toScale / tileZoomRatio, display_size_b.y);\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / u_device_pixel_ratio) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (pattern_size_a.y + 2.0) / 2.0) / pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (pattern_size_b.y + 2.0) / 2.0) / pattern_size_b.y);\n    vec2 pos_a = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Yr="// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform vec2 u_units_to_pixels;\nuniform mediump float u_ratio;\nuniform lowp float u_device_pixel_ratio;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    // the distance over which the line edge fades out.\n    // Retina devices need a smaller distance to avoid aliasing.\n    float ANTIALIASING = 1.0 / u_device_pixel_ratio / 2.0;\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n    // float tileRatio = u_scale.y;\n    vec2 pos = floor(a_pos_normal * 0.5);\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    // We store these in the least significant bit of a_pos_normal\n    mediump vec2 normal = a_pos_normal - 2.0 * pos;\n    normal.y = normal.y * 2.0 - 1.0;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n",Jr="\nuniform lowp float u_device_pixel_ratio;\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / u_device_pixel_ratio) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Qr="// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform lowp float u_device_pixel_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // the distance over which the line edge fades out.\n    // Retina devices need a smaller distance to avoid aliasing.\n    float ANTIALIASING = 1.0 / u_device_pixel_ratio / 2.0;\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = floor(a_pos_normal * 0.5);\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    // We store these in the least significant bit of a_pos_normal\n    mediump vec2 normal = a_pos_normal - 2.0 * pos;\n    normal.y = normal.y * 2.0 - 1.0;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n",tn="uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",en="uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n",rn="uniform sampler2D u_texture;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",nn="const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec4 a_pixeloffset;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    float a_size_min = floor(a_size[0] * 0.5);\n    vec2 a_pxoffset = a_pixeloffset.xy;\n    vec2 a_minFontScale = a_pixeloffset.zw / 256.0;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size_min, a_size[1], u_size_t) / 128.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size_min / 128.0;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * max(a_minFontScale, fontScale) + a_pxoffset / 16.0), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n",on="#define SDF_PX 8.0\n\nuniform bool u_is_halo;\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform lowp float u_device_pixel_ratio;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    float EDGE_GAMMA = 0.105 / u_device_pixel_ratio;\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",an="const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec4 a_pixeloffset;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_coord_matrix;\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    float a_size_min = floor(a_size[0] * 0.5);\n    vec2 a_pxoffset = a_pixeloffset.xy;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size_min, a_size[1], u_size_t) / 128.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size_min / 128.0;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale + a_pxoffset), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = a_tex / u_texsize;\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n",sn="#define SDF_PX 8.0\n\n#define SDF 1.0\n#define ICON 0.0\n\nuniform bool u_is_halo;\nuniform sampler2D u_texture;\nuniform sampler2D u_texture_icon;\nuniform highp float u_gamma_scale;\nuniform lowp float u_device_pixel_ratio;\n\nvarying vec4 v_data0;\nvarying vec4 v_data1;\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    float fade_opacity = v_data1[2];\n\n    if (v_data1.w == ICON) {\n        vec2 tex_icon = v_data0.zw;\n        lowp float alpha = opacity * fade_opacity;\n        gl_FragColor = texture2D(u_texture_icon, tex_icon) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n#endif\n        return;\n    }\n\n    vec2 tex = v_data0.xy;\n\n    float EDGE_GAMMA = 0.105 / u_device_pixel_ratio;\n\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n\n    float fontScale = size / 24.0;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",un="const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_coord_matrix;\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\nuniform vec2 u_texsize;\nuniform vec2 u_texsize_icon;\n\nvarying vec4 v_data0;\nvarying vec4 v_data1;\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    float a_size_min = floor(a_size[0] * 0.5);\n    float is_sdf = a_size[0] - 2.0 * a_size_min;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size_min, a_size[1], u_size_t) / 128.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size_min / 128.0;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = size / 24.0;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0.xy = a_tex / u_texsize;\n    v_data0.zw = a_tex / u_texsize_icon;\n    v_data1 = vec4(gamma_scale, size, interpolated_fade_opacity, is_sdf);\n}\n",ln=On(cr,pr),cn=On(hr,fr),pn=On(dr,mr),hn=On(yr,vr),fn=On(gr,_r),dn=On(xr,br),mn=On(wr,Sr),yn=On(Er,Tr),vn=On(Ar,kr),gn=On(Ir,Cr),_n=On(Pr,Mr),xn=On(zr,Lr),bn=On(Dr,Or),wn=On(Br,Rr),Sn=On(Fr,Ur),En=On(jr,Nr),Tn=On(Vr,qr),An=On(Zr,Gr),kn=On(Xr,Wr),In=On($r,Hr),Cn=On(Kr,Yr),Pn=On(Jr,Qr),Mn=On(tn,en),zn=On(rn,nn),Ln=On(on,an),Dn=On(sn,un);function On(t,e){var r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n={};return t=t.replace(r,function(t,e,r,i,o){return n[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),e=e.replace(r,function(t,e,r,i,o){var a="float"===i?"vec2":"vec4",s=o.match(/color/)?"color":a;return n[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+s+"(a_"+o+", u_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = a_"+o+";\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = unpack_mix_"+s+"(a_"+o+", u_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),{fragmentSource:t,vertexSource:e}}var Bn=Object.freeze({__proto__:null,prelude:ln,background:cn,backgroundPattern:pn,circle:hn,clippingMask:fn,heatmap:dn,heatmapTexture:mn,collisionBox:yn,collisionCircle:vn,debug:gn,fill:_n,fillOutline:xn,fillOutlinePattern:bn,fillPattern:wn,fillExtrusion:Sn,fillExtrusionPattern:En,hillshadePrepare:Tn,hillshade:An,line:kn,lineGradient:In,linePattern:Cn,lineSDF:Pn,raster:Mn,symbolIcon:zn,symbolSDF:Ln,symbolTextAndIcon:Dn}),Rn=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Rn.prototype.bind=function(t,e,r,n,i,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==n.length,l=0;!u&&l<n.length;l++)this.boundPaintVertexBuffers[l]!==n[l]&&(u=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==r||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,r,n,i,o,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},Rn.prototype.freshBind=function(e,r,n,i,o,a,s){var u,l=e.numAttributes,c=this.context,p=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),u=0,this.boundProgram=e,this.boundLayoutVertexBuffer=r,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=o,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=s;else{u=c.currentNumAttributes||0;for(var h=l;h<u;h++)t.assert(0!==h),p.disableVertexAttribArray(h)}r.enableAttributes(p,e);for(var f=0,d=n;f<d.length;f+=1){var m=d[f];m.enableAttributes(p,e)}a&&a.enableAttributes(p,e),s&&s.enableAttributes(p,e),r.bind(),r.setVertexAttribPointers(p,e,o);for(var y=0,v=n;y<v.length;y+=1){var g=v[y];g.bind(),g.setVertexAttribPointers(p,e,o)}a&&(a.bind(),a.setVertexAttribPointers(p,e,o)),i&&i.bind(),s&&(s.bind(),s.setVertexAttribPointers(p,e,o)),c.currentNumAttributes=l},Rn.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Fn=function(e,r,n,i,o){var a=e.gl;this.program=a.createProgram();var s=n.defines();o&&s.push("#define OVERDRAW_INSPECTOR;");var u=s.concat(ln.fragmentSource,r.fragmentSource).join("\n"),l=s.concat(ln.vertexSource,r.vertexSource).join("\n"),c=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(c,u),a.compileShader(c),t.assert(a.getShaderParameter(c,a.COMPILE_STATUS),a.getShaderInfoLog(c)),a.attachShader(this.program,c);var p=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(p,l),a.compileShader(p),t.assert(a.getShaderParameter(p,a.COMPILE_STATUS),a.getShaderInfoLog(p)),a.attachShader(this.program,p);for(var h=n.layoutAttributes||[],f=0;f<h.length;f++)a.bindAttribLocation(this.program,f,h[f].name);a.linkProgram(this.program),t.assert(a.getProgramParameter(this.program,a.LINK_STATUS),a.getProgramInfoLog(this.program)),this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},m=0;m<this.numAttributes;m++){var y=a.getActiveAttrib(this.program,m);y&&(this.attributes[y.name]=a.getAttribLocation(this.program,y.name))}for(var v=a.getProgramParameter(this.program,a.ACTIVE_UNIFORMS),g=0;g<v;g++){var _=a.getActiveUniform(this.program,g);_&&(d[_.name]=a.getUniformLocation(this.program,_.name))}this.fixedUniforms=i(e,d),this.binderUniforms=n.getUniforms(e,d)}}};function Un(e,r,n){var i=1/Le(n,1,r.transform.tileZoom),o=Math.pow(2,n.tileID.overscaledZ),a=n.tileSize*Math.pow(2,r.transform.tileZoom)/o,s=a*(n.tileID.canonical.x+n.tileID.wrap*o),u=a*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,u>>16],u_pixel_coord_lower:[65535&s,65535&u]}}function jn(e,r,n,i){var o=n.imageManager.getPattern(e.from.toString()),a=n.imageManager.getPattern(e.to.toString());t.assert(o&&a);var s=n.imageManager.getPixelSize(),u=s.width,l=s.height,c=Math.pow(2,i.tileID.overscaledZ),p=i.tileSize*Math.pow(2,n.transform.tileZoom)/c,h=p*(i.tileID.canonical.x+i.tileID.wrap*c),f=p*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:o.tl,u_pattern_br_a:o.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[u,l],u_mix:r.t,u_pattern_size_a:o.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:r.fromScale,u_scale_b:r.toScale,u_tile_units_to_pixels:1/Le(i,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,f>>16],u_pixel_coord_lower:[65535&h,65535&f]}}Fn.prototype.draw=function(t,e,r,n,i,o,a,s,u,l,c,p,h,f,d,m){var y,v=t.gl;if(!this.failedToCreate){for(var g in t.program.set(this.program),t.setDepthMode(r),t.setStencilMode(n),t.setColorMode(i),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[g].set(a[g]);f&&f.setUniforms(t,this.binderUniforms,p,{zoom:h});for(var _=(y={},y[v.LINES]=2,y[v.TRIANGLES]=3,y[v.LINE_STRIP]=1,y)[e],x=0,b=c.get();x<b.length;x+=1){var w=b[x],S=w.vaos||(w.vaos={}),E=S[s]||(S[s]=new Rn);E.bind(t,this,u,f?f.getPaintVertexBuffers():[],l,w.vertexOffset,d,m),v.drawElements(e,w.primitiveLength*_,v.UNSIGNED_SHORT,w.primitiveOffset*_*2)}}};var Nn=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_lightpos:new t.Uniform3f(e,r.u_lightpos),u_lightintensity:new t.Uniform1f(e,r.u_lightintensity),u_lightcolor:new t.Uniform3f(e,r.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,r.u_vertical_gradient),u_opacity:new t.Uniform1f(e,r.u_opacity)}},Vn=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_lightpos:new t.Uniform3f(e,r.u_lightpos),u_lightintensity:new t.Uniform1f(e,r.u_lightintensity),u_lightcolor:new t.Uniform3f(e,r.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,r.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,r.u_height_factor),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade),u_opacity:new t.Uniform1f(e,r.u_opacity)}},qn=function(e,r,n,i){var o=r.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],u=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(u,-r.transform.angle),t.transformMat3(s,s,u);var l=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+n,u_opacity:i}},Zn=function(e,r,n,i,o,a,s){return t.extend(qn(e,r,n,i),Un(a,r,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},Gn=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},Xn=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},Wn=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world)}},$n=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},Hn=function(t){return{u_matrix:t}},Kn=function(e,r,n,i){return t.extend(Hn(e),Un(n,r,i))},Yn=function(t,e){return{u_matrix:t,u_world:e}},Jn=function(e,r,n,i,o){return t.extend(Kn(e,r,n,i),{u_world:o})},Qn=function(e,r){return{u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,r.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,r.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},ti=function(e,r,n,i){var o,a,s=e.transform;if("map"===i.paint.get("circle-pitch-alignment")){var u=Le(n,1,s.zoom);o=!0,a=[u,u]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(r.posMatrix,n,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},ei=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,r.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,r.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,r.u_overscale_factor)}},ri=function(t,e,r){var n=Le(r,1,e.zoom),i=Math.pow(2,e.zoom-r.tileID.overscaledZ),o=r.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:n,u_extrude_scale:[e.pixelsToGLUnits[0]/(n*i),e.pixelsToGLUnits[1]/(n*i)],u_overscale_factor:o}},ni=function(e,r){return{u_color:new t.UniformColor(e,r.u_color),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},ii=function(t,e){return{u_matrix:t,u_color:e}},oi=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},ai=function(t){return{u_matrix:t}},si=function(e,r){return{u_extrude_scale:new t.Uniform1f(e,r.u_extrude_scale),u_intensity:new t.Uniform1f(e,r.u_intensity),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},ui=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world),u_image:new t.Uniform1i(e,r.u_image),u_color_ramp:new t.Uniform1i(e,r.u_color_ramp),u_opacity:new t.Uniform1f(e,r.u_opacity)}},li=function(t,e,r,n){return{u_matrix:t,u_extrude_scale:Le(e,1,r),u_intensity:n}},ci=function(e,r,n,i){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:n,u_color_ramp:i,u_opacity:r.paint.get("heatmap-opacity")}},pi=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_latrange:new t.Uniform2f(e,r.u_latrange),u_light:new t.Uniform2f(e,r.u_light),u_shadow:new t.UniformColor(e,r.u_shadow),u_highlight:new t.UniformColor(e,r.u_highlight),u_accent:new t.UniformColor(e,r.u_accent)}},hi=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_dimension:new t.Uniform2f(e,r.u_dimension),u_zoom:new t.Uniform1f(e,r.u_zoom),u_maxzoom:new t.Uniform1f(e,r.u_maxzoom),u_unpack:new t.Uniform4f(e,r.u_unpack)}},fi=function(t,e,r){var n=r.paint.get("hillshade-shadow-color"),i=r.paint.get("hillshade-highlight-color"),o=r.paint.get("hillshade-accent-color"),a=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var s=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:mi(t,e.tileID),u_light:[r.paint.get("hillshade-exaggeration"),a],u_shadow:n,u_highlight:i,u_accent:o}},di=function(e,r,n){var i=r.stride,o=t.create();return t.ortho(o,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(o,o,[0,-t.EXTENT,0]),{u_matrix:o,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_maxzoom:n,u_unpack:r.getUnpackVector()}};function mi(e,r){var n=Math.pow(2,r.canonical.z),i=r.canonical.y;return[new t.MercatorCoordinate(0,i/n).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/n).toLngLat().lat]}var yi=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels)}},vi=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels),u_image:new t.Uniform1i(e,r.u_image)}},gi=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_texsize:new t.Uniform2f(e,r.u_texsize),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_image:new t.Uniform1i(e,r.u_image),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},_i=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,r.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,r.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,r.u_sdfgamma),u_image:new t.Uniform1i(e,r.u_image),u_tex_y_a:new t.Uniform1f(e,r.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,r.u_tex_y_b),u_mix:new t.Uniform1f(e,r.u_mix)}},xi=function(e,r,n){var i=e.transform;return{u_matrix:Ti(e,r,n),u_ratio:1/Le(r,1,i.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},bi=function(e,r,n){return t.extend(xi(e,r,n),{u_image:0})},wi=function(e,r,n,i){var o=e.transform,a=Ei(r,o);return{u_matrix:Ti(e,r,n),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Le(r,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[t.browser.devicePixelRatio,a,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Si=function(e,r,n,i,o){var a=e.transform,s=e.lineAtlas,u=Ei(r,a),l="round"===n.layout.get("line-cap"),c=s.getDash(i.from,l),p=s.getDash(i.to,l),h=c.width*o.fromScale,f=p.width*o.toScale;return t.extend(xi(e,r,n),{u_patternscale_a:[u/h,-c.height/2],u_patternscale_b:[u/f,-p.height/2],u_sdfgamma:s.width/(256*Math.min(h,f)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:p.y,u_mix:o.t})};function Ei(t,e){return 1/Le(t,1,e.tileZoom)}function Ti(t,e,r){return t.translatePosMatrix(e.tileID.posMatrix,e,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}var Ai=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_tl_parent:new t.Uniform2f(e,r.u_tl_parent),u_scale_parent:new t.Uniform1f(e,r.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,r.u_buffer_scale),u_fade_t:new t.Uniform1f(e,r.u_fade_t),u_opacity:new t.Uniform1f(e,r.u_opacity),u_image0:new t.Uniform1i(e,r.u_image0),u_image1:new t.Uniform1i(e,r.u_image1),u_brightness_low:new t.Uniform1f(e,r.u_brightness_low),u_brightness_high:new t.Uniform1f(e,r.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,r.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,r.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,r.u_spin_weights)}},ki=function(t,e,r,n,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:r,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:Pi(i.paint.get("raster-saturation")),u_contrast_factor:Ci(i.paint.get("raster-contrast")),u_spin_weights:Ii(i.paint.get("raster-hue-rotate"))}};function Ii(t){t*=Math.PI/180;var e=Math.sin(t),r=Math.cos(t);return[(2*r+1)/3,(-Math.sqrt(3)*e-r+1)/3,(Math.sqrt(3)*e-r+1)/3]}function Ci(t){return t>0?1/(1-t):1+t}function Pi(t){return t>0?1-1/(1.001-t):-t}var Mi=function(e,r){return{u_is_size_zoom_constant:new t.Uniform1i(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,r.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,r.u_size_t),u_size:new t.Uniform1f(e,r.u_size),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,r.u_pitch),u_rotate_symbol:new t.Uniform1i(e,r.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,r.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,r.u_fade_change),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,r.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,r.u_coord_matrix),u_is_text:new t.Uniform1f(e,r.u_is_text),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_texsize:new t.Uniform2f(e,r.u_texsize),u_texture:new t.Uniform1i(e,r.u_texture)}},zi=function(e,r){return{u_is_size_zoom_constant:new t.Uniform1i(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,r.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,r.u_size_t),u_size:new t.Uniform1f(e,r.u_size),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,r.u_pitch),u_rotate_symbol:new t.Uniform1i(e,r.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,r.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,r.u_fade_change),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,r.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,r.u_coord_matrix),u_is_text:new t.Uniform1f(e,r.u_is_text),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_texsize:new t.Uniform2f(e,r.u_texsize),u_texture:new t.Uniform1i(e,r.u_texture),u_gamma_scale:new t.Uniform1f(e,r.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_is_halo:new t.Uniform1f(e,r.u_is_halo)}},Li=function(e,r){return{u_is_size_zoom_constant:new t.Uniform1i(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,r.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,r.u_size_t),u_size:new t.Uniform1f(e,r.u_size),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,r.u_pitch),u_rotate_symbol:new t.Uniform1i(e,r.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,r.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,r.u_fade_change),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,r.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,r.u_coord_matrix),u_is_text:new t.Uniform1f(e,r.u_is_text),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_texsize:new t.Uniform2f(e,r.u_texsize),u_texsize_icon:new t.Uniform2f(e,r.u_texsize_icon),u_texture:new t.Uniform1i(e,r.u_texture),u_texture_icon:new t.Uniform1i(e,r.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,r.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_is_halo:new t.Uniform1f(e,r.u_is_halo)}},Di=function(t,e,r,n,i,o,a,s,u,l){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+n,u_texsize:l,u_texture:0}},Oi=function(e,r,n,i,o,a,s,u,l,c,p){var h=o.transform;return t.extend(Di(e,r,n,i,o,a,s,u,l,c),{u_gamma_scale:i?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+p})},Bi=function(e,r,n,i,o,a,s,u,l,c){return t.extend(Oi(e,r,n,i,o,a,s,u,!0,l,!0),{u_texsize_icon:c,u_texture_icon:1})},Ri=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_opacity:new t.Uniform1f(e,r.u_opacity),u_color:new t.UniformColor(e,r.u_color)}},Fi=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_opacity:new t.Uniform1f(e,r.u_opacity),u_image:new t.Uniform1i(e,r.u_image),u_pattern_tl_a:new t.Uniform2f(e,r.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,r.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,r.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,r.u_pattern_br_b),u_texsize:new t.Uniform2f(e,r.u_texsize),u_mix:new t.Uniform1f(e,r.u_mix),u_pattern_size_a:new t.Uniform2f(e,r.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,r.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,r.u_scale_a),u_scale_b:new t.Uniform1f(e,r.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,r.u_tile_units_to_pixels)}},Ui=function(t,e,r){return{u_matrix:t,u_opacity:e,u_color:r}},ji=function(e,r,n,i,o,a){return t.extend(jn(i,a,n,o),{u_matrix:e,u_opacity:r})},Ni={fillExtrusion:Nn,fillExtrusionPattern:Vn,fill:Gn,fillPattern:Xn,fillOutline:Wn,fillOutlinePattern:$n,circle:Qn,collisionBox:ei,collisionCircle:ei,debug:ni,clippingMask:oi,heatmap:si,heatmapTexture:ui,hillshade:pi,hillshadePrepare:hi,line:yi,lineGradient:vi,linePattern:gi,lineSDF:_i,raster:Ai,symbolIcon:Mi,symbolSDF:zi,symbolTextAndIcon:Li,background:Ri,backgroundPattern:Fi};function Vi(e,r){for(var n=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),i=0;i<n.length;i++){var o={},a=n[i],s=n.slice(i+1);qi(a.tileID.wrapped(),a.tileID,s,new t.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),o),a.setMask(o,r)}}function qi(e,r,n,i,o){for(var a=0;a<n.length;a++){var s=n[a];if(i.isLessThan(s.tileID))break;if(r.key===s.tileID.key)return;if(s.tileID.isChildOf(r)){for(var u=r.children(1/0),l=0;l<u.length;l++){var c=u[l];qi(e,c,n.slice(a),i,o)}return}}var p=r.overscaledZ-e.overscaledZ,h=new t.CanonicalTileID(p,r.canonical.x-(e.canonical.x<<p),r.canonical.y-(e.canonical.y<<p));o[h.key]=o[h.key]||h}function Zi(t,e,r,n,i,o,a,s){for(var u=t.context,l=u.gl,c=i?t.useProgram("collisionCircle"):t.useProgram("collisionBox"),p=0;p<n.length;p++){var h=n[p],f=e.getTile(h),d=f.getBucket(r);if(d){var m=i?s?d.textCollisionCircle:d.iconCollisionCircle:s?d.textCollisionBox:d.iconCollisionBox;if(m){var y=h.posMatrix;0===o[0]&&0===o[1]||(y=t.translatePosMatrix(h.posMatrix,f,o,a)),c.draw(u,i?l.TRIANGLES:l.LINES,Rt.disabled,jt.disabled,t.colorModeForRenderPass(),Wt.disabled,ri(y,t.transform,f),r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,t.transform.zoom,null,null,m.collisionVertexBuffer)}}}}function Gi(t,e,r,n,i,o,a){Zi(t,e,r,n,!1,i,o,a),Zi(t,e,r,n,!0,i,o,a)}var Xi=t.identity(new Float32Array(16));function Wi(t,e,r,n,i){if("translucent"===t.renderPass){var o=jt.disabled,a=t.colorModeForRenderPass(),s=r.layout.get("text-variable-anchor");s&&Hi(n,t,r,e,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),i),0!==r.paint.get("icon-opacity").constantOr(1)&&Ji(t,e,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,a),0!==r.paint.get("text-opacity").constantOr(1)&&Ji(t,e,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,a),e.map.showCollisionBoxes&&(Gi(t,e,r,n,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Gi(t,e,r,n,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}}function $i(e,r,n,i,o,a){var s=t.getAnchorAlignment(e),u=s.horizontalAlign,l=s.verticalAlign,c=-(u-.5)*r,p=-(l-.5)*n,h=t.evaluateVariableOffset(e,i);return new t.Point((c/o+h[0])*a,(p/o+h[1])*a)}function Hi(e,r,n,i,o,a,s){for(var u=r.transform,l="map"===o,c="map"===a,p=0,h=e;p<h.length;p+=1){var f=h[p],d=i.getTile(f),m=d.getBucket(n);if(m&&m.text&&m.text.segments.get().length){var y=m.textSizeData,v=t.evaluateSizeForZoom(y,u.zoom),g=Le(d,1,r.transform.zoom),_=ve(f.posMatrix,c,l,r.transform,g),x="none"!==n.layout.get("icon-text-fit")&&m.hasIconData();if(v){var b=Math.pow(2,u.zoom-d.tileID.overscaledZ);Ki(m,l,c,s,t.symbolSize,u,_,f.posMatrix,b,v,x)}}}}function Ki(e,r,n,i,o,a,s,u,l,c,p){var h=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,d=e.icon.dynamicLayoutVertexArray,m={};f.clear();for(var y=0;y<h.length;y++){var v=h.get(y),g=e.allowVerticalPlacement&&!v.placedOrientation,_=v.hidden||!v.crossTileID||g?null:i[v.crossTileID];if(_){var x=new t.Point(v.anchorX,v.anchorY),b=_e(x,n?u:s),w=.5+a.cameraToCenterDistance/b.signedDistanceFromCamera*.5,S=o.evaluateSizeForFeature(e.textSizeData,c,v)*w/t.ONE_EM;n&&(S*=e.tilePixelRatio/l);for(var E=_.width,T=_.height,A=_.anchor,k=_.textOffset,I=_.textBoxScale,C=$i(A,E,T,k,I,S),P=n?_e(x.add(C),s).point:b.point.add(r?C.rotate(-a.angle):C),M=e.allowVerticalPlacement&&v.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,z=0;z<v.numGlyphs;z++)t.addDynamicAttributes(f,P,M);p&&v.associatedIconIndex>=0&&(m[v.associatedIconIndex]={shiftedAnchor:P,angle:M})}else Ie(v.numGlyphs,f)}if(p){d.clear();for(var L=e.icon.placedSymbolArray,D=0;D<L.length;D++){var O=L.get(D);if(O.hidden)Ie(O.numGlyphs,d);else{var B=m[D];if(B)for(var R=0;R<O.numGlyphs;R++)t.addDynamicAttributes(d,B.shiftedAnchor,B.angle);else Ie(O.numGlyphs,d)}}e.icon.dynamicLayoutVertexBuffer.updateData(d)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function Yi(t,e,r){return r.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Ji(e,r,n,i,o,a,s,u,l,c,p,h){for(var f,d,m=e.context,y=m.gl,v=e.transform,g="map"===u,_="map"===l,x=g&&"point"!==n.layout.get("symbol-placement"),b=g&&!_&&!x,w=void 0!==n.layout.get("symbol-sort-key").constantOr(1),S=e.depthModeForSublayer(0,Rt.ReadOnly),E=n.layout.get("text-variable-anchor"),T=[],A=0,k=i;A<k.length;A+=1){var I=k[A],C=r.getTile(I),P=C.getBucket(n);if(P){var M=o?P.text:P.icon;if(M&&M.segments.get().length){var z=M.programConfigurations.get(n.id),L=o||P.sdfIcons,D=o?P.textSizeData:P.iconSizeData,O=_||0!==v.pitch;f||(f=e.useProgram(Yi(L,o,P),z),d=t.evaluateSizeForZoom(D,v.zoom));var B=void 0,R=[0,0],F=void 0,U=void 0,j=null,N=void 0;if(o){if(F=C.glyphAtlasTexture,U=y.LINEAR,B=C.glyphAtlasTexture.size,P.iconsInText){R=C.imageAtlasTexture.size,j=C.imageAtlasTexture;var V="composite"===D.kind||"camera"===D.kind;N=O||e.options.rotating||e.options.zooming||V?y.LINEAR:y.NEAREST}}else{var q=1!==n.layout.get("icon-size").constantOr(0)||P.iconsNeedLinear;F=C.imageAtlasTexture,U=L||e.options.rotating||e.options.zooming||q||O?y.LINEAR:y.NEAREST,B=C.imageAtlasTexture.size}var Z=Le(C,1,e.transform.zoom),G=ve(I.posMatrix,_,g,e.transform,Z),X=ge(I.posMatrix,_,g,e.transform,Z),W=E&&P.hasTextData(),$="none"!==n.layout.get("icon-text-fit")&&W&&P.hasIconData();x&&be(P,I.posMatrix,e,o,G,X,_,c);var H=e.translatePosMatrix(I.posMatrix,C,a,s),K=x||o&&E||$?Xi:G,Y=e.translatePosMatrix(X,C,a,s,!0),J=L&&0!==n.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),Q=void 0;Q=L?P.iconsInText?Bi(D.kind,d,b,_,e,H,K,Y,B,R):Oi(D.kind,d,b,_,e,H,K,Y,o,B,!0):Di(D.kind,d,b,_,e,H,K,Y,o,B);var tt={program:f,buffers:M,uniformValues:Q,atlasTexture:F,atlasTextureIcon:j,atlasInterpolation:U,atlasInterpolationIcon:N,isSDF:L,hasHalo:J};if(w)for(var et=M.segments.get(),rt=0,nt=et;rt<nt.length;rt+=1){var it=nt[rt];T.push({segments:new t.SegmentVector([it]),sortKey:it.sortKey,state:tt})}else T.push({segments:M.segments,sortKey:0,state:tt})}}}w&&T.sort(function(t,e){return t.sortKey-e.sortKey});for(var ot=0,at=T;ot<at.length;ot+=1){var st=at[ot],ut=st.state;if(m.activeTexture.set(y.TEXTURE0),ut.atlasTexture.bind(ut.atlasInterpolation,y.CLAMP_TO_EDGE),ut.atlasTextureIcon&&(m.activeTexture.set(y.TEXTURE1),ut.atlasTextureIcon&&ut.atlasTextureIcon.bind(ut.atlasInterpolationIcon,y.CLAMP_TO_EDGE)),ut.isSDF){var lt=ut.uniformValues;ut.hasHalo&&(lt["u_is_halo"]=1,Qi(ut.buffers,st.segments,n,e,ut.program,S,p,h,lt)),lt["u_is_halo"]=0}Qi(ut.buffers,st.segments,n,e,ut.program,S,p,h,ut.uniformValues)}}function Qi(t,e,r,n,i,o,a,s,u){var l=n.context,c=l.gl;i.draw(l,c.TRIANGLES,o,a,s,Wt.disabled,u,r.id,t.layoutVertexBuffer,t.indexBuffer,e,r.paint,n.transform.zoom,t.programConfigurations.get(r.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function to(e,r,n,i){if("translucent"===e.renderPass){var o=n.paint.get("circle-opacity"),a=n.paint.get("circle-stroke-width"),s=n.paint.get("circle-stroke-opacity"),u=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var l=e.context,c=l.gl,p=e.depthModeForSublayer(0,Rt.ReadOnly),h=jt.disabled,f=e.colorModeForRenderPass(),d=[],m=0;m<i.length;m++){var y=i[m],v=r.getTile(y),g=v.getBucket(n);if(g){var _=g.programConfigurations.get(n.id),x=e.useProgram("circle",_),b=g.layoutVertexBuffer,w=g.indexBuffer,S=ti(e,y,v,n),E={programConfiguration:_,program:x,layoutVertexBuffer:b,indexBuffer:w,uniformValues:S};if(u)for(var T=g.segments.get(),A=0,k=T;A<k.length;A+=1){var I=k[A];d.push({segments:new t.SegmentVector([I]),sortKey:I.sortKey,state:E})}else d.push({segments:g.segments,sortKey:0,state:E})}}u&&d.sort(function(t,e){return t.sortKey-e.sortKey});for(var C=0,P=d;C<P.length;C+=1){var M=P[C],z=M.state,L=z.programConfiguration,D=z.program,O=z.layoutVertexBuffer,B=z.indexBuffer,R=z.uniformValues,F=M.segments;D.draw(l,c.TRIANGLES,p,h,f,Wt.disabled,R,n.id,O,B,F,n.paint,e.transform.zoom,L)}}}}function eo(e,r,n,i){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=e.depthModeForSublayer(0,Rt.ReadOnly),u=jt.disabled,l=new Zt([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);ro(o,e,n),o.clear({color:t.Color.transparent});for(var c=0;c<i.length;c++){var p=i[c];if(!r.hasRenderableParent(p)){var h=r.getTile(p),f=h.getBucket(n);if(f){var d=f.programConfigurations.get(n.id),m=e.useProgram("heatmap",d),y=e.transform,v=y.zoom;m.draw(o,a.TRIANGLES,s,u,l,Wt.disabled,li(p.posMatrix,h,v,n.paint.get("heatmap-intensity")),n.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,n.paint,e.transform.zoom,d)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),io(e,n))}function ro(t,e,r){var n=t.gl;t.activeTexture.set(n.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=r.heatmapFbo;if(i)n.bindTexture(n.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),i=r.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),no(t,e,o,i)}}function no(t,e,r,n){var i=t.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e.width/4,e.height/4,0,i.RGBA,t.extTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),n.colorAttachment.set(r),t.extTextureHalfFloat&&i.checkFramebufferStatus(i.FRAMEBUFFER)!==i.FRAMEBUFFER_COMPLETE&&(t.extTextureHalfFloat=null,n.colorAttachment.setDirty(),no(t,e,r,n))}function io(e,r){var n=e.context,i=n.gl,o=r.heatmapFbo;if(o){n.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),n.activeTexture.set(i.TEXTURE1);var a=r.colorRampTexture;a||(a=r.colorRampTexture=new t.Texture(n,r.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,i.TRIANGLES,Rt.disabled,jt.disabled,e.colorModeForRenderPass(),Wt.disabled,ci(e,r,0,1),r.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,r.paint,e.transform.zoom)}}function oo(e,r,n,i){if("translucent"===e.renderPass){var o=n.paint.get("line-opacity"),a=n.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=e.depthModeForSublayer(0,Rt.ReadOnly),u=e.colorModeForRenderPass(),l=n.paint.get("line-dasharray"),c=n.paint.get("line-pattern"),p=c.constantOr(1),h=n.paint.get("line-gradient"),f=n.getCrossfadeParameters(),d=l?"lineSDF":p?"linePattern":h?"lineGradient":"line",m=e.context,y=m.gl,v=!0;if(h){m.activeTexture.set(y.TEXTURE0);var g=n.gradientTexture;if(!n.gradient)return;g||(g=n.gradientTexture=new t.Texture(m,n.gradient,y.RGBA)),g.bind(y.LINEAR,y.CLAMP_TO_EDGE)}for(var _=0,x=i;_<x.length;_+=1){var b=x[_],w=r.getTile(b);if(!p||w.patternsLoaded()){var S=w.getBucket(n);if(S){var E=S.programConfigurations.get(n.id),T=e.context.program.get(),A=e.useProgram(d,E),k=v||A.program!==T,I=c.constantOr(null);if(I&&w.imageAtlas){var C=w.imageAtlas,P=C.patternPositions[I.to.toString()],M=C.patternPositions[I.from.toString()];P&&M&&E.setConstantPatternPositions(P,M)}var z=l?Si(e,w,n,l,f):p?wi(e,w,n,f):h?bi(e,w,n):xi(e,w,n);l&&(k||e.lineAtlas.dirty)?(m.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(m)):p&&(m.activeTexture.set(y.TEXTURE0),w.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),E.updatePatternPaintBuffers(f)),A.draw(m,y.TRIANGLES,s,e.stencilModeForClipping(b),u,Wt.disabled,z,n.id,S.layoutVertexBuffer,S.indexBuffer,S.segments,n.paint,e.transform.zoom,E),v=!1}}}}}}function ao(e,r,n,i){var o=n.paint.get("fill-color"),a=n.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),u=n.paint.get("fill-pattern"),l=e.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===l){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?Rt.ReadWrite:Rt.ReadOnly);so(e,r,n,i,c,s,!1)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){var p=e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Rt.ReadOnly);so(e,r,n,i,p,s,!0)}}}function so(t,e,r,n,i,o,a){var s,u,l,c,p,h=t.context.gl,f=r.paint.get("fill-pattern"),d=f&&f.constantOr(1),m=r.getCrossfadeParameters();a?(u=d&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(u=d?"fillPattern":"fill",s=h.TRIANGLES);for(var y=0,v=n;y<v.length;y+=1){var g=v[y],_=e.getTile(g);if(!d||_.patternsLoaded()){var x=_.getBucket(r);if(x){var b=x.programConfigurations.get(r.id),w=t.useProgram(u,b);d&&(t.context.activeTexture.set(h.TEXTURE0),_.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),b.updatePatternPaintBuffers(m));var S=f.constantOr(null);if(S&&_.imageAtlas){var E=_.imageAtlas,T=E.patternPositions[S.to.toString()],A=E.patternPositions[S.from.toString()];T&&A&&b.setConstantPatternPositions(T,A)}var k=t.translatePosMatrix(g.posMatrix,_,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(a){c=x.indexBuffer2,p=x.segments2;var I=[h.drawingBufferWidth,h.drawingBufferHeight];l="fillOutlinePattern"===u&&d?Jn(k,t,m,_,I):Yn(k,I)}else c=x.indexBuffer,p=x.segments,l=d?Kn(k,t,m,_):Hn(k);w.draw(t.context,s,i,t.stencilModeForClipping(g),o,Wt.disabled,l,r.id,x.layoutVertexBuffer,c,p,r.paint,t.transform.zoom,b)}}}}function uo(t,e,r,n){var i=r.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){var o=new Rt(t.context.gl.LEQUAL,Rt.ReadWrite,t.depthRangeFor3D);if(1!==i||r.paint.get("fill-extrusion-pattern").constantOr(1))lo(t,e,r,n,o,jt.disabled,Zt.disabled),lo(t,e,r,n,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();lo(t,e,r,n,o,jt.disabled,a)}}}function lo(t,e,r,n,i,o,a){for(var s=t.context,u=s.gl,l=r.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),p=r.getCrossfadeParameters(),h=r.paint.get("fill-extrusion-opacity"),f=0,d=n;f<d.length;f+=1){var m=d[f],y=e.getTile(m),v=y.getBucket(r);if(v){var g=v.programConfigurations.get(r.id),_=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",g);c&&(t.context.activeTexture.set(u.TEXTURE0),y.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),g.updatePatternPaintBuffers(p));var x=l.constantOr(null);if(x&&y.imageAtlas){var b=y.imageAtlas,w=b.patternPositions[x.to.toString()],S=b.patternPositions[x.from.toString()];w&&S&&g.setConstantPatternPositions(w,S)}var E=t.translatePosMatrix(m.posMatrix,y,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),T=r.paint.get("fill-extrusion-vertical-gradient"),A=c?Zn(E,t,T,h,m,p,y):qn(E,t,T,h);_.draw(s,s.gl.TRIANGLES,i,o,a,Wt.backCCW,A,r.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,r.paint,t.transform.zoom,g)}}}function co(t,e,r,n){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var i=t.context,o=e.getSource().maxzoom,a=t.depthModeForSublayer(0,Rt.ReadOnly),s=jt.disabled,u=t.colorModeForRenderPass(),l=0,c=n;l<c.length;l+=1){var p=c[l],h=e.getTile(p);h.needsHillshadePrepare&&"offscreen"===t.renderPass?ho(t,h,r,o,a,s,u):"translucent"===t.renderPass&&po(t,h,r,a,s,u)}i.viewport.set([0,0,t.width,t.height])}}function po(t,e,r,n,i,o){var a=t.context,s=a.gl,u=e.fbo;if(u){var l=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get());var c=fi(t,e,r);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?l.draw(a,s.TRIANGLES,n,i,o,Wt.disabled,c,r.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):l.draw(a,s.TRIANGLES,n,i,o,Wt.disabled,c,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function ho(e,r,n,i,o,a,s){var u=e.context,l=u.gl,c=r.dem;if(c&&c.data){var p=c.dim,h=c.stride,f=c.getPixels();if(u.activeTexture.set(l.TEXTURE1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||e.getTileTexture(h),r.demTexture){var d=r.demTexture;d.update(f,{premultiply:!1}),d.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else r.demTexture=new t.Texture(u,f,l.RGBA,{premultiply:!1}),r.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);u.activeTexture.set(l.TEXTURE0);var m=r.fbo;if(!m){var y=new t.Texture(u,{width:p,height:p,data:null},l.RGBA);y.bind(l.LINEAR,l.CLAMP_TO_EDGE),m=r.fbo=u.createFramebuffer(p,p),m.colorAttachment.set(y.texture)}u.bindFramebuffer.set(m.framebuffer),u.viewport.set([0,0,p,p]),e.useProgram("hillshadePrepare").draw(u,l.TRIANGLES,o,a,s,Wt.disabled,di(r.tileID,c,i),n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function fo(t,e,r,n){if("translucent"===t.renderPass&&0!==r.paint.get("raster-opacity"))for(var i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster"),u=jt.disabled,l=t.colorModeForRenderPass(),c=n.length&&n[0].overscaledZ,p=!t.options.moving,h=0,f=n;h<f.length;h+=1){var d=f[h],m=t.depthModeForSublayer(d.overscaledZ-c,1===r.paint.get("raster-opacity")?Rt.ReadWrite:Rt.ReadOnly,o.LESS),y=e.getTile(d),v=t.transform.calculatePosMatrix(d.toUnwrapped(),p);y.registerFadeDuration(r.paint.get("raster-fade-duration"));var g=e.findLoadedParent(d,0),_=mo(y,g,e,r,t.transform),x=void 0,b=void 0,w="nearest"===r.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),y.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),g?(g.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),x=Math.pow(2,g.tileID.overscaledZ-y.tileID.overscaledZ),b=[y.tileID.canonical.x*x%1,y.tileID.canonical.y*x%1]):y.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var S=ki(v,b||[0,0],x||1,_,r);a instanceof O?s.draw(i,o.TRIANGLES,m,u,l,Wt.disabled,S,r.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):y.maskedBoundsBuffer&&y.maskedIndexBuffer&&y.segments?s.draw(i,o.TRIANGLES,m,u,l,Wt.disabled,S,r.id,y.maskedBoundsBuffer,y.maskedIndexBuffer,y.segments,r.paint,t.transform.zoom):s.draw(i,o.TRIANGLES,m,u,l,Wt.disabled,S,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function mo(e,r,n,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),u=(s-e.timeAdded)/a,l=r?(s-r.timeAdded)/a:-1,c=n.getSource(),p=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!r||Math.abs(r.tileID.overscaledZ-p)>Math.abs(e.tileID.overscaledZ-p),f=h&&e.refreshedUponExpiration?1:t.clamp(h?u:1-l,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),r?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}function yo(t,e,r){var n=r.paint.get("background-color"),i=r.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,l=r.paint.get("background-pattern");if(!t.isPatternMissing(l)){var c=!l&&1===n.a&&1===i&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var p=jt.disabled,h=t.depthModeForSublayer(0,"opaque"===c?Rt.ReadWrite:Rt.ReadOnly),f=t.colorModeForRenderPass(),d=t.useProgram(l?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:u});l&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var y=r.getCrossfadeParameters(),v=0,g=m;v<g.length;v+=1){var _=g[v],x=t.transform.calculatePosMatrix(_.toUnwrapped()),b=l?ji(x,i,t,l,{tileID:_,tileSize:u},y):Ui(x,i,n);d.draw(o,a.TRIANGLES,h,p,f,Wt.disabled,b,r.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}}function vo(t,e,r){for(var n=0;n<r.length;n++)go(t,e,r[n])}function go(e,r,n){var i=e.context,o=i.gl,a=n.posMatrix,s=e.useProgram("debug"),u=Rt.disabled,l=jt.disabled,c=e.colorModeForRenderPass(),p="$debug";s.draw(i,o.LINE_STRIP,u,l,c,Wt.disabled,ii(a,t.Color.red),p,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var h=r.getTileByID(n.key).latestRawTileData,f=h&&h.byteLength||0,d=Math.floor(f/1024),m=r.getTile(n).tileSize,y=512/Math.min(m,512),v=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(v+=" => "+n.overscaledZ);for(var g=xo(v+" "+d+"kb",50,200*y,5*y),_=new t.StructArrayLayout2i4,x=new t.StructArrayLayout2ui4,b=0;b<g.length;b+=2)_.emplaceBack(g[b],g[b+1]),x.emplaceBack(b,b+1);for(var w=i.createVertexBuffer(_,lr.members),S=i.createIndexBuffer(x),E=t.SegmentVector.simpleSegment(0,0,_.length/2,_.length/2),T=t.EXTENT/(Math.pow(2,e.transform.zoom-n.overscaledZ)*m*y),A=1,k=[],I=-A;I<=A;I++)for(var C=-A;C<=A;C++){if(0===I&&0===C)break;k.push([I,C])}for(var P=0;P<k.length;P++){var M=k[P];s.draw(i,o.LINES,u,l,c,Wt.disabled,ii(t.translate([],a,[T*M[0],T*M[1],0]),t.Color.white),p,w,S,E)}s.draw(i,o.LINES,u,l,c,Wt.disabled,ii(a,t.Color.black),p,w,S,E),w.destroy(),S.destroy(),E.destroy()}var _o={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};function xo(t,e,r,n){n=n||1;var i,o,a,s,u,l,c,p,h=[];for(i=0,o=t.length;i<o;i++)if(u=_o[t[i]],u){for(p=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?p=null:(l=e+u[1][a]*n,c=r-u[1][a+1]*n,p&&h.push(p.x,p.y,l,c),p={x:l,y:c});e+=u[0]*n}return h}function bo(t,e,r){var n=t.context,i=r.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),o.call(i,n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),n.setStencilMode(jt.disabled);var a="3d"===i.renderingMode?new Rt(t.context.gl.LEQUAL,Rt.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Rt.ReadOnly);n.setDepthMode(a),i.render(n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState(),n.bindFramebuffer.set(null)}}var wo={symbol:Wi,circle:to,heatmap:eo,line:oo,fill:ao,"fill-extrusion":uo,hillshade:co,raster:fo,background:yo,debug:vo,custom:bo},So=function(e,r){this.context=new $t(e),this.transform=r,this._tileTextures={},this.setup(),this.numSublayers=Ht.maxUnderzooming+Ht.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new ir,this.gpuTimers={}};function Eo(e,r,n,i){void 0===i&&(i=!0);var o=1<<e,a={};function s(r,s,u){var l,c,p,h;if(u>=0&&u<=o)for(l=r;l<s;l++)c=Math.floor(l/o),p=(l%o+o)%o,0!==c&&!0!==i||(h=new t.OverscaledTileID(n,c,e,p,u),a[h.key]=h)}var u=r.map(function(e){return new t.Point(e.x,e.y)._mult(o)});return ko(u[0],u[1],u[2],0,o,s),ko(u[2],u[3],u[0],0,o,s),Object.keys(a).map(function(t){return a[t]})}function To(t,e){if(t.y>e.y){var r=t;t=e,e=r}return{x0:t.x,y0:t.y,x1:e.x,y1:e.y,dx:e.x-t.x,dy:e.y-t.y}}function Ao(t,e,r,n,i){var o=Math.max(r,Math.floor(e.y0)),a=Math.min(n,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var u=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,p=e.dx<0,h=o;h<a;h++){var f=u*Math.max(0,Math.min(t.dy,h+c-t.y0))+t.x0,d=l*Math.max(0,Math.min(e.dy,h+p-e.y0))+e.x0;i(Math.floor(d),Math.ceil(f),h)}}function ko(t,e,r,n,i,o){var a,s=To(t,e),u=To(e,r),l=To(r,t);s.dy>u.dy&&(a=s,s=u,u=a),s.dy>l.dy&&(a=s,s=l,l=a),u.dy>l.dy&&(a=u,u=l,l=a),s.dy&&Ao(l,s,n,i,o),u.dy&&Ao(l,u,n,i,o)}So.prototype.resize=function(e,r){var n=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=r*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,o=this.style._order;i<o.length;i+=1){var a=o[i];this.style._layers[a].resize()}this.depthRbo&&(n.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},So.prototype.setup=function(){var e=this.context,r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(r,lr.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(n,lr.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,lr.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var u=this.context.gl;this.stencilClearMode=new jt({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},So.prototype.clearStencil=function(){var e=this.context,r=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var n=t.create();t.ortho(n,0,this.width,this.height,0,0,1),t.scale(n,n,[r.drawingBufferWidth,r.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,r.TRIANGLES,Rt.disabled,this.stencilClearMode,Zt.disabled,Wt.disabled,ai(n),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},So.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var r=this.context,n=r.gl;this.nextStencilID+e.length>256&&this.clearStencil(),r.setColorMode(Zt.disabled),r.setDepthMode(Rt.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;i.draw(r,n.TRIANGLES,Rt.disabled,new jt({func:n.ALWAYS,mask:0},u,255,n.KEEP,n.KEEP,n.REPLACE),Zt.disabled,Wt.disabled,ai(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},So.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new jt({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},So.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new jt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},So.prototype.colorModeForRenderPass=function(){var e=this.context.gl;if(this._showOverdrawInspector){var r=8,n=1/r;return new Zt([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Zt.unblended:Zt.alphaBlended},So.prototype.depthModeForSublayer=function(t,e,r){if(!this.opaquePassEnabledForLayer())return Rt.disabled;var n=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Rt(r||this.context.gl.LEQUAL,e,[n,n])},So.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},So.prototype.render=function(e,r){var n=this;this.style=e,this.options=r,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var i=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var u={},l={},c={};for(var p in o){var h=o[p];u[p]=h.getVisibleCoordinates(),l[p]=u[p].slice().reverse(),c[p]=h.getVisibleCoordinates(!0).reverse()}for(var f in o){var d=o[f],m=d.getSource();if("raster"===m.type||"raster-dem"===m.type){for(var y=[],v=0,g=u[f];v<g.length;v+=1){var _=g[v];y.push(d.getTile(_))}Vi(y,this.context)}}this.opaquePassCutoff=1/0;for(var x=0;x<i.length;x++){var b=i[x];if(this.style._layers[b].is3D()){this.opaquePassCutoff=x;break}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var w=0,S=i;w<S.length;w+=1){var E=S[w],T=this.style._layers[E];if(T.hasOffscreenPass()&&!T.isHidden(this.transform.zoom)){var A=l[T.source];("custom"===T.type||A.length)&&this.renderLayer(this,o[T.source],T,A)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:r.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=r.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var k=this.style._layers[i[this.currentLayer]],I=o[k.source],C=u[k.source];this._renderTileClippingMasks(k,C),this.renderLayer(this,I,k,C)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var P=this.style._layers[i[this.currentLayer]],M=o[P.source],z=("symbol"===P.type?c:l)[P.source];this._renderTileClippingMasks(P,u[P.source]),this.renderLayer(this,M,P,z)}if(this.options.showTileBoundaries){var L,D,O=t.values(this.style._layers);O.forEach(function(t){t.source&&!t.isHidden(n.transform.zoom)&&(t.source!==(D&&D.id)&&(D=n.style.sourceCaches[t.source]),(!L||L.getSource().maxzoom<D.getSource().maxzoom)&&(L=D))}),L&&wo.debug(this,L,L.getVisibleCoordinates())}this.context.setDefault()},So.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},So.prototype.renderLayer=function(t,e,r,n){r.isHidden(this.transform.zoom)||("background"===r.type||"custom"===r.type||n.length)&&(this.id=r.id,this.gpuTimingStart(r),wo[r.type](t,e,r,n,this.style.placement.variableOffsets),this.gpuTimingEnd())},So.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,r=this.gpuTimers[t.id];r||(r=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),r.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,r.query)}},So.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},So.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},So.prototype.queryGpuTimers=function(t){var e={};for(var r in t){var n=t[r],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(n.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n.query),e[r]=o}return e},So.prototype.translatePosMatrix=function(e,r,n,i,o){if(!n[0]&&!n[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);n=[n[0]*u-n[1]*s,n[0]*s+n[1]*u]}var l=[o?n[0]:Le(r,n[0],this.transform.zoom),o?n[1]:Le(r,n[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,l),c},So.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},So.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},So.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from.toString()),r=this.imageManager.getPattern(t.to.toString());return!e||!r},So.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var r=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[r]||(this.cache[r]=new Fn(this.context,Bn[t],e,Ni[t],this._showOverdrawInspector)),this.cache[r]},So.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},So.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)};var Io=function(e,r,n,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=r||22,this._minPitch=void 0===n||null===n?0:n,this._maxPitch=void 0===i||null===i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},Co={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};function Po(t,e){var r=!1,n=null,i=function(){n=null,r&&(t(),n=setTimeout(i,e),r=!1)};return function(){return r=!0,n||i(),n}}Io.prototype.clone=function(){var t=new Io(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},Co.minZoom.get=function(){return this._minZoom},Co.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Co.maxZoom.get=function(){return this._maxZoom},Co.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Co.minPitch.get=function(){return this._minPitch},Co.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},Co.maxPitch.get=function(){return this._maxPitch},Co.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},Co.renderWorldCopies.get=function(){return this._renderWorldCopies},Co.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Co.worldSize.get=function(){return this.tileSize*this.scale},Co.centerPoint.get=function(){return this.size._div(2)},Co.size.get=function(){return new t.Point(this.width,this.height)},Co.bearing.get=function(){return-this.angle/Math.PI*180},Co.bearing.set=function(e){var r=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Co.pitch.get=function(){return this._pitch/Math.PI*180},Co.pitch.set=function(e){var r=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())},Co.fov.get=function(){return this._fov/Math.PI*180},Co.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Co.zoom.get=function(){return this._zoom},Co.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Co.center.get=function(){return this._center},Co.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Io.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},Io.prototype.getVisibleUnwrappedCoordinates=function(e){var r=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var n=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(n.x,i.x,o.x,a.x)),u=Math.floor(Math.max(n.x,i.x,o.x,a.x)),l=1,c=s-l;c<=u+l;c++)0!==c&&r.push(new t.UnwrappedTileID(c,e));return r},Io.prototype.coveringTiles=function(e){var r=this.coveringZoomLevel(e),n=r;if(void 0!==e.minzoom&&r<e.minzoom)return[];void 0!==e.maxzoom&&r>e.maxzoom&&(r=e.maxzoom);var i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,r),a=new t.Point(o*i.x-.5,o*i.y-.5),s=[this.pointCoordinate(new t.Point(0,0)),this.pointCoordinate(new t.Point(this.width,0)),this.pointCoordinate(new t.Point(this.width,this.height)),this.pointCoordinate(new t.Point(0,this.height))];return Eo(r,s,e.reparseOverscaled?n:r,this._renderWorldCopies).sort(function(t,e){return a.dist(t.canonical)-a.dist(e.canonical)})},Io.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Co.unmodified.get=function(){return this._unmodified},Io.prototype.zoomScale=function(t){return Math.pow(2,t)},Io.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Io.prototype.project=function(e){var r=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(r)*this.worldSize)},Io.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},Co.point.get=function(){return this.project(this.center)},Io.prototype.setLocationAtPoint=function(e,r){var n=this.pointCoordinate(r),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(n.x-i.x),o.y-(n.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},Io.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Io.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Io.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},Io.prototype.coordinateLocation=function(t){return t.toLngLat()},Io.prototype.pointCoordinate=function(e){var r=0,n=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse);var o=n[3],a=i[3],s=n[0]/o,u=i[0]/a,l=n[1]/o,c=i[1]/a,p=n[2]/o,h=i[2]/a,f=p===h?0:(r-p)/(h-p);return new t.MercatorCoordinate(t.number(s,u,f)/this.worldSize,t.number(l,c,f)/this.worldSize)},Io.prototype.coordinatePoint=function(e){var r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(r,r,this.pixelMatrix),new t.Point(r[0]/r[3],r[1]/r[3])},Io.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Io.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Io.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Io.prototype.calculatePosMatrix=function(e,r){void 0===r&&(r=!1);var n=e.key,i=r?this._alignedPosMatrixCache:this._posMatrixCache;if(i[n])return i[n];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(u,r?this.alignedProjMatrix:this.projMatrix,u),i[n]=new Float32Array(u),i[n]},Io.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Io.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,r,n,i,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=t.mercatorYfromLat(p[1])*this.worldSize,a=t.mercatorYfromLat(p[0])*this.worldSize,e=a-o<l.y?l.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=t.mercatorXfromLng(h[0])*this.worldSize,u=t.mercatorXfromLng(h[1])*this.worldSize,r=u-s<l.x?l.x/(u-s):0}var f=this.point,d=Math.max(r||0,e||0);if(d)return this.center=this.unproject(new t.Point(r?(u+s)/2:f.x,e?(a+o)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var m=f.y,y=l.y/2;m-y<o&&(i=o+y),m+y>a&&(i=a-y)}if(this.lngRange){var v=f.x,g=l.x/2;v-g<s&&(n=s+g),v+g>u&&(n=u-g)}void 0===n&&void 0===i||(this.center=this.unproject(new t.Point(void 0!==n?n:f.x,void 0!==i?i:f.y))),this._unmodified=c,this._constraining=!1}},Io.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,r=Math.PI/2+this._pitch,n=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-r-e),i=this.point,o=i.x,a=i.y,s=Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance,u=1.01*s,l=this.height/50,c=new Float64Array(16);t.perspective(c,this._fov,this.width/this.height,l,u),t.scale(c,c,[1,-1,1]),t.translate(c,c,[0,0,-this.cameraToCenterDistance]),t.rotateX(c,c,this._pitch),t.rotateZ(c,c,this.angle),t.translate(c,c,[-o,-a,0]),this.mercatorMatrix=t.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),t.scale(c,c,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=c;var p=this.width%2/2,h=this.height%2/2,f=Math.cos(this.angle),d=Math.sin(this.angle),m=o-Math.round(o)+f*p+d*h,y=a-Math.round(a)+f*h+d*p,v=new Float64Array(c);if(t.translate(v,v,[m>.5?m-1:m,y>.5?y-1:y,0]),this.alignedProjMatrix=v,c=t.create(),t.scale(c,c,[this.width/2,-this.height/2,1]),t.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=t.create(),t.scale(c,c,[1,-1,1]),t.translate(c,c,[-1,-1,0]),t.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),c=t.invert(new Float64Array(16),this.pixelMatrix),!c)throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Io.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),r=[e.x*this.worldSize,e.y*this.worldSize,0,1],n=t.transformMat4(r,r,this.pixelMatrix);return n[3]/this.cameraToCenterDistance},Io.prototype.getCameraPoint=function(){var e=this._pitch,r=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,r))},Io.prototype.getCameraQueryGeometry=function(e){var r=this.getCameraPoint();if(1===e.length)return[e[0],r];for(var n=r.x,i=r.y,o=r.x,a=r.y,s=0,u=e;s<u.length;s+=1){var l=u[s];n=Math.min(n,l.x),i=Math.min(i,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}return[new t.Point(n,i),new t.Point(o,i),new t.Point(o,a),new t.Point(n,a),new t.Point(n,i)]},Object.defineProperties(Io.prototype,Co);var Mo=function(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Po(this._updateHashUnthrottled.bind(this),300)};Mo.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Mo.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Mo.prototype.getHashString=function(e){var r=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(r.lng*o)/o,s=Math.round(r.lat*o)/o,u=this._map.getBearing(),l=this._map.getPitch(),c="";if(c+=e?"/"+a+"/"+s+"/"+n:n+"/"+s+"/"+a,(u||l)&&(c+="/"+Math.round(10*u)/10),l&&(c+="/"+Math.round(l)),this._hashName){var p=this._hashName,h=!1,f=t.window.location.hash.slice(1).split("&").map(function(t){var e=t.split("=")[0];return e===p?(h=!0,e+"="+c):t}).filter(function(t){return t});return h||f.push(p+"="+c),"#"+f.join("&")}return"#"+c},Mo.prototype._getCurrentHash=function(){var e,r=this,n=t.window.location.hash.replace("#","");return this._hashName?(n.split("&").map(function(t){return t.split("=")}).forEach(function(t){t[0]===r._hashName&&(e=t)}),(e&&e[1]||"").split("/")):n.split("/")},Mo.prototype._onHashChange=function(){var t=this._getCurrentHash();return t.length>=3&&!t.some(function(t){return isNaN(t)})&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},Mo.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(r){}};var zo=function(e){function n(n,i,o,a){void 0===a&&(a={});var s=r.mousePos(i.getCanvasContainer(),o),u=i.unproject(s);e.call(this,n,t.extend({point:s,lngLat:u,originalEvent:o},a)),this._defaultPrevented=!1,this.target=i}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var i={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,i),n}(t.Event),Lo=function(e){function n(n,i,o){var a=r.touchPos(i.getCanvasContainer(),o),s=a.map(function(t){return i.unproject(t)}),u=a.reduce(function(t,e,r,n){return t.add(e.div(n.length))},new t.Point(0,0)),l=i.unproject(u);e.call(this,n,{points:a,point:u,lngLats:s,lngLat:l,originalEvent:o}),this._defaultPrevented=!1}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var i={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,i),n}(t.Event),Do=function(t){function e(e,r,n){t.call(this,e,{originalEvent:n}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,r),e}(t.Event),Oo=4.000244140625,Bo=.01,Ro=1/450,Fo=2,Uo=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,this._defaultZoomRate=Bo,this._wheelZoomRate=Ro,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Uo.prototype.setZoomRate=function(t){this._defaultZoomRate=t},Uo.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},Uo.prototype.isEnabled=function(){return!!this._enabled},Uo.prototype.isActive=function(){return!!this._active},Uo.prototype.isZooming=function(){return!!this._zooming},Uo.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},Uo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Uo.prototype.onWheel=function(e){if(this.isEnabled()){var r=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,n=t.browser.now(),i=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==r&&r%Oo===0?this._type="wheel":0!==r&&Math.abs(r)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),e.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=e,this._delta-=r,this.isActive()||this._start(e)),e.preventDefault()}},Uo.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},Uo.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e}))),this._finishTimeout&&clearTimeout(this._finishTimeout);var n=r.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},Uo.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var r=this._map.transform;if(0!==this._delta){var n="wheel"===this._type&&Math.abs(this._delta)>Oo?this._wheelZoomRate:this._defaultZoomRate,i=Fo/(1+Math.exp(-Math.abs(this._delta*n)));this._delta<0&&0!==i&&(i=1/i);var o="number"===typeof this._targetZoom?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"===typeof this._targetZoom?this._targetZoom:r.zoom,s=this._startZoom,u=this._easing,l=!1;if("wheel"===this._type&&s&&u){t.assert(u&&"number"===typeof s);var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=u(c);r.zoom=t.number(s,a,p),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else r.zoom=a,l=!0;r.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},Uo.prototype._smoothOutEasing=function(e){var r=t.ease;if(this._prevEase){var n=this._prevEase,i=(t.browser.now()-n.start)/n.duration,o=n.easing(i+.01)-n.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);r=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:r},r};var jo=function(e,r){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=r.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};jo.prototype.isEnabled=function(){return!!this._enabled},jo.prototype.isActive=function(){return!!this._active},jo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},jo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},jo.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),r.disableDrag(),this._startPos=this._lastPos=r.mousePos(this._el,e),this._active=!0)},jo.prototype._onMouseMove=function(t){var e=r.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=e,this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(n.x,e.x),o=Math.max(n.x,e.x),a=Math.min(n.y,e.y),s=Math.max(n.y,e.y);r.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"}},jo.prototype._onMouseUp=function(e){if(0===e.button){var n=this._startPos,i=r.mousePos(this._el,e);this._finish(),r.suppressClick(),n.x===i.x&&n.y===i.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(n,i,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},jo.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},jo.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag(),delete this._startPos,delete this._lastPos},jo.prototype._fireEvent=function(e,r){return this._map.fire(new t.Event(e,{originalEvent:r}))};var No=.25,Vo=t.bezier(0,0,No,1),qo=180,Zo=720,Go=function(e,r){this._map=e,this._el=r.element||e.getCanvasContainer(),this._state="disabled",this._button=r.button||"right",this._bearingSnap=r.bearingSnap||0,this._pitchWithRotate=!1!==r.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};Go.prototype.isEnabled=function(){return"disabled"!==this._state},Go.prototype.isActive=function(){return"active"===this._state},Go.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},Go.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled";break}},Go.prototype.onMouseDown=function(e){if("enabled"===this._state){var n="touchstart"===e.type;if(n)this._startTime=Date.now();else if("right"===this._button){if(this._eventButton=r.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==r.mouseButton(e))return;this._eventButton=0}r.disableDrag(),n?(t.window.document.addEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("touchend",this._onMouseUp)):(t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp)),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._prevPos=this._lastPos=r.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},Go.prototype._onMouseMove=function(t){var e=r.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Go.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var r=this._map.transform,n=this._prevPos,i=this._lastPos,o=.8*(n.x-i.x),a=-.5*(n.y-i.y),s=r.bearing-o,u=r.pitch-a,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([t.browser.now(),this._map._normalizeBearing(s,c[1])]);var p=r.bearing;if(r.bearing=s,this._pitchWithRotate){var h=r.pitch;r.pitch=u,r.pitch!==h&&this._fireEvent("pitch",e)}r.bearing!==p&&this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._prevPos=this._lastPos}},Go.prototype._onMouseUp=function(e){var n="touchend"===e.type;if(n&&this._startPos===this._lastPos&&Date.now()-this._startTime<300&&this._el.click(),r.mouseButton(e)===this._eventButton)switch(this._state){case"active":this._state="enabled",r.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(e);break;case"pending":this._state="enabled",this._unbind();break;default:t.assert(!1);break}},Go.prototype._onBlur=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",e),this._pitchWithRotate&&this._fireEvent("pitchend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind();break;default:t.assert(!1);break}},Go.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.document.removeEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("touchend",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),r.enableDrag()},Go.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._lastPos},Go.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var r=this._map,n=r.getBearing(),i=this._inertia,o=function(){Math.abs(n)<e._bearingSnap?r.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],u=i[i.length-2],l=r._normalizeBearing(n,u[1]),c=s[1]-a[1],p=c<0?-1:1,h=(s[0]-a[0])/1e3;if(0!==c&&0!==h){var f=Math.abs(c*(No/h));f>qo&&(f=qo);var d=f/(Zo*No),m=p*f*(d/2);l+=m,Math.abs(r._normalizeBearing(l,0))<this._bearingSnap&&(l=r._normalizeBearing(0,l)),r.rotateTo(l,{duration:1e3*d,easing:Vo,noMoveStart:!0},{originalEvent:t})}else o()}},Go.prototype._fireEvent=function(e,r){return this._map.fire(new t.Event(e,r?{originalEvent:r}:{}))},Go.prototype._drainInertiaBuffer=function(){var e=this._inertia,r=t.browser.now(),n=160;while(e.length>0&&r-e[0][0]>n)e.shift()};var Xo={linearity:.3,easing:t.bezier(0,0,.3,1),maxSpeed:1400,deceleration:2500},Wo=function(e,r){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=r.clickTolerance||1,this._inertiaOptions=Xo,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};Wo.prototype.isEnabled=function(){return"disabled"!==this._state},Wo.prototype.isActive=function(){return"active"===this._state},Wo.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled",this._inertiaOptions=t.extend(Xo,e))},Wo.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled";break}},Wo.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==r.mouseButton(e)||(r.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),r.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},Wo.prototype.onTouchStart=function(e){this.isEnabled()&&(e.touches&&e.touches.length>1&&("pending"===this._state||"active"===this._state)||(r.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),r.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},Wo.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._prevPos=this._lastPos=r.mousePos(this._el,e),this._startTouch=this._lastTouch=t.window.TouchEvent&&e instanceof t.window.TouchEvent?r.touchPos(this._el,e):null,this._inertia=[[t.browser.now(),this._startPos]]},Wo.prototype._touchesMatch=function(t,e){return!(!t||!e||t.length!==e.length)&&t.every(function(t,r){return e[r]===t})},Wo.prototype._onMove=function(e){e.preventDefault();var n=t.window.TouchEvent&&e instanceof t.window.TouchEvent?r.touchPos(this._el,e):null,i=r.mousePos(this._el,e),o=n?this._touchesMatch(this._lastTouch,n):this._lastPos.equals(i);o||"pending"===this._state&&i.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=i,this._lastTouch=n,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._shouldStart=!0),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Wo.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t)if(this._map.touchZoomRotate.isActive())this._abort(t);else if(this._shouldStart&&(this._fireEvent("dragstart",t),this._fireEvent("movestart",t),this._shouldStart=!1),this.isActive()){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._prevPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._prevPos=this._lastPos,delete this._lastMoveEvent}},Wo.prototype._onMouseUp=function(e){if(0===r.mouseButton(e))switch(this._state){case"active":this._state="enabled",r.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind();break;default:t.assert(!1);break}},Wo.prototype._onTouchEnd=function(e){if(e.touches&&0!==e.touches.length)switch(this._state){case"pending":case"active":break;case"enabled":this.onTouchStart(e);break;default:t.assert(!1);break}else switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind();break;default:t.assert(!1);break}},Wo.prototype._abort=function(e){switch(this._state){case"active":this._state="enabled",this._shouldStart||(this._fireEvent("dragend",e),this._fireEvent("moveend",e)),this._unbind(),this._deactivate(),t.window.TouchEvent&&e instanceof t.window.TouchEvent&&e.touches.length>1&&r.addEventListener(t.window.document,"touchend",this._onTouchEnd);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind();break;default:t.assert(!1);break}},Wo.prototype._onBlur=function(t){this._abort(t)},Wo.prototype._unbind=function(){r.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),r.removeEventListener(t.window.document,"touchend",this._onTouchEnd),r.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),r.removeEventListener(t.window.document,"mouseup",this._onMouseUp),r.removeEventListener(t.window,"blur",this._onBlur)},Wo.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._mouseDownPos,delete this._lastPos,delete this._startTouch,delete this._lastTouch,delete this._shouldStart},Wo.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var r=e[e.length-1],n=e[0],i=r[1].sub(n[1]),o=(r[0]-n[0])/1e3;if(0===o||r[1].equals(n[1]))this._fireEvent("moveend",t);else{var a=this._inertiaOptions,s=a.linearity,u=a.easing,l=a.maxSpeed,c=a.deceleration,p=i.mult(s/o),h=p.mag();h>l&&(h=l,p._unit()._mult(h));var f=h/(c*s),d=p.mult(-f/2);this._map.panBy(d,{duration:1e3*f,easing:u,noMoveStart:!0},{originalEvent:t})}}},Wo.prototype._fireEvent=function(e,r){return this._map.fire(new t.Event(e,r?{originalEvent:r}:{}))},Wo.prototype._drainInertiaBuffer=function(){var e=this._inertia,r=t.browser.now(),n=160;while(e.length>0&&r-e[0][0]>n)e.shift()};var $o=100,Ho=15,Ko=10,Yo=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function Jo(t){return t*(2-t)}Yo.prototype.isEnabled=function(){return!!this._enabled},Yo.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Yo.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Yo.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,r=0,n=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?n=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),u={duration:300,delayEndEvents:500,easing:Jo,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+r*Ho,pitch:a.getPitch()+n*Ko,offset:[-i*$o,-o*$o],center:a.getCenter()};a.easeTo(u,{originalEvent:t})}};var Qo=30,ta=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};ta.prototype.isEnabled=function(){return!!this._enabled},ta.prototype.isActive=function(){return!!this._active},ta.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ta.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ta.prototype.onTouchStart=function(t){var e=this;if(this.isEnabled()&&!(t.points.length>1))if(this._tapped){var r=t.points[0],n=this._tappedPoint;if(n&&n.dist(r)<=Qo){t.originalEvent.preventDefault();var i=function(){e._tapped&&e._zoom(t),e._map.off("touchcancel",o),e._resetTapped()},o=function(){e._map.off("touchend",i),e._resetTapped()};this._map.once("touchend",i),this._map.once("touchcancel",o)}else this._resetTapped()}else this._tappedPoint=t.points[0],this._tapped=setTimeout(function(){e._tapped=null,e._tappedPoint=null},300)},ta.prototype._resetTapped=function(){clearTimeout(this._tapped),this._tapped=null,this._tappedPoint=null},ta.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},ta.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},ta.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var ea=.15,ra=t.bezier(0,0,ea,1),na=12,ia=2.5,oa=.15,aa=10,sa=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};sa.prototype.isEnabled=function(){return!!this._enabled},sa.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},sa.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},sa.prototype.disableRotation=function(){this._rotationDisabled=!0},sa.prototype.enableRotation=function(){this._rotationDisabled=!1},sa.prototype.isActive=function(){return this.isEnabled()&&!!this._gestureIntent},sa.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var n=r.mousePos(this._el,e.touches[0]),i=r.mousePos(this._el,e.touches[1]),o=n.add(i).div(2);this._startVec=n.sub(i),this._startAround=this._map.transform.pointLocation(o),this._gestureIntent=void 0,this._inertia=[],r.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),r.addEventListener(t.window.document,"touchend",this._onEnd)}},sa.prototype._getTouchEventData=function(t){var e=r.mousePos(this._el,t.touches[0]),n=r.mousePos(this._el,t.touches[1]),i=e.sub(n);return{vec:i,center:e.add(n).div(2),scale:i.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*i.angleWith(this._startVec)/Math.PI}},sa.prototype._onMove=function(e){if(2===e.touches.length){var r=this._getTouchEventData(e),n=r.vec,i=r.scale,o=r.bearing;if(!this._gestureIntent){var a=this._rotationDisabled&&1!==i||Math.abs(1-i)>oa,s=Math.abs(o)>aa;s?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=n)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},sa.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var r=this._map.transform;this._startScale||(this._startScale=r.scale,this._startBearing=r.bearing);var n=this._getTouchEventData(this._lastTouchEvent),i=n.center,o=n.bearing,a=n.scale,s=r.pointLocation(i),u=r.locationPoint(s);"rotate"===e&&(r.bearing=this._startBearing+o),r.zoom=r.scaleZoom(this._startScale*a),r.setLocationAtPoint(this._startAround,u),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),a,i])}},sa.prototype._onEnd=function(e){r.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),r.removeEventListener(t.window.document,"touchend",this._onEnd);var n=this._gestureIntent,i=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,n){this._map.fire(new t.Event(n+"end",{originalEvent:e})),this._drainInertiaBuffer();var o=this._inertia,a=this._map;if(o.length<2)a.snapToNorth({},{originalEvent:e});else{var s=o[o.length-1],u=o[0],l=a.transform.scaleZoom(i*s[1]),c=a.transform.scaleZoom(i*u[1]),p=l-c,h=(s[0]-u[0])/1e3,f=s[2];if(0!==h&&l!==c){var d=p*ea/h;Math.abs(d)>ia&&(d=d>0?ia:-ia);var m=1e3*Math.abs(d/(na*ea)),y=l+d*m/2e3;a.easeTo({zoom:y,duration:m,easing:ra,around:this._aroundCenter?a.getCenter():a.unproject(f),noMoveStart:!0},{originalEvent:e})}else a.snapToNorth({},{originalEvent:e})}}},sa.prototype._drainInertiaBuffer=function(){var e=this._inertia,r=t.browser.now(),n=160;while(e.length>2&&r-e[0][0]>n)e.shift()};var ua={scrollZoom:Uo,boxZoom:jo,dragRotate:Go,dragPan:Wo,keyboard:Yo,doubleClickZoom:ta,touchZoomRotate:sa};function la(t,e){var n=t.getCanvasContainer(),i=null,o=!1,a=null;for(var s in ua)t[s]=new ua[s](t,e),e.interactive&&e[s]&&t[s].enable(e[s]);function u(i){o=!0,a=r.mousePos(n,i);var s=new zo("mousedown",t,i);t.fire(s),s.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(i),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(i),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(i))}function l(e){var r=t.dragRotate.isActive();i&&!r&&t.fire(new zo("contextmenu",t,i)),i=null,o=!1,t.fire(new zo("mouseup",t,e))}function c(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){var r=e.target;while(r&&r!==n)r=r.parentNode;r===n&&t.fire(new zo("mousemove",t,e))}}function p(e){var r=e.target;while(r&&r!==n)r=r.parentNode;r===n&&t.fire(new zo("mouseover",t,e))}function h(e){t.fire(new zo("mouseout",t,e))}function f(r){var n=new Lo("touchstart",t,r);t.fire(n),n.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(r),t.touchZoomRotate.onStart(r),t.doubleClickZoom.onTouchStart(n))}function d(e){t.fire(new Lo("touchmove",t,e))}function m(e){t.fire(new Lo("touchend",t,e))}function y(e){t.fire(new Lo("touchcancel",t,e))}function v(i){var o=r.mousePos(n,i);(!a||o.equals(a)||o.dist(a)<e.clickTolerance)&&t.fire(new zo("click",t,i))}function g(e){var r=new zo("dblclick",t,e);t.fire(r),r.defaultPrevented||t.doubleClickZoom.onDblClick(r)}function _(e){var r=t.dragRotate.isActive();o||r?o&&(i=e):t.fire(new zo("contextmenu",t,e)),(t.dragRotate.isEnabled()||t.listens("contextmenu"))&&e.preventDefault()}function x(r){e.interactive&&t.stop();var n=new Do("wheel",t,r);t.fire(n),n.defaultPrevented||t.scrollZoom.onWheel(r)}r.addEventListener(n,"mouseout",h),r.addEventListener(n,"mousedown",u),r.addEventListener(n,"mouseup",l),r.addEventListener(n,"mousemove",c),r.addEventListener(n,"mouseover",p),r.addEventListener(n,"touchstart",f,{passive:!1}),r.addEventListener(n,"touchmove",d,{passive:!1}),r.addEventListener(n,"touchend",m),r.addEventListener(n,"touchcancel",y),r.addEventListener(n,"click",v),r.addEventListener(n,"dblclick",g),r.addEventListener(n,"contextmenu",_),r.addEventListener(n,"wheel",x,{passive:!1})}var ca=function(e){function r(r,n){e.call(this),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},r.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},r.prototype.panBy=function(e,r,n){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},r),n)},r.prototype.panTo=function(e,r,n){return this.easeTo(t.extend({center:e},r),n)},r.prototype.getZoom=function(){return this.transform.zoom},r.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},r.prototype.zoomTo=function(e,r,n){return this.easeTo(t.extend({zoom:e},r),n)},r.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},r.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},r.prototype.getBearing=function(){return this.transform.bearing},r.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},r.prototype.rotateTo=function(e,r,n){return this.easeTo(t.extend({bearing:e},r),n)},r.prototype.resetNorth=function(e,r){return this.rotateTo(0,t.extend({duration:1e3},e),r),this},r.prototype.resetNorthPitch=function(e,r){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),r),this},r.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},r.prototype.getPitch=function(){return this.transform.pitch},r.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},r.prototype.cameraForBounds=function(e,r){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,r)},r.prototype._cameraForBoxAndBearing=function(e,r,n,i){if(i=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},i),"number"===typeof i.padding){var o=i.padding;i.padding={top:o,bottom:o,right:o,left:o}}if(t.deepEqual(Object.keys(i.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){var a=this.transform,s=a.project(t.LngLat.convert(e)),u=a.project(t.LngLat.convert(r)),l=s.rotate(-n*Math.PI/180),c=u.rotate(-n*Math.PI/180),p=new t.Point(Math.max(l.x,c.x),Math.max(l.y,c.y)),h=new t.Point(Math.min(l.x,c.x),Math.min(l.y,c.y)),f=p.sub(h),d=(a.width-i.padding.left-i.padding.right)/f.x,m=(a.height-i.padding.top-i.padding.bottom)/f.y;if(!(m<0||d<0)){var y=Math.min(a.scaleZoom(a.scale*Math.min(d,m)),i.maxZoom),v=t.Point.convert(i.offset),g=(i.padding.left-i.padding.right)/2,_=(i.padding.top-i.padding.bottom)/2,x=new t.Point(v.x+g,v.y+_),b=x.mult(a.scale/a.zoomScale(y)),w=a.unproject(s.add(u).div(2).sub(b));return{center:w,zoom:y,bearing:n}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},r.prototype.fitBounds=function(t,e,r){return this._fitInternal(this.cameraForBounds(t,e),e,r)},r.prototype.fitScreenCoordinates=function(e,r,n,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(r)),n,i),i,o)},r.prototype._fitInternal=function(e,r,n){return e?(r=t.extend(e,r),r.linear?this.easeTo(r,n):this.flyTo(r,n)):this},r.prototype.jumpTo=function(e,r){this.stop();var n=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(i=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=t.LngLat.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(o=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(a=!0,n.pitch=+e.pitch),this.fire(new t.Event("movestart",r)).fire(new t.Event("move",r)),i&&this.fire(new t.Event("zoomstart",r)).fire(new t.Event("zoom",r)).fire(new t.Event("zoomend",r)),o&&this.fire(new t.Event("rotatestart",r)).fire(new t.Event("rotate",r)).fire(new t.Event("rotateend",r)),a&&this.fire(new t.Event("pitchstart",r)).fire(new t.Event("pitch",r)).fire(new t.Event("pitchend",r)),this.fire(new t.Event("moveend",r))},r.prototype.easeTo=function(e,r){var n=this;this.stop(),e=t.extend({offset:[0,0],duration:500,easing:t.ease},e),(!1===e.animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u="zoom"in e?+e.zoom:o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,p=i.centerPoint.add(t.Point.convert(e.offset)),h=i.pointLocation(p),f=t.LngLat.convert(e.center||h);this._normalizeCenter(f);var d,m,y=i.project(h),v=i.project(f).sub(y),g=i.zoomScale(u-o);return e.around&&(d=t.LngLat.convert(e.around),m=i.locationPoint(d)),this._zooming=u!==o,this._rotating=a!==l,this._pitching=c!==s,this._prepareEase(r,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(n._zooming&&(i.zoom=t.number(o,u,e)),n._rotating&&(i.bearing=t.number(a,l,e)),n._pitching&&(i.pitch=t.number(s,c,e)),d)i.setLocationAtPoint(d,m);else{var h=i.zoomScale(i.zoom-o),f=u>o?Math.min(2,g):Math.max(.5,g),_=Math.pow(f,1-e),x=i.unproject(y.add(v.mult(e*_)).mult(h));i.setLocationAtPoint(i.renderWorldCopies?x.wrap():x,p)}n._fireMoveEvents(r)},function(){e.delayEndEvents?n._easeEndTimeoutID=setTimeout(function(){return n._afterEase(r)},e.delayEndEvents):n._afterEase(r)},e),this},r.prototype._prepareEase=function(e,r){this._moving=!0,r||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},r.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},r.prototype._afterEase=function(e){var r=this._zooming,n=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,r&&this.fire(new t.Event("zoomend",e)),n&&this.fire(new t.Event("rotateend",e)),i&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},r.prototype.flyTo=function(e,r){var n=this;if(!e.essential&&t.browser.prefersReducedMotion){var i=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,r)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,a=this.getZoom(),s=this.getBearing(),u=this.getPitch(),l="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):a,c="bearing"in e?this._normalizeBearing(e.bearing,s):s,p="pitch"in e?+e.pitch:u,h=o.zoomScale(l-a),f=o.centerPoint.add(t.Point.convert(e.offset)),d=o.pointLocation(f),m=t.LngLat.convert(e.center||d);this._normalizeCenter(m);var y=o.project(d),v=o.project(m).sub(y),g=e.curve,_=Math.max(o.width,o.height),x=_/h,b=v.mag();if("minZoom"in e){var w=t.clamp(Math.min(e.minZoom,a,l),o.minZoom,o.maxZoom),S=_/o.zoomScale(w-a);g=Math.sqrt(S/b*2)}var E=g*g;function T(t){var e=(x*x-_*_+(t?-1:1)*E*E*b*b)/(2*(t?x:_)*E*b);return Math.log(Math.sqrt(e*e+1)-e)}function A(t){return(Math.exp(t)-Math.exp(-t))/2}function k(t){return(Math.exp(t)+Math.exp(-t))/2}function I(t){return A(t)/k(t)}var C=T(0),P=function(t){return k(C)/k(C+g*t)},M=function(t){return _*((k(C)*I(C+g*t)-A(C))/E)/b},z=(T(1)-C)/g;if(Math.abs(b)<1e-6||!isFinite(z)){if(Math.abs(_-x)<1e-6)return this.easeTo(e,r);var L=x<_?-1:1;z=Math.abs(Math.log(x/_))/g,M=function(){return 0},P=function(t){return Math.exp(L*g*t)}}if("duration"in e)e.duration=+e.duration;else{var D="screenSpeed"in e?+e.screenSpeed/g:+e.speed;e.duration=1e3*z/D}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==c,this._pitching=p!==u,this._prepareEase(r,!1),this._ease(function(e){var i=e*z,h=1/P(i);o.zoom=1===e?l:a+o.scaleZoom(h),n._rotating&&(o.bearing=t.number(s,c,e)),n._pitching&&(o.pitch=t.number(u,p,e));var d=1===e?m:o.unproject(y.add(v.mult(M(i))).mult(h));o.setLocationAtPoint(o.renderWorldCopies?d.wrap():d,f),n._fireMoveEvents(r)},function(){return n._afterEase(r)},e),this},r.prototype.isEasing=function(){return!!this._easeFrameId},r.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},r.prototype._ease=function(e,r,n){!1===n.animate||0===n.duration?(e(1),r()):(this._easeStart=t.browser.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},r.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},r.prototype._normalizeBearing=function(e,r){e=t.wrap(e,-180,180);var n=Math.abs(e-r);return Math.abs(e-360-r)<n&&(e-=360),Math.abs(e+360-r)<n&&(e+=360),e},r.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var r=t.lng-e.center.lng;t.lng+=r>180?-360:r<-180?360:0}},r}(t.Evented),pa=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};pa.prototype.getDefaultPosition=function(){return"bottom-right"},pa.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=r.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},pa.prototype.onRemove=function(){r.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},pa.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var n=r.reduce(function(t,e,n){return e.value&&(t+=e.key+"="+e.value+(n<r.length-1?"&":"")),t},"?");e.href=t.config.FEEDBACK_URL+"/"+n+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},pa.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},pa.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(function(t){return"string"!==typeof t?"":t})):"string"===typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var r=this._map.style.sourceCaches;for(var n in r){var i=r[n];if(i.used){var o=i.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort(function(t,e){return t.length-e.length}),t=t.filter(function(e,r){for(var n=r+1;n<t.length;n++)if(t[n].indexOf(e)>=0)return!1;return!0});var a=t.join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},pa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var ha=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};ha.prototype.onAdd=function(t){this._map=t,this._container=r.create("div","mapboxgl-ctrl");var e=r.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ha.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ha.prototype.getDefaultPosition=function(){return"bottom-left"},ha.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},ha.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t){var r=t[e].getSource();if(r.mapbox_logo)return!0}return!1}},ha.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var fa=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};fa.prototype.add=function(t){var e=++this._id,r=this._queue;return r.push({callback:t,id:e,cancelled:!1}),e},fa.prototype.remove=function(t){for(var e=this._currentlyRunning,r=e?this._queue.concat(e):this._queue,n=0,i=r;n<i.length;n+=1){var o=i[n];if(o.id===t)return void(o.cancelled=!0)}},fa.prototype.run=function(){t.assert(!this._currentlyRunning);var e=this._currentlyRunning=this._queue;this._queue=[];for(var r=0,n=e;r<n.length;r+=1){var i=n[r];if(!i.cancelled&&(i.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},fa.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var da={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ma=t.window.HTMLImageElement,ya=t.window.HTMLElement,va=-2,ga=22,_a=0,xa=60,ba={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:va,maxZoom:ga,minPitch:_a,maxPitch:xa,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},wa=function(n){function i(e){var r=this;if(e=t.extend({},ba,e),null!=e.minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<_a)throw new Error("minPitch must be greater than or equal to "+_a);if(null!=e.maxPitch&&e.maxPitch>xa)throw new Error("maxPitch must be less than or equal to "+xa);var i=new Io(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(n.call(this,i,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new fa,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},da,e.locale),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"===typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof ya))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return r._update(!1)}),this.on("moveend",function(){return r._update(!1)}),this.on("zoom",function(){return r._update(!0)}),"undefined"!==typeof t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),la(this,e);var o="string"===typeof e.hash&&e.hash||void 0;this._hash=e.hash&&new Mo(o).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new pa({customAttribution:e.customAttribution})),this.addControl(new ha,e.logoPosition),this.on("style.load",function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)}),this.on("data",function(e){r._update("style"===e.dataType),r.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){r.fire(new t.Event(e.dataType+"dataloading",e))})}n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i;var o={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return i.prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(e,r){if(void 0===r&&e.getDefaultPosition&&(r=e.getDefaultPosition()),void 0===r&&(r="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var n=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[r];return-1!==r.indexOf("bottom")?i.insertBefore(n,i.firstChild):i.appendChild(n),this},i.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var r=this._controls.indexOf(e);return r>-1&&this._controls.splice(r,1),e.onRemove(this),this},i.prototype.resize=function(e){var r=this._containerDimensions(),n=r[0],i=r[1];return this._resizeCanvas(n,i),this.transform.resize(n,i),this.painter.resize(n,i),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},i.prototype.setMinZoom=function(t){if(t=null===t||void 0===t?va:t,t>=va&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between "+va+" and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(t){if(t=null===t||void 0===t?ga:t,t>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.setMinPitch=function(t){if(t=null===t||void 0===t?_a:t,t<_a)throw new Error("minPitch must be greater than or equal to "+_a);if(t>=_a&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between "+_a+" and the current maxPitch, inclusive")},i.prototype.getMinPitch=function(){return this.transform.minPitch},i.prototype.setMaxPitch=function(t){if(t=null===t||void 0===t?xa:t,t>xa)throw new Error("maxPitch must be less than or equal to "+xa);if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},i.prototype.getMaxPitch=function(){return this.transform.maxPitch},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},i.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},i.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},i.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},i.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},i.prototype.on=function(t,e,r){var i=this;if(void 0===r)return n.prototype.on.call(this,t,e);var o=function(){var n;if("mouseenter"===t||"mouseover"===t){var o=!1,a=function(n){var a=i.getLayer(e)?i.queryRenderedFeatures(n.point,{layers:[e]}):[];a.length?o||(o=!0,r.call(i,new zo(t,i,n.originalEvent,{features:a}))):o=!1},s=function(){o=!1};return{layer:e,listener:r,delegates:{mousemove:a,mouseout:s}}}if("mouseleave"===t||"mouseout"===t){var u=!1,l=function(n){var o=i.getLayer(e)?i.queryRenderedFeatures(n.point,{layers:[e]}):[];o.length?u=!0:u&&(u=!1,r.call(i,new zo(t,i,n.originalEvent)))},c=function(e){u&&(u=!1,r.call(i,new zo(t,i,e.originalEvent)))};return{layer:e,listener:r,delegates:{mousemove:l,mouseout:c}}}var p=function(t){var n=i.getLayer(e)?i.queryRenderedFeatures(t.point,{layers:[e]}):[];n.length&&(t.features=n,r.call(i,t),delete t.features)};return{layer:e,listener:r,delegates:(n={},n[t]=p,n)}}();for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(o),o.delegates)this.on(a,o.delegates[a]);return this},i.prototype.off=function(t,e,r){if(void 0===r)return n.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],o=0;o<i.length;o++){var a=i[o];if(a.layer===e&&a.listener===r){for(var s in a.delegates)this.off(s,a.delegates[s]);return i.splice(o,1),this}}return this},i.prototype.queryRenderedFeatures=function(e,r){if(!this.style)return[];var n;if(void 0!==r||void 0===e||e instanceof t.Point||Array.isArray(e)||(r=e,e=void 0),r=r||{},e=e||[[0,0],[this.transform.width,this.transform.height]],e instanceof t.Point||"number"===typeof e[0])n=[t.Point.convert(e)];else{var i=t.Point.convert(e[0]),o=t.Point.convert(e[1]);n=[i,new t.Point(o.x,i.y),o,new t.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(n,r,this.transform)},i.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},i.prototype.setStyle=function(e,r){return r=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},r),!1!==r.diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(e,r))},i.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},i.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new ur(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"===typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},i.prototype._diffStyle=function(e,r){var n=this;if("string"===typeof e){var i=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(i,t.ResourceType.Style);t.getJSON(o,function(e,i){e?n.fire(new t.ErrorEvent(e)):i&&n._updateDiff(i,r)})}else"object"===typeof e&&this._updateDiff(e,r)},i.prototype._updateDiff=function(e,r){try{this.style.setState(e)&&this._update(!0)}catch(n){t.warnOnce("Unable to perform style diff: "+(n.message||n.error||n)+".  Rebuilding the style from scratch."),this._updateStyle(e,r)}},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},i.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},i.prototype.isSourceLoaded=function(e){var r=this.style&&this.style.sourceCaches[e];if(void 0!==r)return r.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},i.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var r=t[e],n=r._tiles;for(var i in n){var o=n[i];if("loaded"!==o.state&&"errored"!==o.state)return!1}}return!0},i.prototype.addSourceType=function(t,e,r){return this.style.addSourceType(t,e,r)},i.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},i.prototype.getSource=function(t){return this.style.getSource(t)},i.prototype.addImage=function(e,r,n){void 0===n&&(n={});var i=n.pixelRatio;void 0===i&&(i=1);var o=n.sdf;void 0===o&&(o=!1);var a=n.stretchX,s=n.stretchY,u=n.content,l=0;if(r instanceof ma){var c=t.browser.getImageData(r),p=c.width,h=c.height,f=c.data;this.style.addImage(e,{data:new t.RGBAImage({width:p,height:h},f),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:l})}else{if(void 0===r.width||void 0===r.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var d=r.width,m=r.height,y=r.data,v=r;this.style.addImage(e,{data:new t.RGBAImage({width:d,height:m},new Uint8Array(y)),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:l,userImage:v}),v.onAdd&&v.onAdd(this,e)}},i.prototype.updateImage=function(e,r){var n=this.style.getImage(e);if(!n)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=r instanceof ma?t.browser.getImageData(r):r,o=i.width,a=i.height,s=i.data;if(void 0===o||void 0===a)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==n.data.width||a!==n.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var u=!(r instanceof ma);n.data.replace(s,u),this.style.updateImage(e,n)},i.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(t){this.style.removeImage(t)},i.prototype.loadImage=function(e,r){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),r)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},i.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},i.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},i.prototype.getLayer=function(t){return this.style.getLayer(t)},i.prototype.setLayerZoomRange=function(t,e,r){return this.style.setLayerZoomRange(t,e,r),this._update(!0)},i.prototype.setFilter=function(t,e,r){return void 0===r&&(r={}),this.style.setFilter(t,e,r),this._update(!0)},i.prototype.getFilter=function(t){return this.style.getFilter(t)},i.prototype.setPaintProperty=function(t,e,r,n){return void 0===n&&(n={}),this.style.setPaintProperty(t,e,r,n),this._update(!0)},i.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},i.prototype.setLayoutProperty=function(t,e,r,n){return void 0===n&&(n={}),this.style.setLayoutProperty(t,e,r,n),this._update(!0)},i.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},i.prototype.setLight=function(t,e){return void 0===e&&(e={}),this.style.setLight(t,e),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},i.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},i.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},i.prototype._detectMissingCSS=function(){var e=t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");"rgb(250, 128, 114)"!==e&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map");var e=this._missingCSSCanary=r.create("div","mapboxgl-canary",t);e.style.visibility="hidden",this._detectMissingCSS();var n=this._canvasContainer=r.create("div","mapboxgl-canvas-container",t);this._interactive&&n.classList.add("mapboxgl-interactive"),this._canvas=r.create("canvas","mapboxgl-canvas",n),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var o=this._controlContainer=r.create("div","mapboxgl-control-container",t),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){a[t]=r.create("div","mapboxgl-ctrl-"+t,o)})},i.prototype._resizeCanvas=function(e,r){var n=t.window.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*r,this._canvas.style.width=e+"px",this._canvas.style.height=r+"px"},i.prototype._setupPainter=function(){var r=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",r)||this._canvas.getContext("experimental-webgl",r);n?(this.painter=new So(n,this.transform),t.webpSupported.testSupport(n)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},i.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},i.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},i.prototype._render=function(){var e,r=this,n=0,i=this.painter.context.extTimerQuery;this.listens("gpu-timing-frame")&&(e=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,e),n=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var a=this.transform.zoom,s=t.browser.now();this.style.zoomHistory.update(a,s);var u=new t.EvaluationParameters(a,{now:s,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),l=u.crossFadingFactor();1===l&&l===this._crossFadingFactor||(o=!0,this._crossFadingFactor=l),this.style.update(u)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),gpuTiming:!!this.listens("gpu-timing-layer"),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var c=t.browser.now()-n;i.endQueryEXT(i.TIME_ELAPSED_EXT,e),setTimeout(function(){var n=i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(e),r.fire(new t.Event("gpu-timing-frame",{cpuTime:c,gpuTime:n}))},50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout(function(){var e=r.painter.queryGpuTimers(p);r.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))},50)}return this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),this},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,r=this._controls;e<r.length;e+=1){var n=r[e];n.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),"undefined"!==typeof t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),Sa(this._canvasContainer),Sa(this._controlContainer),Sa(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},i.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(){e._frame=null,e._render()}))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},i.prototype._setCacheLimits=function(e,r){t.setCacheLimits(e,r)},o.version.get=function(){return t.version},Object.defineProperties(i.prototype,o),i}(ca);function Sa(t){t.parentNode&&t.parentNode.removeChild(t)}var Ea={showCompass:!0,showZoom:!0,visualizePitch:!1},Ta=function(e){var n=this;this.options=t.extend({},Ea,e),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(t){return n._map.zoomIn({},{originalEvent:t})}),r.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(t){return n._map.zoomOut({},{originalEvent:t})}),r.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(t){n.options.visualizePitch?n._map.resetNorthPitch({},{originalEvent:t}):n._map.resetNorth({},{originalEvent:t})}),this._compassIcon=r.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};function Aa(e,r,n){if(e=new t.LngLat(e.lng,e.lat),r){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=n.locationPoint(e).distSqr(r);n.locationPoint(i).distSqr(r)<a?e=i:n.locationPoint(o).distSqr(r)<a&&(e=o)}while(Math.abs(e.lng-n.center.lng)>180){var s=n.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}Ta.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},Ta.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Ta.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Go(t,{button:"left",element:this._compass}),r.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),r.addEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.enable()),this._container},Ta.prototype.onRemove=function(){r.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),r.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),r.removeEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.disable(),delete this._handler),delete this._map},Ta.prototype._createButton=function(t,e){var n=r.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n},Ta.prototype._setButtonTitle=function(t,e){var r=this._map._getUIString("NavigationControl."+e);t.title=r,t.setAttribute("aria-label",r)};var ka={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ia(t,e,r){var n=t.classList;for(var i in ka)n.remove("mapboxgl-"+r+"-anchor-"+i);n.add("mapboxgl-"+r+"-anchor-"+e)}var Ca,Pa=function(e){function n(n,i){var o=this;if(e.call(this),(n instanceof t.window.HTMLElement||i)&&(n=t.extend({element:n},i)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._draggable=n&&n.draggable||!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&"auto"!==n.pitchAlignment?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=t.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=r.create("div"),this._element.setAttribute("aria-label","Map marker");var a=r.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var s=r.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var u=r.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill-rule","nonzero");var l=r.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],p=0,h=c;p<h.length;p+=1){var f=h[p],d=r.createNS("http://www.w3.org/2000/svg","ellipse");d.setAttributeNS(null,"opacity","0.04"),d.setAttributeNS(null,"cx","10.5"),d.setAttributeNS(null,"cy","5.80029008"),d.setAttributeNS(null,"rx",f["rx"]),d.setAttributeNS(null,"ry",f["ry"]),l.appendChild(d)}var m=r.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"fill",this._color);var y=r.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),m.appendChild(y);var v=r.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"fill","#000000");var g=r.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),v.appendChild(g);var _=r.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(6.0, 7.0)"),_.setAttributeNS(null,"fill","#FFFFFF");var x=r.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=r.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var w=r.createNS("http://www.w3.org/2000/svg","circle");w.setAttributeNS(null,"fill","#FFFFFF"),w.setAttributeNS(null,"cx","5.5"),w.setAttributeNS(null,"cy","5.5"),w.setAttributeNS(null,"r","5.4999962"),x.appendChild(b),x.appendChild(w),u.appendChild(l),u.appendChild(m),u.appendChild(v),u.appendChild(_),u.appendChild(x),a.appendChild(u),this._element.appendChild(a),this._offset=t.Point.convert(n&&n.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(t){t.preventDefault()}),this._element.addEventListener("mousedown",function(t){t.preventDefault()}),this._element.addEventListener("focus",function(){var t=o._map.getContainer();t.scrollTop=0,t.scrollLeft=0}),Ia(this._element,this._anchor,"marker"),this._popup=null}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},n.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},n.prototype.getElement=function(){return this._element},n.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=38.1,r=13.5,n=Math.sqrt(Math.pow(r,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[n,-1*(e-r+n)],"bottom-right":[-n,-1*(e-r+n)],left:[r,-1*(e-r)],right:[-r,-1*(e-r)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},n.prototype._onKeyPress=function(t){var e=t.code,r=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==r&&13!==r||this.togglePopup()},n.prototype._onMapClick=function(t){var e=t.originalEvent.target,r=this._element;this._popup&&(e===r||r.contains(e))&&this.togglePopup()},n.prototype.getPopup=function(){return this._popup},n.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},n.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Aa(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),r.setTransform(this._element,ka[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+n+" "+e)}},n.prototype.getOffset=function(){return this._offset},n.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},n.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},n.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},n.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},n.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},n.prototype.isDraggable=function(){return this._draggable},n.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},n.prototype.getRotation=function(){return this._rotation},n.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},n.prototype.getRotationAlignment=function(){return this._rotationAlignment},n.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},n.prototype.getPitchAlignment=function(){return this._pitchAlignment},n}(t.Evented),Ma={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0};function za(e){void 0!==Ca?e(Ca):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){Ca="denied"!==t.state,e(Ca)}):(Ca=!!t.window.navigator.geolocation,e(Ca))}var La=function(e){function n(r){e.call(this),this.options=t.extend({},Ma,r),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(t){return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),za(this._setupUI),this._container},n.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),r.remove(this._container),this._map=void 0},n.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),r=t.coords;return e&&(r.longitude<e.getWest()||r.longitude>e.getEast()||r.latitude<e.getSouth()||r.latitude>e.getNorth())},n.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:t.assert(!1,"Unexpected watchState "+this._watchState)}},n.prototype._onSuccess=function(e){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;default:t.assert(!1,"Unexpected watchState "+this._watchState)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},n.prototype._updateCamera=function(e){var r=new t.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(n),o,{geolocateSource:!0})},n.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},n.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r),void 0!==this._geolocationWatchID&&this._clearWatch()}else this._setErrorState();"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},n.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},n.prototype._setupUI=function(e){var n=this;if(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=r.create("button","mapboxgl-ctrl-geolocate",this._container),r.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=r.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Pa(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){var r=e.originalEvent&&"resize"===e.originalEvent.type;e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||r||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))})},n.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"));break;default:t.assert(!1,"Unexpected watchState "+this._watchState)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break;case"OFF":break;default:t.assert(!1,"Unexpected watchState "+this._watchState)}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},n.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},n}(t.Evented),Da={maxWidth:100,unit:"metric"},Oa=function(e){this.options=t.extend({},Da,e),t.bindAll(["_onMove","setUnit"],this)};function Ba(t,e,r){var n=r&&r.maxWidth||100,i=t._container.clientHeight/2,o=Fa(t.unproject([0,i]),t.unproject([n,i]));if(r&&"imperial"===r.unit){var a=3.2808*o;if(a>5280){var s=a/5280;Ra(e,n,s,t._getUIString("ScaleControl.Miles"))}else Ra(e,n,a,t._getUIString("ScaleControl.Feet"))}else if(r&&"nautical"===r.unit){var u=o/1852;Ra(e,n,u,t._getUIString("ScaleControl.NauticalMiles"))}else o>=1e3?Ra(e,n,o/1e3,t._getUIString("ScaleControl.Kilometers")):Ra(e,n,o,t._getUIString("ScaleControl.Meters"))}function Ra(t,e,r,n){var i=ja(r),o=i/r;t.style.width=e*o+"px",t.innerHTML=i+n}function Fa(t,e){var r=6371e3,n=Math.PI/180,i=t.lat*n,o=e.lat*n,a=Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos((e.lng-t.lng)*n),s=r*Math.acos(Math.min(a,1));return s}function Ua(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}function ja(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),r=t/e;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:Ua(r),e*r}Oa.prototype.getDefaultPosition=function(){return"bottom-left"},Oa.prototype._onMove=function(){Ba(this._map,this._container,this.options)},Oa.prototype.onAdd=function(t){return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Oa.prototype.onRemove=function(){r.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Oa.prototype.setUnit=function(t){this.options.unit=t,Ba(this._map,this._container,this.options)};var Na=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Na.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Na.prototype.onRemove=function(){r.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Na.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Na.prototype._setupUI=function(){var e=this._fullscreenButton=r.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);r.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Na.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Na.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Na.prototype._isFullscreen=function(){return this._fullscreen},Na.prototype._changeIcon=function(){var e=t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement;e===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Na.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Va={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},qa=function(e){function n(r){e.call(this),this.options=t.extend(Object.create(Va),r),t.bindAll(["_update","_onClickClose","remove"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(e){var r=this;return this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",function(t){r._update(t.point)}),this._map.on("mouseup",function(t){r._update(t.point)}),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&r.remove(this._content),this._container&&(r.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),this._map.off("mousemove"),delete this._map),this.fire(new t.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove"),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},n.prototype.trackPointer=function(){var t=this;return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",function(e){t._update(e.point)}),this._map.on("drag",function(e){t._update(e.point)}),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},n.prototype.getElement=function(){return this._container},n.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},n.prototype.setHTML=function(e){var r,n=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");i.innerHTML=e;while(1){if(r=i.firstChild,!r)break;n.appendChild(r)}return this.setDOMContent(n)},n.prototype.getMaxWidth=function(){return this._container.style.maxWidth},n.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},n.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},n.prototype.addClassName=function(t){this._container.classList.add(t)},n.prototype.removeClassName=function(t){this._container.classList.remove(t)},n.prototype.toggleClassName=function(t){return this._container.classList.toggle(t)},n.prototype._createContent=function(){this._content&&r.remove(this._content),this._content=r.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=r.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},n.prototype._update=function(t){var e=this,n=this._lngLat||this._trackPointer;if(this._map&&n&&this._content&&(this._container||(this._container=r.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=r.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Aa(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)){var i=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),o=this.options.anchor,a=Za(this.options.offset);if(!o){var s,u=this._container.offsetWidth,l=this._container.offsetHeight;s=i.y+a.bottom.y<l?["top"]:i.y>this._map.transform.height-l?["bottom"]:[],i.x<u/2?s.push("left"):i.x>this._map.transform.width-u/2&&s.push("right"),o=0===s.length?"bottom":s.join("-")}var c=i.add(a[o]).round();r.setTransform(this._container,ka[o]+" translate("+c.x+"px,"+c.y+"px)"),Ia(this._container,o,"popup")}},n.prototype._onClickClose=function(){this.remove()},n}(t.Evented);function Za(e){if(e){if("number"===typeof e){var r=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new t.Point(0,0),top:new t.Point(0,e),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-e),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(e,0),right:new t.Point(-e,0)}}if(e instanceof t.Point||Array.isArray(e)){var n=t.Point.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.Point.convert(e["center"]||[0,0]),top:t.Point.convert(e["top"]||[0,0]),"top-left":t.Point.convert(e["top-left"]||[0,0]),"top-right":t.Point.convert(e["top-right"]||[0,0]),bottom:t.Point.convert(e["bottom"]||[0,0]),"bottom-left":t.Point.convert(e["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(e["bottom-right"]||[0,0]),left:t.Point.convert(e["left"]||[0,0]),right:t.Point.convert(e["right"]||[0,0])}}return Za(new t.Point(0,0))}var Ga={extend:function(e){var r=[],n=arguments.length-1;while(n-- >0)r[n]=arguments[n+1];return t.extend.apply(void 0,[e].concat(r))}},Xa={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:wa,NavigationControl:Ta,GeolocateControl:La,AttributionControl:pa,ScaleControl:Oa,FullscreenControl:Na,Popup:qa,Marker:Pa,Style:ur,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Qt.workerCount},set workerCount(t){Qt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Ga.extend(Xa,{isSafari:t.isSafari}),t.assert(!0,"canary assert"),Xa}),i})}).call(this,r("c8ba"),r("4362"))},ef12:function(t,e,r){"use strict";function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){return s(t)||a(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)if(r.push(a.value),e&&r.length===e)break}catch(u){i=!0,o=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw o}}return r}}function s(t){if(Array.isArray(t))return t}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach(function(e){c(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=r("1433"),h=r("a14d"),f=r("b3a1");function d(t){return h.paints.indexOf(t)>=0}function m(t){return h.layouts.indexOf(t)>=0}function y(t){return h.paints.indexOf(t)>=0?"paint":h.layouts.indexOf(t)>=0?"layout":"other"}function v(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e[0]&&Array.isArray(e[0])&&e[0].raw)return f.formulaToExpression(e[0].raw[0]);throw"Mapbox-gl-utils unexpectedly called as a function. Use .init(map)"}function g(t){return String(t).match(/\.(geo)?json/)||"Feature"===t.type||"FeatureCollection"===t.type?{type:"geojson",data:t}:String(t).match(/^mapbox:\/\//)?{type:"vector",url:t}:t}var _=function(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Array.isArray(e)?e.forEach(function(e){return t.apply(void 0,[e].concat(n))}):t.apply(void 0,[e].concat(n))}};function x(t){return t[0].toUpperCase()+p.reverse(t).slice(1)}v.init=function(t,e){var r=this,o=this;this.mapboxgl=e;var a=["line","fill","circle","symbol","video","raster","fill-extrusion","heatmap","hillshade"];function s(e,r){var n="set"+x(e);o[n]=_(function(n,i){return t[r](n,e,i)})}function u(t,e,r){var n="add"+x(t);e[n]=r?function(e,n,i){return o.addLayer(e,r,t,n,i)}:function(e,r,n,i){return o.addLayer(e,r,t,n,i)}}function c(t){var e={};return a.forEach(function(r){return u(r,e,t)}),e}function f(e,r){return t.addSource(e,r),c(e)}function v(t){var e="add"+x(t);o[e]=function(e,r){f(e,l({type:t},r))}}function b(e){return t.getStyle().layers.filter(function(t){return t.source===e}).map(function(t){return t.id})}return Object.assign(this,{_loaded:!1,hoverPointer:_(function(e){t.on("mouseenter",e,function(e){return t.getCanvas().style.cursor="pointer"}),t.on("mouseleave",e,function(e){return t.getCanvas().style.cursor=""})}),hoverFeatureState:_(function(e,n,o,a,s){if(Array.isArray(n))n.forEach(function(t){var n=i(t,2),o=n[0],a=n[1];return r.hoverFeatureState(e,o,a)});else{if(void 0===n){var u=r.getLayerStyle(e);n=u.source,o=u["source-layer"]}var c;t.on("mousemove",e,function(t){var e=t.features[0];e&&e.id===c||(p(!1),e&&(c&&s&&s(l({},t,{oldFeatureId:c})),c=e.id,p(!0),a&&a(t)))}),t.on("mouseleave",e,function(t){p(!1),t.oldFeatureId=c,c=void 0,s&&s(t)})}function p(e){c&&t.setFeatureState({source:n,sourceLayer:o,id:c},{hover:e})}}),hoverPopup:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new this.mapboxgl.Popup(l({closeButton:!1},n));return _(function(e,r){t.on("mouseenter",e,function(e){e.features[0]&&(i.setLngLat(e.lngLat),i.setHTML(r(e.features[0],i)),i.addTo(t))}),t.on("mouseout",e,function(t){i.remove()})})(e,r)},clickPopup:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new this.mapboxgl.Popup(l({},n));return _(function(e,r){t.on("click",e,function(e){e.features[0]&&(i.setLngLat(e.features[0].geometry.coordinates.slice()),i.setHTML(r(e.features[0],i)),i.addTo(t))})})(e,r)},clickLayer:_(function(e,r){t.on("click",e,function(n){n.features=t.queryRenderedFeatures(n.point,{layers:[e]}),r(n)})}),clickOneLayer:function(e,r){t.on("click",function(n){var i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=t.queryRenderedFeatures(n.point,{layers:[l]});if(c[0]){r({layer:l,feature:c[0],features:c});break}}}catch(p){o=!0,a=p}finally{try{i||null==u["return"]||u["return"]()}finally{if(o)throw a}}})},mapAddLayerBefore:function(e,r){r?t.addLayer(e,r):t.addLayer(e)},addLayer:function(t,e,r,n,i){return this.mapAddLayerBefore(this.layerStyle(t,e,r,n),i),c(e)},add:function(t,e,r,n,i){return this.mapAddLayerBefore(l({id:t,source:g(e),type:r},this.properties(n)),i),c(e)},removeLayer:_(function(e){var r=function(t){t.error.message.match(/does not exist/)||console.error(t.error)};t.once("error",r),t.removeLayer(e),t.off("error",r)}),addGeoJSON:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"FeatureCollection",features:[]},r=arguments.length>2?arguments[2]:void 0;return f(t,l({type:"geojson",data:e},r))},addVector:function(t,e){return"string"===typeof e?e.match(/\{z\}/)?f(t,{type:"vector",tiles:[e]}):f(t,{type:"vector",url:e}):f(t,l({type:"vector"},this.properties(e)))},setProperty:_(function(e,i,o){if("object"===n(i))Object.keys(i).forEach(function(t){return r.setProperty(e,t,i[t])});else{var a=p(i);d(a)?t.setPaintProperty(e,a,o):m(a)&&t.setLayoutProperty(e,a,o)}}),properties:function(t){if(t){var e={},r={paint:{},layout:{},other:{}};return Object.keys(t).forEach(function(e){var n=p(e);r[y(n)][n]=t[e]}),Object.keys(r.paint).length&&(e.paint=r.paint),Object.keys(r.layout).length&&(e.layout=r.layout),Object.assign(e,r.other),e}},layerStyle:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=e[0],o=e[1],a=e[2],s=e.find(function(t){return"object"===n(t)&&!Array.isArray(t)}),u=this.properties(s)||{};return"string"===typeof i&&(u.id=i),"string"===typeof o&&(u.source=o),"string"===typeof a&&(u.type=a),u},getLayerStyle:function(e){return t.getStyle().layers.find(function(t){return t.id===e})},setLayerStyle:_(function(t,e){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).forEach(function(e){e in n||r.setProperty(t,e,void 0)})};e||(e=t,t=e.id);var i=r.getLayerStyle(t),o=r.properties(e);n(i.paint,o.paint),n(i.layout,o.layout),r.setProperty(t,l({},o.paint,{},o.layout))}),setData:function(e,r){t.getSource(e).setData(r)},show:_(function(t){return r.setVisibility(t,"visible")}),hide:_(function(t){return r.setVisibility(t,"none")}),toggle:_(function(t,e){return r.setVisibility(t,e?"visible":"none")}),showSource:_(function(t){return r.setVisibility(b(t),"visible")}),hideSource:_(function(t){return r.setVisibility(b(t),"none")}),toggleSource:_(function(t,e){return r.setVisibility(b(t),e?"visible":"none")}),setFilter:_(function(e,r){return t.setFilter(e,r)}),removeSource:_(function(e){var n=b(e);r.removeLayer(n),t.getSource(e)&&t.removeSource(e)}),setLayerSource:_(function(e,n,i){var o=t.getStyle().layers,a=o.findIndex(function(t){return t.id===e}),s=o[a],u=o[a+1]&&o[a+1].id;s.source=n,i?s["source-layer"]=i:void 0!==i&&delete s["source-layer"],t.removeLayer(e),r.mapAddLayerBefore(s,u)}),onLoad:function(e){var r=this;t.loaded()||this._loaded?e():t.once("load",function(){r._loaded=!0,e()})},setRootProperty:function(e,r){var n=t.getStyle();n[p(e)]=r,t.setStyle(n)},setTransition:function(t){this.setRootProperty("transition",t)},loadImage:function(e,r){if("string"!==typeof r||!r.match(/\.[a-z]+$/))return t.addImage(e,r);t.loadImage(r,function(n,i){n?console.error("Error loading image ".concat(r),n):t.addImage(e,i)})},lockOrientation:function(){t.touchZoomRotate.disableRotation(),t.dragRotate.disable()}}),this.update=this.setData,h.paints.forEach(function(t){return s(t,"setPaintProperty")}),h.layouts.forEach(function(t){return s(t,"setLayoutProperty")}),a.forEach(function(t){return u(t,o)}),["raster","raster-dem","image","video"].forEach(function(t){return v(t)}),t.U=this,this},t.exports=v},f201:function(t,e,r){var n=r("e4ae"),i=r("79aa"),o=r("5168")("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||void 0==(r=n(a)[o])?e:i(r)}},f605:function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},f772:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},fab2:function(t,e,r){var n=r("7726").document;t.exports=n&&n.documentElement},fb1a:function(t,e,r){(function(e){const n=r("d09f"),i=r("6149"),o=r("b2e9");class a{breaks(t){return this.bins=n.ckmeans(t,Math.min(this.binCount,t.length)).map(t=>[t[0],t[t.length-1]]),this.minVal=this.bins[0][0],this.maxVal=this.bins[this.bins.length-1][1],[this.bins[0][0],...this.bins.map(t=>t[1])]}makeColorScale(){const t=this.table.map(t=>t[this.tableNumericField]).filter(Number.isFinite),e=this.breaks(t);this.colorScale=i.scale(this.colorScheme).domain([this.minVal,this.maxVal]).classes(e)}makeSource(){const t=this.source;this.source={type:this.geometryType},"geojson"===this.geometryType?this.source.data=this.geometryUrl:this.geometryUrl?this.source.url=this.geometryUrl:this.geometryTiles&&(this.source.tiles=this.geometryTiles),this.sourceId=this.sourceId||"choropleth",Object.assign(this.source,t)}makeLayer(){const t=t=>[t[this.tableIdField],this.colorScale(t[this.tableNumericField]).hex()];this.layerId=this.layerId||"choropleth",this.numberFormatFunc=this.numberFormatFunc||(t=>t.toFixed(1)),this.layer={id:this.layerId,type:"fill",source:this.sourceId,paint:Object.assign({},this.paint,{"fill-color":{property:this.geometryIdField,stops:this.table.filter(t=>Number.isFinite(t[this.tableNumericField])).map(t),type:"categorical",default:"transparent"}})},"vector"===this.geometryType&&(this.layer["source-layer"]=this.sourceLayer),this.layout&&(this.layer.layout=this.layout)}checkOptions(t){for(let e of["tableIdField","tableNumericField","geometryIdField"])if(!t[e])throw'"'+e+'" required.';if(!t.tableRows&&!t.tableUrl)throw'"tableRows" or "tableUrl" required.';if(!t.geometryTiles&&!t.geometryUrl)throw'"geometryTiles" or "geometryUrl" required.';if(Object.assign(this,{binCount:7,colorScheme:"RdBu"},t),this.geometryType=(this.geometryUrl||"").match(/\.geojson/)?"geojson":"vector","string"===typeof this.legendElement&&(this.legendElement=document.querySelectorAll(this.legendElement)[0]),"vector"===this.geometryType&&!this.sourceLayer)throw"sourceLayer required."}addTo(t){const r=r=>{if(t.isStyleLoaded())return e.nextTick(r);t.once("styledata",()=>e.nextTick(r))},n=e=>{t.getSource(this.sourceId)&&t.removeSource(this.sourceId),t.getLayer(this.layerId)&&t.removeLayer(this.layerId),t.addSource(this.sourceId,this.source),this.before?t.addLayer(this.layer,this.before):t.addLayer(this.layer)};return r(()=>Promise.resolve(this.table).then(n)),this}addLegendCSS(){let t=document.createElement("style");t.innerHTML="\n            .choropleth-legend {\n                background: white;\n                padding: 1em;\n                line-height: 0;\n                font-family:sans-serif;\n                border: 1px solid grey;\n            }\n\n            .choropleth-legend-box {\n                font-size: 30px;\n                margin:0;\n                display: inline-block; \n                width: 1em; \n                height: 1em;\n            }\n            .choropleth-legend-label {\n                vertical-align:super;\n                font-size:10pt;            \n                padding-left:1em;\n            }\n        ",document.head.insertBefore(t,document.head.firstChild)}getLegendHTML(){const t=t=>{let e=`background-color: ${this.colorScale(t[0]).hex()};`;return`<span class="choropleth-legend-box" style="${e}"></span>`+`<span class="choropleth-legend-label">${this.numberFormatFunc(t[0])}</span><br>`};return'<div class="choropleth-legend">'+this.bins.reverse().map(t).join("\n")+"</div>"}on(t,e){return this._handlers[t].push(e),this}_fire(t){this._handlers[t].forEach(t=>t())}constructor(t){this._handlers={ready:[]};const e=t=>(t[this.tableNumericField]=+t[this.tableNumericField],t);this.checkOptions(t),this.makeSource();const r=this.tableRows?Promise.resolve(this.tableRows):o.csv(this.tableUrl,e);this.table=r.then(t=>{this.table=t,this.makeColorScale(),this.makeLayer(),this.legendElement&&(this.addLegendCSS(),this.legendElement.innerHTML=this.getLegendHTML()),this._fire("ready")}).catch(t=>{throw t})}}t.exports=a}).call(this,r("4362"))}}]);
//# sourceMappingURL=chunk-vendors.83858822.js.map